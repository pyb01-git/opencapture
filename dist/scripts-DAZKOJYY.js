(function(){"use strict";var ve=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},Ke=function(e){return{eq:e}},Ye=Ke((function(e,t){return e===t})),qe=function(e){return Ke((function(t,n){if(t.length!==n.length)return!1;for(var o=t.length,r=0;r<o;r++)if(!e.eq(t[r],n[r]))return!1;return!0}))},it=function(e){return Ke((function(t,n){var o=Object.keys(t),r=Object.keys(n);if(!(function(l,c){return(function(d,m){return Ke((function(f,g){return d.eq(m(f),m(g))}))})(qe(l),(function(d){return(function(m,f){return Array.prototype.slice.call(m).sort(f)})(d,c)}))})(Ye).eq(o,r))return!1;for(var s=o.length,a=0;a<s;a++){var i=o[a];if(!e.eq(t[i],n[i]))return!1}return!0}))},Gt=Ke((function(e,t){if(e===t)return!0;var n=ve(e);return n===ve(t)&&((function(o){return["undefined","boolean","number","string","function","xml","null"].indexOf(o)!==-1})(n)?e===t:n==="array"?qe(Gt).eq(e,t):n==="object"&&it(Gt).eq(e,t))}));const Pn=Object.getPrototypeOf,rn=(e,t,n)=>{var o;return!!n(e,t.prototype)||((o=e.constructor)===null||o===void 0?void 0:o.name)===t.name},Xn=e=>t=>(n=>{const o=typeof n;return n===null?"null":o==="object"&&Array.isArray(n)?"array":o==="object"&&rn(n,String,((r,s)=>s.isPrototypeOf(r)))?"string":o})(t)===e,Co=e=>t=>typeof t===e,Ln=e=>t=>e===t,xo=(e,t)=>Ue(e)&&rn(e,t,((n,o)=>Pn(n)===o)),we=Xn("string"),Ue=Xn("object"),Re=e=>xo(e,Object),re=Xn("array"),Ge=Ln(null),xn=Co("boolean"),Mt=Ln(void 0),kt=e=>e==null,ee=e=>!kt(e),bt=Co("function"),x=Co("number"),Mn=(e,t)=>{if(re(e)){for(let n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1},ke=()=>{},In=(e,t)=>(...n)=>e(t.apply(null,n)),$s=(e,t)=>n=>e(t(n)),le=e=>()=>e,gt=e=>e,Jo=(e,t)=>e===t;function ye(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const qo=e=>t=>!e(t),po=e=>()=>{throw new Error(e)},gr=e=>e(),Yn=e=>{e()},_t=le(!1),zt=le(!0);class _{constructor(t,n){this.tag=t,this.value=n}static some(t){return new _(!0,t)}static none(){return _.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?_.some(t(this.value)):_.none()}bind(t){return this.tag?t(this.value):_.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:_.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return ee(t)?_.some(t):_.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}_.singletonNone=new _(!1);const hr=Array.prototype.slice,_e=Array.prototype.indexOf,nt=Array.prototype.push,dt=(e,t)=>_e.call(e,t),Se=(e,t)=>dt(e,t)>-1,Ct=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return!0;return!1},We=(e,t)=>{const n=e.length,o=new Array(n);for(let r=0;r<n;r++){const s=e[r];o[r]=t(s,r)}return o},K=(e,t)=>{for(let n=0,o=e.length;n<o;n++)t(e[n],n)},br=(e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)},Zo=(e,t)=>{const n=[],o=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];(t(a,r)?n:o).push(a)}return{pass:n,fail:o}},Oe=(e,t)=>{const n=[];for(let o=0,r=e.length;o<r;o++){const s=e[o];t(s,o)&&n.push(s)}return n},Wr=(e,t,n)=>(br(e,((o,r)=>{n=t(n,o,r)})),n),Qt=(e,t,n)=>(K(e,((o,r)=>{n=t(n,o,r)})),n),go=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++){const s=e[o];if(t(s,o))return _.some(s);if(n(s,o))break}return _.none()},qt=(e,t)=>go(e,t,_t),qs=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return _.some(n);return _.none()},wc=e=>{const t=[];for(let n=0,o=e.length;n<o;++n){if(!re(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);nt.apply(t,e[n])}return t},Wt=(e,t)=>wc(We(e,t)),oo=(e,t)=>{for(let n=0,o=e.length;n<o;++n)if(t(e[n],n)!==!0)return!1;return!0},wo=e=>{const t=hr.call(e,0);return t.reverse(),t},Qe=(e,t)=>Oe(e,(n=>!Se(t,n))),_n=(e,t)=>{const n={};for(let o=0,r=e.length;o<r;o++){const s=e[o];n[String(s)]=t(s,o)}return n},Vr=(e,t)=>{const n=hr.call(e,0);return n.sort(t),n},Ws=(e,t)=>t>=0&&t<e.length?_.some(e[t]):_.none(),sn=e=>Ws(e,0),ro=e=>Ws(e,e.length-1),wn=bt(Array.from)?Array.from:e=>hr.call(e),qn=(e,t)=>{for(let n=0;n<e.length;n++){const o=t(e[n],n);if(o.isSome())return o}return _.none()},So=(e,t)=>{const n=[],o=bt(t)?r=>Ct(n,(s=>t(s,r))):r=>Se(n,r);for(let r=0,s=e.length;r<s;r++){const a=e[r];o(a)||n.push(a)}return n},pn=Object.keys,Gu=Object.hasOwnProperty,xt=(e,t)=>{const n=pn(e);for(let o=0,r=n.length;o<r;o++){const s=n[o];t(e[s],s)}},Vs=(e,t)=>Sc(e,((n,o)=>({k:o,v:t(n,o)}))),Sc=(e,t)=>{const n={};return xt(e,((o,r)=>{const s=t(o,r);n[s.k]=s.v})),n},vr=e=>(t,n)=>{e[n]=t},yr=(e,t,n,o)=>{xt(e,((r,s)=>{(t(r,s)?n:o)(r,s)}))},er=(e,t)=>{const n={};return yr(e,t,vr(n),ke),n},Cr=(e,t)=>{const n=[];return xt(e,((o,r)=>{n.push(t(o,r))})),n},Ha=e=>Cr(e,gt),Bt=(e,t)=>Fe(e,t)?_.from(e[t]):_.none(),Fe=(e,t)=>Gu.call(e,t),gn=(e,t)=>Fe(e,t)&&e[t]!==void 0&&e[t]!==null,ho=e=>{if(!re(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return K(e,((o,r)=>{const s=pn(o);if(s.length!==1)throw new Error("one and only one name per case");const a=s[0],i=o[a];if(n[a]!==void 0)throw new Error("duplicate key detected:"+a);if(a==="cata")throw new Error("cannot have a case named cata (sorry)");if(!re(i))throw new Error("case arguments must be an array");t.push(a),n[a]=(...l)=>{const c=l.length;if(c!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+c);return{fold:(...d)=>{if(d.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+d.length);return d[r].apply(null,l)},match:d=>{const m=pn(d);if(t.length!==m.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+m.join(","));if(!oo(t,(f=>Se(m,f))))throw new Error("Not all branches were specified when using match. Specified: "+m.join(", ")+`
Required: `+t.join(", "));return d[a].apply(null,l)},log:d=>{console.log(d,{constructors:t,constructor:a,params:l})}}}})),n},tn=e=>{let t=e;return{get:()=>t,set:n=>{t=n}}},Ji=e=>{const t=s=>s(e),n=le(e),o=()=>r,r={tag:!0,inner:e,fold:(s,a)=>a(e),isValue:zt,isError:_t,map:s=>hn.value(s(e)),mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:s=>{s(e)},toOptional:()=>_.some(e)};return r},Zi=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(o,r)=>o(e),isValue:_t,isError:zt,map:t,mapError:o=>hn.error(o(e)),bind:t,exists:_t,forall:zt,getOr:gt,or:gt,getOrThunk:gr,orThunk:gr,getOrDie:po(String(e)),each:ke,toOptional:_.none};return n},hn={value:Ji,error:Zi,fromOption:(e,t)=>e.fold((()=>Zi(t)),Ji)},cs=typeof window<"u"?window:Function("return this;")(),$a=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Ks=0;const Xs=e=>{const t=new Date().getTime(),n=Math.floor(1e9*$a());return Ks++,e+"_"+n+Ks+String(t)},Ec=()=>window.isSecureContext?window.crypto.randomUUID():(()=>{const e=(()=>{const n=window.crypto.getRandomValues(new Uint8Array(16));return n[6]=15&n[6]|64,n[8]=63&n[8]|128,n})(),t=(n,o)=>{let r="";for(let s=n;s<=o;++s)r+=e[s].toString(16).padStart(2,"0");return r};return`${t(0,3)}-${t(4,5)}-${t(6,7)}-${t(8,9)}-${t(10,15)}`})(),kc=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<t.length;o++){const r=t[o];for(const s in r)Fe(r,s)&&(n[s]=e(n[s],r[s]))}return n},qa=kc(((e,t)=>Re(e)&&Re(t)?qa(e,t):t)),Qu=kc(((e,t)=>t)),ds=(e,t,n=Jo)=>e.exists((o=>n(o,t))),Wa=(e,t,n=Jo)=>Ut(e,t,n).getOr(e.isNone()&&t.isNone()),Ut=(e,t,n)=>e.isSome()&&t.isSome()?_.some(n(e.getOrDie(),t.getOrDie())):_.none(),Kr=(e,t)=>e?_.some(t):_.none(),Va=(e,t)=>((n,o)=>{let r=o??cs;for(let s=0;s<n.length&&r!=null;++s)r=r[n[s]];return r})(e.split("."),t);ho([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Ka=e=>{const t=[],n=[];return K(e,(o=>{o.fold((r=>{t.push(r)}),(r=>{n.push(r)}))})),{errors:t,values:n}},Xa=e=>{const t=tn(_.none()),n=()=>t.get().each((o=>clearInterval(o)));return{clear:()=>{n(),t.set(_.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:o=>{n(),t.set(_.some(setInterval(o,e)))}}},Wo=()=>{const e=(t=>{const n=tn(_.none()),o=()=>n.get().each(t);return{clear:()=>{o(),n.set(_.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(_.some(r))}}})(ke);return{...e,on:t=>e.get().each(t)}},_c=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,us=(e,t)=>Jt(e,t)?((n,o)=>n.substring(o))(e,t.length):e,bn=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return r!==-1&&(!!Mt(o)||r+t.length<=o)},Jt=(e,t)=>_c(e,t,0),Ya=(e,t)=>_c(e,t,e.length-t.length),Ga=e=>t=>t.replace(e,""),xr=Ga(/^\s+|\s+$/g),Ju=Ga(/^\s+/g),Nc=Ga(/\s+$/g),Eo=e=>e.length>0,ms=e=>!Eo(e),fs=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?_.none():_.some(n)},Ys=(e,t)=>{let n=null;return{cancel:()=>{Ge(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{Ge(n)&&(n=setTimeout((()=>{n=null,e.apply(null,o)}),t))}}},so=(e,t)=>{let n=null;const o=()=>{Ge(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout((()=>{n=null,e.apply(null,r)}),t)}}},Wn=e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)},wr="\uFEFF",Ft="\xA0",Xr=e=>e===wr,Ac=e=>{const t={};return K(e,(n=>{t[n]={}})),pn(t)},Tc=e=>e.length!==void 0,Gs=Array.isArray,Qs=(e,t,n)=>{if(!e)return!1;if(n=n||e,Tc(e)){for(let o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e)===!1)return!1}else for(const o in e)if(Fe(e,o)&&t.call(n,e[o],o,e)===!1)return!1;return!0},ps=(e,t)=>{const n=[];return Qs(e,((o,r)=>{n.push(t(o,r,e))})),n},gs=(e,t)=>{const n=[];return Qs(e,((o,r)=>{t&&!t(o,r,e)||n.push(o)})),n},Gn=(e,t,n,o)=>{let r=Mt(n)?e[0]:n;for(let s=0;s<e.length;s++)r=t.call(o,r,e[s],s);return r},el=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e))return o;return-1},ko=e=>e[e.length-1],Dc=()=>tl(0,0),tl=(e,t)=>({major:e,minor:t}),_o={nu:tl,detect:(e,t)=>{const n=String(t).toLowerCase();return e.length===0?Dc():((o,r)=>{const s=((i,l)=>{for(let c=0;c<i.length;c++){const d=i[c];if(d.test(l))return d}})(o,r);if(!s)return{major:0,minor:0};const a=i=>Number(r.replace(s,"$"+i));return tl(a(1),a(2))})(e,n)},unknown:Dc},Sr=(e,t)=>{const n=String(t).toLowerCase();return qt(e,(o=>o.search(n)))},Js=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,tr=e=>t=>bn(t,e),Zs=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>bn(e,"edge/")&&bn(e,"chrome")&&bn(e,"safari")&&bn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Js],search:e=>bn(e,"chrome")&&!bn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>bn(e,"msie")||bn(e,"trident")},{name:"Opera",versionRegexes:[Js,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:tr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:tr("firefox")},{name:"Safari",versionRegexes:[Js,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(bn(e,"safari")||bn(e,"mobile/"))&&bn(e,"applewebkit")}],Rc=[{name:"Windows",search:tr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>bn(e,"iphone")||bn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:tr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:tr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:tr("linux"),versionRegexes:[]},{name:"Solaris",search:tr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:tr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:tr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Qa={browsers:le(Zs),oses:le(Rc)},nl="Edge",ol="Chromium",Oc="Opera",rl="Firefox",Bc="Safari",Pc=e=>{const t=e.current,n=e.version,o=r=>()=>t===r;return{current:t,version:n,isEdge:o(nl),isChromium:o(ol),isIE:o("IE"),isOpera:o(Oc),isFirefox:o(rl),isSafari:o(Bc)}},sl=()=>Pc({current:void 0,version:_o.unknown()}),Zu=Pc,Lc=(le(nl),le(ol),le("IE"),le(Oc),le(rl),le(Bc),"Windows"),Mc="Android",Ic="Linux",Fc="macOS",jc="Solaris",al="FreeBSD",Ja="ChromeOS",il=e=>{const t=e.current,n=e.version,o=r=>()=>t===r;return{current:t,version:n,isWindows:o(Lc),isiOS:o("iOS"),isAndroid:o(Mc),isMacOS:o(Fc),isLinux:o(Ic),isSolaris:o(jc),isFreeBSD:o(al),isChromeOS:o(Ja)}},ll=()=>il({current:void 0,version:_o.unknown()}),zc=il,Uc=(le(Lc),le("iOS"),le(Mc),le(Ic),le(Fc),le(jc),le(al),le(Ja),e=>window.matchMedia(e).matches);let cl=Wn((()=>((e,t,n)=>{const o=Qa.browsers(),r=Qa.oses(),s=t.bind((l=>((c,d)=>qn(d.brands,(m=>{const f=m.brand.toLowerCase();return qt(c,(g=>{var h;return f===((h=g.brand)===null||h===void 0?void 0:h.toLowerCase())})).map((g=>({current:g.name,version:_o.nu(parseInt(m.version,10),0)})))})))(o,l))).orThunk((()=>((l,c)=>Sr(l,c).map((d=>{const m=_o.detect(d.versionRegexes,c);return{current:d.name,version:m}})))(o,e))).fold(sl,Zu),a=((l,c)=>Sr(l,c).map((d=>{const m=_o.detect(d.versionRegexes,c);return{current:d.name,version:m}})))(r,e).fold(ll,zc),i=((l,c,d,m)=>{const f=l.isiOS()&&/ipad/i.test(d)===!0,g=l.isiOS()&&!f,h=l.isiOS()||l.isAndroid(),b=h||m("(pointer:coarse)"),v=f||!g&&h&&m("(min-device-width:768px)"),y=g||h&&!v,S=c.isSafari()&&l.isiOS()&&/safari/i.test(d)===!1,N=!y&&!v&&!S;return{isiPad:le(f),isiPhone:le(g),isTablet:le(v),isPhone:le(y),isTouch:le(b),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:le(S),isDesktop:le(N)}})(a,s,e,n);return{browser:s,os:a,deviceType:i}})(window.navigator.userAgent,_.from(window.navigator.userAgentData),Uc)));const No=()=>cl(),ea=Object.getPrototypeOf,Hc=e=>{const t=Va("ownerDocument.defaultView",e);return Ue(e)&&((n=>((o,r)=>{const s=((a,i)=>Va(a,i))(o,r);if(s==null)throw new Error(o+" not available on this browser");return s})("HTMLElement",n))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(ea(e).constructor.name))},$c=window.navigator.userAgent,ta=No(),Vo=ta.browser,Ko=ta.os,Yr=ta.deviceType,u=$c.indexOf("Windows Phone")!==-1,p={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Vo.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Vo.isIE(),windowsPhone:u,browser:{current:Vo.current,version:Vo.version,isChromium:Vo.isChromium,isEdge:Vo.isEdge,isFirefox:Vo.isFirefox,isIE:Vo.isIE,isOpera:Vo.isOpera,isSafari:Vo.isSafari},os:{current:Ko.current,version:Ko.version,isAndroid:Ko.isAndroid,isChromeOS:Ko.isChromeOS,isFreeBSD:Ko.isFreeBSD,isiOS:Ko.isiOS,isLinux:Ko.isLinux,isMacOS:Ko.isMacOS,isSolaris:Ko.isSolaris,isWindows:Ko.isWindows},deviceType:{isDesktop:Yr.isDesktop,isiPad:Yr.isiPad,isiPhone:Yr.isiPhone,isPhone:Yr.isPhone,isTablet:Yr.isTablet,isTouch:Yr.isTouch,isWebView:Yr.isWebView}},C=/^\s*|\s*$/g,w=e=>kt(e)?"":(""+e).replace(C,""),A=function(e,t,n,o){o=o||this,e&&(n&&(e=e[n]),Qs(e,((r,s)=>t.call(o,r,s,n)!==!1&&(A(r,t,n,o),!0))))},k={trim:w,isArray:Gs,is:(e,t)=>t?!(t!=="array"||!Gs(e))||typeof e===t:e!==void 0,toArray:e=>{if(Gs(e))return e;{const t=[];for(let n=0,o=e.length;n<o;n++)t[n]=e[n];return t}},makeMap:(e,t,n={})=>{const o=we(e)?e.split(t||","):e||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:Qs,map:ps,grep:gs,inArray:(e,t)=>{if(e){for(let n=0,o=e.length;n<o;n++)if(e[n]===t)return n}return-1},hasOwn:Fe,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const o=t[n];for(const r in o)if(Fe(o,r)){const s=o[r];s!==void 0&&(e[r]=s)}}return e},walk:A,resolve:(e,t=window)=>{const n=e.split(".");for(let o=0,r=n.length;o<r&&(t=t[n[o]]);o++);return t},explode:(e,t)=>re(e)?e:e===""?[]:ps(e.split(t||","),w),_addCacheSuffix:e=>{const t=p.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},B=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},E={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return B(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return B(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return B(n)},fromDom:B,fromPoint:(e,t,n)=>_.from(e.dom.elementFromPoint(t,n)).map(B)},U=(e,t,n)=>{const o=e.document.createRange();var r;return r=o,t.fold((s=>{r.setStartBefore(s.dom)}),((s,a)=>{r.setStart(s.dom,a)}),(s=>{r.setStartAfter(s.dom)})),((s,a)=>{a.fold((i=>{s.setEndBefore(i.dom)}),((i,l)=>{s.setEnd(i.dom,l)}),(i=>{s.setEndAfter(i.dom)}))})(o,n),o},V=(e,t,n,o,r)=>{const s=e.document.createRange();return s.setStart(t.dom,n),s.setEnd(o.dom,r),s},Z=ho([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ie=(e,t,n)=>t(E.fromDom(n.startContainer),n.startOffset,E.fromDom(n.endContainer),n.endOffset);Z.ltr,Z.rtl;const J=(e,t)=>{const n=e.dom;if(n.nodeType!==1)return!1;{const o=n;if(o.matches!==void 0)return o.matches(t);if(o.msMatchesSelector!==void 0)return o.msMatchesSelector(t);if(o.webkitMatchesSelector!==void 0)return o.webkitMatchesSelector(t);if(o.mozMatchesSelector!==void 0)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},ue=e=>e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11||e.childElementCount===0,pe=(e,t)=>e.dom===t.dom,tt=(e,t)=>{const n=e.dom,o=t.dom;return n!==o&&n.contains(o)},ut=J,nn=(e,t)=>{const n=[],o=s=>(n.push(s),t(s));let r=t(e);do r=r.bind(o);while(r.isSome());return n},Me=e=>e.dom.nodeName.toLowerCase(),Ao=e=>e.dom.nodeType,ao=e=>t=>Ao(t)===e,wt=e=>Ao(e)===8||Me(e)==="#comment",io=e=>ot(e)&&Hc(e.dom),ot=ao(1),St=ao(3),na=ao(9),dl=ao(11),Sn=e=>t=>ot(t)&&Me(t)===e,hs=e=>E.fromDom(e.dom.ownerDocument),Nn=e=>na(e)?e:hs(e),bo=e=>E.fromDom(Nn(e).dom.defaultView),vn=e=>_.from(e.dom.parentNode).map(E.fromDom),An=e=>_.from(e.dom.parentElement).map(E.fromDom),on=(e,t)=>{const n=bt(t)?t:_t;let o=e.dom;const r=[];for(;o.parentNode!==null&&o.parentNode!==void 0;){const s=o.parentNode,a=E.fromDom(s);if(r.push(a),n(a)===!0)break;o=s}return r},an=e=>vn(e).map(ht).map((t=>Oe(t,(n=>!pe(e,n))))).getOr([]),Xt=e=>_.from(e.dom.previousSibling).map(E.fromDom),Qn=e=>_.from(e.dom.nextSibling).map(E.fromDom),Fn=e=>wo(nn(e,Xt)),st=e=>nn(e,Qn),ht=e=>We(e.dom.childNodes,E.fromDom),Vt=(e,t)=>{const n=e.dom.childNodes;return _.from(n[t]).map(E.fromDom)},Pt=e=>Vt(e,0),Vn=e=>Vt(e,e.dom.childNodes.length-1),Er=e=>e.dom.childNodes.length,bs=e=>dl(e)&&ee(e.dom.host),Jn=e=>E.fromDom(e.dom.getRootNode()),oa=e=>bs(e)?e:(t=>{const n=t.dom.head;if(n==null)throw new Error("Head is not available yet");return E.fromDom(n)})(Nn(e)),kr=e=>E.fromDom(e.dom.host),ul=e=>{if(ee(e.target)){const t=E.fromDom(e.target);if(ot(t)&&ra(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return sn(n)}}return _.from(e.target)},ra=e=>ee(e.dom.shadowRoot),Za=(e,t,n,o)=>((r,s,a,i,l)=>{const c=((d,m)=>f=>{d(f)&&m((g=>{const h=E.fromDom(ul(g).getOr(g.target)),b=()=>g.stopPropagation(),v=()=>g.preventDefault(),y=In(v,b);return((S,N,D,T,R,P,L)=>({target:S,x:N,y:D,stop:T,prevent:R,kill:P,raw:L}))(h,g.clientX,g.clientY,b,v,y,g)})(f))})(a,i);return r.dom.addEventListener(s,c,l),{unbind:ye(ei,r,s,c,l)}})(e,t,n,o,!1),ei=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)},ml=zt,sa=()=>E.fromDom(document),vs=(e,t=!1)=>e.dom.focus({preventScroll:t}),ti=e=>{const t=Jn(e).dom;return e.dom===t.activeElement},_r=(e=sa())=>_.from(e.dom.activeElement).map(E.fromDom),un=(e,t)=>{vn(e).each((n=>{n.dom.insertBefore(t.dom,e.dom)}))},M=(e,t)=>{Qn(e).fold((()=>{vn(e).each((n=>{X(n,t)}))}),(n=>{un(n,t)}))},q=(e,t)=>{Pt(e).fold((()=>{X(e,t)}),(n=>{e.dom.insertBefore(t.dom,n.dom)}))},X=(e,t)=>{e.dom.appendChild(t.dom)},oe=(e,t)=>{un(e,t),X(t,e)},de=(e,t)=>{K(t,((n,o)=>{const r=o===0?e:t[o-1];M(r,n)}))},De=(e,t)=>{K(t,(n=>{X(e,n)}))},He=(e,t,n)=>{if(!(we(n)||xn(n)||x(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Te=(e,t,n)=>{He(e.dom,t,n)},Ne=(e,t)=>{const n=e.dom;xt(t,((o,r)=>{He(n,r,o)}))},ft=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},at=(e,t)=>_.from(ft(e,t)),pt=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},rt=(e,t)=>{e.dom.removeAttribute(t)},mt=e=>{const t=e.dom.attributes;return t==null||t.length===0},Zt=e=>Qt(e.dom.attributes,((t,n)=>(t[n.name]=n.value,t)),{}),en=e=>{e.dom.textContent="",K(ht(e),(t=>{ct(t)}))},ct=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},Yt=e=>{const t=ht(e);t.length>0&&de(e,t),ct(e)},Zn=(e,t)=>E.fromDom(e.dom.cloneNode(t)),yn=e=>Zn(e,!1),Ht=e=>Zn(e,!0),Xo=(e,t)=>{const n=((r,s)=>{const a=E.fromTag(s),i=Zt(r);return Ne(a,i),a})(e,t);M(e,n);const o=ht(e);return De(n,o),ct(e),n},Tn=e=>We(e,E.fromDom),aa=e=>e.dom.innerHTML,ia=(e,t)=>{const n=hs(e).dom,o=E.fromDom(n.createDocumentFragment()),r=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,ht(E.fromDom(i))})(t,n);De(o,r),en(e),X(e,o)},ys=e=>e.style!==void 0&&bt(e.style.getPropertyValue),Gr=e=>{const t=St(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return(o=>{const r=Jn(o);return bs(r)?_.some(r):_.none()})(E.fromDom(t)).fold((()=>n.body.contains(t)),$s(Gr,kr))},Fh=(e,t,n)=>{if(!we(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);ys(e)&&e.style.setProperty(t,n)},qc=(e,t,n)=>{const o=e.dom;Fh(o,t,n)},Wc=(e,t)=>{const n=e.dom;xt(t,((o,r)=>{Fh(n,r,o)}))},nr=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o!==""||Gr(e)?o:jh(n,t)},jh=(e,t)=>ys(e)?e.style.getPropertyValue(t):"",ni=(e,t)=>{const n=e.dom,o=jh(n,t);return _.from(o).filter((r=>r.length>0))},em=e=>{const t={},n=e.dom;if(ys(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);t[r]=n.style[r]}return t},Vc=(e,t)=>{((n,o)=>{ys(n)&&n.style.removeProperty(o)})(e.dom,t),ds(at(e,"style").map(xr),"")&&rt(e,"style")},X_=(e=>{const t=o=>{const r=(s=>{const a=s.dom;return Gr(s)?a.getBoundingClientRect().height:a.offsetHeight})(o);if(r<=0||r===null){const s=nr(o,e);return parseFloat(s)||0}return r},n=(o,r)=>Qt(r,((s,a)=>{const i=nr(o,a),l=i===void 0?0:parseInt(i,10);return isNaN(l)?s:s+l}),0);return{set:(o,r)=>{if(!x(r)&&!r.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+r);const s=o.dom;ys(s)&&(s.style[e]=r+"px")},get:t,getOuter:t,aggregate:n,max:(o,r,s)=>{const a=n(o,s);return r>a?r-a:0}}})("height"),zh=(e,t)=>({left:e,top:t,translate:(n,o)=>zh(e+n,t+o)}),oi=zh,Kc=(e,t)=>e!==void 0?e:t!==void 0?t:0,tm=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?oi(n.offsetLeft,n.offsetTop):Gr(e)?(o=>{const r=o.getBoundingClientRect();return oi(r.left,r.top)})(t):oi(0,0)},nm=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return oi(n,o)},Uh=(e,t,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(e,t)},Hh=(e,t)=>{No().browser.isSafari()&&bt(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},fl=(e,t)=>{const n=(t||document).createDocumentFragment();return K(e,(o=>{n.appendChild(o.dom)})),E.fromDom(n)},om=(e=>{const t=n=>e(n)?_.from(n.dom.nodeValue):_.none();return{get:n=>{if(!e(n))throw new Error("Can only get text value of a text node");return t(n).getOr("")},getOption:t,set:(n,o)=>{if(!e(n))throw new Error("Can only set raw text value of a text node");n.dom.nodeValue=o}}})(St),ri=e=>om.get(e),rm=(e,t)=>om.set(e,t),sm=(e,t)=>{const n=ft(e,t);return n===void 0||n===""?[]:n.split(" ")};var $h=(e,t,n,o,r)=>e(n,o)?_.some(n):bt(r)&&r(n)?_.none():t(n,o,r);const Nr=(e,t,n)=>{let o=e.dom;const r=bt(n)?n:_t;for(;o.parentNode;){o=o.parentNode;const s=E.fromDom(o);if(t(s))return _.some(s);if(r(s))break}return _.none()},or=(e,t,n)=>$h(((o,r)=>r(o)),Nr,e,t,n),Xc=(e,t)=>{const n=o=>{for(let r=0;r<o.childNodes.length;r++){const s=E.fromDom(o.childNodes[r]);if(t(s))return _.some(s);const a=n(o.childNodes[r]);if(a.isSome())return a}return _.none()};return n(e.dom)},si=(e,t,n)=>Nr(e,(o=>J(o,t)),n),Yc=(e,t)=>((n,o)=>{const r=o===void 0?document:o.dom;return ue(r)?_.none():_.from(r.querySelector(n)).map(E.fromDom)})(t,e),Cs=(e,t,n)=>$h(((o,r)=>J(o,r)),si,e,t,n),pl=e=>e.dom.classList!==void 0,qh=e=>sm(e,"class"),Wh=(e,t)=>((n,o,r)=>{const s=sm(n,o).concat([r]);return Te(n,o,s.join(" ")),!0})(e,"class",t),Vh=(e,t)=>((n,o,r)=>{const s=Oe(sm(n,o),(a=>a!==r));return s.length>0?Te(n,o,s.join(" ")):rt(n,o),!1})(e,"class",t),ai=(e,t)=>{pl(e)?e.dom.classList.add(t):Wh(e,t)},Kh=e=>{(pl(e)?e.dom.classList:qh(e)).length===0&&rt(e,"class")},gl=(e,t)=>{pl(e)?e.dom.classList.remove(t):Vh(e,t),Kh(e)},am=(e,t)=>pl(e)&&e.dom.classList.contains(t),Qr=(e,t=!1)=>{return Gr(e)?e.dom.isContentEditable:(n=e,Cs(n,"[contenteditable]")).fold(le(t),(o=>Y_(o)==="true"));var n},Y_=e=>e.dom.contentEditable,Gc=(e,t)=>{e.dom.contentEditable=t?"true":"false"},Xh=(e,t,n)=>Oe(on(e,n),t),Qc=(e,t)=>{let n=[];return K(ht(e),(o=>{t(o)&&(n=n.concat([o])),n=n.concat(Qc(o,t))})),n},Dn=(e,t)=>((n,o)=>{const r=o===void 0?document:o.dom;return ue(r)?[]:We(r.querySelectorAll(n),E.fromDom)})(t,e),im=(e,t,n)=>Nr(e,t,n).isSome(),G_=(e,t)=>((n,o)=>{const r=n.dom;return r.parentNode?((s,a)=>qt(s.dom.childNodes,(i=>a(E.fromDom(i)))).map(E.fromDom))(E.fromDom(r.parentNode),(s=>!pe(n,s)&&o(s))):_.none()})(e,t).isSome(),lm=(e,t)=>Xc(e,t).isSome(),Yh=e=>bt(e)?e:_t,cm=(e,t,n)=>{const o=t(e),r=Yh(n);return o.orThunk((()=>r(e)?_.none():((s,a,i)=>{let l=s.dom;const c=Yh(i);for(;l.parentNode;){l=l.parentNode;const d=E.fromDom(l),m=a(d);if(m.isSome())return m;if(c(d))break}return _.none()})(e,t,r)))},Q_=["img","br"],J_=e=>{return(t=e,om.getOption(t)).filter((n=>n.trim().length!==0||n.indexOf(Ft)>-1)).isSome()||Se(Q_,Me(e))||(n=>io(n)&&ft(n,"contenteditable")==="false")(e);var t},Gh=(e,t,n,o)=>({start:e,soffset:t,finish:n,foffset:o}),dm=ho([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Jr={before:dm.before,on:dm.on,after:dm.after,cata:(e,t,n,o)=>e.fold(t,n,o),getStart:e=>e.fold(gt,gt,gt)},Jc=ho([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ii={domRange:Jc.domRange,relative:Jc.relative,exact:Jc.exact,exactFromRange:e=>Jc.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(n=>n.match({domRange:o=>E.fromDom(o.startContainer),relative:(o,r)=>Jr.getStart(o),exact:(o,r,s,a)=>o}))(e);return bo(t)},range:Gh},Zc=(e,t)=>{const n=Me(e);return n==="input"?Jr.after(e):Se(["br","img"],n)?t===0?Jr.before(e):Jr.after(e):Jr.on(e,t)},Z_=(e,t)=>{const n=e.fold(Jr.before,Zc,Jr.after),o=t.fold(Jr.before,Zc,Jr.after);return ii.relative(n,o)},Qh=(e,t,n,o)=>{const r=Zc(e,t),s=Zc(n,o);return ii.relative(r,s)},eN=e=>{const t=ii.getWin(e).dom,n=(r,s,a,i)=>V(t,r,s,a,i),o=(r=>r.match({domRange:s=>{const a=E.fromDom(s.startContainer),i=E.fromDom(s.endContainer);return Qh(a,s.startOffset,i,s.endOffset)},relative:Z_,exact:Qh}))(e);return((r,s)=>{const a=((i,l)=>l.match({domRange:c=>({ltr:le(c),rtl:_.none}),relative:(c,d)=>({ltr:Wn((()=>U(i,c,d))),rtl:Wn((()=>_.some(U(i,d,c))))}),exact:(c,d,m,f)=>({ltr:Wn((()=>V(i,c,d,m,f))),rtl:Wn((()=>_.some(V(i,m,f,c,d))))})}))(r,s);return((i,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter((d=>d.collapsed===!1)).map((d=>Z.rtl(E.fromDom(d.endContainer),d.endOffset,E.fromDom(d.startContainer),d.startOffset))).getOrThunk((()=>ie(0,Z.ltr,c))):ie(0,Z.ltr,c)})(0,a)})(t,o).match({ltr:n,rtl:n})},tN=(e,t,n)=>((o,r,s)=>((a,i,l)=>a.caretPositionFromPoint?((c,d,m)=>{var f;return _.from((f=c.caretPositionFromPoint)===null||f===void 0?void 0:f.call(c,d,m)).bind((g=>{if(g.offsetNode===null)return _.none();const h=c.createRange();return h.setStart(g.offsetNode,g.offset),h.collapse(),_.some(h)}))})(a,i,l):a.caretRangeFromPoint?((c,d,m)=>{var f;return _.from((f=c.caretRangeFromPoint)===null||f===void 0?void 0:f.call(c,d,m))})(a,i,l):_.none())(o.document,r,s).map((a=>Gh(E.fromDom(a.startContainer),a.startOffset,E.fromDom(a.endContainer),a.endOffset))))(e,t,n),Jh=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),um=e=>{const t=e===void 0?window:e,n=t.document,o=nm(E.fromDom(n));return(r=>{const s=r===void 0?window:r;return No().browser.isFirefox()?_.none():_.from(s.visualViewport)})(t).fold((()=>{const r=t.document.documentElement,s=r.clientWidth,a=r.clientHeight;return Jh(o.left,o.top,s,a)}),(r=>Jh(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height)))};class ln{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,o,r){if(t){if(!r&&t[n])return t[n];if(t!==this.rootNode){let s=t[o];if(s)return s;for(let a=t.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[o],s)return s}}}findPreviousNode(t,n){if(t){const o=t.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n){for(let s=o.lastChild;s;s=s.lastChild)if(!s.lastChild)return s}return o}const r=t.parentNode;if(r&&r!==this.rootNode)return r}}}const nN=/^[ \t\r\n]*$/,li=e=>nN.test(e),Zh=e=>e===`
`||e==="\r",e0=(e,t=4,n=!0,o=!0)=>{const r=((i,l)=>l<=0?"":new Array(l+1).join(" "))(0,t),s=e.replace(/\t/g,r);return Qt(s,((i,l)=>(c=>" \f	\v".indexOf(c)!==-1)(l)||l===Ft?i.pcIsSpace||i.str===""&&n||i.str.length===s.length-1&&o||((c,d)=>d<c.length&&d>=0&&Zh(c[d]))(s,i.str.length+1)?{pcIsSpace:!1,str:i.str+Ft}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:Zh(l),str:i.str+l}),{pcIsSpace:!1,str:""}).str},la=e=>t=>!!t&&t.nodeType===e,ed=e=>!!e&&!Object.getPrototypeOf(e),Ce=la(1),rr=e=>Ce(e)&&io(E.fromDom(e)),ca=e=>{const t=e.toLowerCase();return n=>ee(n)&&n.nodeName.toLowerCase()===t},sr=e=>{const t=e.map((n=>n.toLowerCase()));return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return Se(t,o)}return!1}},td=(e,t)=>{const n=t.toLowerCase().split(" ");return o=>{if(Ce(o)){const r=o.ownerDocument.defaultView;if(r)for(let s=0;s<n.length;s++){const a=r.getComputedStyle(o,null);if((a?a.getPropertyValue(e):null)===n[s])return!0}}return!1}},da=e=>Ce(e)&&e.hasAttribute("data-mce-bogus"),Ar=e=>Ce(e)&&e.tagName==="TABLE",t0=e=>t=>!!(rr(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),mm=sr(["textarea","input"]),se=la(3),oN=la(4),rN=la(7),xs=la(8),hl=la(9),fm=la(11),$t=ca("br"),n0=ca("img"),sN=ca("a"),To=t0("true"),Lt=t0("false"),pm=e=>rr(e)&&e.isContentEditable&&ee(e.parentElement)&&!e.parentElement.isContentEditable,nd=sr(["td","th"]),aN=sr(["td","th","caption"]),o0=ca("template"),ar=sr(["video","audio","object","embed"]),iN=ca("li"),gm=ca("details"),lN=ca("summary"),r0={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},cN=e=>Ce(e)&&e.hasAttribute("data-mce-bookmark"),dN=(e,t,n,o)=>se(e)&&!((r,s,a)=>li(r.data)&&!((i,l,c)=>{const d=E.fromDom(l),m=E.fromDom(i),f=c.getWhitespaceElements();return im(m,(g=>Fe(f,Me(g))),ye(pe,d))})(r,s,a))(e,t,n)&&(!o.includeZwsp||!(r=>{for(const s of r)if(!Xr(s))return!1;return!0})(e.data)),hm=(e,t,n,o)=>bt(o.isContent)&&o.isContent(t)||((r,s)=>Ce(r)&&Fe(s.getNonEmptyElements(),r.nodeName))(t,e)||cN(t)||(r=>Ce(r)&&r.nodeName==="A"&&!r.hasAttribute("href")&&(r.hasAttribute("name")||r.hasAttribute("id")))(t)||dN(t,n,e,o)||Lt(t)||To(t)&&(r=>An(E.fromDom(r)).exists((s=>!Qr(s))))(t),Zr=(e,t,n)=>{const o={...r0,...n};if(o.checkRootAsContent&&hm(e,t,t,o))return!1;let r=t.firstChild,s=0;if(!r)return!0;const a=new ln(r,t);do{if(o.skipBogus&&Ce(r)){const i=r.getAttribute("data-mce-bogus");if(i){r=a.next(i==="all");continue}}if(xs(r))r=a.next(!0);else if($t(r))s++,r=a.next();else{if(hm(e,r,t,o))return!1;r=a.next()}}while(r);return s<=1},jn=(e,t,n)=>Zr(e,t.dom,{checkRootAsContent:!0,...n}),s0=(e,t,n)=>hm(e,t,t,{includeZwsp:r0.includeZwsp,...n}),a0=e=>{const t=e.toLowerCase();return t==="svg"?"svg":t==="math"?"math":"html"},ua=e=>a0(e)!=="html",bm=e=>ua(e.nodeName),i0=e=>a0(e.nodeName),uN=["svg","math"],od="data-mce-block",vm=e=>We((t=>Oe(pn(t),(n=>!/[A-Z]/.test(n))))(e),(t=>{const n=CSS.escape(t);return`${n}:`+We(uN,(o=>`not(${o} ${n})`)).join(":")})).join(","),l0=(e,t)=>ee(t.querySelector(e))?(t.setAttribute(od,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(od),!1),c0=(e,t)=>{const n=vm(e.getTransparentElements()),o=vm(e.getBlockElements());return Oe(t.querySelectorAll(n),(r=>l0(o,r)))},d0=(e,t,n)=>{var o;const r=n?"lastChild":"firstChild";for(let s=t[r];s;s=s[r])if(Zr(e,s,{checkRootAsContent:!0}))return void((o=s.parentNode)===null||o===void 0||o.removeChild(s))},mN=(e,t,n)=>{const o=e.getBlockElements(),r=E.fromDom(t),s=i=>Me(i)in o,a=i=>pe(i,r);K(Tn(n),(i=>{Nr(i,s,a).each((l=>{const c=(d=>Oe(ht(d),(m=>s(m)&&!e.isValidChild(Me(l),Me(m)))))(i);if(c.length>0){const d=An(l);K(c,(m=>{Nr(m,s,a).each((f=>{((g,h,b)=>{const v=document.createRange(),y=h.parentNode;if(y){v.setStartBefore(h),v.setEndBefore(b);const S=v.extractContents();d0(g,S,!0),v.setStartAfter(b),v.setEndAfter(h);const N=v.extractContents();d0(g,N,!1),Zr(g,S,{checkRootAsContent:!0})||y.insertBefore(S,h),Zr(g,b,{checkRootAsContent:!0})||y.insertBefore(b,h),Zr(g,N,{checkRootAsContent:!0})||y.insertBefore(N,h),y.removeChild(h)}})(e,f.dom,m.dom)}))})),d.each((m=>c0(e,m.dom)))}}))}))},ym=(e,t)=>{const n=c0(e,t);mN(e,t,n),((o,r,s)=>{K([...s,...ma(o,r)?[r]:[]],(a=>K(Dn(E.fromDom(a),a.nodeName.toLowerCase()),(i=>{pN(o,i.dom)&&Yt(i)}))))})(e,t,n)},fN=(e,t)=>{if(wm(e,t)){const n=vm(e.getBlockElements());l0(n,t)}},Cm=e=>e.hasAttribute(od),xm=(e,t)=>Fe(e.getTransparentElements(),t),wm=(e,t)=>Ce(t)&&xm(e,t.nodeName),ma=(e,t)=>wm(e,t)&&Cm(t),pN=(e,t)=>wm(e,t)&&!Cm(t),Sm=(e,t)=>t.type===1&&xm(e,t.name)&&we(t.attr(od)),gN=No().browser,u0=e=>qt(e,ot),m0=(e,t)=>e.children&&Se(e.children,t),f0=(e,t={})=>{let n=0;const o={},r=E.fromDom(e),s=Nn(r),a=m=>{X(oa(r),m)},i=m=>{const f=oa(r);Yc(f,"#"+m).each(ct)},l=m=>Bt(o,m).getOrThunk((()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}))),c=m=>new Promise(((f,g)=>{let h;const b=k._addCacheSuffix(m),v=l(b);o[b]=v,v.count++;const y=(R,P)=>{K(R,Yn),v.status=P,v.passed=[],v.failed=[],h&&(h.onload=null,h.onerror=null,h=null)},S=()=>y(v.passed,2),N=()=>y(v.failed,3);if(f&&v.passed.push(f),g&&v.failed.push(g),v.status===1)return;if(v.status===2)return void S();if(v.status===3)return void N();v.status=1;const D=E.fromTag("link",s.dom);Ne(D,{rel:"stylesheet",type:"text/css",id:v.id});const T=((R,P)=>{const L=P.crossOrigin;return P.contentCssCors?"anonymous":bt(L)?L(R):void 0})(m,t);T!==void 0&&Te(D,"crossOrigin",T),t.referrerPolicy&&Te(D,"referrerpolicy",t.referrerPolicy),h=D.dom,h.onload=S,h.onerror=N,a(D),Te(D,"href",b)})),d=m=>{const f=k._addCacheSuffix(m);Bt(o,f).each((g=>{--g.count==0&&(delete o[f],i(g.id))}))};return{load:c,loadRawCss:(m,f)=>{const g=l(m);o[m]=g,g.count++;const h=E.fromTag("style",s.dom);Ne(h,{rel:"stylesheet",type:"text/css",id:g.id,"data-mce-key":m}),h.dom.innerHTML=f,a(h)},loadAll:m=>Promise.allSettled(We(m,(f=>c(f).then(le(f))))).then((f=>{const g=Zo(f,(h=>h.status==="fulfilled"));return g.fail.length>0?Promise.reject(We(g.fail,(h=>h.reason))):We(g.pass,(h=>h.value))})),unload:d,unloadRawCss:m=>{Bt(o,m).each((f=>{--f.count==0&&(delete o[m],i(f.id))}))},unloadAll:m=>{K(m,(f=>{d(f)}))},_setReferrerPolicy:m=>{t.referrerPolicy=m},_setContentCssCors:m=>{t.contentCssCors=m},_setCrossOrigin:m=>{t.crossOrigin=m}}},p0=(()=>{const e=new WeakMap;return{forElement:(t,n)=>{const o=Jn(t).dom;return _.from(e.get(o)).getOrThunk((()=>{const r=f0(o,n);return e.set(o,r),r}))}}})(),g0=(e,t)=>ee(e)&&(s0(t,e)||t.isInline(e.nodeName.toLowerCase())),h0=e=>(t=>t.nodeName.toLowerCase()==="span")(e)&&e.getAttribute("data-mce-type")==="bookmark",Em=(e,t,n,o)=>{var r;const s=o||t;if(Ce(t)&&h0(t))return t;const a=t.childNodes;for(let i=a.length-1;i>=0;i--)Em(e,a[i],n,s);if(Ce(t)){const i=t.childNodes;i.length===1&&h0(i[0])&&((r=t.parentNode)===null||r===void 0||r.insertBefore(i[0],t))}return(i=>fm(i)||hl(i))(t)||s0(n,t)||(i=>!!Ce(i)&&i.childNodes.length>0)(t)||((i,l,c)=>se(i)&&i.data.length>0&&((d,m,f)=>{const g=new ln(d,m).prev(!1),h=new ln(d,m).next(!1),b=Mt(g)||g0(g,f),v=Mt(h)||g0(h,f);return b&&v})(i,l,c))(t,s,n)||e.remove(t),t},hN=k.makeMap,rd=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,sd=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,bN=/[<>&\"\']/g,vN=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,yN={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},fa={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},CN={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},b0=(e,t)=>{const n={};if(e){const o=e.split(",");t=t||10;for(let r=0;r<o.length;r+=2){const s=String.fromCharCode(parseInt(o[r],t));if(!fa[s]){const a="&"+o[r+1]+";";n[s]=a,n[a]=s}}return n}},km=b0("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),v0=(e,t)=>e.replace(t?rd:sd,(n=>fa[n]||n)),y0=(e,t)=>e.replace(t?rd:sd,(n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":fa[n]||"&#"+n.charCodeAt(0)+";")),_m=(e,t,n)=>{const o=n||km;return e.replace(t?rd:sd,(r=>fa[r]||o[r]||r))},pa={encodeRaw:v0,encodeAllRaw:e=>(""+e).replace(bN,(t=>fa[t]||t)),encodeNumeric:y0,encodeNamed:_m,getEncodeFunc:(e,t)=>{const n=b0(t)||km,o=hN(e.replace(/\+/g,","));return o.named&&o.numeric?(r,s)=>r.replace(s?rd:sd,(a=>fa[a]!==void 0?fa[a]:n[a]!==void 0?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";")):o.named?t?(r,s)=>_m(r,s,n):_m:o.numeric?y0:v0},decode:e=>e.replace(vN,((t,n)=>n?(n=n.charAt(0).toLowerCase()==="x"?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):yN[n]||String.fromCharCode(n):CN[t]||km[t]||(o=>{const r=E.fromTag("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(t)))},Rn=(e,t)=>(e=k.trim(e))?e.split(t||" "):[],C0=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),x0=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),w0=e=>{let t,n;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(t+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress template time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));const o=[t,n].join(" ");return{blockContent:t,phrasingContent:n,flowContent:o}},Nm=e=>{const{blockContent:t,phrasingContent:n,flowContent:o}=w0(e),r=s=>Object.freeze(s.split(" "));return Object.freeze({blockContent:r(t),phrasingContent:r(n),flowContent:r(o)})},xN={html4:Wn((()=>Nm("html4"))),html5:Wn((()=>Nm("html5"))),"html5-strict":Wn((()=>Nm("html5-strict")))},S0=(e,t)=>{const{blockContent:n,phrasingContent:o,flowContent:r}=xN[e]();return t==="blocks"?_.some(n):t==="phrasing"?_.some(o):t==="flow"?_.some(r):_.none()},Am=e=>_.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(e)).map((t=>({preset:t[1]==="@",name:t[2]}))),ad={},bl=k.makeMap,ir=k.each,E0=k.extend,k0=k.explode,_0=(e,t={})=>{const n=bl(e," ",bl(e.toUpperCase()," "));return E0(n,t)},N0=e=>_0("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Tm=(e,t)=>{if(e){const n={};return we(e)&&(e={"*":e}),ir(e,((o,r)=>{n[r]=n[r.toUpperCase()]=t==="map"?bl(o,/[, ]/):k0(o,/[, ]/)})),n}},ws=(e={})=>{var t;const n={},o={};let r=[];const s={},a={},i=(fe,Je,lt)=>{const Ve=e[fe];if(Ve)return bl(Ve,/[, ]/,bl(Ve.toUpperCase(),/[, ]/));{let yt=ad[fe];return yt||(yt=_0(Je,lt),ad[fe]=yt),yt}},l=(t=e.schema)!==null&&t!==void 0?t:"html5",c=(fe=>{const Je=x0(fe),{phrasingContent:lt,flowContent:Ve}=w0(fe),yt={},Rt=(Tt,Dt,Kt)=>{yt[Tt]={attributes:_n(Dt,le({})),attributesOrder:Dt,children:_n(Kt,le({}))}},be=(Tt,Dt="",Kt="")=>{const kn=Rn(Kt),pr=Rn(Tt);let Hn=pr.length;const Ho=[...Je,...Rn(Dt)];for(;Hn--;)Rt(pr[Hn],Ho.slice(),kn)},ze=(Tt,Dt)=>{const Kt=Rn(Tt),kn=Rn(Dt);let pr=Kt.length;for(;pr--;){const Hn=yt[Kt[pr]];for(let Ho=0,fn=kn.length;Ho<fn;Ho++)Hn.attributes[kn[Ho]]={},Hn.attributesOrder.push(kn[Ho])}};return fe!=="html5-strict"&&(K(Rn("acronym applet basefont big font strike tt"),(Tt=>{be(Tt,"",lt)})),K(Rn("center dir isindex noframes"),(Tt=>{be(Tt,"",Ve)}))),be("html","manifest","head body"),be("head","","base command link meta noscript script style title"),be("title hr noscript br"),be("base","href target"),be("link","href rel media hreflang type sizes hreflang"),be("meta","name http-equiv content charset"),be("style","media type scoped"),be("script","src async defer type charset"),be("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",Ve),be("dd div","",Ve),be("address dt caption","",fe==="html4"?lt:Ve),be("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",lt),be("blockquote","cite",Ve),be("ol","reversed start type","li"),be("ul","","li"),be("li","value",Ve),be("dl","","dt dd"),be("a","href target rel media hreflang type",fe==="html4"?lt:Ve),be("q","cite",lt),be("ins del","cite datetime",Ve),be("img","src sizes srcset alt usemap ismap width height"),be("iframe","src name width height",Ve),be("embed","src type width height"),be("object","data type typemustmatch name usemap form width height",[Ve,"param"].join(" ")),be("param","name value"),be("map","name",[Ve,"area"].join(" ")),be("area","alt coords shape href target rel media hreflang type"),be("table","border","caption colgroup thead tfoot tbody tr"+(fe==="html4"?" col":"")),be("colgroup","span","col"),be("col","span"),be("tbody thead tfoot","","tr"),be("tr","","td th"),be("td","colspan rowspan headers",Ve),be("th","colspan rowspan headers scope abbr",Ve),be("form","accept-charset action autocomplete enctype method name novalidate target",Ve),be("fieldset","disabled form name",[Ve,"legend"].join(" ")),be("label","form for",lt),be("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),be("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",fe==="html4"?Ve:lt),be("select","disabled form multiple name required size","option optgroup"),be("optgroup","disabled label","option"),be("option","disabled label selected value"),be("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),be("menu","type label",[Ve,"li"].join(" ")),be("noscript","",Ve),fe!=="html4"&&(be("wbr"),be("ruby","",[lt,"rt rp"].join(" ")),be("figcaption","",Ve),be("mark rt rp bdi","",lt),be("summary","",[lt,"h1 h2 h3 h4 h5 h6"].join(" ")),be("canvas","width height",Ve),be("data","value",lt),be("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[Ve,"track source"].join(" ")),be("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[Ve,"track source"].join(" ")),be("picture","","img source"),be("source","src srcset type media sizes"),be("track","kind src srclang label default"),be("datalist","",[lt,"option"].join(" ")),be("article section nav aside main header footer","",Ve),be("hgroup","","h1 h2 h3 h4 h5 h6"),be("figure","",[Ve,"figcaption"].join(" ")),be("time","datetime",lt),be("dialog","open",Ve),be("command","type label icon disabled checked radiogroup command"),be("output","for form name",lt),be("progress","value max",lt),be("meter","value min max low high optimum",lt),be("details","open",[Ve,"summary"].join(" ")),be("keygen","autofocus challenge disabled form keytype name"),Rt("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),fe!=="html5-strict"&&(ze("script","language xml:space"),ze("style","xml:space"),ze("object","declare classid code codebase codetype archive standby align border hspace vspace"),ze("embed","align name hspace vspace"),ze("param","valuetype type"),ze("a","charset name rev shape coords"),ze("br","clear"),ze("applet","codebase archive code object alt name width height align hspace vspace"),ze("img","name longdesc align border hspace vspace"),ze("iframe","longdesc frameborder marginwidth marginheight scrolling align"),ze("font basefont","size color face"),ze("input","usemap align"),ze("select"),ze("textarea"),ze("h1 h2 h3 h4 h5 h6 div p legend caption","align"),ze("ul","type compact"),ze("li","type"),ze("ol dl menu dir","compact"),ze("pre","width xml:space"),ze("hr","align noshade size width"),ze("isindex","prompt"),ze("table","summary width frame rules cellspacing cellpadding align bgcolor"),ze("col","width align char charoff valign"),ze("colgroup","width align char charoff valign"),ze("thead","align char charoff valign"),ze("tr","align char charoff valign bgcolor"),ze("th","axis align char charoff valign nowrap bgcolor width height"),ze("form","accept"),ze("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),ze("tfoot","align char charoff valign"),ze("tbody","align char charoff valign"),ze("area","nohref"),ze("body","background bgcolor text link vlink alink")),fe!=="html4"&&(ze("input button select textarea","autofocus"),ze("input textarea","placeholder"),ze("a","download"),ze("link script img","crossorigin"),ze("img","loading"),ze("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),fe!=="html4"&&K([yt.video,yt.audio],(Tt=>{delete Tt.children.audio,delete Tt.children.video})),K(Rn("a form meter progress dfn"),(Tt=>{yt[Tt]&&delete yt[Tt].children[Tt]})),delete yt.caption.children.table,delete yt.script,yt})(l);e.verify_html===!1&&(e.valid_elements="*[*]");const d=Tm(e.valid_styles),m=Tm(e.invalid_styles,"map"),f=Tm(e.valid_classes,"map"),g=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),h=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),b=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),v=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),y="td th iframe video audio object script code",S=i("non_empty_elements",y+" pre svg textarea summary",b),N=i("move_caret_before_on_enter_elements",y+" table",b),D="h1 h2 h3 h4 h5 h6",T=i("text_block_elements",D+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),R=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing colgroup col",T),P=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),L=i("transparent_elements","a ins del canvas map"),F=i("wrap_block_elements","pre "+D);ir("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),(fe=>{a[fe]=new RegExp("</"+fe+"[^>]*>","gi")}));const W=fe=>{const Je=_.from(n["@"]),lt=/[*?+]/;K(((Ve,yt)=>{const Rt=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Wt(Rn(yt,","),(be=>{const ze=Rt.exec(be);if(ze){const Tt=ze[1],Dt=ze[2],Kt=ze[3],kn=ze[4],pr=ze[5],Hn={attributes:{},attributesOrder:[]};if(Ve.each((Ho=>((fn,za)=>{xt(fn.attributes,((js,Ur)=>{za.attributes[Ur]=js})),za.attributesOrder.push(...fn.attributesOrder)})(Ho,Hn))),Tt==="#"?Hn.paddEmpty=!0:Tt==="-"&&(Hn.removeEmpty=!0),kn==="!"&&(Hn.removeEmptyAttrs=!0),pr&&((Ho,fn)=>{const za=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,js=/[*?+]/,{attributes:Ur,attributesOrder:$o}=fn;K(Rn(Ho,"|"),(zs=>{const as=za.exec(zs);if(as){const Hr={},Yu=as[1],fo=as[2].replace(/[\\:]:/g,":"),is=as[3],Ua=as[4];if(Yu==="!"&&(fn.attributesRequired=fn.attributesRequired||[],fn.attributesRequired.push(fo),Hr.required=!0),Yu==="-")return delete Ur[fo],void $o.splice(k.inArray($o,fo),1);if(is&&(is==="="?(fn.attributesDefault=fn.attributesDefault||[],fn.attributesDefault.push({name:fo,value:Ua}),Hr.defaultValue=Ua):is==="~"?(fn.attributesForced=fn.attributesForced||[],fn.attributesForced.push({name:fo,value:Ua}),Hr.forcedValue=Ua):is==="<"&&(Hr.validValues=k.makeMap(Ua,"?"))),js.test(fo)){const Us=Hr;fn.attributePatterns=fn.attributePatterns||[],Us.pattern=C0(fo),fn.attributePatterns.push(Us)}else Ur[fo]||$o.push(fo),Ur[fo]=Hr}}))})(pr,Hn),Kt&&(Hn.outputName=Dt),Dt==="@"){if(!Ve.isNone())return[];Ve=_.some(Hn)}return[Kt?{name:Dt,element:Hn,aliasName:Kt}:{name:Dt,element:Hn}]}return[]}))})(Je,fe??""),(({name:Ve,element:yt,aliasName:Rt})=>{if(Rt&&(n[Rt]=yt),lt.test(Ve)){const be=yt;be.pattern=C0(Ve),r.push(be)}else n[Ve]=yt}))},O=fe=>{r=[],K(pn(n),(Je=>{delete n[Je]})),W(fe)},I=(fe,Je)=>{var lt,Ve;delete ad.text_block_elements,delete ad.block_elements;const yt=!!Je.extends&&!vt(Je.extends),Rt=Je.extends;if(o[fe]=Rt?o[Rt]:{},s[fe]=Rt??fe,S[fe.toUpperCase()]={},S[fe]={},yt||(R[fe.toUpperCase()]={},R[fe]={}),Rt&&!n[fe]&&n[Rt]){const be=(ze=>{const Tt=Dt=>re(Dt)?We(Dt,Tt):(Kt=>Ue(Kt)&&Kt.source&&Object.prototype.toString.call(Kt)==="[object RegExp]")(Dt)?new RegExp(Dt.source,Dt.flags):Ue(Dt)?Vs(Dt,Tt):Dt;return Tt(ze)})(n[Rt]);delete be.removeEmptyAttrs,delete be.removeEmpty,n[fe]=be}else n[fe]={attributesOrder:[],attributes:{}};if(re(Je.attributes)){const be=Tt=>{ze.attributesOrder.push(Tt),ze.attributes[Tt]={}},ze=(lt=n[fe])!==null&&lt!==void 0?lt:{};delete ze.attributesDefault,delete ze.attributesForced,delete ze.attributePatterns,delete ze.attributesRequired,ze.attributesOrder=[],ze.attributes={},K(Je.attributes,(Tt=>{const Dt=x0(l);Am(Tt).each((({preset:Kt,name:kn})=>{Kt?kn==="global"&&K(Dt,be):be(kn)}))})),n[fe]=ze}if(xn(Je.padEmpty)){const be=(Ve=n[fe])!==null&&Ve!==void 0?Ve:{};be.paddEmpty=Je.padEmpty,n[fe]=be}if(re(Je.children)){const be={},ze=Dt=>{be[Dt]={}},Tt=Dt=>{S0(l,Dt).each((Kt=>{K(Kt,ze)}))};K(Je.children,(Dt=>{Am(Dt).each((({preset:Kt,name:kn})=>{Kt?Tt(kn):ze(kn)}))})),o[fe]=be}Rt&&xt(o,((be,ze)=>{be[Rt]&&(o[ze]=be=E0({},o[ze]),be[fe]=be[Rt])}))},H=fe=>{Ue(fe)?xt(fe,((Je,lt)=>I(lt,Je))):we(fe)&&(Je=>{K((lt=>{const Ve=/^(~)?(.+)$/;return Wt(Rn(lt,","),(yt=>{const Rt=Ve.exec(yt);return Rt?[{cloneName:Rt[1]==="~"?"span":"div",name:Rt[2]}]:[]}))})(Je??""),(({name:lt,cloneName:Ve})=>{I(lt,{extends:Ve})}))})(fe)},te=fe=>{K((Je=>{const lt=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Wt(Rn(Je,","),(Ve=>{const yt=lt.exec(Ve);if(yt){const Rt=yt[1];return[{operation:Rt?(ze=>ze==="-"?"remove":"add")(Rt):"replace",name:yt[2],validChildren:Wt(Rn(yt[3],"|"),(ze=>Am(ze).toArray()))}]}return[]}))})(fe??""),(({operation:Je,name:lt,validChildren:Ve})=>{const yt=Je==="replace"?{"#comment":{}}:o[lt],Rt=be=>{Je==="remove"?delete yt[be]:yt[be]={}};K(Ve,(({preset:be,name:ze})=>{be?(Tt=>{S0(l,Tt).each((Dt=>{K(Dt,Rt)}))})(ze):Rt(ze)})),o[lt]=yt}))},ne=fe=>{const Je=n[fe];if(Je)return Je;let lt=r.length;for(;lt--;){const Ve=r[lt];if(Ve.pattern.test(fe))return Ve}},ae=le(d),Ae=le(m),$e=le(f),Be=le(v),Pe=le(R),ce=le(T),Ee=le(P),j=le(Object.seal(b)),z=le(h),G=le(S),Q=le(N),ge=le(g),Le=le(L),et=le(F),xe=le(Object.seal(a)),Xe=(fe,Je)=>{const lt=ne(fe);if(lt){if(!Je)return!0;{if(lt.attributes[Je])return!0;const Ve=lt.attributePatterns;if(Ve){let yt=Ve.length;for(;yt--;)if(Ve[yt].pattern.test(Je))return!0}}}return!1},vt=fe=>Fe(Pe(),fe),jt=fe=>!Jt(fe,"#")&&Xe(fe)&&!vt(fe),dn=le(s);return e.valid_elements?(O(e.valid_elements),ir(c,((fe,Je)=>{o[Je]=fe.children}))):(ir(c,((fe,Je)=>{n[Je]={attributes:fe.attributes,attributesOrder:fe.attributesOrder},o[Je]=fe.children})),ir(Rn("strong/b em/i"),(fe=>{const Je=Rn(fe,"/");n[Je[1]].outputName=Je[0]})),ir(P,((fe,Je)=>{n[Je]&&(e.padd_empty_block_inline_children&&(n[Je].paddInEmptyBlock=!0),n[Je].removeEmpty=!0)})),ir(Rn("ol ul blockquote a table tbody"),(fe=>{n[fe]&&(n[fe].removeEmpty=!0)})),ir(Rn("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),(fe=>{n[fe]&&(n[fe].paddEmpty=!0)})),ir(Rn("span"),(fe=>{n[fe].removeEmptyAttrs=!0}))),delete n.svg,H(e.custom_elements),te(e.valid_children),W(e.extended_valid_elements),te("+ol[ul|ol],+ul[ul|ol]"),ir({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},((fe,Je)=>{n[Je]&&(n[Je].parentsRequired=Rn(fe))})),e.invalid_elements&&ir(k0(e.invalid_elements),(fe=>{n[fe]&&delete n[fe]})),ne("span")||W("span[!data-mce-type|*]"),{type:l,children:o,elements:n,getValidStyles:ae,getValidClasses:$e,getBlockElements:Pe,getInvalidStyles:Ae,getVoidElements:j,getTextBlockElements:ce,getTextInlineElements:Ee,getBoolAttrs:Be,getElementRule:ne,getSelfClosingElements:z,getNonEmptyElements:G,getMoveCaretBeforeOnEnterElements:Q,getWhitespaceElements:ge,getTransparentElements:Le,getSpecialElements:xe,isValidChild:(fe,Je)=>{const lt=o[fe.toLowerCase()];return!(!lt||!lt[Je.toLowerCase()])},isValid:Xe,isBlock:vt,isInline:jt,isWrapper:fe=>Fe(et(),fe)||jt(fe),getCustomElements:dn,addValidElements:W,setValidElements:O,addCustomElements:H,addValidChildren:te}},Dm=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},wN=e=>(t=>{return{value:(n=t,us(n,"#").toUpperCase())};var n})(Dm(e.red)+Dm(e.green)+Dm(e.blue)),A0=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,T0=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,D0=(e,t,n,o)=>((r,s,a,i)=>({red:r,green:s,blue:a,alpha:i}))(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseFloat(o)),R0=e=>{const t=A0.exec(e);if(t!==null)return _.some(D0(t[1],t[2],t[3],"1"));const n=T0.exec(e);return n!==null?_.some(D0(n[1],n[2],n[3],n[4])):_.none()},SN=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,vl=e=>R0(e).map(wN).map((t=>"#"+t.value)).getOr(e),Rm=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,s={};let a,i;const l=wr;t&&(a=t.getValidStyles(),i=t.getInvalidStyles());const c=`\\" \\' \\; \\: ; : \uFEFF`.split(" ");for(let m=0;m<c.length;m++)s[c[m]]=l+m,s[l+m]=c[m];const d={parse:m=>{const f={};let g=!1;const h=e.url_converter,b=e.url_converter_scope||d,v=(O,I,H)=>{const te=f[O+"-top"+I];if(!te)return;const ne=f[O+"-right"+I];if(!ne)return;const ae=f[O+"-bottom"+I];if(!ae)return;const Ae=f[O+"-left"+I];if(!Ae)return;const $e=[te,ne,ae,Ae];let Be=$e.length-1;for(;Be--&&$e[Be]===$e[Be+1];);Be>-1&&H||(f[O+I]=Be===-1?$e[0]:$e.join(" "),delete f[O+"-top"+I],delete f[O+"-right"+I],delete f[O+"-bottom"+I],delete f[O+"-left"+I])},y=O=>{const I=f[O];if(!I)return;const H=I.indexOf(",")>-1?[I]:I.split(" ");let te=H.length;for(;te--;)if(H[te]!==H[0])return!1;return f[O]=H[0],!0},S=O=>(g=!0,s[O]),N=(O,I)=>(g&&(O=O.replace(/\uFEFF[0-9]/g,(H=>s[H]))),I||(O=O.replace(/\\([\'\";:])/g,"$1")),O),D=O=>String.fromCharCode(parseInt(O.slice(1),16)),T=O=>O.replace(/\\[0-9a-f]+/gi,D),R=(O,I,H,te,ne,ae)=>{if(ne=ne||ae)return"'"+(ne=N(ne)).replace(/\'/g,"\\'")+"'";if(I=N(I||H||te||""),!e.allow_script_urls){const Ae=I.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Ae)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Ae))return""}return h&&(I=h.call(b,I,"style")),"url('"+I.replace(/\'/g,"\\'")+"')"};if(m){let O;for(m=(m=m.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,S).replace(/\"[^\"]+\"|\'[^\']+\'/g,(I=>I.replace(/[;:]/g,S)));O=o.exec(m);){o.lastIndex=O.index+O[0].length;let I=O[1].replace(r,"").toLowerCase(),H=O[2].replace(r,"");if(I&&H){if(I=T(I),H=T(H),I.indexOf(l)!==-1||I.indexOf('"')!==-1||!e.allow_script_urls&&(I==="behavior"||/expression\s*\(|\/\*|\*\//.test(H)))continue;I==="font-weight"&&H==="700"?H="bold":I!=="color"&&I!=="background-color"||(H=H.toLowerCase()),W=H,(A0.test(W)?"rgb":T0.test(W)?"rgba":"other")=="rgb"&&R0(H).each((te=>{H=vl(SN(te)).toLowerCase()})),H=H.replace(n,R),f[I]=g?N(H,!0):H}}v("border","",!0),v("border","-width"),v("border","-color"),v("border","-style"),v("padding",""),v("margin",""),L="border-style",F="border-color",y(P="border-width")&&y(L)&&y(F)&&(f.border=f[P]+" "+f[L]+" "+f[F],delete f[P],delete f[L],delete f[F]),f.border==="medium none"&&delete f.border,f["border-image"]==="none"&&delete f["border-image"]}var P,L,F,W;return f},serialize:(m,f)=>{let g="";const h=(b,v)=>{const y=v[b];if(y)for(let S=0,N=y.length;S<N;S++){const D=y[S],T=m[D];T&&(g+=(g.length>0?" ":"")+D+": "+T+";")}};return f&&a?(h("*",a),h(f,a)):xt(m,((b,v)=>{b&&((y,S)=>{if(!i||!S)return!0;let N=i["*"];return!(N&&N[y]||(N=i[S],N&&N[y]))})(v,f)&&(g+=(g.length>0?" ":"")+v+": "+b+";")})),g}};return d},EN={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},O0=(e,t)=>{const n=t??{};for(const o in e)Fe(EN,o)||(n[o]=e[o]);return ee(e.composedPath)&&(n.composedPath=()=>e.composedPath()),ee(e.getModifierState)&&(n.getModifierState=o=>e.getModifierState(o)),ee(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},Om=(e,t,n,o)=>{var r;const s=O0(t,o);return s.type=e,kt(s.target)&&(s.target=(r=s.srcElement)!==null&&r!==void 0?r:n),(a=>kt(a.preventDefault)||(i=>i instanceof Event||bt(i.initEvent))(a))(t)&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=zt,bt(t.preventDefault)&&t.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=zt,bt(t.stopPropagation)&&t.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=zt,s.stopPropagation()},(a=>a.isDefaultPrevented===zt||a.isDefaultPrevented===_t)(s)||(s.isDefaultPrevented=s.defaultPrevented===!0?zt:_t,s.isPropagationStopped=s.cancelBubble===!0?zt:_t,s.isImmediatePropagationStopped=_t)),s},kN=/^(?:mouse|contextmenu)|click/,Bm=(e,t,n,o)=>{e.addEventListener(t,n,o||!1)},id=(e,t,n,o)=>{e.removeEventListener(t,n,o||!1)},yl=(e,t)=>{const n=Om(e.type,e,document,t);if((o=>ee(o)&&kN.test(o.type))(e)&&Mt(e.pageX)&&!Mt(e.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,s=o.body,a=n;a.pageX=e.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),a.pageY=e.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}return n},_N=(e,t,n)=>{const o=e.document,r={type:"ready"};if(n.domLoaded)return void t(r);const s=()=>{id(e,"DOMContentLoaded",s),id(e,"load",s),n.domLoaded||(n.domLoaded=!0,t(r)),e=null};o.readyState==="complete"||o.readyState==="interactive"&&o.body?s():Bm(e,"DOMContentLoaded",s),n.domLoaded||Bm(e,"load",s)};class ga{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,o,r){const s=this;let a;const i=window,l=f=>{s.executeHandlers(yl(f||i.event),c)};if(!t||se(t)||xs(t))return o;let c;t[s.expando]?c=t[s.expando]:(c=s.count++,t[s.expando]=c,s.events[c]={}),r=r||t;const d=n.split(" ");let m=d.length;for(;m--;){let f=d[m],g=l,h=!1,b=!1;f==="DOMContentLoaded"&&(f="ready"),s.domLoaded&&f==="ready"&&t.readyState==="complete"?o.call(r,yl({type:f})):(s.hasFocusIn||f!=="focusin"&&f!=="focusout"||(h=!0,b=f==="focusin"?"focus":"blur",g=v=>{const y=yl(v||i.event);y.type=y.type==="focus"?"focusin":"focusout",s.executeHandlers(y,c)}),a=s.events[c][f],a?f==="ready"&&s.domLoaded?o(yl({type:f})):a.push({func:o,scope:r}):(s.events[c][f]=a=[{func:o,scope:r}],a.fakeName=b,a.capture=h,a.nativeHandler=g,f==="ready"?_N(t,g,s):Bm(t,b||f,g,h)))}return t=a=null,o}unbind(t,n,o){if(!t||se(t)||xs(t))return this;const r=t[this.expando];if(r){let s=this.events[r];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],c=s[l];if(c){if(o){let d=c.length;for(;d--;)if(c[d].func===o){const m=c.nativeHandler,f=c.fakeName,g=c.capture,h=c.slice(0,d).concat(c.slice(d+1));h.nativeHandler=m,h.fakeName=f,h.capture=g,s[l]=h}}o&&c.length!==0||(delete s[l],id(t,c.fakeName||l,c.nativeHandler,c.capture))}}}else xt(s,((a,i)=>{id(t,a.fakeName||i,a.nativeHandler,a.capture)})),s={};for(const a in s)if(Fe(s,a))return this;delete this.events[r];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,o){return this.dispatch(t,n,o)}dispatch(t,n,o){if(!t||se(t)||xs(t))return this;const r=yl({type:n,target:t},o);do{const s=t[this.expando];s&&this.executeHandlers(r,s),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!r.isPropagationStopped());return this}clean(t){if(!t||se(t)||xs(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let o=n.length;for(;o--;)(t=n[o])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const o=this.events[n],r=o&&o[t.type];if(r)for(let s=0,a=r.length;s<a;s++){const i=r[s];if(i&&i.func.call(i.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}ga.Event=new ga;const Pm=k.each,NN=k.grep,Lm="data-mce-style",AN=k.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Cl=(e,t,n)=>{kt(n)||n===""?rt(e,t):Te(e,t,n)},B0=e=>e.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase())),ci=(e,t)=>{let n=0;if(e)for(let o=e.nodeType,r=e.previousSibling;r;r=r.previousSibling){const s=r.nodeType;(!t||!se(r)||s!==o&&r.data.length)&&(n++,o=s)}return n},P0=(e,t)=>{const n=ft(t,"style"),o=e.serialize(e.parse(n),Me(t));Cl(t,Lm,o)},L0=(e,t,n)=>{const o=B0(t);kt(n)||n===""?Vc(e,o):qc(e,o,((r,s)=>x(r)?Fe(AN,s)?r+"":r+"px":r)(n,o))},Nt=(e,t={})=>{const n={},o=window,r={};let s=0;const a=p0.forElement(E.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy,crossOrigin:j=>{const z=t.crossOrigin;return bt(z)?z(j,"stylesheet"):void 0}}),i=[],l=t.schema?t.schema:ws({}),c=Rm({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),d=t.ownEvents?new ga:ga.Event,m=l.getBlockElements(),f=j=>j&&e&&we(j)?e.getElementById(j):j,g=j=>{const z=f(j);return ee(z)?E.fromDom(z):null},h=(j,z,G="")=>{let Q;const ge=g(j);if(ee(ge)&&ot(ge)){const Le=Ee[z];Q=Le&&Le.get?Le.get(ge.dom,z):ft(ge,z)}return ee(Q)?Q:G},b=j=>{const z=f(j);return kt(z)?[]:z.attributes},v=(j,z,G)=>{L(j,(Q=>{if(Ce(Q)){const ge=E.fromDom(Q),Le=G===""?null:G,et=ft(ge,z),xe=Ee[z];xe&&xe.set?xe.set(ge.dom,Le,z):Cl(ge,z,Le),et!==Le&&t.onSetAttrib&&t.onSetAttrib({attrElm:ge.dom,attrName:z,attrValue:Le})}}))},y=()=>t.root_element||e.body,S=(j,z)=>((G,Q,ge)=>{let Le=0,et=0;const xe=G.ownerDocument;if(ge=ge||G,Q){if(ge===G&&Q.getBoundingClientRect&&nr(E.fromDom(G),"position")==="static"){const vt=Q.getBoundingClientRect();return Le=vt.left+(xe.documentElement.scrollLeft||G.scrollLeft)-xe.documentElement.clientLeft,et=vt.top+(xe.documentElement.scrollTop||G.scrollTop)-xe.documentElement.clientTop,{x:Le,y:et}}let Xe=Q;for(;Xe&&Xe!==ge&&Xe.nodeType&&!m0(Xe,ge);){const vt=Xe;Le+=vt.offsetLeft||0,et+=vt.offsetTop||0,Xe=vt.offsetParent}for(Xe=Q.parentNode;Xe&&Xe!==ge&&Xe.nodeType&&!m0(Xe,ge);)Le-=Xe.scrollLeft||0,et-=Xe.scrollTop||0,Xe=Xe.parentNode;et+=(vt=>gN.isFirefox()&&Me(vt)==="table"?u0(ht(vt)).filter((jt=>Me(jt)==="caption")).bind((jt=>u0(st(jt)).map((dn=>{const fe=dn.dom.offsetTop,Je=jt.dom.offsetTop,lt=jt.dom.offsetHeight;return fe<=Je?-lt:0})))).getOr(0):0)(E.fromDom(Q))}return{x:Le,y:et}})(e.body,f(j),z),N=(j,z,G)=>{const Q=f(j);var ge;if(!kt(Q)&&(rr(Q)||Ce(ge=Q)&&ge.namespaceURI==="http://www.w3.org/2000/svg"))return G?nr(E.fromDom(Q),B0(z)):((z=z.replace(/-(\D)/g,((Le,et)=>et.toUpperCase())))==="float"&&(z="cssFloat"),Q.style?Q.style[z]:void 0)},D=j=>{const z=f(j);if(!z)return{w:0,h:0};let G=N(z,"width"),Q=N(z,"height");return G&&G.indexOf("px")!==-1||(G="0"),Q&&Q.indexOf("px")!==-1||(Q="0"),{w:parseInt(G,10)||z.offsetWidth||z.clientWidth,h:parseInt(Q,10)||z.offsetHeight||z.clientHeight}},T=(j,z)=>{if(!j)return!1;const G=re(j)?j:[j];return Ct(G,(Q=>J(E.fromDom(Q),z)))},R=(j,z,G,Q)=>{const ge=[];let Le=f(j);Q=Q===void 0;const et=G||(y().nodeName!=="BODY"?y().parentNode:null);if(we(z))if(z==="*")z=Ce;else{const xe=z;z=Xe=>T(Xe,xe)}for(;Le&&!(Le===et||kt(Le.nodeType)||hl(Le)||fm(Le));){if(!z||z(Le)){if(!Q)return[Le];ge.push(Le)}Le=Le.parentNode}return Q?ge:null},P=(j,z,G)=>{let Q=z;if(j){we(z)&&(Q=ge=>T(ge,z));for(let ge=j[G];ge;ge=ge[G])if(bt(Q)&&Q(ge))return ge}return null},L=function(j,z,G){const Q=G??this;if(re(j)){const ge=[];return Pm(j,((Le,et)=>{const xe=f(Le);xe&&ge.push(z.call(Q,xe,et))})),ge}{const ge=f(j);return!!ge&&z.call(Q,ge)}},F=(j,z)=>{L(j,(G=>{xt(z,((Q,ge)=>{v(G,ge,Q)}))}))},W=(j,z)=>{L(j,(G=>{const Q=E.fromDom(G);ia(Q,z)}))},O=(j,z,G,Q,ge)=>L(j,(Le=>{const et=we(z)?e.createElement(z):z;return ee(G)&&F(et,G),Q&&(!we(Q)&&Q.nodeType?et.appendChild(Q):we(Q)&&W(et,Q)),ge?et:Le.appendChild(et)})),I=(j,z,G)=>O(e.createElement(j),j,z,G,!0),H=pa.encodeAllRaw,te=(j,z)=>L(j,(G=>{const Q=E.fromDom(G);return z&&K(ht(Q),(ge=>{St(ge)&&ge.dom.length===0?ct(ge):un(Q,ge)})),ct(Q),Q.dom})),ne=(j,z,G)=>{L(j,(Q=>{if(Ce(Q)){const ge=E.fromDom(Q),Le=z.split(" ");K(Le,(et=>{ee(G)?(G?ai:gl)(ge,et):((xe,Xe)=>{const vt=pl(xe)?xe.dom.classList.toggle(Xe):((jt,dn)=>Se(qh(jt),dn)?Vh(jt,dn):Wh(jt,dn))(xe,Xe);Kh(xe)})(ge,et)}))}}))},ae=(j,z,G)=>L(z,(Q=>{var ge;const Le=re(z)?j.cloneNode(!0):j;return G&&Pm(NN(Q.childNodes),(et=>{Le.appendChild(et)})),(ge=Q.parentNode)===null||ge===void 0||ge.replaceChild(Le,Q),Q})),Ae=()=>e.createRange(),$e=(j,z,G,Q)=>{if(re(j)){let ge=j.length;const Le=[];for(;ge--;)Le[ge]=$e(j[ge],z,G,Q);return Le}return!t.collect||j!==e&&j!==o||i.push([j,z,G,Q]),d.bind(j,z,G,Q||ce)},Be=(j,z,G)=>{if(re(j)){let Q=j.length;const ge=[];for(;Q--;)ge[Q]=Be(j[Q],z,G);return ge}if(i.length>0&&(j===e||j===o)){let Q=i.length;for(;Q--;){const[ge,Le,et]=i[Q];j!==ge||z&&z!==Le||G&&G!==et||d.unbind(ge,Le,et)}}return d.unbind(j,z,G)},Pe=j=>{if(j&&rr(j)){const z=j.getAttribute("data-mce-contenteditable");return z&&z!=="inherit"?z:j.contentEditable!=="inherit"?j.contentEditable:null}return null},ce={doc:e,settings:t,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:c,schema:l,events:d,isBlock:j=>we(j)?Fe(m,j):Ce(j)&&(Fe(m,j.nodeName)||ma(l,j)),root:null,clone:(j,z)=>j.cloneNode(z),getRoot:y,getViewPort:j=>{const z=um(j);return{x:z.x,y:z.y,w:z.width,h:z.height}},getRect:j=>{const z=f(j),G=S(z),Q=D(z);return{x:G.x,y:G.y,w:Q.w,h:Q.h}},getSize:D,getParent:(j,z,G)=>{const Q=R(j,z,G,!1);return Q&&Q.length>0?Q[0]:null},getParents:R,get:f,getNext:(j,z)=>P(j,z,"nextSibling"),getPrev:(j,z)=>P(j,z,"previousSibling"),select:(j,z)=>{var G,Q;const ge=(Q=(G=f(z))!==null&&G!==void 0?G:t.root_element)!==null&&Q!==void 0?Q:e;return bt(ge.querySelectorAll)?wn(ge.querySelectorAll(j)):[]},is:T,add:O,create:I,createHTML:(j,z,G="")=>{let Q="<"+j;for(const ge in z)gn(z,ge)&&(Q+=" "+ge+'="'+H(z[ge])+'"');return ms(G)&&Fe(l.getVoidElements(),j)?Q+" />":Q+">"+G+"</"+j+">"},createFragment:j=>{const z=e.createElement("div"),G=e.createDocumentFragment();let Q;for(G.appendChild(z),j&&(z.innerHTML=j);Q=z.firstChild;)G.appendChild(Q);return G.removeChild(z),G},remove:te,setStyle:(j,z,G)=>{L(j,(Q=>{const ge=E.fromDom(Q);L0(ge,z,G),t.update_styles&&P0(c,ge)}))},getStyle:N,setStyles:(j,z)=>{L(j,(G=>{const Q=E.fromDom(G);xt(z,((ge,Le)=>{L0(Q,Le,ge)})),t.update_styles&&P0(c,Q)}))},removeAllAttribs:j=>L(j,(z=>{const G=z.attributes;for(let Q=G.length-1;Q>=0;Q--)z.removeAttributeNode(G.item(Q))})),setAttrib:v,setAttribs:F,getAttrib:h,getPos:S,parseStyle:j=>c.parse(j),serializeStyle:(j,z)=>c.serialize(j,z),addStyle:j=>{if(ce!==Nt.DOM&&e===document){if(n[j])return;n[j]=!0}let z=e.getElementById("mceDefaultStyles");if(!z){z=e.createElement("style"),z.id="mceDefaultStyles",z.type="text/css";const G=e.head;G.firstChild?G.insertBefore(z,G.firstChild):G.appendChild(z)}z.styleSheet?z.styleSheet.cssText+=j:z.appendChild(e.createTextNode(j))},loadCSS:j=>{j||(j=""),K(j.split(","),(z=>{r[z]=!0,a.load(z).catch(ke)}))},addClass:(j,z)=>{ne(j,z,!0)},removeClass:(j,z)=>{ne(j,z,!1)},hasClass:(j,z)=>{const G=g(j),Q=z.split(" ");return ee(G)&&oo(Q,(ge=>am(G,ge)))},toggleClass:ne,show:j=>{L(j,(z=>Vc(E.fromDom(z),"display")))},hide:j=>{L(j,(z=>qc(E.fromDom(z),"display","none")))},isHidden:j=>{const z=g(j);return ee(z)&&ds(ni(z,"display"),"none")},uniqueId:j=>(j||"mce_")+s++,setHTML:W,getOuterHTML:j=>{const z=g(j);return ee(z)?Ce(z.dom)?z.dom.outerHTML:(G=>{const Q=E.fromTag("div"),ge=E.fromDom(G.dom.cloneNode(!0));return X(Q,ge),aa(Q)})(z):""},setOuterHTML:(j,z)=>{L(j,(G=>{Ce(G)&&(G.outerHTML=z)}))},decode:pa.decode,encode:H,insertAfter:(j,z)=>{const G=f(z);return L(j,(Q=>{const ge=G?.parentNode,Le=G?.nextSibling;return ge&&(Le?ge.insertBefore(Q,Le):ge.appendChild(Q)),Q}))},replace:ae,rename:(j,z)=>{if(j.nodeName!==z.toUpperCase()){const G=I(z);return Pm(b(j),(Q=>{v(G,Q.nodeName,h(j,Q.nodeName))})),ae(G,j,!0),G}return j},findCommonAncestor:(j,z)=>{let G=j;for(;G;){let Q=z;for(;Q&&G!==Q;)Q=Q.parentNode;if(G===Q)break;G=G.parentNode}return!G&&j.ownerDocument?j.ownerDocument.documentElement:G},run:L,getAttribs:b,isEmpty:(j,z,G)=>Re(z)?Zr(l,j,{...G,isContent:ge=>{const Le=ge.nodeName.toLowerCase();return!!z[Le]}}):Zr(l,j,G),createRng:Ae,nodeIndex:ci,split:(j,z,G)=>{let Q,ge,Le=Ae();if(j&&z&&j.parentNode&&z.parentNode){const et=j.parentNode;return Le.setStart(et,ci(j)),Le.setEnd(z.parentNode,ci(z)),Q=Le.extractContents(),Le=Ae(),Le.setStart(z.parentNode,ci(z)+1),Le.setEnd(et,ci(j)+1),ge=Le.extractContents(),et.insertBefore(Em(ce,Q,l),j),G?et.insertBefore(G,j):et.insertBefore(z,j),et.insertBefore(Em(ce,ge,l),j),te(j),G||z}},bind:$e,unbind:Be,fire:(j,z,G)=>d.dispatch(j,z,G),dispatch:(j,z,G)=>d.dispatch(j,z,G),getContentEditable:Pe,getContentEditableParent:j=>{const z=y();let G=null;for(let Q=j;Q&&Q!==z&&(G=Pe(Q),G===null);Q=Q.parentNode);return G},isEditable:j=>{if(ee(j)){const z=Ce(j)?j:j.parentElement;return ee(z)&&rr(z)&&Qr(E.fromDom(z))}return!1},destroy:()=>{if(i.length>0){let j=i.length;for(;j--;){const[z,G,Q]=i[j];d.unbind(z,G,Q)}}xt(r,((j,z)=>{a.unload(z),delete r[z]}))},isChildOf:(j,z)=>j===z||z.contains(j),dumpRng:j=>"startContainer: "+j.startContainer.nodeName+", startOffset: "+j.startOffset+", endContainer: "+j.endContainer.nodeName+", endOffset: "+j.endOffset},Ee=((j,z,G)=>{const Q=z.keep_values,ge={set:(et,xe,Xe)=>{const vt=E.fromDom(et);bt(z.url_converter)&&ee(xe)&&(xe=z.url_converter.call(z.url_converter_scope||G(),String(xe),Xe,et)),Cl(vt,"data-mce-"+Xe,xe),Cl(vt,Xe,xe)},get:(et,xe)=>{const Xe=E.fromDom(et);return ft(Xe,"data-mce-"+xe)||ft(Xe,xe)}},Le={style:{set:(et,xe)=>{const Xe=E.fromDom(et);Q&&Cl(Xe,Lm,xe),rt(Xe,"style"),we(xe)&&Wc(Xe,j.parse(xe))},get:et=>{const xe=E.fromDom(et),Xe=ft(xe,Lm)||ft(xe,"style");return j.serialize(j.parse(Xe),Me(xe))}}};return Q&&(Le.href=Le.src=ge),Le})(c,t,le(ce));return ce};Nt.DOM=Nt(document),Nt.nodeIndex=ci;const TN=Nt.DOM;class Tr{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}_setCrossOrigin(t){this.settings.crossOrigin=t}loadScript(t){return new Promise(((n,o)=>{const r=TN;let s;const a=()=>{r.remove(i),s&&(s.onerror=s.onload=s=null)},i=r.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=k._addCacheSuffix(t),this.settings.referrerPolicy&&r.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy);const l=this.settings.crossOrigin;if(bt(l)){const c=l(t);c!==void 0&&r.setAttrib(s,"crossorigin",c)}s.onload=()=>{a(),n()},s.onerror=()=>{a(),o("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)}))}isDone(t){return this.states[t]===2}markDone(t){this.states[t]=2}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=0),new Promise(((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})}))}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,o=(l,c)=>{Bt(n.scriptLoadedCallbacks,c).each((d=>{K(d,(m=>m[l](c)))})),delete n.scriptLoadedCallbacks[c]},r=l=>{const c=Oe(l,(d=>d.status==="rejected"));return c.length>0?Promise.reject(Wt(c,(({reason:d})=>re(d)?d:[d]))):Promise.resolve()},s=l=>Promise.allSettled(We(l,(c=>n.states[c]===2?(o("resolve",c),Promise.resolve()):n.states[c]===3?(o("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then((()=>{n.states[c]=2,o("resolve",c);const d=n.queue;return d.length>0?(n.queue=[],s(d).then(r)):Promise.resolve()}),(()=>(n.states[c]=3,o("reject",c),Promise.reject(c)))))))),a=l=>(n.loading=!0,s(l).then((c=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return _.from(d).each(Yn),r(c)}))),i=Ac(t);return n.loading?new Promise(((l,c)=>{n.queueLoadedCallbacks.push((()=>{a(i).then(l,c)}))})):a(i)}}Tr.ScriptLoader=new Tr;const xl={},Mm=tn("en"),M0=()=>Bt(xl,Mm.get()),lr={getData:()=>Vs(xl,(e=>({...e}))),setCode:e=>{e&&Mm.set(e)},getCode:()=>Mm.get(),add:(e,t)=>{let n=xl[e];n||(xl[e]=n={});const o=We(pn(t),(r=>r.toLowerCase()));xt(t,((r,s)=>{const a=s.toLowerCase();a!==s&&((i,l)=>{const c=i.indexOf(l);return c!==-1&&i.indexOf(l,c+1)>c})(o,a)?(Fe(t,a)||(n[a]=r),n[s]=r):n[a]=r}))},translate:e=>{const t=M0().getOr({}),n=l=>bt(l)?Object.prototype.toString.call(l):o(l)?"":""+l,o=l=>l===""||l==null,r=l=>{const c=n(l);return Fe(t,c)?n(t[c]):Bt(t,c.toLowerCase()).map(n).getOr(c)},s=l=>l.replace(/{context:\w+}$/,""),a=l=>l.replaceAll("...","\u2026");if(o(e))return"";if(Ue(i=e)&&Fe(i,"raw"))return a(n(e.raw));var i;if((l=>re(l)&&l.length>1)(e)){const l=e.slice(1);return a(s(r(e[0]).replace(/\{([0-9]+)\}/g,((c,d)=>Fe(l,d)?n(l[d]):c))))}return a(s(r(e)))},isRtl:()=>M0().bind((e=>Bt(e,"_dir"))).exists((e=>e==="rtl")),hasCode:e=>Fe(xl,e)},zn=()=>{const e=[],t={},n={},o=[],r=(l,c)=>{const d=Oe(o,(m=>m.name===l&&m.state===c));K(d,(m=>m.resolve()))},s=l=>Fe(t,l),a=(l,c)=>{const d=lr.getCode();!d||c&&(","+(c||"")+",").indexOf(","+d+",")===-1||Tr.ScriptLoader.add(t[l]+"/langs/"+d+".js")},i=(l,c="added")=>c==="added"&&(d=>Fe(n,d))(l)||c==="loaded"&&s(l)?Promise.resolve():new Promise((d=>{o.push({name:l,state:c,resolve:d})}));return{items:e,urls:t,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{zn.languageLoad!==!1&&(s(l)?a(l,c):i(l,"loaded").then((()=>a(l,c))))},add:(l,c)=>(e.push(c),n[l]={instance:c},r(l,"added"),c),remove:l=>{delete t[l],delete n[l]},createUrl:(l,c)=>we(c)?we(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(t[l])return Promise.resolve();let d=we(c)?c:c.prefix+c.resource+c.suffix;d.indexOf("/")!==0&&d.indexOf("://")===-1&&(d=zn.baseURL+"/"+d),t[l]=d.substring(0,d.lastIndexOf("/"));const m=()=>(r(l,"loaded"),Promise.resolve());return n[l]?m():Tr.ScriptLoader.add(d).then(m)},waitFor:i}};zn.languageLoad=!0,zn.baseURL="",zn.PluginManager=zn(),zn.ThemeManager=zn(),zn.ModelManager=zn();const wl=le("mce-annotation"),ha=le("data-mce-annotation"),di=le("data-mce-annotation-uid"),Sl=le("data-mce-annotation-active"),El=le("data-mce-annotation-classes"),kl=le("data-mce-annotation-attrs"),I0=e=>t=>pe(t,e),F0=(e,t)=>{const n=e.selection.getRng(),o=E.fromDom(n.startContainer),r=E.fromDom(e.getBody()),s=t.fold((()=>"."+wl()),(i=>`[${ha()}="${i}"]`)),a=Vt(o,n.startOffset).getOr(o);return Cs(a,s,I0(r)).bind((i=>at(i,`${di()}`).bind((l=>at(i,`${ha()}`).map((c=>{const d=z0(e,l);return{uid:l,name:c,elements:d}}))))))},j0=(e,t)=>pt(e,"data-mce-bogus")||((n,o,r)=>si(n,'[data-mce-bogus="all"]',r).isSome())(e,0,I0(t)),z0=(e,t)=>{const n=E.fromDom(e.getBody()),o=Dn(n,`[${di()}="${t}"]`);return Oe(o,(r=>!j0(r,n)))},U0=(e,t)=>{const n=E.fromDom(e.getBody()),o=Dn(n,`[${ha()}="${t}"]`),r={};return K(o,(s=>{if(!j0(s,n)){const a=ft(s,di()),i=Bt(r,a).getOr([]);r[a]=i.concat([s])}})),r},H0=(e,t,n=_t)=>{const o=new ln(e,t),r=s=>{let a;do a=o[s]();while(a&&!se(a)&&!n(a));return _.from(a).filter(se)};return{current:()=>_.from(o.current()).filter(se),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},ba=(e,t)=>{const n=t||(r=>e.isBlock(r)||$t(r)||Lt(r)),o=(r,s,a,i)=>{if(se(r)){const l=i(r,s,r.data);if(l!==-1)return _.some({container:r,offset:l})}return a().bind((l=>o(l.container,l.offset,a,i)))};return{backwards:(r,s,a,i)=>{const l=H0(r,i??e.getRoot(),n);return o(r,s,(()=>l.prev().map((c=>({container:c,offset:c.length})))),a).getOrNull()},forwards:(r,s,a,i)=>{const l=H0(r,i??e.getRoot(),n);return o(r,s,(()=>l.next().map((c=>({container:c,offset:0})))),a).getOrNull()}}},ui=e=>{let t;return n=>(t=t||_n(e,zt),Fe(t,Me(n)))},Ss=e=>ot(e)&&Me(e)==="br",$0=ui(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Im=ui(["ul","ol","dl"]),mi=ui(["li","dd","dt"]),DN=ui(["thead","tbody","tfoot"]),_l=ui(["td","th"]),ld=ui(["pre","script","textarea","style"]),fi=()=>{const e=E.fromTag("br");return Te(e,"data-mce-bogus","1"),e},Es=e=>{en(e),X(e,fi())},Cn=wr,cd=Xr,vo=e=>e.replace(/\uFEFF/g,""),RN=Ce,pi=se,gi=e=>(pi(e)&&(e=e.parentNode),RN(e)&&e.hasAttribute("data-mce-caret")),ks=e=>pi(e)&&cd(e.data),Do=e=>gi(e)||ks(e),q0=e=>e.firstChild!==e.lastChild||!$t(e.firstChild),Fm=e=>{const t=e.container();return!!se(t)&&(t.data.charAt(e.offset())===Cn||e.isAtStart()&&ks(t.previousSibling))},jm=e=>{const t=e.container();return!!se(t)&&(t.data.charAt(e.offset()-1)===Cn||e.isAtEnd()&&ks(t.nextSibling))},dd=e=>pi(e)&&e.data[0]===Cn,ud=e=>pi(e)&&e.data[e.data.length-1]===Cn,zm=e=>e&&e.hasAttribute("data-mce-caret")?((t=>{var n;const o=t.getElementsByTagName("br"),r=o[o.length-1];da(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,W0=e=>gi(e.startContainer),hi=Math.round,va=e=>e?{left:hi(e.left),top:hi(e.top),bottom:hi(e.bottom),right:hi(e.right),width:hi(e.width),height:hi(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},V0=(e,t)=>(e=va(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),K0=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,Nl=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&K0(t.top-e.bottom,e,t)},Al=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&K0(t.bottom-e.top,e,t),X0=(e,t,n)=>{const o=Math.max(Math.min(t,e.left+e.width),e.left),r=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-o)*(t-o)+(n-r)*(n-r))},md=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},_s=(e,t)=>{if(Ce(e)&&e.hasChildNodes()){const n=e.childNodes,o=((r,s,a)=>Math.min(Math.max(r,0),a))(t,0,n.length-1);return n[o]}return e},ON=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),Y0=e=>we(e)&&e.charCodeAt(0)>=768&&ON.test(e),G0=To,BN=Lt,PN=$t,LN=se,MN=sr(["script","style","textarea"]),Q0=sr(["img","input","textarea","hr","iframe","video","audio","object","embed"]),IN=sr(["table"]),FN=Do,cr=e=>!FN(e)&&(LN(e)?!MN(e.parentNode):Q0(e)||PN(e)||IN(e)||Um(e)),Um=e=>!(t=>Ce(t)&&t.getAttribute("unselectable")==="true")(e)&&BN(e),J0=(e,t)=>cr(e)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(Um(r))return!1;if(G0(r))return!0}return!0})(e,t),Z0=Ce,jN=cr,eb=td("display","block table"),zN=td("float","left right"),Tl=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(Z0,jN,qo(zN)),UN=qo(td("white-space","pre pre-line pre-wrap")),Dl=se,Hm=$t,tb=Nt.nodeIndex,fd=(e,t)=>t<0&&Ce(e)&&e.hasChildNodes()?void 0:_s(e,t),$m=e=>e?e.createRange():Nt.DOM.createRng(),qm=e=>we(e)&&/[\r\n\t ]/.test(e),nb=e=>!!e.setStart&&!!e.setEnd,Wm=e=>{const t=e.startContainer,n=e.startOffset;if(qm(e.toString())&&UN(t.parentNode)&&se(t)){const o=t.data;if(qm(o[n-1])||qm(o[n+1]))return!0}return!1},ob=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Ns=e=>{var t;let n;const o=e.getClientRects();return n=o.length>0?va(o[0]):va(e.getBoundingClientRect()),!nb(e)&&Hm(e)&&ob(n)?(r=>{const s=r.ownerDocument,a=$m(s),i=s.createTextNode(Ft),l=r.parentNode;l.insertBefore(i,r),a.setStart(i,0),a.setEnd(i,1);const c=va(a.getBoundingClientRect());return l.removeChild(i),c})(e):ob(n)&&nb(e)&&(t=(r=>{const s=r.startContainer,a=r.endContainer,i=r.startOffset,l=r.endOffset;if(s===a&&se(a)&&i===0&&l===1){const c=r.cloneRange();return c.setEndAfter(a),Ns(c)}return null})(e))!==null&&t!==void 0?t:n},ya=(e,t)=>{const n=V0(e,t);return n.width=1,n.right=n.left+1,n},Y=(e,t,n)=>{const o=()=>(n||(n=(r=>{const s=[],a=d=>{var m,f;d.height!==0&&(s.length>0&&(m=d,f=s[s.length-1],m.left===f.left&&m.top===f.top&&m.bottom===f.bottom&&m.right===f.right)||s.push(d))},i=(d,m)=>{const f=$m(d.ownerDocument);if(m<d.data.length){if(Y0(d.data[m]))return;if(Y0(d.data[m-1])&&(f.setStart(d,m),f.setEnd(d,m+1),!Wm(f)))return void a(ya(Ns(f),!1))}m>0&&(f.setStart(d,m-1),f.setEnd(d,m),Wm(f)||a(ya(Ns(f),!1))),m<d.data.length&&(f.setStart(d,m),f.setEnd(d,m+1),Wm(f)||a(ya(Ns(f),!0)))},l=r.container(),c=r.offset();if(Dl(l))return i(l,c),s;if(Z0(l))if(r.isAtEnd()){const d=fd(l,c);Dl(d)&&i(d,d.data.length),Tl(d)&&!Hm(d)&&a(ya(Ns(d),!1))}else{const d=fd(l,c);if(Dl(d)&&i(d,0),Tl(d)&&r.isAtEnd())return a(ya(Ns(d),!1)),s;const m=fd(r.container(),r.offset()-1);Tl(m)&&!Hm(m)&&(eb(m)||eb(d)||!Tl(d))&&a(ya(Ns(m),!1)),Tl(d)&&a(ya(Ns(d),!0))}return s})(Y(e,t))),n);return{container:le(e),offset:le(t),toRange:()=>{const r=$m(e.ownerDocument);return r.setStart(e,t),r.setEnd(e,t),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(Dl(e),t===0),isAtEnd:()=>Dl(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:r=>r&&e===r.container()&&t===r.offset(),getNode:r=>fd(e,r?t-1:t)}};Y.fromRangeStart=e=>Y(e.startContainer,e.startOffset),Y.fromRangeEnd=e=>Y(e.endContainer,e.endOffset),Y.after=e=>Y(e.parentNode,tb(e)+1),Y.before=e=>Y(e.parentNode,tb(e)),Y.isAbove=(e,t)=>Ut(sn(t.getClientRects()),ro(e.getClientRects()),Nl).getOr(!1),Y.isBelow=(e,t)=>Ut(ro(t.getClientRects()),sn(e.getClientRects()),Al).getOr(!1),Y.isAtStart=e=>!!e&&e.isAtStart(),Y.isAtEnd=e=>!!e&&e.isAtEnd(),Y.isTextPosition=e=>!!e&&se(e.container()),Y.isElementPosition=e=>!Y.isTextPosition(e);const pd=(e,t)=>{se(t)&&t.data.length===0&&e.remove(t)},Vm=(e,t,n)=>{fm(n)?((o,r,s)=>{const a=_.from(s.firstChild),i=_.from(s.lastChild);r.insertNode(s),a.each((l=>pd(o,l.previousSibling))),i.each((l=>pd(o,l.nextSibling)))})(e,t,n):((o,r,s)=>{r.insertNode(s),pd(o,s.previousSibling),pd(o,s.nextSibling)})(e,t,n)},dr=se,rb=da,sb=Nt.nodeIndex,ab=e=>{const t=e.parentNode;return rb(t)?ab(t):t},Km=e=>e?Gn(e.childNodes,((t,n)=>(rb(n)&&n.nodeName!=="BR"?t=t.concat(Km(n)):t.push(n),t)),[]):[],ib=e=>t=>e===t,lb=e=>(dr(e)?"text()":e.nodeName.toLowerCase())+"["+(t=>{let n,o;n=Km(ab(t)),o=el(n,ib(t),t),n=n.slice(0,o+1);const r=Gn(n,((s,a,i)=>(dr(a)&&dr(n[i-1])&&s++,s)),0);return n=gs(n,sr([t.nodeName])),o=el(n,ib(t),t),o-r})(e)+"]",cb=(e,t)=>{let n,o=[],r=t.container(),s=t.offset();if(dr(r))n=((i,l)=>{let c=i;for(;(c=c.previousSibling)&&dr(c);)l+=c.data.length;return l})(r,s);else{const i=r.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",r=i[s]}o.push(lb(r));let a=((i,l)=>{const c=[];for(let d=l.parentNode;d&&d!==i;d=d.parentNode)c.push(d);return c})(e,r);return a=gs(a,qo(da)),o=o.concat(ps(a,(i=>lb(i)))),o.reverse().join("/")+","+n},db=(e,t)=>{if(!t)return null;const n=t.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",s=Gn(o,((a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?(l[1]==="text()"&&(l[1]="#text"),((c,d,m)=>{let f=Km(c);return f=gs(f,((g,h)=>!dr(g)||!dr(f[h-1]))),f=gs(f,sr([d])),f[m]})(a,l[1],parseInt(l[2],10))):null}),e);if(!s)return null;if(!dr(s)&&s.parentNode){let a;return a=r==="after"?sb(s)+1:sb(s),Y(s.parentNode,a)}return((a,i)=>{let l=a,c=0;for(;dr(l);){const d=l.data.length;if(i>=c&&i<=c+d){a=l,i-=c;break}if(!dr(l.nextSibling)){a=l,i=d;break}c+=d,l=l.nextSibling}return dr(a)&&i>a.data.length&&(i=a.data.length),Y(a,i)})(s,parseInt(r,10))},gd=Lt,ub=(e,t,n,o,r)=>{const s=r?o.startContainer:o.endContainer;let a=r?o.startOffset:o.endOffset;const i=[],l=e.getRoot();if(se(s))i.push(n?((c,d,m)=>{let f=c(d.data.slice(0,m)).length;for(let g=d.previousSibling;g&&se(g);g=g.previousSibling)f+=c(g.data).length;return f})(t,s,a):a);else{let c=0;const d=s.childNodes;a>=d.length&&d.length&&(c=1,a=Math.max(0,d.length-1)),i.push(e.nodeIndex(d[a],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)i.push(e.nodeIndex(c,n));return i},Xm=(e,t,n)=>{let o=0;return k.each(e.select(t),(r=>r.getAttribute("data-mce-bogus")==="all"?void 0:r!==n&&void o++)),o},mb=(e,t)=>{let n=t?e.startContainer:e.endContainer,o=t?e.startOffset:e.endOffset;if(Ce(n)&&n.nodeName==="TR"){const r=n.childNodes;n=r[Math.min(t?o:o-1,r.length-1)],n&&(o=t?0:n.childNodes.length,t?e.setStart(n,o):e.setEnd(n,o))}},fb=e=>(mb(e,!0),mb(e,!1),e),pb=(e,t)=>{if(Ce(e)&&(e=_s(e,t),gd(e)))return e;if(Do(e)){se(e)&&gi(e)&&(e=e.parentNode);let n=e.previousSibling;if(gd(n)||(n=e.nextSibling,gd(n)))return n}},gb=(e,t,n)=>{const o=n.getNode(),r=n.getRng();if(o.nodeName==="IMG"||gd(o)){const a=o.nodeName;return{name:a,index:Xm(n.dom,a,o)}}const s=(a=>pb(a.startContainer,a.startOffset)||pb(a.endContainer,a.endOffset))(r);if(s){const a=s.tagName;return{name:a,index:Xm(n.dom,a,s)}}return((a,i,l,c)=>{const d=i.dom,m=ub(d,a,l,c,!0),f=i.isForward(),g=W0(c)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:m,forward:f,...g}:{start:m,end:ub(d,a,l,c,!1),forward:f,...g}})(e,n,t,r)},hb=(e,t,n)=>{const o={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",o,"&#xFEFF;"):e.create("span",o)},bb=(e,t)=>{const n=e.dom;let o=e.getRng();const r=n.uniqueId(),s=e.isCollapsed(),a=e.getNode(),i=a.nodeName,l=e.isForward();if(i==="IMG")return{name:i,index:Xm(n,i,a)};const c=fb(o.cloneRange());if(!s){c.collapse(!1);const m=hb(n,r+"_end",t);Vm(n,c,m)}o=fb(o),o.collapse(!0);const d=hb(n,r+"_start",t);return Vm(n,o,d),e.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},Ym=ye(gb,gt,!0),bi=e=>e===1,Ca=e=>e===-1,HN=e=>e.type==="inline-command"||e.type==="inline-format",$N=e=>e.type==="block-command"||e.type==="block-format",qN=e=>{var t;const n=r=>hn.error({message:r,pattern:e}),o=(r,s,a)=>{if(e.format!==void 0){let i;if(re(e.format)){if(!oo(e.format,we))return n(r+" pattern has non-string items in the `format` array");i=e.format}else{if(!we(e.format))return n(r+" pattern has non-string `format` parameter");i=[e.format]}return hn.value(s(i))}return e.cmd!==void 0?we(e.cmd)?hn.value(a(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!Ue(e))return n("Raw pattern is not an object");if(!we(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!we(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,s=e.end;return s.length===0&&(s=r,r=""),o("Inline",(a=>({type:"inline-format",start:r,end:s,format:a})),((a,i)=>({type:"inline-command",start:r,end:s,cmd:a,value:i})))}if(e.replacement!==void 0)return we(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):hn.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter");{const r=(t=e.trigger)!==null&&t!==void 0?t:"space";return e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",(s=>({type:"block-format",start:e.start,format:s[0],trigger:r})),((s,a)=>({type:"block-command",start:e.start,cmd:s,value:a,trigger:r})))}},vb=e=>Oe(e,$N),yb=e=>Oe(e,HN),Gm=(e,t)=>({...e,blockPatterns:Oe(e.blockPatterns,(n=>((o,r)=>(o.type==="block-command"||o.type==="block-format")&&o.trigger===r)(n,t)))}),Cb=e=>{const t=Ka(We(e,qN));return K(t.errors,(n=>console.error(n.message,n.pattern))),t.values},xb=(e,t,n)=>{e.dispatch(t,n)},wb=(e,t,n,o)=>{e.dispatch("FormatApply",{format:t,node:n,vars:o})},Sb=(e,t,n,o)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:o})},Eb=(e,t)=>e.dispatch("SetContent",t),kb=(e,t)=>e.dispatch("GetContent",t),Qm=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},_b=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),Jm=No().deviceType,WN=Jm.isTouch(),VN=Nt.DOM,Nb=e=>xo(e,RegExp),he=e=>t=>t.options.get(e),hd=e=>we(e)||Ue(e),Ab=(e,t="")=>n=>{const o=we(n);if(o){if(n.indexOf("=")!==-1){const r=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return Qt(a,((i,l)=>{const c=l.split("="),d=c[0],m=c.length>1?c[1]:d;return i[xr(d)]=xr(m),i}),{})})(n);return{value:Bt(r,e.id).getOr(t),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},KN=he("iframe_attrs"),XN=he("doctype"),Tb=he("document_base_url"),YN=he("body_id"),GN=he("body_class"),Db=he("content_security_policy"),QN=he("br_in_pre"),En=he("forced_root_block"),vi=he("forced_root_block_attrs"),JN=he("newline_behavior"),ZN=he("br_newline_selector"),eA=he("no_newline_selector"),tA=he("keep_styles"),nA=he("end_container_on_empty_block"),Rb=he("automatic_uploads"),Ob=he("images_reuse_filename"),oA=he("images_replace_blob_uris"),Bb=he("icons"),rA=he("icons_url"),sA=he("images_upload_url"),aA=he("images_upload_base_path"),iA=he("images_upload_credentials"),lA=he("images_upload_handler"),cA=he("content_css_cors"),Zm=he("referrer_policy"),ef=he("crossorigin"),Pb=he("language"),dA=he("language_url"),Lb=he("indent_use_margin"),uA=he("indentation"),mA=he("content_css"),fA=he("content_style"),Mb=he("font_css"),pA=he("directionality"),gA=he("inline_boundaries_selector"),Ib=he("object_resizing"),hA=he("resize_img_proportional"),bA=he("placeholder"),Fb=he("event_root"),vA=he("service_message"),yi=he("theme"),yA=he("theme_url"),tf=he("model"),CA=he("model_url"),Rl=he("inline_boundaries"),xA=he("formats"),wA=he("preview_styles"),SA=he("format_empty_lines"),EA=he("format_noneditable_selector"),kA=he("custom_ui_selector"),nf=he("inline"),_A=he("hidden_input"),NA=he("submit_patch"),AA=he("add_form_submit_trigger"),TA=he("add_unload_trigger"),DA=he("custom_undo_redo_levels"),RA=he("disable_nodechange"),jb=he("readonly"),OA=he("editable_root"),zb=he("content_css_cors"),Ol=he("plugins"),BA=he("external_plugins"),PA=he("block_unsupported_drop"),LA=he("visual"),MA=he("visual_table_class"),Ub=he("visual_anchor_class"),Hb=he("iframe_aria_text"),IA=he("setup"),FA=he("init_instance_callback"),jA=he("urlconverter_callback"),zA=he("auto_focus"),UA=he("browser_spellcheck"),HA=he("protect"),$A=he("paste_block_drop"),bd=he("paste_data_images"),qA=he("paste_preprocess"),WA=he("paste_postprocess"),VA=he("newdocument_content"),KA=he("paste_webkit_styles"),XA=he("paste_remove_styles_if_webkit"),YA=he("paste_merge_formats"),GA=he("smart_paste"),QA=he("paste_as_text"),JA=he("paste_tab_spaces"),ZA=he("allow_html_data_urls"),eT=he("text_patterns"),tT=he("text_patterns_lookup"),$b=he("noneditable_class"),nT=he("editable_class"),oT=he("noneditable_regexp"),rT=he("preserve_cdata"),sT=he("highlight_on_focus"),qb=he("xss_sanitization"),aT=he("init_content_sync"),Wb=e=>k.explode(e.options.get("images_file_types")),iT=he("table_tab_navigation"),lT=he("details_initial_state"),cT=he("details_serialized_state"),Vb=he("sandbox_iframes"),of=e=>e.options.get("sandbox_iframes_exclusions"),dT=he("convert_unsafe_embeds"),uT=he("license_key"),mT=he("api_key"),vd=he("disabled"),fT=he("user_id"),pT=he("fetch_users"),gT=he("lists_indent_on_tab"),Kb=e=>_.from(e.options.get("list_max_depth")),hT=Ce,Xb=se,Yb=e=>{const t=e.parentNode;t&&t.removeChild(e)},Gb=e=>{const t=vo(e);return{count:e.length-t.length,text:t}},Qb=e=>{let t;for(;(t=e.data.lastIndexOf(Cn))!==-1;)e.deleteData(t,1)},Jb=(e,t)=>(xa(e),t),bT=(e,t)=>Y.isTextPosition(t)?((n,o)=>Xb(n)&&o.container()===n?((r,s)=>{const a=Gb(r.data.substr(0,s.offset())),i=Gb(r.data.substr(s.offset()));return(a.text+i.text).length>0?(Qb(r),Y(r,s.offset()-a.count)):s})(n,o):Jb(n,o))(e,t):((n,o)=>o.container()===n.parentNode?((r,s)=>{const a=s.container(),i=((l,c)=>{const d=dt(l,c);return d===-1?_.none():_.some(d)})(wn(a.childNodes),r).map((l=>l<s.offset()?Y(a,s.offset()-1):s)).getOr(s);return xa(r),i})(n,o):Jb(n,o))(e,t),xa=e=>{hT(e)&&Do(e)&&(q0(e)?e.removeAttribute("data-mce-caret"):Yb(e)),Xb(e)&&(Qb(e),e.data.length===0&&Yb(e))},vT=Lt,yT=ar,CT=nd,Zb=(e,t,n)=>{const o=V0(t.getBoundingClientRect(),n);let r,s;if(e.tagName==="BODY"){const i=e.ownerDocument.documentElement;r=e.scrollLeft||i.scrollLeft,s=e.scrollTop||i.scrollTop}else{const i=e.getBoundingClientRect();r=e.scrollLeft-i.left,s=e.scrollTop-i.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let a=t.offsetWidth-t.clientWidth;return a>0&&(n&&(a*=-1),o.left+=a,o.right+=a),o},xT=(e,t,n,o)=>{const r=Wo();let s,a;const i=En(e),l=e.dom,c=()=>{(d=>{var m,f;const g=Dn(E.fromDom(d),"*[contentEditable=false],video,audio,embed,object");for(let h=0;h<g.length;h++){const b=g[h].dom;let v=b.previousSibling;if(ud(v)){const y=v.data;y.length===1?(m=v.parentNode)===null||m===void 0||m.removeChild(v):v.deleteData(y.length-1,1)}v=b.nextSibling,dd(v)&&(v.data.length===1?(f=v.parentNode)===null||f===void 0||f.removeChild(v):v.deleteData(0,1))}})(t),a&&(xa(a),a=null),r.on((d=>{l.remove(d.caret),r.clear()})),s&&(clearInterval(s),s=void 0)};return{isShowing:r.isSet,show:(d,m)=>{let f;if(c(),CT(m))return null;if(!n(m))return a=((g,h)=>{var b;const v=((b=g.ownerDocument)!==null&&b!==void 0?b:document).createTextNode(Cn),y=g.parentNode;if(h){const S=g.previousSibling;if(pi(S)){if(Do(S))return S;if(ud(S))return S.splitText(S.data.length-1)}y?.insertBefore(v,g)}else{const S=g.nextSibling;if(pi(S)){if(Do(S))return S;if(dd(S))return S.splitText(1),S}g.nextSibling?y?.insertBefore(v,g.nextSibling):y?.appendChild(v)}return v})(m,d),f=m.ownerDocument.createRange(),Bl(a.nextSibling)?(f.setStart(a,0),f.setEnd(a,0)):(f.setStart(a,1),f.setEnd(a,1)),f;{const g=((v,y,S)=>{var N;const D=((N=y.ownerDocument)!==null&&N!==void 0?N:document).createElement(v);D.setAttribute("data-mce-caret",S?"before":"after"),D.setAttribute("data-mce-bogus","all"),D.appendChild(fi().dom);const T=y.parentNode;return S?T?.insertBefore(D,y):y.nextSibling?T?.insertBefore(D,y.nextSibling):T?.appendChild(D),D})(i,m,d),h=Zb(t,m,d);l.setStyle(g,"top",h.top),l.setStyle(g,"caret-color","transparent"),a=g;const b=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(b,{...h}),l.add(t,b),r.set({caret:b,element:m,before:d}),d&&l.addClass(b,"mce-visual-caret-before"),s=window.setInterval((()=>{r.on((v=>{o()?l.toggleClass(v.caret,"mce-visual-caret-hidden"):l.addClass(v.caret,"mce-visual-caret-hidden")}))}),500),f=m.ownerDocument.createRange(),f.setStart(g,0),f.setEnd(g,0)}return f},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on((d=>{const m=Zb(t,d.element,d.before);l.setStyles(d.caret,{...m})}))},destroy:()=>clearInterval(s)}},ev=()=>p.browser.isFirefox(),Bl=e=>vT(e)||yT(e),Pl=e=>(Bl(e)||Ar(e)&&ev())&&An(E.fromDom(e)).exists(Qr),wT=To,rf=Lt,ST=ar,tv=td("display","block table table-cell table-row table-caption list-item"),nv=Do,ov=gi,ET=Ce,kT=se,_T=cr,yd=(e,t)=>{let n;for(;n=e(t);)if(!ov(n))return n;return null},Ll=(e,t,n,o,r)=>{const s=new ln(e,o),a=rf(e)||ov(e);let i;if(Ca(t)){if(a&&(i=yd(s.prev.bind(s),!0),n(i)))return i;for(;i=yd(s.prev.bind(s),r);)if(n(i))return i}if(bi(t)){if(a&&(i=yd(s.next.bind(s),!0),n(i)))return i;for(;i=yd(s.next.bind(s),r);)if(n(i))return i}return null},As=(e,t)=>{for(;e&&e!==t;){if(tv(e))return e;e=e.parentNode}return null},Dr=(e,t,n)=>As(e.container(),n)===As(t.container(),n),sf=(e,t)=>{if(!t)return _.none();const n=t.container(),o=t.offset();return ET(n)?_.from(n.childNodes[o+e]):_.none()},rv=(e,t)=>{var n;const o=((n=t.ownerDocument)!==null&&n!==void 0?n:document).createRange();return e?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),o},NT=(e,t,n)=>As(t,e)===As(n,e),sv=(e,t,n)=>{const o=e?"previousSibling":"nextSibling";let r=n;for(;r&&r!==t;){let s=r[o];if(s&&nv(s)&&(s=s[o]),rf(s)||ST(s)){if(NT(t,s,r))return s;break}if(_T(s))break;r=r.parentNode}return null},Ml=ye(rv,!0),Il=ye(rv,!1),af=(e,t,n)=>{let o;const r=ye(sv,!0,t),s=ye(sv,!1,t),a=n.startContainer,i=n.startOffset;if(gi(a)){const l=kT(a)?a.parentNode:a,c=l.getAttribute("data-mce-caret");if(c==="before"&&(o=l.nextSibling,Pl(o)))return Ml(o);if(c==="after"&&(o=l.previousSibling,Pl(o)))return Il(o)}if(!n.collapsed)return n;if(se(a)){if(nv(a)){if(e===1){if(o=s(a),o)return Ml(o);if(o=r(a),o)return Il(o)}if(e===-1){if(o=r(a),o)return Il(o);if(o=s(a),o)return Ml(o)}return n}if(ud(a)&&i>=a.data.length-1)return e===1&&(o=s(a),o)?Ml(o):n;if(dd(a)&&i<=1)return e===-1&&(o=r(a),o)?Il(o):n;if(i===a.data.length)return o=s(a),o?Ml(o):n;if(i===0)return o=r(a),o?Il(o):n}return n},av=(e,t)=>sf(e?0:-1,t).filter(rf),Fl=(e,t,n)=>{const o=af(e,t,n);return e===-1?Y.fromRangeStart(o):Y.fromRangeEnd(o)},Cd=e=>_.from(e.getNode()).map(E.fromDom),lf=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},xd=(e,t)=>{const n=Dr(e,t);return!(n||!$t(e.getNode()))||n},AT=Lt,Rr=se,iv=Ce,cf=$t,Ci=cr,lv=e=>Q0(e)||(t=>!!Um(t)&&!Qt(wn(t.getElementsByTagName("*")),((n,o)=>n||G0(o)),!1))(e),wd=J0,cv=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,dv=(e,t)=>{if(bi(e)){if(Ci(t.previousSibling)&&!Rr(t.previousSibling))return Y.before(t);if(Rr(t))return Y(t,0)}if(Ca(e)){if(Ci(t.nextSibling)&&!Rr(t.nextSibling))return Y.after(t);if(Rr(t))return Y(t,t.data.length)}return Ca(e)?cf(t)?Y.before(t):Y.after(t):Y.before(t)},df=(e,t,n)=>{let o,r,s,a;if(!iv(n)||!t)return null;if(t.isEqual(Y.after(n))&&n.lastChild){if(a=Y.after(n.lastChild),Ca(e)&&Ci(n.lastChild)&&iv(n.lastChild))return cf(n.lastChild)?Y.before(n.lastChild):a}else a=t;const i=a.container();let l=a.offset();if(Rr(i)){if(Ca(e)&&l>0)return Y(i,--l);if(bi(e)&&l<i.length)return Y(i,++l);o=i}else{if(Ca(e)&&l>0&&(r=cv(i,l-1),Ci(r)))return!lv(r)&&(s=Ll(r,e,wd,r),s)?Rr(s)?Y(s,s.data.length):Y.after(s):Rr(r)?Y(r,r.data.length):Y.before(r);if(bi(e)&&l<i.childNodes.length&&(r=cv(i,l),Ci(r)))return cf(r)?((d,m)=>{const f=m.nextSibling;return f&&Ci(f)?Rr(f)?Y(f,0):Y.before(f):df(1,Y.after(m),d)})(n,r):!lv(r)&&(s=Ll(r,e,wd,r),s)?Rr(s)?Y(s,0):Y.before(s):Rr(r)?Y(r,0):Y.after(r);o=r||a.getNode()}if(o&&(bi(e)&&a.isAtEnd()||Ca(e)&&a.isAtStart())&&(o=Ll(o,e,zt,n,!0),wd(o,n)))return dv(e,o);r=o&&Ll(o,e,wd,n);const c=ko(Oe(((d,m)=>{const f=[];let g=d;for(;g&&g!==m;)f.push(g),g=g.parentNode;return f})(i,n),AT));return!c||r&&c.contains(r)?r?dv(e,r):null:(a=bi(e)?Y.after(c):Y.before(c),a)},Or=e=>({next:t=>df(1,t,e),prev:t=>df(-1,t,e)}),uv=e=>Y.isTextPosition(e)?e.offset()===0:cr(e.getNode()),mv=e=>{if(Y.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return cr(e.getNode(!0))},fv=(e,t)=>!Y.isTextPosition(e)&&!Y.isTextPosition(t)&&e.getNode()===t.getNode(!0),Ro=(e,t,n)=>{const o=Or(t);return _.from(e?o.next(n):o.prev(n))},xi=(e,t,n)=>Ro(e,t,n).bind((o=>Dr(n,o,t)&&((r,s,a)=>{return r?!fv(s,a)&&(i=s,!(!Y.isTextPosition(i)&&$t(i.getNode())))&&mv(s)&&uv(a):!fv(a,s)&&uv(s)&&mv(a);var i})(e,n,o)?Ro(e,t,o):_.some(o))),pv=(e,t,n,o)=>xi(e,t,n).bind((r=>o(r)?pv(e,t,r,o):_.some(r))),wi=(e,t)=>{const n=e?t.firstChild:t.lastChild;return se(n)?_.some(Y(n,e?0:n.data.length)):n?cr(n)?_.some(e?Y.before(n):$t(o=n)?Y.before(o):Y.after(o)):((r,s,a)=>{const i=r?Y.before(a):Y.after(a);return Ro(r,s,i)})(e,t,n):_.none();var o},eo=ye(Ro,!0),lo=ye(Ro,!1),Un=ye(wi,!0),Yo=ye(wi,!1),uf="_mce_caret",Oo=e=>Ce(e)&&e.id===uf,wa=(e,t)=>{let n=t;for(;n&&n!==e;){if(Oo(n))return n;n=n.parentNode}return null},gv=e=>Fe(e,"name"),hv=e=>k.isArray(e.start),Sd=e=>!(!gv(e)&&xn(e.forward))||e.forward,bv=(e,t)=>(Ce(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),TT=(e,t)=>Yo(e).fold(_t,(n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0))),vv=(e,t,n)=>!(!(o=>!o.hasChildNodes())(t)||!wa(e,t)||(((o,r)=>{var s;const a=((s=o.ownerDocument)!==null&&s!==void 0?s:document).createTextNode(Cn);o.appendChild(a),r.setStart(a,0),r.setEnd(a,0)})(t,n),0)),yv=(e,t,n,o)=>{const r=n[t?"start":"end"],s=e.getRoot();if(r){let a=s,i=r[0];for(let l=r.length-1;a&&l>=1;l--){const c=a.childNodes;if(vv(s,a,o))return!0;if(r[l]>c.length-1)return!!vv(s,a,o)||TT(a,o);a=c[r[l]]}se(a)&&(i=Math.min(r[0],a.data.length)),Ce(a)&&(i=Math.min(r[0],a.childNodes.length)),t?o.setStart(a,i):o.setEnd(a,i)}return!0},mf=e=>se(e)&&e.data.length>0,Cv=(e,t,n)=>{const o=e.get(n.id+"_"+t),r=o?.parentNode,s=n.keep;if(o&&r){let a,i;if(t==="start"?s?o.hasChildNodes()?(a=o.firstChild,i=1):mf(o.nextSibling)?(a=o.nextSibling,i=0):mf(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=e.nodeIndex(o)+1):(a=r,i=e.nodeIndex(o)):s?o.hasChildNodes()?(a=o.firstChild,i=1):mf(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=e.nodeIndex(o)):(a=r,i=e.nodeIndex(o)),!s){const l=o.previousSibling,c=o.nextSibling;let d;for(k.each(k.grep(o.childNodes),(m=>{se(m)&&(m.data=m.data.replace(/\uFEFF/g,""))}));d=e.get(n.id+"_"+t);)e.remove(d,!0);if(se(c)&&se(l)&&!p.browser.isOpera()){const m=l.data.length;l.appendData(c.data),e.remove(c),a=l,i=m}}return _.some(Y(a,i))}return _.none()},DT=(e,t,n)=>((o,r,s=!1)=>r===2?gb(vo,s,o):r===3?(a=>{const i=a.getRng();return{start:cb(a.dom.getRoot(),Y.fromRangeStart(i)),end:cb(a.dom.getRoot(),Y.fromRangeEnd(i)),forward:a.isForward()}})(o):r?(a=>({rng:a.getRng(),forward:a.isForward()}))(o):bb(o,!1))(e,t,n),RT=(e,t)=>{((n,o)=>{const r=n.dom;if(o){if(hv(o))return((s,a)=>{const i=s.createRng();return yv(s,!0,a,i)&&yv(s,!1,a,i)?_.some({range:i,forward:Sd(a)}):_.none()})(r,o);if((s=>we(s.start))(o))return((s,a)=>{const i=_.from(db(s.getRoot(),a.start)),l=_.from(db(s.getRoot(),a.end));return Ut(i,l,((c,d)=>{const m=s.createRng();return m.setStart(c.container(),c.offset()),m.setEnd(d.container(),d.offset()),{range:m,forward:Sd(a)}}))})(r,o);if((s=>Fe(s,"id"))(o))return((s,a)=>{const i=Cv(s,"start",a),l=Cv(s,"end",a);return Ut(i,l.or(i),((c,d)=>{const m=s.createRng();return m.setStart(bv(s,c.container()),c.offset()),m.setEnd(bv(s,d.container()),d.offset()),{range:m,forward:Sd(a)}}))})(r,o);if(gv(o))return((s,a)=>_.from(s.select(a.name)[a.index]).map((i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}})))(r,o);if((s=>Fe(s,"rng"))(o))return _.some({range:o.rng,forward:Sd(o)})}return _.none()})(e,t).each((({range:n,forward:o})=>{e.setRng(n,o)}))},Bo=e=>Ce(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Ed=(xv=Ft,e=>xv===e);var xv;const Sa=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,ff=e=>!Sa(e)&&!Ed(e)&&!Xr(e),pf=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},wv=(e,t)=>{const n=Dn(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:(o=>Oe((r=>Wt(r,(s=>{const a=md(s);return a?[E.fromDom(a)]:[]})))(o),_l))(e)},Si=e=>wv(pf(e.selection.getSel()),E.fromDom(e.getBody())),jl=(e,t)=>si(e,"table",t),Sv=e=>Pt(e).fold(le([e]),(t=>[e].concat(Sv(t)))),gf=e=>Vn(e).fold(le([e]),(t=>Me(t)==="br"?Xt(t).map((n=>[e].concat(gf(n)))).getOr([]):[e].concat(gf(t)))),hf=(e,t)=>Ut((n=>{const o=n.startContainer,r=n.startOffset;return se(o)?r===0?_.some(E.fromDom(o)):_.none():_.from(o.childNodes[r]).map(E.fromDom)})(t),(n=>{const o=n.endContainer,r=n.endOffset;return se(o)?r===o.data.length?_.some(E.fromDom(o)):_.none():_.from(o.childNodes[r-1]).map(E.fromDom)})(t),((n,o)=>{const r=qt(Sv(e),ye(pe,n)),s=qt(gf(e),ye(pe,o));return r.isSome()&&s.isSome()})).getOr(!1),bf=(e,t,n,o)=>{const r=n,s=new ln(n,r),a=er(e.schema.getMoveCaretBeforeOnEnterElements(),((l,c)=>!Se(["td","th","table"],c.toLowerCase())));let i=n;do{if(se(i)&&k.trim(i.data).length!==0)return void(o?t.setStart(i,0):t.setEnd(i,i.data.length));if(a[i.nodeName])return void(o?t.setStartBefore(i):i.nodeName==="BR"?t.setEndBefore(i):t.setEndAfter(i))}while(i=o?s.next():s.prev());r.nodeName==="BODY"&&(o?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},kd=e=>{const t=e.selection.getSel();return ee(t)&&t.rangeCount>0},vf=(e,t)=>{const n=Si(e);n.length>0?K(n,(o=>{const r=o.dom,s=e.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),t(s,!0)})):t(e.selection.getRng(),!1)},Ev=(e,t,n)=>{const o=bb(e,t);n(o),e.moveToBookmark(o)},yf=(e,t)=>e.startContainer===e.endContainer&&e.endOffset-e.startOffset==1&&t(e.startContainer.childNodes[e.startOffset]),zl=e=>x(e?.nodeType),Cf=e=>Ce(e)&&!Bo(e)&&!Oo(e)&&!da(e),kv=(e,t,n)=>{const{selection:o,dom:r}=e,s=o.getNode(),a=Lt(s);Ev(o,!0,(()=>{t()})),a&&Lt(s)&&r.isChildOf(s,e.getBody())?e.selection.select(s):n(o.getStart())&&OT(r,o)},OT=(e,t)=>{var n,o;const r=t.getRng(),{startContainer:s,startOffset:a}=r;if(!((i,l)=>{if(Cf(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=i.getAttrib(l,"data-mce-selected"),d=parseInt(c,10);return!isNaN(d)&&d>0}return!1})(e,t.getNode())&&Ce(s)){const i=s.childNodes,l=e.getRoot();let c;if(a<i.length){const d=i[a];c=new ln(d,(n=e.getParent(d,e.isBlock))!==null&&n!==void 0?n:l)}else{const d=i[i.length-1];c=new ln(d,(o=e.getParent(d,e.isBlock))!==null&&o!==void 0?o:l),c.next(!0)}for(let d=c.current();d;d=c.next()){if(e.getContentEditable(d)==="false")return;if(se(d)&&!wf(d))return r.setStart(d,0),void t.setRng(r)}}},_v=(e,t,n)=>{if(e){const o=t?"nextSibling":"previousSibling";for(e=n?e:e[o];e;e=e[o])if(Ce(e)||!wf(e))return e}},xf=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||ma(e,t),Ei=(e,t,n)=>e.schema.isValidChild(t,n),wf=(e,t=!1)=>{if(ee(e)&&se(e)){const n=t?e.data.replace(/ /g,"\xA0"):e.data;return li(n)}return!1},Nv=(e,t)=>{const n=e.dom;return Cf(t)&&n.getContentEditable(t)==="false"&&((o,r)=>{const s="[data-mce-cef-wrappable]",a=EA(o),i=ms(a)?s:`${s},${a}`;return J(E.fromDom(r),i)})(e,t)&&n.select('[contenteditable="true"]',t).length===0},Ts=(e,t)=>bt(e)?e(t):(ee(t)&&(e=e.replace(/%(\w+)/g,((n,o)=>t[o]||n))),e),Sf=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),Ef=(e,t)=>{if(kt(e))return null;{let n=String(e);return t!=="color"&&t!=="backgroundColor"||(n=vl(n)),t==="fontWeight"&&e===700&&(n="bold"),t==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},_d=(e,t,n)=>{const o=e.getStyle(t,n);return Ef(o,n)},Av=(e,t)=>{let n;return e.getParent(t,(o=>!!Ce(o)&&(n=e.getStyle(o,"text-decoration"),!!n&&n!=="none"))),n},Nd=(e,t,n)=>e.getParents(t,n,e.getRoot()),kf=(e,t,n)=>{const o=e.formatter.get(t);return ee(o)&&Ct(o,n)},Br=e=>gn(e,"block"),Po=e=>gn(e,"selector"),mn=e=>gn(e,"inline"),_f=e=>Po(e)&&e.expand!==!1&&!mn(e),Tv=e=>(t=>{const n=[];let o=t;for(;o;){if(se(o)&&o.data!==Cn||o.childNodes.length>1)return[];Ce(o)&&n.push(o),o=o.firstChild}return n})(e).length>0,Nf=e=>Oo(e.dom)&&Tv(e.dom),ki=Bo,Dv=Nd,Rv=wf,BT=xf,Ov=(e,t)=>{let n=t;for(;n;){if(Ce(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},Bv=(e,t,n,o)=>{const r=t.data;if(e){for(let s=n;s>0;s--)if(o(r.charAt(s-1)))return s}else for(let s=n;s<r.length;s++)if(o(r.charAt(s)))return s;return-1},PT=(e,t,n)=>Bv(e,t,n,(o=>Ed(o)||Sa(o))),LT=(e,t,n)=>Bv(e,t,n,ff),Pv=(e,t,n,o,r,s)=>{let a;const i=e.getParent(n,(d=>pm(d)||e.isBlock(d))),l=ee(i)?i:t,c=(d,m,f)=>{const g=ba(e),h=r?g.backwards:g.forwards;return _.from(h(d,m,((b,v)=>ki(b.parentNode)?-1:(a=b,f(r,b,v))),l))};return c(n,o,PT).bind((d=>s?c(d.container,d.offset+(r?-1:0),LT):_.some(d))).orThunk((()=>a?_.some({container:a,offset:r?0:a.length}):_.none()))},Lv=(e,t,n,o,r)=>{const s=o[r];se(o)&&ms(o.data)&&s&&(o=s);const a=Dv(e,o);for(let i=0;i<a.length;i++)for(let l=0;l<t.length;l++){const c=t[l];if((!ee(c.collapsed)||c.collapsed===n.collapsed)&&Po(c)&&e.is(a[i],c.selector))return a[i]}return o},Mv=(e,t,n,o)=>{var r;let s=n;const a=e.getRoot(),i=t[0];if(Br(i)&&(s=i.wrapper?null:e.getParent(n,i.block,a)),!s){const l=(r=e.getParent(n,"LI,TD,TH,SUMMARY"))!==null&&r!==void 0?r:a;s=e.getParent(se(n)?n.parentNode:n,(c=>c!==a&&BT(e.schema,c)),l)}if(s&&Br(i)&&i.wrapper&&(s=Dv(e,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[o]&&!e.isBlock(s[o])&&(s=s[o],!Sf(s,"br")););return s||n},Iv=(e,t,n,o)=>{const r=n.parentNode;return!ee(n[o])&&(!(r!==t&&!kt(r)&&!e.isBlock(r))||Iv(e,t,r,o))},Ad=(e,t,n,o,r,s)=>{let a=n;const i=r?"previousSibling":"nextSibling",l=e.getRoot();if(se(n)&&!Rv(n)&&(r?o>0:o<n.data.length))return n;for(;a;){if(pm(a))return n;if(!t[0].block_expand&&e.isBlock(a))return s?a:n;for(let d=a[i];d;d=d[i]){const m=se(d)&&!Iv(e,l,d,i);if(!ki(d)&&(!$t(c=d)||!c.getAttribute("data-mce-bogus")||c.nextSibling)&&!Rv(d,m))return a}if(a===l||a.parentNode===l){n=a;break}a=a.parentNode}var c;return n},Fv=e=>ki(e.parentNode)||ki(e),Ea=(e,t,n,o={})=>{const{includeTrailingSpace:r=!1,expandToBlock:s=!0}=o,a=e.getParent(t.commonAncestorContainer,(g=>pm(g))),i=ee(a)?a:e.getRoot();let{startContainer:l,startOffset:c,endContainer:d,endOffset:m}=t;const f=n[0];return Ce(l)&&l.hasChildNodes()&&(l=_s(l,c),se(l)&&(c=0)),Ce(d)&&d.hasChildNodes()&&(d=_s(d,t.collapsed?m:m-1),se(d)&&(m=d.data.length)),l=Ov(e,l),d=Ov(e,d),Fv(l)&&(l=ki(l)?l:l.parentNode,l=t.collapsed?l.previousSibling||l:l.nextSibling||l,se(l)&&(c=t.collapsed?l.length:0)),Fv(d)&&(d=ki(d)?d:d.parentNode,d=t.collapsed?d.nextSibling||d:d.previousSibling||d,se(d)&&(m=t.collapsed?0:d.length)),t.collapsed&&(Pv(e,i,l,c,!0,r).each((({container:g,offset:h})=>{l=g,c=h})),Pv(e,i,d,m,!1,r).each((({container:g,offset:h})=>{d=g,m=h}))),(mn(f)||f.block_expand)&&(mn(f)&&se(l)&&c!==0||(l=Ad(e,n,l,c,!0,s)),mn(f)&&se(d)&&m!==d.data.length||(d=Ad(e,n,d,m,!1,s))),_f(f)&&(l=Lv(e,n,t,l,"previousSibling"),d=Lv(e,n,t,d,"nextSibling")),(Br(f)||Po(f))&&(l=Mv(e,n,l,"previousSibling"),d=Mv(e,n,d,"nextSibling"),Br(f)&&(e.isBlock(l)||(l=Ad(e,n,l,c,!0,s),se(l)&&(c=0)),e.isBlock(d)||(d=Ad(e,n,d,m,!1,s),se(d)&&(m=d.data.length)))),Ce(l)&&l.parentNode&&(c=e.nodeIndex(l),l=l.parentNode),Ce(d)&&d.parentNode&&(m=e.nodeIndex(d)+1,d=d.parentNode),{startContainer:l,startOffset:c,endContainer:d,endOffset:m}},Ul=(e,t,n)=>{var o;const r=t.startOffset,s=_s(t.startContainer,r),a=t.endOffset,i=_s(t.endContainer,a-1),l=v=>{const y=v[0];se(y)&&y===s&&r>=y.data.length&&v.splice(0,1);const S=v[v.length-1];return a===0&&v.length>0&&S===i&&se(S)&&v.splice(v.length-1,1),v},c=(v,y,S)=>{const N=[];for(;v&&v!==S;v=v[y])N.push(v);return N},d=(v,y)=>e.getParent(v,(S=>S.parentNode===y),y),m=(v,y,S)=>{const N=S?"nextSibling":"previousSibling";for(let D=v,T=D.parentNode;D&&D!==y;D=T){T=D.parentNode;const R=c(D===v?D:D[N],N);R.length&&(S||R.reverse(),n(l(R)))}};if(s===i)return n(l([s]));const f=(o=e.findCommonAncestor(s,i))!==null&&o!==void 0?o:e.getRoot();if(e.isChildOf(s,i))return m(s,f,!0);if(e.isChildOf(i,s))return m(i,f);const g=d(s,f)||s,h=d(i,f)||i;m(s,g,!0);const b=c(g===s?g:g.nextSibling,"nextSibling",h===i?h.nextSibling:h);b.length&&n(l(b)),m(i,h)},MT=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],jv=(e,t,n,o,r,s)=>{const{uid:a=t,...i}=n;ai(e,wl()),Te(e,`${di()}`,a),Te(e,`${ha()}`,o);const{attributes:l={},classes:c=[]}=r(a,i);if(Ne(e,l),((d,m)=>{K(m,(f=>{ai(d,f)}))})(e,c),s){c.length>0&&Te(e,`${El()}`,c.join(","));const d=pn(l);d.length>0&&Te(e,`${kl()}`,d.join(","))}},zv=(e,t,n,o,r)=>{const s=E.fromTag("span",e);return jv(s,t,n,o,r,!1),s},IT=(e,t,n,o,r,s)=>{const a=[],i=zv(e.getDoc(),n,s,o,r),l=Wo(),c=()=>{l.clear()},d=f=>{K(f,m)},m=f=>{switch(((g,h,b,v)=>An(h).fold((()=>"skipping"),(y=>v==="br"||(S=>St(S)&&ri(S)===Cn)(h)?"valid":(S=>ot(S)&&am(S,wl()))(h)?"existing":Oo(h.dom)?"caret":Ct(MT,(S=>J(h,S)))?"valid-block":Ei(g,b,v)&&Ei(g,Me(y),b)?"valid":"invalid-child")))(e,f,"span",Me(f))){case"invalid-child":{c();const g=ht(f);d(g),c();break}case"valid-block":c(),jv(f,n,s,o,r,!0);break;case"valid":{const g=l.get().getOrThunk((()=>{const h=yn(i);return a.push(h),l.set(h),h}));oe(f,g);break}}};return Ul(e.dom,t,(f=>{c(),(g=>{const h=We(g,E.fromDom);d(h)})(f)})),a},Uv=e=>{const t=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>Bt(s,a).map((i=>i.settings)),getNames:()=>pn(s)}})();((s,a)=>{const i=ha(),l=d=>_.from(d.attr(i)).bind(a.lookup),c=d=>{var m,f;d.attr(di(),null),d.attr(ha(),null),d.attr(Sl(),null);const g=_.from(d.attr(kl())).map((y=>y.split(","))).getOr([]),h=_.from(d.attr(El())).map((y=>y.split(","))).getOr([]);K(g,(y=>d.attr(y,null)));const b=(f=(m=d.attr("class"))===null||m===void 0?void 0:m.split(" "))!==null&&f!==void 0?f:[],v=Qe(b,[wl()].concat(h));d.attr("class",v.length>0?v.join(" "):null),d.attr(El(),null),d.attr(kl(),null)};s.serializer.addTempAttr(Sl()),s.serializer.addAttributeFilter(i,(d=>{for(const m of d)l(m).each((f=>{f.persistent===!1&&(m.name==="span"?m.unwrap():c(m))}))}))})(e,t);const n=((s,a)=>{const i=tn({}),l=()=>({listeners:[],previous:Wo()}),c=(g,h)=>{d(g,(b=>(h(b),b)))},d=(g,h)=>{const b=i.get(),v=h(Bt(b,g).getOrThunk(l));b[g]=v,i.set(b)},m=(g,h)=>{K(z0(s,g),(b=>{h?Te(b,Sl(),"true"):rt(b,Sl())}))},f=so((()=>{const g=Vr(a.getNames());K(g,(h=>{d(h,(b=>{const v=b.previous.get();return F0(s,_.some(h)).fold((()=>{v.each((y=>{(S=>{c(S,(N=>{K(N.listeners,(D=>D(!1,S)))}))})(h),b.previous.clear(),m(y,!1)}))}),(({uid:y,name:S,elements:N})=>{ds(v,y)||(v.each((D=>m(D,!1))),((D,T,R)=>{c(D,(P=>{K(P.listeners,(L=>L(!0,D,{uid:T,nodes:We(R,(F=>F.dom))})))}))})(S,y,N),b.previous.set(y),m(y,!0))})),{previous:b.previous,listeners:b.listeners}}))}))}),30);return s.on("remove",(()=>{f.cancel()})),s.on("NodeChange",(()=>{f.throttle()})),{addListener:(g,h)=>{d(g,(b=>({previous:b.previous,listeners:b.listeners.concat([h])})))}}})(e,t),o=Sn("span"),r=s=>{K(s,(a=>{o(a)?Yt(a):(i=>{gl(i,wl()),rt(i,`${di()}`),rt(i,`${ha()}`),rt(i,`${Sl()}`);const l=at(i,`${kl()}`).map((m=>m.split(","))).getOr([]),c=at(i,`${El()}`).map((m=>m.split(","))).getOr([]);var d;K(l,(m=>rt(i,m))),d=i,K(c,(m=>{gl(d,m)})),rt(i,`${El()}`),rt(i,`${kl()}`)})(a)}))};return{register:(s,a)=>{t.register(s,a)},annotate:(s,a)=>{t.lookup(s).each((i=>{((l,c,d,m)=>{l.undoManager.transact((()=>{const f=l.selection,g=f.getRng(),h=Si(l).length>0,b=Xs("mce-annotation");if(g.collapsed&&!h&&((v,y)=>{const S=Ea(v.dom,y,[{inline:"span"}]);y.setStart(S.startContainer,S.startOffset),y.setEnd(S.endContainer,S.endOffset),v.selection.setRng(y)})(l,g),f.getRng().collapsed&&!h){const v=zv(l.getDoc(),b,m,c,d.decorate);ia(v,Ft),f.getRng().insertNode(v.dom),f.select(v.dom)}else Ev(f,!1,(()=>{vf(l,(v=>{IT(l,v,b,c,d.decorate,m)}))}))}))})(e,s,i,a)}))},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{F0(e,_.some(s)).each((({elements:a})=>{const i=e.selection.getBookmark();r(a),e.selection.moveToBookmark(i)}))},removeAll:s=>{const a=e.selection.getBookmark();xt(U0(e,s),((i,l)=>{r(i)})),e.selection.moveToBookmark(a)},getAll:s=>{const a=U0(e,s);return Vs(a,(i=>We(i,(l=>l.dom))))}}},_i=e=>({getBookmark:ye(DT,e),moveToBookmark:ye(RT,e)});_i.isBookmarkNode=Bo;const Hv=(e,t,n)=>!n.collapsed&&Ct(n.getClientRects(),(o=>((r,s,a)=>s>=r.left&&s<=r.right&&a>=r.top&&a<=r.bottom)(o,e,t))),$v=(e,t)=>{const n=St(t)?ri(t).length:ht(t).length+1;return e>n?n:e<0?0:e},FT=e=>ii.range(e.start,$v(e.soffset,e.start),e.finish,$v(e.foffset,e.finish)),qv=(e,t)=>!ed(t.dom)&&(tt(e,t)||pe(e,t)),Wv=e=>t=>qv(e,t.start)&&qv(e,t.finish),jT=e=>ii.range(E.fromDom(e.startContainer),e.startOffset,E.fromDom(e.endContainer),e.endOffset),zT=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),_.some(t)}catch{return _.none()}},Td=e=>{const t=(o=>o.inline||p.browser.isFirefox())(e)?(n=E.fromDom(e.getBody()),(o=>{const r=o.getSelection();return(r&&r.rangeCount!==0?_.from(r.getRangeAt(0)):_.none()).map(jT)})(bo(n).dom).filter(Wv(n))):_.none();var n;e.bookmark=t.isSome()?t:e.bookmark},Af=e=>(e.bookmark?e.bookmark:_.none()).bind((t=>{return n=E.fromDom(e.getBody()),o=t,_.from(o).filter(Wv(n)).map(FT);var n,o})).bind(zT),Vv={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},Lo={setEditorTimeout:(e,t,n)=>((o,r)=>(x(r)||(r=0),window.setTimeout(o,r)))((()=>{e.removed||t()}),n),setEditorInterval:(e,t,n)=>{const o=((r,s)=>(x(s)||(s=0),window.setInterval(r,s)))((()=>{e.removed?window.clearInterval(o):t()}),n);return o}},Kv=(e,t)=>e.view(t).fold(le([]),(n=>{const o=e.owner(n),r=Kv(e,o);return[n].concat(r)}));var UT=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?_.none():_.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(E.fromDom)},owner:e=>Nn(e)});const Xv=e=>{const t=sa(),n=nm(t),o=((a,i)=>{const l=i.owner(a);return Kv(i,l)})(e,UT),r=tm(e),s=Wr(o,((a,i)=>{const l=tm(i);return{left:a.left+l.left,top:a.top+l.top}}),{left:0,top:0});return oi(s.left+r.left+n.left,s.top+r.top+n.top)};let Ni;const Tf=Nt.DOM,Df=e=>{const t=e.classList;return t!==void 0&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},Dd=(e,t)=>{const n=kA(e);return Tf.getParent(t,(r=>(s=>Ce(s)&&Vv.isEditorUIElement(s))(r)||!!n&&e.dom.is(r,n)))!==null},Rf=e=>{try{const t=Jn(E.fromDom(e.getElement()));return _r(t).fold((()=>document.body),(n=>n.dom))}catch{return document.body}},HT=(e,t)=>{const n=t.editor;(r=>{const s=Ys((()=>{Td(r)}),0);r.on("init",(()=>{r.inline&&((a,i)=>{const l=()=>{i.throttle()};Nt.DOM.bind(document,"mouseup",l),a.on("remove",(()=>{Nt.DOM.unbind(document,"mouseup",l)}))})(r,s),((a,i)=>{((l,c)=>{l.on("mouseup touchend",(d=>{c.throttle()}))})(a,i),a.on("keyup NodeChange AfterSetSelectionRange",(l=>{(c=>c.type==="nodechange"&&c.selectionChange)(l)||Td(a)}))})(r,s)})),r.on("remove",(()=>{s.cancel()}))})(n);const o=(r,s)=>{sT(r)&&r.inline!==!0&&s(E.fromDom(r.getContainer()),"tox-edit-focus")};n.on("focusin",(()=>{const r=e.focusedEditor;if(Df(Rf(n))&&o(n,ai),r!==n){r&&r.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:r}),n.focus(!0);const s=No().browser;n.inline!==!0&&(s.isSafari()||s.isChromium())&&(a=>{if(!a.iframeElement)return;const i=E.fromDom(a.iframeElement),l=Xv(i),c=um(window);(l.top<c.y||l.top>c.bottom-25)&&i.dom.scrollIntoView({block:"center"})})(n)}})),n.on("focusout",(()=>{Lo.setEditorTimeout(n,(()=>{const r=e.focusedEditor;Df(Rf(n))&&r===n||o(n,gl),Dd(n,Rf(n))||r!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)}))})),Ni||(Ni=r=>{const s=e.activeEditor;s&&ul(r).each((a=>{const i=a;i.ownerDocument===document&&(i===document.body||Dd(s,i)||e.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))}))},Tf.bind(document,"focusin",Ni))},$T=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Ni&&(Tf.unbind(document,"focusin",Ni),Ni=null)},Yv=(e,t)=>{((n,o)=>(r=>r.collapsed?_.from(_s(r.startContainer,r.startOffset)).map(E.fromDom):_.none())(o).bind((r=>DN(r)?_.some(r):tt(n,r)?_.none():_.some(n))))(E.fromDom(e.getBody()),t).bind((n=>Un(n.dom))).fold((()=>{e.selection.normalize()}),(n=>e.selection.setRng(n.toRange())))},Rd=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},Ai=e=>e.inline?(t=>{const n=t.getBody();return n&&(o=E.fromDom(n),ti(o)||(r=o,_r(Jn(r)).filter((s=>r.dom.contains(s.dom)))).isSome());var o,r})(e):(t=>ee(t.iframeElement)&&ti(E.fromDom(t.iframeElement)))(e),Of=e=>Ai(e)||(t=>{const n=Jn(E.fromDom(t.getElement()));return _r(n).filter((o=>!Df(o.dom)&&Dd(t,o.dom))).isSome()})(e),Bf=e=>e.editorManager.setActive(e),me={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||me.metaKeyPressed(e),metaKeyPressed:e=>p.os.isMacOS()||p.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},ka="data-mce-selected",Gv=Math.abs,Od=Math.round,Pf={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Qv=(e,t)=>{const n=t.dom,o=t.getDoc(),r=document,s=t.getBody();let a,i,l,c,d,m,f,g,h,b,v,y,S,N,D;const T=ce=>ee(ce)&&(n0(ce)||n.is(ce,"figure.image")),R=ce=>ar(ce)||n.hasClass(ce,"mce-preview-object"),P=ce=>{const Ee=ce.target;((j,z)=>{if((G=>G.type==="longpress"||G.type.indexOf("touch")===0)(j)){const G=j.touches[0];return T(j.target)&&!Hv(G.clientX,G.clientY,z)}return T(j.target)&&!Hv(j.clientX,j.clientY,z)})(ce,t.selection.getRng())&&!ce.isDefaultPrevented()&&t.selection.select(Ee)},L=ce=>n.hasClass(ce,"mce-preview-object")&&ee(ce.firstElementChild)?[ce,ce.firstElementChild]:n.is(ce,"figure.image")?[ce.querySelector("img")]:[ce],F=ce=>{const Ee=Ib(t);return!(!Ee||t.mode.isReadOnly())&&ce.getAttribute("data-mce-resize")!=="false"&&ce!==t.getBody()&&(n.hasClass(ce,"mce-preview-object")&&ee(ce.firstElementChild)?J(E.fromDom(ce.firstElementChild),Ee):J(E.fromDom(ce),Ee))},W=(ce,Ee,j)=>{if(ee(j)){const z=L(ce);K(z,(G=>{G.style[Ee]||!t.schema.isValid(G.nodeName.toLowerCase(),Ee)?n.setStyle(G,Ee,j):n.setAttrib(G,Ee,""+j)}))}},O=(ce,Ee,j)=>{W(ce,"width",Ee),W(ce,"height",j)},I=ce=>{let Ee,j,z,G,Q;Ee=ce.screenX-m,j=ce.screenY-f,y=Ee*c[2]+g,S=j*c[3]+h,y=y<5?5:y,S=S<5?5:S,z=(T(a)||R(a))&&hA(t)!==!1?!me.modifierPressed(ce):me.modifierPressed(ce),z&&(Gv(Ee)>Gv(j)?(S=Od(y*b),y=Od(S/b)):(y=Od(S/b),S=Od(y*b))),O(i,y,S),G=c.startPos.x+Ee,Q=c.startPos.y+j,G=G>0?G:0,Q=Q>0?Q:0,n.setStyles(l,{left:G,top:Q,display:"block"}),l.innerHTML=y+" &times; "+S,Ee=s.scrollWidth-N,j=s.scrollHeight-D,Ee+j!==0&&n.setStyles(l,{left:G-Ee,top:Q-j}),v||(((ge,Le,et,xe,Xe)=>{ge.dispatch("ObjectResizeStart",{target:Le,width:et,height:xe,origin:Xe})})(t,a,g,h,"corner-"+c.name),v=!0)},H=()=>{const ce=v;v=!1,ce&&(W(a,"width",y),W(a,"height",S)),n.unbind(o,"mousemove",I),n.unbind(o,"mouseup",H),r!==o&&(n.unbind(r,"mousemove",I),n.unbind(r,"mouseup",H)),n.remove(i),n.remove(l),n.remove(d),te(a),ce&&(((Ee,j,z,G,Q)=>{Ee.dispatch("ObjectResized",{target:j,width:z,height:G,origin:Q})})(t,a,y,S,"corner-"+c.name),n.setAttrib(a,"style",n.getAttrib(a,"style"))),t.nodeChanged()},te=ce=>{Be();const Ee=n.getPos(ce,s),j=Ee.x,z=Ee.y,G=ce.getBoundingClientRect(),Q=G.width||G.right-G.left,ge=G.height||G.bottom-G.top;a!==ce&&(ae(),a=ce,y=S=0);const Le=t.dispatch("ObjectSelected",{target:ce});F(ce)&&!Le.isDefaultPrevented()?xt(Pf,((et,xe)=>{let Xe=n.get("mceResizeHandle"+xe);Xe&&n.remove(Xe),Xe=n.add(s,"div",{id:"mceResizeHandle"+xe,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+xe+"-resize; margin:0; padding:0"}),n.bind(Xe,"mousedown",(vt=>{vt.stopImmediatePropagation(),vt.preventDefault(),(jt=>{const dn=L(a)[0];m=jt.screenX,f=jt.screenY,g=dn.clientWidth,h=dn.clientHeight,b=h/g,c=et,c.name=xe,c.startPos={x:Q*et[0]+j,y:ge*et[1]+z},N=s.scrollWidth,D=s.scrollHeight,d=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=((fe,Je)=>{if(R(Je))return fe.create("img",{src:p.transparentSrc});if(Ar(Je)){const lt=Jt(c.name,"n")?sn:ro,Ve=Je.cloneNode(!0);return lt(fe.select("tr",Ve)).each((yt=>{const Rt=fe.select("td,th",yt);fe.setStyle(yt,"height",null),K(Rt,(be=>fe.setStyle(be,"height",null)))})),Ve}return Je.cloneNode(!0)})(n,a),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:j,top:z,margin:0}),O(i,Q,ge),i.removeAttribute(ka),s.appendChild(i),n.bind(o,"mousemove",I),n.bind(o,"mouseup",H),r!==o&&(n.bind(r,"mousemove",I),n.bind(r,"mouseup",H)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},g+" &times; "+h)})(vt)})),et.elm=Xe,n.setStyles(Xe,{left:Q*et[0]+j-Xe.offsetWidth/2,top:ge*et[1]+z-Xe.offsetHeight/2})})):ae(!1)},ne=Ys(te,0),ae=(ce=!0)=>{ne.cancel(),Be(),a&&ce&&a.removeAttribute(ka),xt(Pf,((Ee,j)=>{const z=n.get("mceResizeHandle"+j);z&&(n.unbind(z),n.remove(z))}))},Ae=(ce,Ee)=>n.isChildOf(ce,Ee),$e=ce=>{if(v||t.removed||t.composing)return;const Ee=ce.type==="mousedown"?ce.target:e.getNode(),j=Cs(E.fromDom(Ee),"table,img,figure.image,hr,video,span.mce-preview-object,details").map((G=>G.dom)).filter((G=>n.isEditable(G.parentElement)||G.nodeName==="IMG"&&n.isEditable(G))).getOrUndefined(),z=ee(j)?n.getAttrib(j,ka,"1"):"1";if(K(n.select(`img[${ka}],hr[${ka}]`),(G=>{G.removeAttribute(ka)})),ee(j)&&Ae(j,s)&&Of(t)){Pe();const G=e.getStart(!0);if(Ae(G,j)&&Ae(e.getEnd(!0),j))return n.setAttrib(j,ka,z),void ne.throttle(j)}ae()},Be=()=>{xt(Pf,(ce=>{ce.elm&&(n.unbind(ce.elm),delete ce.elm)}))},Pe=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",(()=>{Pe(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",$e),t.on("keyup compositionend",(ce=>{a&&a.nodeName==="TABLE"&&$e(ce)})),t.on("hide blur",ae),t.on("contextmenu longpress",P,!0)})),t.on("remove",Be),{isResizable:F,showResizeRect:te,hideResizeRect:ae,updateResizeRect:$e,destroy:()=>{ne.cancel(),a=i=d=null}}},Jv=(e,t,n)=>{const o=bo(E.fromDom(n));return tN(o.dom,e,t).map((r=>{const s=n.createRange();return s.setStart(r.start.dom,r.soffset),s.setEnd(r.finish.dom,r.foffset),s})).getOrUndefined()},Lf=(e,t)=>ee(e)&&ee(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,Zv=(e,t,n)=>((o,r,s)=>{let a=o;for(;a&&a!==r;){if(s(a))return a;a=a.parentNode}return null})(e,t,n)!==null,qT=(e,t,n)=>Zv(e,t,(o=>o.nodeName===n)),WT=(e,t)=>Do(e)&&!Zv(e,t,Oo),ey=(e,t,n)=>{const o=t.parentNode;if(o){const r=new ln(t,e.getParent(o,e.isBlock)||e.getRoot());let s;for(;s=r[n?"prev":"next"]();)if($t(s))return!0}return!1},Mf=(e,t,n,o,r)=>{const s=e.getRoot(),a=e.schema.getNonEmptyElements(),i=r.parentNode;let l,c;if(!i)return _.none();const d=e.getParent(i,e.isBlock)||s;if(o&&$t(r)&&t&&e.isEmpty(d))return _.some(Y(i,e.nodeIndex(r)));const m=new ln(r,d);for(;c=m[o?"prev":"next"]();){if(e.getContentEditableParent(c)==="false"||WT(c,s))return _.none();if(se(c)&&c.data.length>0)return qT(c,s,"A")?_.none():_.some(Y(c,o?c.data.length:0));if(e.isBlock(c)||a[c.nodeName.toLowerCase()])return _.none();l=c}return xs(l)?_.none():n&&l?_.some(Y(l,0)):_.none()},ty=(e,t,n,o)=>{const r=e.getRoot();let s,a=!1,i=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const c=Ce(i)&&l===i.childNodes.length,d=e.schema.getNonEmptyElements();let m=n;if(Do(i))return _.none();if(Ce(i)&&l>i.childNodes.length-1&&(m=!1),hl(i)&&(i=r,l=0),i===r){if(m&&(s=i.childNodes[l>0?l-1:0],s)&&(Do(s)||d[s.nodeName]||Ar(s)))return _.none();if(i.hasChildNodes()){if(l=Math.min(!m&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=se(i)&&c?i.data.length:0,!t&&i===r.lastChild&&Ar(i)||((f,g)=>{let h=g;for(;h&&h!==f;){if(Lt(h))return!0;h=h.parentNode}return!1})(r,i)||Do(i)||gm(i))return _.none();if(i.hasChildNodes()&&!Ar(i)){s=i;const f=new ln(i,r);do{if(Lt(s)||Do(s)){a=!1;break}if(se(s)&&s.data.length>0){l=m?0:s.data.length,i=s,a=!0;break}if(d[s.nodeName.toLowerCase()]&&!aN(s)){l=e.nodeIndex(s),i=s.parentNode,m||l++,a=!0;break}}while(s=m?f.next():f.prev())}}}return t&&(se(i)&&l===0&&Mf(e,c,t,!0,i).each((f=>{i=f.container(),l=f.offset(),a=!0})),Ce(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!$t(s)||(f=>{var g;return((g=f.previousSibling)===null||g===void 0?void 0:g.nodeName)==="A"})(s)||ey(e,s,!1)||ey(e,s,!0)||Mf(e,c,t,!0,s).each((f=>{i=f.container(),l=f.offset(),a=!0})))),m&&!t&&se(i)&&l===i.data.length&&Mf(e,c,t,!1,i).each((f=>{i=f.container(),l=f.offset(),a=!0})),a&&i?_.some(Y(i,l)):_.none()},Bd=(e,t)=>{const n=t.collapsed,o=t.cloneRange(),r=Y.fromRangeStart(t);return ty(e,n,!0,o).each((s=>{n&&Y.isAbove(r,s)||o.setStart(s.container(),s.offset())})),n||ty(e,n,!1,o).each((s=>{o.setEnd(s.container(),s.offset())})),n&&o.collapse(!0),Lf(t,o)?_.none():_.some(o)},Pd=(e,t)=>e.splitText(t),Ld=e=>{let t=e.startContainer,n=e.startOffset,o=e.endContainer,r=e.endOffset;if(t===o&&se(t)){if(n>0&&n<t.data.length)if(o=Pd(t,n),t=o.previousSibling,r>n){r-=n;const s=Pd(o,r).previousSibling;t=o=s,r=s.data.length,n=0}else r=0}else if(se(t)&&n>0&&n<t.data.length&&(t=Pd(t,n),n=0),se(o)&&r>0&&r<o.data.length){const s=Pd(o,r).previousSibling;o=s,r=s.data.length}return{startContainer:t,startOffset:n,endContainer:o,endOffset:r}},Pr=e=>({walk:(t,n)=>Ul(e,t,n),split:Ld,expand:(t,n={type:"word"})=>{if(n.type==="word"){const o=Ea(e,t,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),r=e.createRng();return r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),r}return t},normalize:t=>Bd(e,t).fold(_t,(n=>(t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),!0)))});Pr.compareRanges=Lf,Pr.getCaretRangeFromPoint=Jv,Pr.getSelectedNode=md,Pr.getNode=_s;const If=e=>Me(e)==="textarea",ny=(e,t)=>{const n=(r=>{const s=r.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===r.dom)return oi(a.offsetLeft,a.offsetTop);const c=Kc(i?.pageYOffset,l.scrollTop),d=Kc(i?.pageXOffset,l.scrollLeft),m=Kc(l.clientTop,a.clientTop),f=Kc(l.clientLeft,a.clientLeft);return tm(r).translate(d-f,c-m)})(e),o=(r=>X_.get(r))(e);return{element:e,bottom:n.top+o,height:o,pos:n,cleanup:t}},oy=(e,t,n,o)=>{KT(e,((r,s)=>VT(e,t,n,o)),n)},ry=(e,t,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};((a,i)=>a.dispatch("ScrollIntoView",i).isDefaultPrevented())(e,s)||(n(e,t,nm(t).top,o,r),((a,i)=>{a.dispatch("AfterScrollIntoView",i)})(e,s))},VT=(e,t,n,o)=>{const r=E.fromDom(e.getBody()),s=E.fromDom(e.getDoc());r.dom.offsetWidth;const a=((i,l)=>{const c=((m,f)=>{const g=ht(m);if(g.length===0||If(m))return{element:m,offset:f};if(f<g.length&&!If(g[f]))return{element:g[f],offset:0};{const h=g[g.length-1];return If(h)?{element:m,offset:f}:Me(h)==="img"?{element:h,offset:1}:St(h)?{element:h,offset:ri(h).length}:{element:h,offset:ht(h).length}}})(i,l),d=E.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\uFEFF</span>');return un(c.element,d),ny(d,(()=>ct(d)))})(E.fromDom(n.startContainer),n.startOffset);ry(e,s,t,a,o),a.cleanup()},sy=(e,t,n,o)=>{const r=E.fromDom(e.getDoc());ry(e,r,n,(s=>ny(E.fromDom(s),ke))(t),o)},KT=(e,t,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,a=n.endOffset;t(E.fromDom(o),E.fromDom(s));const i=e.dom.createRng();i.setStart(o,r),i.setEnd(s,a),e.selection.setRng(n)},Ff=(e,t,n,o,r)=>{const s=t.pos;if(o)Uh(s.left,Math.max(0,s.top-30),r);else{const a=s.top-n+t.height+30;Uh(-e.getBody().getBoundingClientRect().left,a,r)}},ay=(e,t,n,o,r,s)=>{const a=o+n,i=r.pos.top,l=r.bottom,c=l-i>=o;i<n?Ff(e,r,o,s!==!1,t):i>a?Ff(e,r,o,c?s!==!1:s===!0,t):l>a&&!c&&Ff(e,r,o,s===!0,t)},iy=(e,t,n,o,r)=>{const s=bo(t).dom.innerHeight;ay(e,t,n,s,o,r)},ly=(e,t,n,o,r)=>{const s=bo(t).dom.innerHeight;ay(e,t,n,s,o,r);const a=Xv(o.element),i=um(window);a.top<i.y?Hh(o.element,r!==!1):a.top>i.bottom&&Hh(o.element,r===!0)},XT=(e,t,n)=>oy(e,iy,t,n),YT=(e,t,n)=>sy(e,t,iy,n),GT=(e,t,n)=>oy(e,ly,t,n),QT=(e,t,n)=>sy(e,t,ly,n),Hl=(e,t,n)=>{(e.inline?XT:GT)(e,t,n)},cy=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),dy=(e,t,n,o,r)=>{const s=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return _.from(s).map(E.fromDom).map((i=>o&&t.collapsed?i:Vt(i,r(i,a)).getOr(i))).bind((i=>ot(i)?_.some(i):vn(i).filter(ot))).map((i=>i.dom)).getOr(e)},uy=(e,t,n=!1)=>dy(e,t,!0,n,((o,r)=>Math.min(Er(o),r))),my=(e,t,n=!1)=>dy(e,t,!1,n,((o,r)=>r>0?r-1:r)),fy=(e,t)=>{const n=e;for(;e&&se(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},jf=(e,t)=>We(t,(n=>{const o=e.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n})),JT={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Md=(e,t,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(e[o])return e[o];if(e!==t){let s=e[r];if(s)return s;for(let a=e.parent;a&&a!==t;a=a.parent)if(s=a[r],s)return s}},ZT=e=>{var t;const n=(t=e.value)!==null&&t!==void 0?t:"";if(!li(n))return!1;const o=e.parent;return!o||o.name==="span"&&!o.attr("style")||!/^[ ]+$/.test(n)},py=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class On{static create(t,n){const o=new On(t,JT[t]||1);return n&&xt(n,((r,s)=>{o.attr(s,r)})),o}constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const o=this;if(!we(t))return ee(t)&&xt(t,((s,a)=>{o.attr(a,s)})),o;const r=o.attributes;if(r){if(n!==void 0){if(n===null){if(t in r.map){delete r.map[t];let s=r.length;for(;s--;)if(r[s].name===t)return r.splice(s,1),o}return o}if(t in r.map){let s=r.length;for(;s--;)if(r[s].name===t){r[s].value=n;break}}else r.push({name:t,value:n});return r.map[t]=n,o}return r.map[t]}}clone(){const t=this,n=new On(t.name,t.type),o=t.attributes;if(o){const r=[];r.map={};for(let s=0,a=o.length;s<a;s++){const i=o[s];i.name!=="id"&&(r[r.length]={name:i.name,value:i.value},r.map[i.name]=i.value)}n.attributes=r}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const o=n.next;t.insert(n,t,!0),n=o}t.remove()}remove(){const t=this,n=t.parent,o=t.next,r=t.prev;return n&&(n.firstChild===t?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===t?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const o=n.lastChild;return o?(o.next=t,t.prev=o,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,o){t.parent&&t.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===r.lastChild?r.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=r,t}getAll(t){const n=this,o=[];for(let r=n.firstChild;r;r=Md(r,n))r.name===t&&o.push(r);return o}children(){const t=[];for(let n=this.firstChild;n;n=n.next)t.push(n);return t}empty(){const t=this;if(t.firstChild){const n=[];for(let r=t.firstChild;r;r=Md(r,t))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},o){var r;const s=this;let a=s.firstChild;if(py(s))return!1;if(a)do{if(a.type===1){if(a.attr("data-mce-bogus"))continue;if(t[a.name]||py(a))return!1}if(a.type===8||a.type===3&&!ZT(a)||a.type===3&&a.parent&&n[a.parent.name]&&li((r=a.value)!==null&&r!==void 0?r:"")||o&&o(a))return!1}while(a=Md(a,s));return!0}walk(t){return Md(this,null,t)}}const eD=k.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),gy=e=>we(e.nodeValue)&&e.nodeValue.includes(Cn),hy=e=>(e.length===0?"":`${We(e,(t=>`[${t}]`)).join(",")},`)+'[data-mce-bogus="all"]',by=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,(t=>gy(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP)),vy=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,(t=>{if(gy(t)){const n=t.parentNode;return n&&Fe(eD,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP})),tD=e=>by(e).nextNode()!==null,nD=e=>vy(e).nextNode()!==null,oD=(e,t)=>t.querySelector(hy(e))!==null,rD=(e,t)=>{K(((n,o)=>o.querySelectorAll(hy(n)))(e,t),(n=>{const o=E.fromDom(n);ft(o,"data-mce-bogus")==="all"?ct(o):K(e,(r=>{pt(o,r)&&rt(o,r)}))}))},yy=e=>{let t=e.nextNode();for(;t!==null;)t.nodeValue=null,t=e.nextNode()},sD=In(yy,by),aD=In(yy,vy),Cy=(e,t)=>{const n=[{condition:ye(oD,t),action:ye(rD,t)},{condition:tD,action:sD},{condition:nD,action:aD}];let o=e,r=!1;return K(n,(({condition:s,action:a})=>{s(o)&&(r||(o=e.cloneNode(!0),r=!0),a(o))})),o},xy=e=>{const t=Dn(e,"[data-mce-bogus]");K(t,(n=>{ft(n,"data-mce-bogus")==="all"?ct(n):Ss(n)?(un(n,E.fromText(wr)),ct(n)):Yt(n)}))},wy=e=>{const t=Dn(e,"input");K(t,(n=>{rt(n,"name")}))},iD=(e,t,n)=>{let o;return o=t.format==="raw"?k.trim(vo(Cy(n,e.serializer.getTempAttrs()).innerHTML)):t.format==="text"?((r,s)=>{const a=r.getDoc(),i=Jn(E.fromDom(r.getBody())),l=E.fromTag("div",a);Te(l,"data-mce-bogus","all"),Wc(l,{position:"fixed",left:"-9999999px",top:"0"}),ia(l,s.innerHTML),xy(l),wy(l);const c=(m=>bs(m)?m:E.fromDom(Nn(m).dom.body))(i);X(c,l);const d=vo(l.dom.innerText);return ct(l),d})(e,n):t.format==="tree"?e.serializer.serialize(n,t):((r,s)=>{const a=En(r),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${a}>[\r
]*|<br \\/>[\r
]*)$`);return s.replace(i,"")})(e,e.serializer.serialize(n,t)),t.format!=="text"&&!ld(E.fromDom(n))&&we(o)?k.trim(o):o},Sy=k.makeMap,Ey=e=>{const t=[],n=(e=e||{}).indent,o=Sy(e.indent_before||""),r=Sy(e.indent_after||""),s=pa.getEncodeFunc(e.entity_encoding||"raw",e.entities),a=e.element_format!=="xhtml";return{start:(i,l,c)=>{if(n&&o[i]&&t.length>0){const d=t[t.length-1];d.length>0&&d!==`
`&&t.push(`
`)}if(t.push("<",i),l)for(let d=0,m=l.length;d<m;d++){const f=l[d];t.push(" ",f.name,'="',s(f.value,!0),'"')}if(t[t.length]=!c||a?">":" />",c&&n&&r[i]&&t.length>0){const d=t[t.length-1];d.length>0&&d!==`
`&&t.push(`
`)}},end:i=>{let l;t.push("</",i,">"),n&&r[i]&&t.length>0&&(l=t[t.length-1],l.length>0&&l!==`
`&&t.push(`
`))},text:(i,l)=>{i.length>0&&(t[t.length]=l?i:s(i))},cdata:i=>{t.push("<![CDATA[",i,"]]>")},comment:i=>{t.push("<!--",i,"-->")},pi:(i,l)=>{l?t.push("<?",i," ",s(l),"?>"):t.push("<?",i,"?>"),n&&t.push(`
`)},doctype:i=>{t.push("<!DOCTYPE",i,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Ds=(e={},t=ws())=>{const n=Ey(e);return e.validate=!("validate"in e)||e.validate,{serialize:o=>{const r=e.validate,s={3:i=>{var l;n.text((l=i.value)!==null&&l!==void 0?l:"",i.raw)},8:i=>{var l;n.comment((l=i.value)!==null&&l!==void 0?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype((l=i.value)!==null&&l!==void 0?l:"")},4:i=>{var l;n.cdata((l=i.value)!==null&&l!==void 0?l:"")},11:i=>{let l=i;if(l=l.firstChild)do a(l);while(l=l.next)}};n.reset();const a=i=>{var l;const c=s[i.type];if(c)c(i);else{const d=i.name,m=d in t.getVoidElements();let f=i.attributes;if(r&&f&&f.length>1){const g=[];g.map={};const h=t.getElementRule(i.name);if(h){for(let b=0,v=h.attributesOrder.length;b<v;b++){const y=h.attributesOrder[b];if(y in f.map){const S=f.map[y];g.map[y]=S,g.push({name:y,value:S})}}for(let b=0,v=f.length;b<v;b++){const y=f[b].name;if(!(y in g.map)){const S=f.map[y];g.map[y]=S,g.push({name:y,value:S})}}f=g}}if(n.start(d,f,m),ua(d))we(i.value)&&n.text(i.value,!0),n.end(d);else if(!m){let g=i.firstChild;if(g){d!=="pre"&&d!=="textarea"||g.type!==3||((l=g.value)===null||l===void 0?void 0:l[0])!==`
`||n.text(`
`,!0);do a(g);while(g=g.next)}n.end(d)}}};return o.type!==1||e.inner?o.type===3?s[3](o):s[11](o):a(o),n.getContent()}}},ky=new Set;K(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],(e=>{ky.add(e)}));const _y=new Set;K(["background-color"],(e=>{_y.add(e)}));const Ny=["font","text-decoration","text-emphasis"],Ti=(e,t)=>pn(((n,o)=>n.parseStyle(n.getAttrib(o,"style")))(e,t)),Ay=(e,t)=>Ct(Ti(e,t),(n=>(o=>ky.has(o))(n))),Ty=(e,t,n)=>_.from(n.container()).filter(se).exists((o=>{const r=e?0:-1;return t(o.data.charAt(n.offset()+r))})),zf=ye(Ty,!0,Sa),Uf=ye(Ty,!1,Sa),lD=e=>{const t=e.container();return se(t)&&(t.data.length===0||cd(t.data)&&_i.isBookmarkNode(t.parentNode))},Rs=(e,t)=>n=>sf(e?0:-1,n).filter(t).isSome(),Dy=e=>n0(e)&&nr(E.fromDom(e),"display")==="block",Ry=e=>Lt(e)&&!(t=>Ce(t)&&t.getAttribute("data-mce-bogus")==="all")(e),cD=Rs(!0,Dy),dD=Rs(!1,Dy),$l=Rs(!0,ar),ql=Rs(!1,ar),Oy=Rs(!0,Ar),Hf=Rs(!1,Ar),Os=Rs(!0,Ry),Bs=Rs(!1,Ry),By=(e,t)=>((n,o,r)=>tt(o,n)?on(n,(s=>r(s)||pe(s,o))).slice(0,-1):[])(e,t,_t),es=(e,t)=>[e].concat(By(e,t)),$f=(e,t,n)=>pv(e,t,n,lD),Py=(e,t,n)=>qt(es(E.fromDom(t.container()),e),(o=>r=>o.isBlock(Me(r)))(n)),Ly=(e,t,n,o)=>$f(e,t.dom,n).forall((r=>Py(t,n,o).fold((()=>!Dr(r,n,t.dom)),(s=>!Dr(r,n,t.dom)&&tt(s,E.fromDom(r.container())))))),My=(e,t,n,o)=>Py(t,n,o).fold((()=>$f(e,t.dom,n).forall((r=>!Dr(r,n,t.dom)))),(r=>$f(e,r.dom,n).isNone())),qf=ye(My,!1),Iy=ye(My,!0),uD=ye(Ly,!1),mD=ye(Ly,!0),fD=e=>Cd(e).exists(Ss),Id=(e,t,n,o)=>{const r=Oe(es(E.fromDom(n.container()),t),(a=>o.isBlock(Me(a)))),s=sn(r).getOr(t);return Ro(e,s.dom,n).filter(fD)},Wf=(e,t,n)=>Cd(t).exists(Ss)||Id(!0,e,t,n).isSome(),Fd=(e,t,n)=>(o=>_.from(o.getNode(!0)).map(E.fromDom))(t).exists(Ss)||Id(!1,e,t,n).isSome(),Fy=ye(Id,!1),pD=ye(Id,!0),jy=e=>Y.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),zy=(e,t,n)=>{const o=Oe(es(E.fromDom(t.container()),e),(r=>n.isBlock(Me(r))));return sn(o).getOr(e)},Uy=(e,t,n)=>jy(t)?Uf(t):Uf(t)||lo(zy(e,t,n).dom,t).exists(Uf),Hy=(e,t,n)=>jy(t)?zf(t):zf(t)||eo(zy(e,t,n).dom,t).exists(zf),Vf=e=>Cd(e).bind((t=>or(t,ot))).exists((t=>(n=>Se(["pre","pre-wrap"],n))(nr(t,"white-space")))),$y=(e,t)=>n=>{return o=new ln(n,e)[t](),ee(o)&&Lt(o)&&tv(o);var o},qy=(e,t,n)=>!Vf(t)&&(((o,r,s)=>((a,i)=>lo(a.dom,i).isNone())(o,r)||((a,i)=>eo(a.dom,i).isNone())(o,r)||qf(o,r,s)||Iy(o,r,s)||Fd(o,r,s)||Wf(o,r,s))(e,t,n)||Uy(e,t,n)||Hy(e,t,n)),Wl=(e,t,n)=>!Vf(t)&&(qf(e,t,n)||uD(e,t,n)||Fd(e,t,n)||Uy(e,t,n)||((o,r)=>{const s=lo(o.dom,r).getOr(r),a=$y(o.dom,"prev");return r.isAtStart()&&(a(r.container())||a(s.container()))})(e,t)),Vl=(e,t,n)=>!Vf(t)&&(Iy(e,t,n)||mD(e,t,n)||Wf(e,t,n)||Hy(e,t,n)||((o,r)=>{const s=eo(o.dom,r).getOr(r),a=$y(o.dom,"next");return r.isAtEnd()&&(a(r.container())||a(s.container()))})(e,t)),Kf=(e,t,n)=>Wl(e,t,n)||Vl(e,(o=>{const r=o.container(),s=o.offset();return se(r)&&s<r.data.length?Y(r,s+1):o})(t),n),Wy=(e,t)=>Ed(e.charAt(t)),Vy=(e,t)=>Sa(e.charAt(t)),Ky=(e,t,n,o)=>{const r=t.data,s=Y(t,0);return n||!Wy(r,0)||Kf(e,s,o)?!!(n&&Vy(r,0)&&Wl(e,s,o))&&(t.data=Ft+r.slice(1),!0):(t.data=" "+r.slice(1),!0)},Xy=(e,t,n,o)=>{const r=t.data,s=Y(t,r.length-1);return n||!Wy(r,r.length-1)||Kf(e,s,o)?!!(n&&Vy(r,r.length-1)&&Vl(e,s,o))&&(t.data=r.slice(0,-1)+Ft,!0):(t.data=r.slice(0,-1)+" ",!0)},gD=(e,t,n)=>{const o=t.container();if(!se(o))return _.none();if((r=>{const s=r.container();return se(s)&&bn(s.data,Ft)})(t)){const r=Ky(e,o,!1,n)||(s=>{const a=s.data,i=(l=>{const c=l.split("");return We(c,((d,m)=>Ed(d)&&m>0&&m<c.length-1&&ff(c[m-1])&&ff(c[m+1])?" ":d)).join("")})(a);return i!==a&&(s.data=i,!0)})(o)||Xy(e,o,!1,n);return Kr(r,t)}if(Kf(e,t,n)){const r=Ky(e,o,!0,n)||Xy(e,o,!0,n);return Kr(r,t)}return _.none()},Yy=(e,t,n,o)=>{if(n===0)return;const r=E.fromDom(e),s=Nr(r,(c=>o.isBlock(Me(c)))).getOr(r),a=e.data.slice(t,t+n),i=t+n>=e.data.length&&Vl(s,Y(e,e.data.length),o),l=t===0&&Wl(s,Y(e,0),o);e.replaceData(t,n,e0(a,4,l,i))},jd=(e,t,n)=>{const o=e.data.slice(t),r=o.length-Ju(o).length;Yy(e,t,r,n)},Xf=(e,t,n)=>{const o=e.data.slice(0,t),r=o.length-Nc(o).length;Yy(e,t-r,r,n)},Yf=(e,t,n,o,r=!0)=>{const s=Nc(e.data).length,a=r?e:t,i=r?t:e;return r?a.appendData(i.data):a.insertData(0,i.data),ct(E.fromDom(i)),o&&jd(a,s,n),a},hD=(e,t)=>((n,o)=>{const r=n.container(),s=n.offset();return!Y.isTextPosition(n)&&r===o.parentNode&&s>Y.before(o).offset()})(t,e)?Y(t.container(),t.offset()-1):t,Gy=e=>{return cr(e.previousSibling)?_.some((t=e.previousSibling,se(t)?Y(t,t.data.length):Y.after(t))):e.previousSibling?Yo(e.previousSibling):_.none();var t},Qy=e=>{return cr(e.nextSibling)?_.some((t=e.nextSibling,se(t)?Y(t,0):Y.before(t))):e.nextSibling?Un(e.nextSibling):_.none();var t},bD=(e,t,n)=>((o,r,s)=>o?((a,i)=>Qy(i).orThunk((()=>Gy(i))).orThunk((()=>((l,c)=>eo(l,Y.after(c)).orThunk((()=>lo(l,Y.before(c)))))(a,i))))(r,s):((a,i)=>Gy(i).orThunk((()=>Qy(i))).orThunk((()=>((l,c)=>_.from(c.previousSibling?c.previousSibling:c.parentNode).bind((d=>lo(l,Y.before(d)))).orThunk((()=>eo(l,Y.after(c)))))(a,i))))(r,s))(e,t,n).map(ye(hD,n)),Jy=(e,t,n)=>{n.fold((()=>{e.focus()}),(o=>{e.selection.setRng(o.toRange(),t)}))},vD=(e,t)=>t&&Fe(e.schema.getBlockElements(),Me(t)),Ps=(e,t,n,o=!0,r=!1)=>{const s=bD(t,e.getBody(),n.dom),a=Nr(n,ye(vD,e),(i=e.getBody(),c=>c.dom===i));var i;const l=((c,d,m,f)=>{const g=Xt(c).filter(St),h=Qn(c).filter(St);return ct(c),(b=g,v=h,y=d,S=(N,D,T)=>{const R=N.dom,P=D.dom,L=R.data.length;return Yf(R,P,m,f),T.container()===P?Y(R,L):T},b.isSome()&&v.isSome()&&y.isSome()?_.some(S(b.getOrDie(),v.getOrDie(),y.getOrDie())):_.none()).orThunk((()=>(f&&(g.each((N=>Xf(N.dom,N.dom.length,m))),h.each((N=>jd(N.dom,0,m)))),d)));var b,v,y,S})(n,s,e.schema,((c,d)=>Fe(c.schema.getTextInlineElements(),Me(d)))(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):a.bind((c=>((d,m,f)=>{if(jn(d,m)){const g=E.fromHtml('<br data-mce-bogus="1">');return f?K(ht(m),(h=>{Nf(h)||ct(h)})):en(m),X(m,g),_.some(Y.before(g.dom))}return _.none()})(e.schema,c,r))).fold((()=>{o&&Jy(e,t,l)}),(c=>{o&&Jy(e,t,_.some(c))}))},yD=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,_a=(e,t)=>J(E.fromDom(t),gA(e))&&!ma(e.schema,t)&&e.dom.isEditable(t),Zy=e=>{var t;return Nt.DOM.getStyle(e,"direction",!0)==="rtl"||(n=>yD.test(n))((t=e.textContent)!==null&&t!==void 0?t:"")},Ls=(e,t,n)=>{const o=((r,s,a)=>Oe(Nt.DOM.getParents(a.container(),"*",s),r))(e,t,n);return _.from(o[o.length-1])},Mo=(e,t)=>{const n=t.container(),o=t.offset();return e?ks(n)?se(n.nextSibling)?Y(n.nextSibling,0):Y.after(n):Fm(t)?Y(n,o+1):t:ks(n)?se(n.previousSibling)?Y(n.previousSibling,n.previousSibling.data.length):Y.before(n):jm(t)?Y(n,o-1):t},eC=ye(Mo,!0),tC=ye(Mo,!1),nC=(e,t)=>{const n=o=>o.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},zd=e=>nC(e,"Delete"),oC=e=>nC(e,"ForwardDelete"),CD=e=>$0(e)||mi(e),Ud=(e,t)=>tt(e,t)?or(t,CD,(n=>o=>ds(vn(o),n,pe))(e)):_.none(),Gf=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},rC=(e,t,n)=>Ut(Un(n),Yo(n),((o,r)=>{const s=Mo(!0,o),a=Mo(!1,r),i=Mo(!1,t);return e?eo(n,i).exists((l=>l.isEqual(a)&&t.isEqual(s))):lo(n,i).exists((l=>l.isEqual(s)&&t.isEqual(a)))})).getOr(!0),sC=e=>(wt(e)?Xt(e):Vn(e)).bind(sC).orThunk((()=>_.some(e))),aC=(e,t,n,o=!0)=>{var r;t.deleteContents();const s=sC(n).getOr(n),a=E.fromDom((r=e.dom.getParent(s.dom,e.dom.isBlock))!==null&&r!==void 0?r:n.dom);if(a.dom===e.getBody()?Gf(e,o):jn(e.schema,a,{checkRootAsContent:!1})&&(Es(a),o&&e.selection.setCursorLocation(a.dom,0)),!pe(n,a)){const i=ds(vn(a),n)?[]:an(a);K(i.concat(ht(n)),(l=>{pe(l,a)||tt(l,a)||!jn(e.schema,l)||ct(l)}))}},Qf=e=>Dn(e,"td,th"),iC=(e,t)=>jl(E.fromDom(e),t),Jf=(e,t)=>({start:e,end:t}),Kl=ho([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Hd=(e,t)=>Cs(E.fromDom(e),"td,th",t),lC=e=>!pe(e.start,e.end),cC=(e,t)=>jl(e.start,t).bind((n=>jl(e.end,t).bind((o=>Kr(pe(n,o),n))))),Zf=e=>t=>cC(t,e).map((n=>((o,r,s)=>({rng:o,table:r,cells:s}))(t,n,Qf(n)))),dC=(e,t,n,o)=>{if(n.collapsed||!e.forall(lC))return _.none();if(t.isSameTable){const r=e.bind(Zf(o));return _.some({start:r,end:r})}{const r=Hd(n.startContainer,o),s=Hd(n.endContainer,o),a=r.bind((l=>c=>jl(c,l).bind((d=>ro(Qf(d)).map((m=>Jf(c,m))))))(o)).bind(Zf(o)),i=s.bind((l=>c=>jl(c,l).bind((d=>sn(Qf(d)).map((m=>Jf(m,c))))))(o)).bind(Zf(o));return _.some({start:a,end:i})}},uC=(e,t)=>qs(e,(n=>pe(n,t))),ep=e=>Ut(uC(e.cells,e.rng.start),uC(e.cells,e.rng.end),((t,n)=>e.cells.slice(t,n+1))),mC=(e,t)=>{const{startTable:n,endTable:o}=t,r=e.cloneRange();return n.each((s=>r.setStartAfter(s.dom))),o.each((s=>r.setEndBefore(s.dom))),r},xD=(e,t)=>{const n=(s=>a=>pe(s,a))(e),o=((s,a)=>{const i=Hd(s.startContainer,a),l=Hd(s.endContainer,a);return Ut(i,l,Jf)})(t,n),r=((s,a)=>{const i=iC(s.startContainer,a),l=iC(s.endContainer,a),c=i.isSome(),d=l.isSome(),m=Ut(i,l,pe).getOr(!1);return(f=>Ut(f.startTable,f.endTable,((g,h)=>{const b=lm(g,(y=>pe(y,h))),v=lm(h,(y=>pe(y,g)));return b||v?{...f,startTable:b?_.none():f.startTable,endTable:v?_.none():f.endTable,isSameTable:!1,isMultiTable:!1}:f})).getOr(f))({startTable:i,endTable:l,isStartInTable:c,isEndInTable:d,isSameTable:m,isMultiTable:!m&&c&&d})})(t,n);return((s,a,i)=>s.exists((l=>((c,d)=>!lC(c)&&cC(c,d).exists((m=>{const f=m.dom.rows;return f.length===1&&f[0].cells.length===1})))(l,i)&&hf(l.start,a))))(o,t,n)?o.map((s=>Kl.singleCellTable(t,s.start))):r.isMultiTable?((s,a,i,l)=>dC(s,a,i,l).bind((({start:c,end:d})=>{const m=c.bind(ep).getOr([]),f=d.bind(ep).getOr([]);if(m.length>0&&f.length>0){const g=mC(i,a);return _.some(Kl.multiTable(m,f,g))}return _.none()})))(o,r,t,n):((s,a,i,l)=>dC(s,a,i,l).bind((({start:c,end:d})=>c.or(d))).bind((c=>{const{isSameTable:d}=a,m=ep(c).getOr([]);if(d&&c.cells.length===m.length)return _.some(Kl.fullTable(c.table));if(m.length>0){if(d)return _.some(Kl.partialTable(m,_.none()));{const f=mC(i,a);return _.some(Kl.partialTable(m,_.some({...a,rng:f})))}}return _.none()})))(o,r,t,n)},fC=e=>K(e,(t=>{rt(t,"contenteditable"),Es(t)})),tp=(e,t,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(t.dom.lastChild)):(r.setStartBefore(t.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),np(e,r,t,!1).each((s=>s()))},pC=e=>{const t=Si(e),n=E.fromDom(e.selection.getNode());nd(n.dom)&&jn(e.schema,n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&Ct(t,(o=>pe(o,n)))&&Te(n,"data-mce-selected","1")},gC=(e,t,n)=>_.some((()=>{const o=e.selection.getRng(),r=n.bind((({rng:s,isStartInTable:a})=>{const i=((c,d)=>_.from(c.dom.getParent(d,c.dom.isBlock)).map(E.fromDom))(e,a?s.endContainer:s.startContainer);s.deleteContents(),((c,d,m)=>{m.each((f=>{d?ct(f):(Es(f),c.selection.setCursorLocation(f.dom,0))}))})(e,a,i.filter(ye(jn,e.schema)));const l=a?t[0]:t[t.length-1];return tp(e,l,o,a),jn(e.schema,l)?_.none():_.some(a?t.slice(1):t.slice(0,-1))})).getOr(t);fC(r),pC(e)})),wD=(e,t,n,o)=>_.some((()=>{const r=e.selection.getRng(),s=t[0],a=n[n.length-1];tp(e,s,r,!0),tp(e,a,r,!1);const i=jn(e.schema,s)?t:t.slice(1),l=jn(e.schema,a)?n:n.slice(0,-1);fC(i.concat(l)),o.deleteContents(),pC(e)})),np=(e,t,n,o=!0)=>_.some((()=>{aC(e,t,n,o)})),SD=(e,t)=>_.some((()=>Ps(e,!1,t))),hC=(e,t)=>qt(es(t,e),_l),op=(e,t)=>qt(es(t,e),Sn("caption")),$d=(e,t)=>_.some((()=>{Es(t),e.selection.setCursorLocation(t.dom,0)})),bC=(e,t)=>e?Oy(t):Hf(t),ED=(e,t,n)=>{const o=E.fromDom(e.getBody());return op(o,n).fold((()=>((r,s,a,i)=>{const l=Y.fromRangeStart(r.selection.getRng());return hC(a,i).bind((c=>jn(r.schema,c,{checkRootAsContent:!1})?$d(r,c):((d,m,f,g,h)=>xi(f,d.getBody(),h).bind((b=>hC(m,E.fromDom(b.getNode())).bind((v=>pe(v,g)?_.none():_.some(ke))))))(r,a,s,c,l)))})(e,t,o,n).orThunk((()=>Kr(((r,s)=>{const a=Y.fromRangeStart(r.selection.getRng());return bC(s,a)||Ro(s,r.getBody(),a).exists((i=>bC(s,i)))})(e,t),ke)))),(r=>((s,a,i,l)=>{const c=Y.fromRangeStart(s.selection.getRng());return jn(s.schema,l)?$d(s,l):((d,m,f,g,h)=>xi(f,d.getBody(),h).fold((()=>_.some(ke)),(b=>((v,y,S,N)=>Un(v.dom).bind((D=>Yo(v.dom).map((T=>y?S.isEqual(D)&&N.isEqual(T):S.isEqual(T)&&N.isEqual(D))))).getOr(!0))(g,f,h,b)?((v,y)=>$d(v,y))(d,g):((v,y,S)=>op(v,E.fromDom(S.getNode())).fold((()=>_.some(ke)),(N=>Kr(!pe(N,y),ke))))(m,g,b))))(s,i,a,l,c)})(e,t,o,r)))},rp=(e,t)=>{const n=E.fromDom(e.selection.getStart(!0)),o=Si(e);return e.selection.isCollapsed()&&o.length===0?ED(e,t,n):((r,s,a)=>{const i=E.fromDom(r.getBody()),l=r.selection.getRng();return a.length!==0?gC(r,a,_.none()):((c,d,m,f)=>op(d,f).fold((()=>((g,h,b)=>xD(h,b).bind((v=>v.fold(ye(np,g),ye(SD,g),ye(gC,g),ye(wD,g)))))(c,d,m)),(g=>((h,b)=>$d(h,b))(c,g))))(r,i,l,s)})(e,n,o)},Na=(e,t)=>{let n=t;for(;n&&n!==e;){if(To(n)||Lt(n))return n;n=n.parentNode}return null},kD=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],_D=k.each,sp=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),o=r=>Ct(kD,(s=>Jt(r,s)))||n.has(r);return{compare:(r,s)=>{if(r.nodeName!==s.nodeName||r.nodeType!==s.nodeType)return!1;const a=l=>{const c={};return _D(t.getAttribs(l),(d=>{const m=d.nodeName.toLowerCase();m==="style"||o(m)||(c[m]=t.getAttrib(l,m))})),c},i=(l,c)=>{for(const d in l)if(Fe(l,d)){const m=c[d];if(Mt(m)||l[d]!==m)return!1;delete c[d]}for(const d in c)if(Fe(c,d))return!1;return!0};return Ce(r)&&Ce(s)&&(!i(a(r),a(s))||!i(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(s,"style"))))?!1:!Bo(r)&&!Bo(s)},isAttributeInternal:o}},vC=(e,t)=>{if(se(e))return{container:e,offset:t};const n=Pr.getNode(e,t);return se(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&se(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&se(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},Xl=Nt.DOM,ND=()=>Xl.create("span",{"data-mce-type":"bookmark"}),yC=(e,t,n)=>{if(Ce(e)){const o=n();return e.hasChildNodes()?t===e.childNodes.length?e.appendChild(o):e.insertBefore(o,e.childNodes[t]):e.appendChild(o),{container:o,offset:0}}return{container:e,offset:t}},CC=(e,t)=>{if(Ce(e)&&ee(e.parentNode)){const n=e;t=(o=>{var r;let s=(r=o.parentNode)===null||r===void 0?void 0:r.firstChild,a=0;for(;s;){if(s===o)return a;Ce(s)&&s.getAttribute("data-mce-type")==="bookmark"||a++,s=s.nextSibling}return-1})(e),e=e.parentNode,Xl.remove(n),!e.hasChildNodes()&&Xl.isBlock(e)&&e.appendChild(Xl.create("br"))}return{container:e,offset:t}},xC=(e,t,n,o)=>{const r=Xl.createRng();return r.setStart(e,t),r.setEnd(n,o),(s=>{const a=s.cloneRange(),i=vC(s.startContainer,s.startOffset);a.setStart(i.container,i.offset);const l=vC(s.endContainer,s.endOffset);return a.setEnd(l.container,l.offset),a})(r)},ts=(e,t=ND)=>{const{container:n,offset:o}=yC(e.startContainer,e.startOffset,t);if(e.collapsed)return{startContainer:n,startOffset:o};{const{container:r,offset:s}=yC(e.endContainer,e.endOffset,t);return{startContainer:n,startOffset:o,endContainer:r,endOffset:s}}},ns=e=>{const{container:t,offset:n}=CC(e.startContainer,e.startOffset);if(Mt(e.endContainer)||Mt(e.endOffset))return xC(t,n,t,n);{const{container:o,offset:r}=CC(e.endContainer,e.endOffset);return xC(t,n,o,r)}},wC=(e,t,n,o)=>{if(k.each(n.styles,((r,s)=>{e.setStyle(t,s,Ts(r,o))})),n.styles){const r=e.getAttrib(t,"style");r&&e.setAttrib(t,"data-mce-style",r)}},Di=(e,t,n,o,r)=>{const s=e.dom;bt(n.onformat)&&n.onformat(t,n,o,r),wC(s,t,n,o),k.each(n.attributes,((a,i)=>{s.setAttrib(t,i,Ts(a,o))})),k.each(n.classes,(a=>{const i=Ts(a,o);s.hasClass(t,i)||s.addClass(t,i)}))},ap=Sf,SC=(e,t,n)=>{const o=e.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const s=o[r];if(Po(s)&&s.inherit===!1&&e.dom.is(t,s.selector))return!0}return!1},ip=(e,t,n,o,r)=>{const s=e.dom.getRoot();if(t===s)return!1;const a=e.dom.getParent(t,(i=>!!SC(e,i,n)||i.parentNode===s||!!Io(e,i,n,o,!0)));return!!Io(e,a,n,o,r)},qd=(e,t,n)=>!(!mn(n)||!ap(t,n.inline))||!(!Br(n)||!ap(t,n.block))||!!Po(n)&&Ce(t)&&e.is(t,n.selector),EC=(e,t,n,o,r,s)=>{const a=n[o],i=o==="attributes";if(bt(n.onmatch))return n.onmatch(t,n,o);if(a){if(Tc(a)){for(let l=0;l<a.length;l++)if(i?e.getAttrib(t,a[l]):_d(e,t,a[l]))return!0}else for(const l in a)if(Fe(a,l)){const c=i?e.getAttrib(t,l):_d(e,t,l),d=Ts(a[l],s),m=kt(c)||ms(c);if(m&&kt(d))continue;if(r&&m&&!n.exact||(!r||n.exact)&&!ap(c,Ef(d,l)))return!1}}return!0},Io=(e,t,n,o,r)=>{const s=e.formatter.get(n),a=e.dom;if(s&&Ce(t))for(let i=0;i<s.length;i++){const l=s[i];if(qd(e.dom,t,l)&&EC(a,t,l,"attributes",r,o)&&EC(a,t,l,"styles",r,o)){const c=l.classes;if(c){for(let d=0;d<c.length;d++)if(!e.dom.hasClass(t,Ts(c[d],o)))return}return l}}},lp=(e,t,n,o,r)=>{if(o)return ip(e,o,t,n,r);if(o=e.selection.getNode(),ip(e,o,t,n,r))return!0;const s=e.selection.getStart();return!(s===o||!ip(e,s,t,n,r))},Yl=Cn,kC=e=>{if(e){const t=new ln(e,e);for(let n=t.current();n;n=t.next())if(se(n))return n}return null},cp=e=>{const t=E.fromTag("span");return Ne(t,{id:uf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&X(t,E.fromText(Yl)),t},dp=(e,t,n)=>{const o=e.dom,r=e.selection;if(Tv(t))Ps(e,!1,E.fromDom(t),n,!0);else{const s=r.getRng(),a=o.getParent(t,o.isBlock),i=s.startContainer,l=s.startOffset,c=s.endContainer,d=s.endOffset,m=(f=>{const g=kC(f);return g&&g.data.charAt(0)===Yl&&g.deleteData(0,1),g})(t);o.remove(t,!0),i===m&&l>0&&s.setStart(m,l-1),c===m&&d>0&&s.setEnd(m,d-1),a&&o.isEmpty(a)&&Es(E.fromDom(a)),r.setRng(s)}},up=(e,t,n)=>{const o=e.dom,r=e.selection;if(t)dp(e,t,n);else if(!(t=wa(e.getBody(),r.getStart())))for(;t=o.get(uf);)dp(e,t,n)},_C=(e,t)=>(e.appendChild(t),t),NC=(e,t)=>{var n;const o=Wr(e,((s,a)=>_C(s,a.cloneNode(!1))),t),r=(n=o.ownerDocument)!==null&&n!==void 0?n:document;return _C(o,r.createTextNode(Yl))},AC=e=>rm(e,ri(e).replace(new RegExp(`${Ft}$`)," ")),TC=(e,t)=>{const n=()=>{t===null||e.dom.isEmpty(t)||Xt(E.fromDom(t)).each((o=>{St(o)?AC(o):Xc(o,(r=>St(r))).each((r=>{St(r)&&AC(r)}))}))};e.once("input",(o=>{o.data&&!Sa(o.data)&&(o.isComposing?e.once("compositionend",(()=>{n()})):n())}))},AD=(e,t,n,o)=>{const r=e.dom,s=e.selection;let a=!1;const i=e.formatter.get(t);if(!i)return;const l=s.getRng(),c=l.startContainer,d=l.startOffset;let m=c;se(c)&&(d!==c.data.length&&(a=!0),m=m.parentNode);const f=[];let g;for(;m;){if(Io(e,m,t,n,o)){g=m;break}m.nextSibling&&(a=!0),f.push(m),m=m.parentNode}if(g)if(a){const h=s.getBookmark();l.collapse(!0);let b=Ea(r,l,i,{includeTrailingSpace:!0});b=Ld(b),e.formatter.remove(t,n,b,o),s.moveToBookmark(h)}else{const h=wa(e.getBody(),g),b=ee(h)?r.getParents(g.parentNode,zt,h):[],v=cp(!1).dom;((N,D,T)=>{var R,P;const L=N.dom,F=L.getParent(T,ye(xf,N.schema));F&&L.isEmpty(F)?(R=T.parentNode)===null||R===void 0||R.replaceChild(D,T):((W=>{const O=Dn(W,"br"),I=Oe((H=>{const te=[];let ne=H.dom;for(;ne;)te.push(E.fromDom(ne)),ne=ne.lastChild;return te})(W).slice(-1),Ss);O.length===I.length&&K(I,ct)})(E.fromDom(T)),L.isEmpty(T)?(P=T.parentNode)===null||P===void 0||P.replaceChild(D,T):L.insertAfter(D,T))})(e,v,h??g);const y=((N,D,T,R,P,L)=>{const F=N.formatter,W=N.dom,O=Oe(pn(F.get()),(H=>H!==R&&!bn(H,"removeformat"))),I=((H,te,ne)=>Qt(ne,((ae,Ae)=>{const $e=((Be,Pe)=>kf(Be,Pe,(ce=>{const Ee=j=>bt(j)||j.length>1&&j.charAt(0)==="%";return Ct(["styles","attributes"],(j=>Bt(ce,j).exists((z=>{const G=re(z)?z:Ha(z);return Ct(G,Ee)}))))})))(H,Ae);return H.formatter.matchNode(te,Ae,{},$e)?ae.concat([Ae]):ae}),[]))(N,T,O);if(Oe(I,(H=>!((te,ne,ae)=>{const Ae=["inline","block","selector","attributes","styles","classes"],$e=Be=>er(Be,((Pe,ce)=>Ct(Ae,(Ee=>Ee===ce))));return kf(te,ne,(Be=>{const Pe=$e(Be);return kf(te,ae,(ce=>{const Ee=$e(ce);return((j,z,G=Gt)=>it(G).eq(j,z))(Pe,Ee)}))}))})(N,H,R))).length>0){const H=T.cloneNode(!1);return W.add(D,H),F.remove(R,P,H,L),W.remove(H),_.some(H)}return _.none()})(e,v,g,t,n,o),S=NC([...f,...y.toArray(),...b],v);h&&dp(e,h,ee(h)),s.setCursorLocation(S,1),TC(e,v),r.isEmpty(g)&&r.remove(g)}},DC=e=>{const t=cp(!1),n=NC(e,t.dom);return{caretContainer:t,caretPosition:Y(n,0)}},RC=(e,t)=>{const{caretContainer:n,caretPosition:o}=DC(t);return un(E.fromDom(e),n),ct(E.fromDom(e)),o},OC=(e,t)=>{if(Oo(t.dom))return!1;const n=e.schema.getTextInlineElements();return Fe(n,Me(t))&&!Oo(t.dom)&&!da(t.dom)},BC=["fontWeight","fontStyle","color","fontSize","fontFamily"],PC=(e,t)=>{const n=e.get(t);return re(n)?qt(n,(o=>mn(o)&&o.inline==="span"&&(r=>Ue(r.styles)&&Ct(pn(r.styles),(s=>Se(BC,s))))(o))):_.none()},LC=(e,t)=>lo(t,Y.fromRangeStart(e)).isNone(),MC=(e,t)=>eo(t,Y.fromRangeEnd(e)).exists((n=>!$t(n.getNode())||eo(t,n).isSome()))===!1,IC=e=>t=>iN(t)&&e.isEditable(t),FC=e=>Oe(e.getSelectedBlocks(),IC(e.dom)),mp=k.each,fp=e=>Ce(e)&&!Bo(e)&&!Oo(e)&&!da(e),jC=(e,t)=>{for(let n=e;n;n=n[t]){if(se(n)&&Eo(n.data))return e;if(Ce(n)&&!Bo(n))return n}return e},zC=(e,t,n)=>{const o=sp(e),r=rr(t)&&e.dom.isEditable(t),s=rr(n)&&e.dom.isEditable(n);if(r&&s){const a=jC(t,"previousSibling"),i=jC(n,"nextSibling");if(o.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const c=l;l=l.nextSibling,a.appendChild(c)}return e.dom.remove(i),k.each(k.grep(i.childNodes),(l=>{a.appendChild(l)})),a}}return n},UC=(e,t,n,o)=>{var r;if(o&&t.merge_siblings!==!1){const s=(r=zC(e,_v(o),o))!==null&&r!==void 0?r:o;zC(e,s,_v(s,!0))}},pp=(e,t,n)=>{mp(e.childNodes,(o=>{fp(o)&&(t(o)&&n(o),o.hasChildNodes()&&pp(o,t,n))}))},HC=(e,t)=>n=>!(!n||!_d(e,n,t)),$C=(e,t,n)=>o=>{e.setStyle(o,t,n),o.getAttribute("style")===""&&o.removeAttribute("style"),((r,s)=>{s.nodeName==="SPAN"&&r.getAttribs(s).length===0&&r.remove(s,!0)})(e,o)},Aa=ho([{keep:[]},{rename:["name"]},{removed:[]}]),TD=/^(src|href|style)$/,gp=k.each,Wd=Sf,qC=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),WC=(e,t,n)=>{let o=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"];if(Ce(o)){const s=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>s?s:r]}return se(o)&&n&&r>=o.data.length&&(o=new ln(o,e.getBody()).next()||o),se(o)&&!n&&r===0&&(o=new ln(o,e.getBody()).prev()||o),o},VC=(e,t)=>{const n=t?"firstChild":"lastChild",o=e[n];return(r=>/^(TR|TH|TD)$/.test(r.nodeName))(e)&&o?e.nodeName==="TR"&&o[n]||o:e},hp=(e,t,n,o)=>{var r;const s=e.create(n,o);return(r=t.parentNode)===null||r===void 0||r.insertBefore(s,t),s.appendChild(t),s},KC=(e,t,n,o,r)=>{const s=E.fromDom(t),a=E.fromDom(e.create(o,r)),i=n?st(s):Fn(s);return De(a,i),n?(un(s,a),q(a,s)):(M(s,a),X(a,s)),a.dom},XC=(e,t,n)=>{const o=t.parentNode;let r;const s=e.dom,a=En(e);Br(n)&&o===s.getRoot()&&(n.list_block&&Wd(t,n.list_block)||K(wn(t.childNodes),(i=>{Ei(e,a,i.nodeName.toLowerCase())?r?r.appendChild(i):(r=hp(s,i,a),s.setAttribs(r,vi(e))):r=null}))),(i=>Po(i)&&mn(i)&&ds(Bt(i,"mixed"),!0))(n)&&!Wd(n.inline,t)||s.remove(t,!0)},YC=(e,t,n)=>x(e)?{name:t,value:null}:{name:e,value:Ts(t,n)},GC=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},QC=(e,t,n,o,r)=>{let s=!1;gp(n.styles,((a,i)=>{const{name:l,value:c}=YC(i,a,o),d=Ef(c,l);(n.remove_similar||Ge(c)||!Ce(r)||Wd(_d(e,r,l),d))&&e.setStyle(t,l,""),s=!0})),s&&GC(e,t)},bp=(e,t,n,o,r)=>{const s=e.dom,a=sp(e),i=e.schema;if(mn(t)&&xm(i,t.inline)&&ma(i,o)&&o.parentElement===e.getBody())return XC(e,o,t),Aa.removed();if(!t.ceFalseOverride&&o&&s.getContentEditableParent(o)==="false"||o&&!qd(s,o,t)&&!((d,m)=>m.links&&d.nodeName==="A")(o,t))return Aa.keep();const l=o,c=t.preserve_attributes;if(mn(t)&&t.remove==="all"&&re(c)){const d=Oe(s.getAttribs(l),(m=>Se(c,m.name.toLowerCase())));if(s.removeAllAttribs(l),K(d,(m=>s.setAttrib(l,m.name,m.value))),d.length>0)return Aa.rename("span")}if(t.remove!=="all"){QC(s,l,t,n,r),gp(t.attributes,((m,f)=>{const{name:g,value:h}=YC(f,m,n);if(t.remove_similar||Ge(h)||!Ce(r)||Wd(s.getAttrib(r,g),h)){if(g==="class"){const b=s.getAttrib(l,g);if(b){let v="";if(K(b.split(/\s+/),(y=>{/mce\-\w+/.test(y)&&(v+=(v?" ":"")+y)})),v)return void s.setAttrib(l,g,v)}}if(TD.test(g)&&l.removeAttribute("data-mce-"+g),g==="style"&&sr(["li"])(l)&&s.getStyle(l,"list-style-type")==="none")return l.removeAttribute(g),void s.setStyle(l,"list-style-type","none");g==="class"&&l.removeAttribute("className"),l.removeAttribute(g)}})),gp(t.classes,(m=>{m=Ts(m,n),Ce(r)&&!s.hasClass(r,m)||s.removeClass(l,m)}));const d=s.getAttribs(l);for(let m=0;m<d.length;m++){const f=d[m].nodeName;if(!a.isAttributeInternal(f))return Aa.keep()}}return t.remove!=="none"?(XC(e,l,t),Aa.removed()):Aa.keep()},DD=(e,t,n,o)=>bp(e,t,n,o,o).fold(le(o),(r=>(e.dom.createFragment().appendChild(o),e.dom.rename(o,r))),le(null)),JC=(e,t,n,o,r)=>{(o||e.selection.isEditable())&&((s,a,i,l,c)=>{const d=s.formatter.get(a),m=d[0],f=s.dom,g=s.selection,h=N=>{const D=((T,R,P,L,F)=>{let W;return R.parentNode&&K(Nd(T.dom,R.parentNode).reverse(),(O=>{if(!W&&Ce(O)&&O.id!=="_start"&&O.id!=="_end"){const I=Io(T,O,P,L,F);I&&I.split!==!1&&(W=O)}})),W})(s,N,a,i,c);return((T,R,P,L,F,W,O,I)=>{var H,te;let ne,ae;const Ae=T.dom;if(P){const $e=P.parentNode;for(let Be=L.parentNode;Be&&Be!==$e;Be=Be.parentNode){let Pe=Ae.clone(Be,!1);for(let ce=0;ce<R.length&&(Pe=DD(T,R[ce],I,Pe),Pe!==null);ce++);Pe&&(ne&&Pe.appendChild(ne),ae||(ae=Pe),ne=Pe)}O.mixed&&Ae.isBlock(P)||(L=(H=Ae.split(P,L))!==null&&H!==void 0?H:L),ne&&ae&&((te=F.parentNode)===null||te===void 0||te.insertBefore(ne,F),ae.appendChild(F),mn(O)&&UC(T,O,0,ne))}return L})(s,d,D,N,N,0,m,i)},b=N=>Ct(d,(D=>Gl(s,D,i,N,N))),v=N=>{const D=wn(N.childNodes),T=b(N)||Ct(d,(P=>qd(f,N,P))),R=N.parentNode;if(!T&&ee(R)&&_f(m)&&b(R),m.deep&&D.length)for(let P=0;P<D.length;P++)v(D[P]);K(["underline","line-through","overline"],(P=>{Ce(N)&&s.dom.getStyle(N,"text-decoration")===P&&N.parentNode&&Av(f,N.parentNode)===P&&Gl(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:P}},void 0,N)}))},y=N=>{const D=f.get(N?"_start":"_end");if(D){let T=D[N?"firstChild":"lastChild"];return(R=>Bo(R)&&Ce(R)&&(R.id==="_start"||R.id==="_end"))(T)&&(T=T[N?"firstChild":"lastChild"]),se(T)&&T.data.length===0&&(T=N?D.previousSibling||D.nextSibling:D.nextSibling||D.previousSibling),f.remove(D,!0),T}return null},S=N=>{let D,T,R=Ea(f,N,d,{includeTrailingSpace:N.collapsed});if(m.split){if(R=Ld(R),D=WC(s,R,!0),T=WC(s,R),D!==T){if(D=VC(D,!0),T=VC(T,!1),qC(f,D,T)){const L=_.from(D.firstChild).getOr(D);return h(KC(f,L,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void y(!0)}if(qC(f,T,D)){const L=_.from(T.lastChild).getOr(T);return h(KC(f,L,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void y(!1)}D=hp(f,D,"span",{id:"_start","data-mce-type":"bookmark"}),T=hp(f,T,"span",{id:"_end","data-mce-type":"bookmark"});const P=f.createRng();P.setStartAfter(D),P.setEndBefore(T),Ul(f,P,(L=>{K(L,(F=>{Bo(F)||Bo(F.parentNode)||h(F)}))})),h(D),h(T),D=y(!0),T=y()}else D=T=h(D);R.startContainer=D.parentNode?D.parentNode:D,R.startOffset=f.nodeIndex(D),R.endContainer=T.parentNode?T.parentNode:T,R.endOffset=f.nodeIndex(T)+1}Ul(f,R,(P=>{K(P,v)}))};if(l){if(zl(l)){const N=f.createRng();N.setStartBefore(l),N.setEndAfter(l),S(N)}else S(l);Sb(s,a,l,i)}else g.isCollapsed()&&mn(m)&&!Si(s).length?AD(s,a,i,c):(kv(s,(()=>vf(s,S)),(N=>mn(m)&&lp(s,a,i,N))),s.nodeChanged()),((N,D,T)=>{D==="removeformat"?K(FC(N.selection),(R=>{K(BC,(P=>N.dom.setStyle(R,P,""))),GC(N.dom,R)})):PC(N.formatter,D).each((R=>{K(FC(N.selection),(P=>QC(N.dom,P,R,T,null)))}))})(s,a,i),Sb(s,a,l,i)})(e,t,n,o,r)},Gl=(e,t,n,o,r)=>bp(e,t,n,o,r).fold(_t,(s=>(e.dom.rename(o,s),!0)),zt),ZC=["fontsize","subscript","superscript"],RD=["strikethrough",...ZC],vp=(e,t)=>Ct(ZC,(n=>((o,r,s)=>ee(o.matchNode(r.dom,s,{},s==="fontsize")))(e,t,n))),OD=(e,t,n,o,r)=>{const s=a=>pe(E.fromDom(e.getRoot()),a)||e.isBlock(a.dom);K(t,(a=>{((i,l,c,d,m)=>{const f=on(l,i).filter(ot);return((g,h)=>{for(let b=g.length-1;b>=0;b--)if(h(g[b],b))return _.some(b);return _.none()})(f,c).map((g=>{const h=f[g];return{container:h,innerWrapper:d(h),outerWrappers:[...m(yn(h)).toArray(),...Wt(f.slice(0,g),(b=>c(b)?m(b).toArray():[yn(b)]))]}}))})(s,a,n,o,r).each((({container:i,innerWrapper:l,outerWrappers:c})=>{e.split(i.dom,a.dom),((d,m,f,g)=>{K(ht(d),(h=>{ot(h)&&f(h)&&g(h).isNone()&&Yt(h)})),K(ht(d),(h=>X(m,h))),q(d,m)})(a,l,n,r),((d,m)=>{if(m.length>0){const f=m[m.length-1];un(d,f);const g=Qt(m.slice(0,m.length-1),((h,b)=>(X(h,b),b)),f);X(g,d)}})(a,c)}))}))},e1=(e,t,n)=>{const o=ts(e.selection.getRng());OD(e.dom,n,(r=>ee(Io(e,r.dom,t))),(r=>{const s=E.fromTag(Me(r)),a=Io(e,r.dom,t,{});return ee(a)&&(i=>!re(i.attributes)&&!re(i.styles))(a)&&Di(e,s.dom,a),s}),(r=>{const s=Io(e,r.dom,t,{});return ee(s)?((a,i,l,c)=>bp(a,i,{},c).fold((()=>_.some(c)),(d=>_.some(a.dom.rename(c,d))),_.none))(e,s,0,r.dom).map(E.fromDom):_.some(r)})),e.selection.setRng(ns(o))},t1=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),n1=(e,t,n,o)=>{const r=n.name;for(let s=0,a=e.length;s<a;s++){const i=e[s];if(i.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=t.length;s<a;s++){const i=t[s],l=i.name;if(l in n.attributes.map){const c=o.attributes[l];c?c.nodes.push(n):o.attributes[l]={filter:i,nodes:[n]}}}},o1=(e,t)=>{const n=(o,r)=>{xt(o,(s=>{const a=wn(s.nodes);K(s.filter.callbacks,(i=>{for(let l=a.length-1;l>=0;l--){const c=a[l];(r?c.attr(s.filter.name)!==void 0:c.name===s.filter.name)&&!kt(c.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,t)}))}))};n(e.nodes,!1),n(e.attributes,!0)},r1=(e,t,n,o={})=>{const r=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&(c=>{let d=c;for(;d=d.walk();)n1(s,a,d,l)})(i),l})(e,t,n);o1(r,o)},yp=(e,t,n,o)=>{if((e.pad_empty_with_br||t.insert)&&n(o)){const r=new On("br",1);t.insert&&r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new On("#text",3)).value=Ft},s1=(e,t)=>{const n=e?.firstChild;return ee(n)&&n===e.lastChild&&n.name===t},Ql=(e,t,n,o)=>o.isEmpty(t,n,(r=>((s,a)=>{const i=s.getElementRule(a.name);return i?.paddEmpty===!0})(e,r))),BD=e=>{let t;for(let n=e;n;n=n.parent){const o=n.attr("contenteditable");if(o==="false")break;o==="true"&&(t=n)}return _.from(t)},Cp=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const o=e.children();for(const r of o)n&&!t.isValidChild(n.name,r.name)&&Cp(r,t,n);e.unwrap()}},a1=(e,t,n,o=ke)=>{const r=t.getTextBlockElements(),s=t.getNonEmptyElements(),a=t.getWhitespaceElements(),i=k.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,c=d=>d!==n&&!i[d.name];for(let d=0;d<e.length;d++){const m=e[d];let f,g,h;if(!m.parent||l.has(m))continue;if(r[m.name]&&m.parent.name==="li"){let v=m.next;for(;v&&r[v.name];)v.name="li",l.add(v),m.parent.insert(v,m.parent),v=v.next;m.unwrap();continue}const b=[m];for(f=m.parent;f&&!t.isValidChild(f.name,m.name)&&c(f);f=f.parent)b.push(f);if(f&&b.length>1)if(xp(t,m,f))Cp(m,t);else{b.reverse(),g=b[0].clone(),o(g);let v=g;for(let y=0;y<b.length-1;y++){t.isValidChild(v.name,b[y].name)&&y>0?(h=b[y].clone(),o(h),v.append(h)):h=v;for(let S=b[y].firstChild;S&&S!==b[y+1];){const N=S.next;h.append(S),S=N}v=h}Ql(t,s,a,g)?f.insert(m,b[0],!0):(f.insert(g,b[0],!0),f.insert(m,g)),f=b[0],(Ql(t,s,a,f)||s1(f,"br"))&&f.empty().remove()}else if(m.parent){if(m.name==="li"){let v=m.prev;if(v&&(v.name==="ul"||v.name==="ol")){v.append(m);continue}if(v=m.next,v&&(v.name==="ul"||v.name==="ol")&&v.firstChild){v.insert(m,v.firstChild,!0);continue}const y=new On("ul",1);o(y),m.wrap(y);continue}if(t.isValidChild(m.parent.name,"div")&&t.isValidChild("div",m.name)){const v=new On("div",1);o(v),m.wrap(v)}else Cp(m,t)}}},xp=(e,t,n=t.parent)=>!(!n||(!e.children[t.name]||e.isValidChild(n.name,t.name))&&(t.name!=="a"||!(o=>{let r=o;for(;r;){if(r.name==="a")return!0;r=r.parent}return!1})(n))&&(!(o=>o.name==="summary")(n)||!t1(t)||n?.firstChild===t&&n?.lastChild===t)),Vd=e=>e.collapsed?e:(t=>{const n=Y.fromRangeStart(t),o=Y.fromRangeEnd(t),r=t.commonAncestorContainer;return Ro(!1,r,o).map((s=>!Dr(n,o,r)&&Dr(n,s,r)?((a,i,l,c)=>{const d=document.createRange();return d.setStart(a,i),d.setEnd(l,c),d})(n.container(),n.offset(),s.container(),s.offset()):t)).getOr(t)})(e),i1=k.explode,l1=()=>{const e={};return{addFilter:(t,n)=>{K(i1(t),(o=>{Fe(e,o)||(e[o]={name:o,callbacks:[]}),e[o].callbacks.push(n)}))},getFilters:()=>Ha(e),removeFilter:(t,n)=>{K(i1(t),(o=>{if(Fe(e,o))if(ee(n)){const r=e[o],s=Oe(r.callbacks,(a=>a!==n));s.length>0?r.callbacks=s:delete e[o]}else delete e[o]}))}}},PD=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),LD=(e,t,n)=>{var o;const r=Rm();t.convert_fonts_to_spans&&((s,a,i)=>{s.addNodeFilter("font",(l=>{K(l,(c=>{const d=a.parse(c.attr("style")),m=c.attr("color"),f=c.attr("face"),g=c.attr("size");m&&(d.color=m),f&&(d["font-family"]=f),g&&fs(g).each((h=>{d["font-size"]=i[h-1]})),c.name="span",c.attr("style",a.serialize(d)),(h=>{K(["color","face","size"],(b=>{h.attr(b,null)}))})(c)}))}))})(e,r,k.explode((o=t.font_size_legacy_values)!==null&&o!==void 0?o:"")),((s,a,i)=>{s.addNodeFilter("strike",(l=>{const c=a.type!=="html4";K(l,(d=>{if(c)d.name="s";else{const m=i.parse(d.attr("style"));m["text-decoration"]="line-through",d.name="span",d.attr("style",i.serialize(m))}}))}))})(e,n,r)},wp=e=>{const[t,...n]=e.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(r){const s=r[2]===";base64",a=(l=>{try{return decodeURIComponent(l)}catch{return l}})(o),i=s?(l=>{const c=/([a-z0-9+\/=\s]+)/i.exec(l);return c?c[1]:""})(a):a;return _.some({type:r[1],data:i,base64Encoded:s})}return _.none()},c1=(e,t,n=!0)=>{let o=t;if(n)try{o=atob(t)}catch{return _.none()}const r=new Uint8Array(o.length);for(let s=0;s<r.length;s++)r[s]=o.charCodeAt(s);return _.some(new Blob([r],{type:e}))},d1=e=>new Promise(((t,n)=>{const o=new FileReader;o.onloadend=()=>{t(o.result)},o.onerror=()=>{var r;n((r=o.error)===null||r===void 0?void 0:r.message)},o.readAsDataURL(e)}));let MD=0;const u1=(e,t,n)=>wp(e).bind((({data:o,type:r,base64Encoded:s})=>{if(t&&!s)return _.none();{const a=s?o:btoa(o);return n(a,r)}})),m1=(e,t,n)=>{const o=e.create("blobid"+MD++,t,n);return e.add(o),o},f1=(e,t,n=!1)=>u1(t,n,((o,r)=>_.from(e.getByData(o,r)).orThunk((()=>c1(r,o).map((s=>m1(e,s,o))))))),ID=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,FD=e=>_.from(e.match(ID)).bind((t=>Ws(t,1))).map((t=>Jt(t,"www.")?t.substring(4):t)),p1=(e,t)=>{_.from(e.attr("src")).bind(FD).forall((n=>!Se(t,n)))&&e.attr("sandbox","")},Sp=(e,t)=>Jt(e,`${t}/`),{entries:g1,setPrototypeOf:h1,isFrozen:jD,getPrototypeOf:zD,getOwnPropertyDescriptor:UD}=Object;let{freeze:co,seal:Go,create:b1}=Object,{apply:Ep,construct:kp}=typeof Reflect<"u"&&Reflect;co||(co=function(e){return e}),Go||(Go=function(e){return e}),Ep||(Ep=function(e,t,n){return e.apply(t,n)}),kp||(kp=function(e,t){return new e(...t)});const Kd=mo(Array.prototype.forEach),HD=mo(Array.prototype.lastIndexOf),v1=mo(Array.prototype.pop),Jl=mo(Array.prototype.push),$D=mo(Array.prototype.splice),Xd=mo(String.prototype.toLowerCase),_p=mo(String.prototype.toString),y1=mo(String.prototype.match),Zl=mo(String.prototype.replace),qD=mo(String.prototype.indexOf),WD=mo(String.prototype.trim),ur=mo(Object.prototype.hasOwnProperty),uo=mo(RegExp.prototype.test),ec=(C1=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return kp(C1,t)});var C1;function mo(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return Ep(e,t,o)}}function At(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Xd;h1&&h1(e,null);let o=t.length;for(;o--;){let r=t[o];if(typeof r=="string"){const s=n(r);s!==r&&(jD(t)||(t[o]=s),r=s)}e[r]=!0}return e}function VD(e){for(let t=0;t<e.length;t++)ur(e,t)||(e[t]=null);return e}function os(e){const t=b1(null);for(const[n,o]of g1(e))ur(e,n)&&(Array.isArray(o)?t[n]=VD(o):o&&typeof o=="object"&&o.constructor===Object?t[n]=os(o):t[n]=o);return t}function tc(e,t){for(;e!==null;){const n=UD(e,t);if(n){if(n.get)return mo(n.get);if(typeof n.value=="function")return mo(n.value)}e=zD(e)}return function(){return null}}const x1=co(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Np=co(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ap=co(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),KD=co(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Tp=co(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),XD=co(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),w1=co(["#text"]),S1=co(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Dp=co(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),E1=co(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Yd=co(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),YD=Go(/\{\{[\w\W]*|[\w\W]*\}\}/gm),GD=Go(/<%[\w\W]*|[\w\W]*%>/gm),QD=Go(/\$\{[\w\W]*/gm),JD=Go(/^data-[\-\w.\u00B7-\uFFFF]+$/),ZD=Go(/^aria-[\-\w]+$/),k1=Go(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),eR=Go(/^(?:\w+script|data):/i),tR=Go(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),_1=Go(/^html$/i),nR=Go(/^[a-z][.\w]*(-[.\w]+)+$/i);var N1=Object.freeze({__proto__:null,ARIA_ATTR:ZD,ATTR_WHITESPACE:tR,CUSTOM_ELEMENT:nR,DATA_ATTR:JD,DOCTYPE_NAME:_1,ERB_EXPR:GD,IS_ALLOWED_URI:k1,IS_SCRIPT_OR_DATA:eR,MUSTACHE_EXPR:YD,TMPLIT_EXPR:QD});const oR=function(){return typeof window>"u"?null:window};var Rp=(function e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oR();const n=$=>e($);if(n.version="3.2.6",n.removed=[],!t||!t.document||t.document.nodeType!==9||!t.Element)return n.isSupported=!1,n;let{document:o}=t;const r=o,s=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:i,Node:l,Element:c,NodeFilter:d,NamedNodeMap:m=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:g,trustedTypes:h}=t,b=c.prototype,v=tc(b,"cloneNode"),y=tc(b,"remove"),S=tc(b,"nextSibling"),N=tc(b,"childNodes"),D=tc(b,"parentNode");if(typeof i=="function"){const $=o.createElement("template");$.content&&$.content.ownerDocument&&(o=$.content.ownerDocument)}let T,R="";const{implementation:P,createNodeIterator:L,createDocumentFragment:F,getElementsByTagName:W}=o,{importNode:O}=r;let I={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported=typeof g1=="function"&&typeof D=="function"&&P&&P.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:H,ERB_EXPR:te,TMPLIT_EXPR:ne,DATA_ATTR:ae,ARIA_ATTR:Ae,IS_SCRIPT_OR_DATA:$e,ATTR_WHITESPACE:Be,CUSTOM_ELEMENT:Pe}=N1;let{IS_ALLOWED_URI:ce}=N1,Ee=null;const j=At({},[...x1,...Np,...Ap,...Tp,...w1]);let z=null;const G=At({},[...S1,...Dp,...E1,...Yd]);let Q=Object.seal(b1(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ge=null,Le=null,et=!0,xe=!0,Xe=!1,vt=!0,jt=!1,dn=!0,fe=!1,Je=!1,lt=!1,Ve=!1,yt=!1,Rt=!1,be=!0,ze=!1,Tt=!0,Dt=!1,Kt={},kn=null;const pr=At({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Hn=null;const Ho=At({},["audio","video","img","source","image","track"]);let fn=null;const za=At({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),js="http://www.w3.org/1998/Math/MathML",Ur="http://www.w3.org/2000/svg",$o="http://www.w3.org/1999/xhtml";let zs=$o,as=!1,Hr=null;const Yu=At({},[js,Ur,$o],_p);let fo=At({},["mi","mo","mn","ms","mtext"]),is=At({},["annotation-xml"]);const Ua=At({},["title","style","font","a","script"]);let Us=null;const pL=["application/xhtml+xml","text/html"];let $n=null,Gi=null;const gL=o.createElement("form"),M_=function($){return $ instanceof RegExp||$ instanceof Function},Lh=function(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!Gi||Gi!==$){if($&&typeof $=="object"||($={}),$=os($),Us=pL.indexOf($.PARSER_MEDIA_TYPE)===-1?"text/html":$.PARSER_MEDIA_TYPE,$n=Us==="application/xhtml+xml"?_p:Xd,Ee=ur($,"ALLOWED_TAGS")?At({},$.ALLOWED_TAGS,$n):j,z=ur($,"ALLOWED_ATTR")?At({},$.ALLOWED_ATTR,$n):G,Hr=ur($,"ALLOWED_NAMESPACES")?At({},$.ALLOWED_NAMESPACES,_p):Yu,fn=ur($,"ADD_URI_SAFE_ATTR")?At(os(za),$.ADD_URI_SAFE_ATTR,$n):za,Hn=ur($,"ADD_DATA_URI_TAGS")?At(os(Ho),$.ADD_DATA_URI_TAGS,$n):Ho,kn=ur($,"FORBID_CONTENTS")?At({},$.FORBID_CONTENTS,$n):pr,ge=ur($,"FORBID_TAGS")?At({},$.FORBID_TAGS,$n):os({}),Le=ur($,"FORBID_ATTR")?At({},$.FORBID_ATTR,$n):os({}),Kt=!!ur($,"USE_PROFILES")&&$.USE_PROFILES,et=$.ALLOW_ARIA_ATTR!==!1,xe=$.ALLOW_DATA_ATTR!==!1,Xe=$.ALLOW_UNKNOWN_PROTOCOLS||!1,vt=$.ALLOW_SELF_CLOSE_IN_ATTR!==!1,jt=$.SAFE_FOR_TEMPLATES||!1,dn=$.SAFE_FOR_XML!==!1,fe=$.WHOLE_DOCUMENT||!1,Ve=$.RETURN_DOM||!1,yt=$.RETURN_DOM_FRAGMENT||!1,Rt=$.RETURN_TRUSTED_TYPE||!1,lt=$.FORCE_BODY||!1,be=$.SANITIZE_DOM!==!1,ze=$.SANITIZE_NAMED_PROPS||!1,Tt=$.KEEP_CONTENT!==!1,Dt=$.IN_PLACE||!1,ce=$.ALLOWED_URI_REGEXP||k1,zs=$.NAMESPACE||$o,fo=$.MATHML_TEXT_INTEGRATION_POINTS||fo,is=$.HTML_INTEGRATION_POINTS||is,Q=$.CUSTOM_ELEMENT_HANDLING||{},$.CUSTOM_ELEMENT_HANDLING&&M_($.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Q.tagNameCheck=$.CUSTOM_ELEMENT_HANDLING.tagNameCheck),$.CUSTOM_ELEMENT_HANDLING&&M_($.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Q.attributeNameCheck=$.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),$.CUSTOM_ELEMENT_HANDLING&&typeof $.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Q.allowCustomizedBuiltInElements=$.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),jt&&(xe=!1),yt&&(Ve=!0),Kt&&(Ee=At({},w1),z=[],Kt.html===!0&&(At(Ee,x1),At(z,S1)),Kt.svg===!0&&(At(Ee,Np),At(z,Dp),At(z,Yd)),Kt.svgFilters===!0&&(At(Ee,Ap),At(z,Dp),At(z,Yd)),Kt.mathMl===!0&&(At(Ee,Tp),At(z,E1),At(z,Yd))),$.ADD_TAGS&&(Ee===j&&(Ee=os(Ee)),At(Ee,$.ADD_TAGS,$n)),$.ADD_ATTR&&(z===G&&(z=os(z)),At(z,$.ADD_ATTR,$n)),$.ADD_URI_SAFE_ATTR&&At(fn,$.ADD_URI_SAFE_ATTR,$n),$.FORBID_CONTENTS&&(kn===pr&&(kn=os(kn)),At(kn,$.FORBID_CONTENTS,$n)),Tt&&(Ee["#text"]=!0),fe&&At(Ee,["html","head","body"]),Ee.table&&(At(Ee,["tbody"]),delete ge.tbody),$.TRUSTED_TYPES_POLICY){if(typeof $.TRUSTED_TYPES_POLICY.createHTML!="function")throw ec('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof $.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ec('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');T=$.TRUSTED_TYPES_POLICY,R=T.createHTML("")}else T===void 0&&(T=(function(Ze,je){if(typeof Ze!="object"||typeof Ze.createPolicy!="function")return null;let Ot=null;const It="data-tt-policy-suffix";je&&je.hasAttribute(It)&&(Ot=je.getAttribute(It));const Et="dompurify"+(Ot?"#"+Ot:"");try{return Ze.createPolicy(Et,{createHTML:Bn=>Bn,createScriptURL:Bn=>Bn})}catch{return console.warn("TrustedTypes policy "+Et+" could not be created."),null}})(h,s)),T!==null&&typeof R=="string"&&(R=T.createHTML(""));co&&co($),Gi=$}},I_=At({},[...Np,...Ap,...KD]),F_=At({},[...Tp,...XD]),$r=function($){Jl(n.removed,{element:$});try{D($).removeChild($)}catch{y($)}},Qi=function($,Ze){try{Jl(n.removed,{attribute:Ze.getAttributeNode($),from:Ze})}catch{Jl(n.removed,{attribute:null,from:Ze})}if(Ze.removeAttribute($),$==="is")if(Ve||yt)try{$r(Ze)}catch{}else try{Ze.setAttribute($,"")}catch{}},j_=function($){let Ze=null,je=null;if(lt)$="<remove></remove>"+$;else{const Et=y1($,/^[\r\n\t ]+/);je=Et&&Et[0]}Us==="application/xhtml+xml"&&zs===$o&&($='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+$+"</body></html>");const Ot=T?T.createHTML($):$;if(zs===$o)try{Ze=new g().parseFromString(Ot,Us)}catch{}if(!Ze||!Ze.documentElement){Ze=P.createDocument(zs,"template",null);try{Ze.documentElement.innerHTML=as?R:Ot}catch{}}const It=Ze.body||Ze.documentElement;return $&&je&&It.insertBefore(o.createTextNode(je),It.childNodes[0]||null),zs===$o?W.call(Ze,fe?"html":"body")[0]:fe?Ze.documentElement:It},z_=function($){return L.call($.ownerDocument||$,$,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Mh=function($){return $ instanceof f&&(typeof $.nodeName!="string"||typeof $.textContent!="string"||typeof $.removeChild!="function"||!($.attributes instanceof m)||typeof $.removeAttribute!="function"||typeof $.setAttribute!="function"||typeof $.namespaceURI!="string"||typeof $.insertBefore!="function"||typeof $.hasChildNodes!="function")},U_=function($){return typeof l=="function"&&$ instanceof l};function ls($,Ze,je){Kd($,(Ot=>{Ot.call(n,Ze,je,Gi)}))}const H_=function($){let Ze=null;if(ls(I.beforeSanitizeElements,$,null),Mh($))return $r($),!0;const je=$n($.nodeName);if(ls(I.uponSanitizeElement,$,{tagName:je,allowedTags:Ee}),dn&&$.hasChildNodes()&&!U_($.firstElementChild)&&uo(/<[/\w!]/g,$.innerHTML)&&uo(/<[/\w!]/g,$.textContent)||$.nodeType===7||dn&&$.nodeType===8&&uo(/<[/\w]/g,$.data))return $r($),!0;if(!Ee[je]||ge[je]){if(!ge[je]&&q_(je)&&(Q.tagNameCheck instanceof RegExp&&uo(Q.tagNameCheck,je)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(je)))return!1;if(Tt&&!kn[je]){const Ot=D($)||$.parentNode,It=N($)||$.childNodes;if(It&&Ot)for(let Et=It.length-1;Et>=0;--Et){const Bn=v(It[Et],!0);Bn.__removalCount=($.__removalCount||0)+1,Ot.insertBefore(Bn,S($))}}return $r($),!0}return $ instanceof c&&!(function(Ot){let It=D(Ot);It&&It.tagName||(It={namespaceURI:zs,tagName:"template"});const Et=Xd(Ot.tagName),Bn=Xd(It.tagName);return!!Hr[Ot.namespaceURI]&&(Ot.namespaceURI===Ur?It.namespaceURI===$o?Et==="svg":It.namespaceURI===js?Et==="svg"&&(Bn==="annotation-xml"||fo[Bn]):!!I_[Et]:Ot.namespaceURI===js?It.namespaceURI===$o?Et==="math":It.namespaceURI===Ur?Et==="math"&&is[Bn]:!!F_[Et]:Ot.namespaceURI===$o?!(It.namespaceURI===Ur&&!is[Bn])&&!(It.namespaceURI===js&&!fo[Bn])&&!F_[Et]&&(Ua[Et]||!I_[Et]):!(Us!=="application/xhtml+xml"||!Hr[Ot.namespaceURI]))})($)?($r($),!0):je!=="noscript"&&je!=="noembed"&&je!=="noframes"||!uo(/<\/no(script|embed|frames)/i,$.innerHTML)?(jt&&$.nodeType===3&&(Ze=$.textContent,Kd([H,te,ne],(Ot=>{Ze=Zl(Ze,Ot," ")})),$.textContent!==Ze&&(Jl(n.removed,{element:$.cloneNode()}),$.textContent=Ze)),ls(I.afterSanitizeElements,$,null),!1):($r($),!0)},$_=function($,Ze,je){if(be&&(Ze==="id"||Ze==="name")&&(je in o||je in gL))return!1;if(!(xe&&!Le[Ze]&&uo(ae,Ze))){if(!(et&&uo(Ae,Ze))){if(!z[Ze]||Le[Ze]){if(!(q_($)&&(Q.tagNameCheck instanceof RegExp&&uo(Q.tagNameCheck,$)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck($))&&(Q.attributeNameCheck instanceof RegExp&&uo(Q.attributeNameCheck,Ze)||Q.attributeNameCheck instanceof Function&&Q.attributeNameCheck(Ze))||Ze==="is"&&Q.allowCustomizedBuiltInElements&&(Q.tagNameCheck instanceof RegExp&&uo(Q.tagNameCheck,je)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(je))))return!1}else if(!fn[Ze]){if(!uo(ce,Zl(je,Be,""))){if((Ze!=="src"&&Ze!=="xlink:href"&&Ze!=="href"||$==="script"||qD(je,"data:")!==0||!Hn[$])&&!(Xe&&!uo($e,Zl(je,Be,"")))){if(je)return!1}}}}}return!0},q_=function($){return $!=="annotation-xml"&&y1($,Pe)},W_=function($){ls(I.beforeSanitizeAttributes,$,null);const{attributes:Ze}=$;if(!Ze||Mh($))return;const je={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z,forceKeepAttr:void 0};let Ot=Ze.length;for(;Ot--;){const It=Ze[Ot],{name:Et,namespaceURI:Bn,value:Hs}=It,qr=$n(Et),Ih=Hs;let no=Et==="value"?Ih:WD(Ih);if(je.attrName=qr,je.attrValue=no,je.keepAttr=!0,je.forceKeepAttr=void 0,ls(I.uponSanitizeAttribute,$,je),no=je.attrValue,!ze||qr!=="id"&&qr!=="name"||(Qi(Et,$),no="user-content-"+no),dn&&uo(/((--!?|])>)|<\/(style|title)/i,no)){Qi(Et,$);continue}if(je.forceKeepAttr)continue;if(!je.keepAttr){Qi(Et,$);continue}if(!vt&&uo(/\/>/i,no)){Qi(Et,$);continue}jt&&Kd([H,te,ne],(K_=>{no=Zl(no,K_," ")}));const V_=$n($.nodeName);if($_(V_,qr,no)){if(T&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!Bn)switch(h.getAttributeType(V_,qr)){case"TrustedHTML":no=T.createHTML(no);break;case"TrustedScriptURL":no=T.createScriptURL(no)}if(no!==Ih)try{Bn?$.setAttributeNS(Bn,Et,no):$.setAttribute(Et,no),Mh($)?$r($):v1(n.removed)}catch{Qi(Et,$)}}else Qi(Et,$)}ls(I.afterSanitizeAttributes,$,null)},hL=function $(Ze){let je=null;const Ot=z_(Ze);for(ls(I.beforeSanitizeShadowDOM,Ze,null);je=Ot.nextNode();)ls(I.uponSanitizeShadowNode,je,null),H_(je),W_(je),je.content instanceof a&&$(je.content);ls(I.afterSanitizeShadowDOM,Ze,null)};return n.sanitize=function($){let Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},je=null,Ot=null,It=null,Et=null;if(as=!$,as&&($="<!-->"),typeof $!="string"&&!U_($)){if(typeof $.toString!="function")throw ec("toString is not a function");if(typeof($=$.toString())!="string")throw ec("dirty is not a string, aborting")}if(!n.isSupported)return $;if(Je||Lh(Ze),n.removed=[],typeof $=="string"&&(Dt=!1),Dt){if($.nodeName){const qr=$n($.nodeName);if(!Ee[qr]||ge[qr])throw ec("root node is forbidden and cannot be sanitized in-place")}}else if($ instanceof l)je=j_("<!---->"),Ot=je.ownerDocument.importNode($,!0),Ot.nodeType===1&&Ot.nodeName==="BODY"||Ot.nodeName==="HTML"?je=Ot:je.appendChild(Ot);else{if(!Ve&&!jt&&!fe&&$.indexOf("<")===-1)return T&&Rt?T.createHTML($):$;if(je=j_($),!je)return Ve?null:Rt?R:""}je&&lt&&$r(je.firstChild);const Bn=z_(Dt?$:je);for(;It=Bn.nextNode();)H_(It),W_(It),It.content instanceof a&&hL(It.content);if(Dt)return $;if(Ve){if(yt)for(Et=F.call(je.ownerDocument);je.firstChild;)Et.appendChild(je.firstChild);else Et=je;return(z.shadowroot||z.shadowrootmode)&&(Et=O.call(r,Et,!0)),Et}let Hs=fe?je.outerHTML:je.innerHTML;return fe&&Ee["!doctype"]&&je.ownerDocument&&je.ownerDocument.doctype&&je.ownerDocument.doctype.name&&uo(_1,je.ownerDocument.doctype.name)&&(Hs="<!DOCTYPE "+je.ownerDocument.doctype.name+`>
`+Hs),jt&&Kd([H,te,ne],(qr=>{Hs=Zl(Hs,qr," ")})),T&&Rt?T.createHTML(Hs):Hs},n.setConfig=function(){Lh(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),Je=!0},n.clearConfig=function(){Gi=null,Je=!1},n.isValidAttribute=function($,Ze,je){Gi||Lh({});const Ot=$n($),It=$n(Ze);return $_(Ot,It,je)},n.addHook=function($,Ze){typeof Ze=="function"&&Jl(I[$],Ze)},n.removeHook=function($,Ze){if(Ze!==void 0){const je=HD(I[$],Ze);return je===-1?void 0:$D(I[$],je,1)[0]}return v1(I[$])},n.removeHooks=function($){I[$]=[]},n.removeAllHooks=function(){I={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n})();const A1=k.each,rR=k.trim,sR=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],aR={ftp:21,http:80,https:443,mailto:25},iR=["img","video"],T1=(e,t,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch{return unescape(r)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!e.allow_html_data_urls&&(/^data:image\//i.test(o)?((r,s)=>ee(r)?!r:!ee(s)||!Se(iR,s))(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(o):/^data:/i.test(o)))};class Qo{static parseDataUri(t){let n;const o=decodeURIComponent(t).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(t,n,o={}){if(o.allow_script_urls)return!0;{const r=pa.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!T1(o,r,n)}}static getDocumentBaseUrl(t){var n;let o;return o=t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?(n=t.href)!==null&&n!==void 0?n:"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}constructor(t,n={}){this.path="",this.directory="",t=rR(t),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(r.source=t);const s=t.indexOf("//")===0;if(t.indexOf("/")!==0||s||(t=(o&&o.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const i=o?o.path:new Qo(document.location.href).directory;if(o?.protocol==="")t="//mce_host"+r.toAbsPath(i,t);else{const l=/([^#?]*)([#?]?.*)/.exec(t);l&&(t=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(i,l[1])+l[2])}}t=t.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);a&&A1(sR,((i,l)=>{let c=a[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),r[i]=c})),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||r.host!=="mce_host"||(r.port=o.port),r.host&&r.host!=="mce_host"||(r.host=o.host),r.source=""),s&&(r.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const n=new Qo(t,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||o.charAt(o.length-1)==="/"&&o.substr(0,o.length-1)===r)return o;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(t,n){const o=new Qo(t,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?aR[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let o,r,s=0,a="";const i=t.substring(0,t.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length){for(o=0,r=i.length;o<r;o++)if(o>=l.length||i[o]!==l[o]){s=o+1;break}}if(i.length<l.length){for(o=0,r=l.length;o<r;o++)if(o>=i.length||i[o]!==l[o]){s=o+1;break}}if(s===1)return n;for(o=0,r=i.length-(s-1);o<r;o++)a+="../";for(o=s-1,r=l.length;o<r;o++)a+=o!==s-1?"/"+l[o]:l[o];return a}toAbsPath(t,n){let o=0;const r=/\/$/.test(n)?"/":"",s=t.split("/"),a=n.split("/"),i=[];A1(s,(m=>{m&&i.push(m)}));const l=[];for(let m=a.length-1;m>=0;m--)a[m].length!==0&&a[m]!=="."&&(a[m]!==".."?o>0?o--:l.push(a[m]):o++);const c=i.length-o;let d;return d=c<=0?wo(l).join("/"):i.slice(0,c).join("/")+"/"+wo(l).join("/"),d.indexOf("/")!==0&&(d="/"+d),r&&d.lastIndexOf("/")!==d.length-1&&(d+=r),d}getURI(t=!1){let n;return this.source&&!t||(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const lR=k.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Op="data-mce-type";let D1=0;const R1=(e,t,n,o,r)=>{var s,a,i,l;const c=t.validate,d=n.getSpecialElements();e.nodeType===8&&(!t.allow_conditional_comments&&/^\[if/i.test((s=e.nodeValue)!==null&&s!==void 0?s:"")&&(e.nodeValue=" "+e.nodeValue),t.sanitize&&t.allow_html_in_comments&&we(e.nodeValue)&&(e.nodeValue=(v=>v.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))(e.nodeValue)));const m=(a=r?.tagName)!==null&&a!==void 0?a:e.nodeName.toLowerCase();if(o!=="html"&&n.isValid(o))return void(ee(r)&&(r.allowedTags[m]=!0));if(e.nodeType!==1||m==="body")return;const f=E.fromDom(e),g=pt(f,Op),h=ft(f,"data-mce-bogus");if(!g&&we(h))return void(h==="all"?ct(f):Yt(f));const b=n.getElementRule(m);if(!c||b){if(ee(r)&&(r.allowedTags[m]=!0),c&&b&&!g){if(K((i=b.attributesForced)!==null&&i!==void 0?i:[],(v=>{Te(f,v.name,v.value==="{$uid}"?"mce_"+D1++:v.value)})),K((l=b.attributesDefault)!==null&&l!==void 0?l:[],(v=>{pt(f,v.name)||Te(f,v.name,v.value==="{$uid}"?"mce_"+D1++:v.value)})),b.attributesRequired&&!Ct(b.attributesRequired,(v=>pt(f,v)))||b.removeEmptyAttrs&&mt(f))return void Yt(f);b.outputName&&b.outputName!==m&&Xo(f,b.outputName)}}else Fe(d,m)?ct(f):Yt(f)},O1=(e,t,n,o,r,s)=>n!=="html"&&!ua(o)||!(r in lR&&T1(e,s,o))&&(!e.validate||t.isValid(o,r)||Jt(r,"data-")||Jt(r,"aria-")),B1=(e,t)=>e.hasAttribute(Op)&&(t==="id"||t==="class"||t==="style"),P1=(e,t)=>e in t.getBoolAttrs(),cR=(e,t,n,o)=>{const{attributes:r}=e;for(let s=r.length-1;s>=0;s--){const a=r[s],i=a.name,l=a.value;O1(t,n,o,e.tagName.toLowerCase(),i,l)||B1(e,i)?P1(i,n)&&e.setAttribute(i,i):e.removeAttribute(i)}},dR=(e,t,n)=>{const o=Rp();return o.addHook("uponSanitizeElement",((r,s)=>{R1(r,e,t,n.track(r),s)})),o.addHook("uponSanitizeAttribute",((r,s)=>{((a,i,l,c,d)=>{const m=a.tagName.toLowerCase(),{attrName:f,attrValue:g}=d;d.keepAttr=O1(i,l,c,m,f,g),d.keepAttr?(d.allowedAttributes[f]=!0,P1(f,l)&&(d.attrValue=f),i.allow_svg_data_urls&&Jt(g,"data:image/svg+xml")&&(d.forceKeepAttr=!0)):B1(a,f)&&(d.forceKeepAttr=!0)})(r,e,t,n.current(),s)})),o},uR=(e,t)=>{const n=Rp(),o=t.allow_mathml_annotation_encodings,r=re(o)&&o.length>0;n.addHook("uponSanitizeElement",((s,a)=>{var i;const l=(i=a.tagName)!==null&&i!==void 0?i:s.nodeName.toLowerCase();((c,d)=>r&&d==="semantics"?_.some(!0):d==="annotation"?_.some(Ce(c)&&(m=>{const f=m.getAttribute("encoding");return r&&we(f)&&Se(o,f)})(c)):re(t.extended_mathml_elements)&&t.extended_mathml_elements.includes(d)?_.from(!0):_.none())(s,l).each((c=>{a.allowedTags[l]=c,!c&&t.sanitize&&Ce(s)&&s.remove()}))})),n.addHook("uponSanitizeAttribute",((s,a)=>{re(t.extended_mathml_attributes)&&t.extended_mathml_attributes.includes(a.attrName)&&(a.forceKeepAttr=!0)})),n.sanitize(e,{IN_PLACE:!0,USE_PROFILES:{mathMl:!0}})},mR=e=>t=>{const n=i0(t);if(n==="svg")(o=>{const r=["type","href","role","arcrole","title","show","actuate","label","from","to"].map((a=>`xlink:${a}`)),s={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:r};Rp().sanitize(o,s)})(t);else{if(n!=="math")throw new Error("Not a namespace element");uR(t,e)}},L1=["script","style","template","param"],M1=k.makeMap,I1=k.extend,F1=(e,t,n,o,r)=>{const s=e.name,a=s in n&&s!=="title"&&s!=="textarea"&&s!=="noscript",i=t.childNodes;for(let l=0,c=i.length;l<c;l++){const d=i[l],m=new On(d.nodeName.toLowerCase(),d.nodeType);if(Ce(d)){const f=d.attributes;for(let g=0,h=f.length;g<h;g++){const b=f[g];m.attr(b.name,b.value)}ua(m.name)&&(o(d),m.value=d.innerHTML)}else se(d)?(m.value=d.data,a&&(m.raw=!0)):xs(d)?m.value=r?PD(d.data):d.data:(oN(d)||rN(d))&&(m.value=d.data);if(o0(d)){const f=On.create("#text");f.value=d.innerHTML,f.raw=!0,m.append(f)}else ua(m.name)||F1(m,d,n,o,r);e.append(m)}},j1=' xmlns="http://www.w3.org/1999/xhtml"',Ri=(e={},t=ws())=>{const n=l1(),o=l1(),r={validate:!0,root_name:"body",sanitize:!0,allow_html_in_comments:!1,...e},s=new DOMParser,a=((b,v)=>{const y=(()=>{const S=Wo(),N=()=>S.get().map(i0).getOr("html");return{track:D=>(bm(D)?S.set(D):S.get().exists((T=>!T.contains(D)))&&S.clear(),N()),current:N,reset:()=>{S.clear()}}})();if(b.sanitize){const S=dR(b,v,y);return{sanitizeHtmlElement:(D,T)=>{S.sanitize(D,((R,P)=>{const L={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body","html"],ALLOWED_ATTR:[]};return L.PARSER_MEDIA_TYPE=P,R.allow_script_urls?L.ALLOWED_URI_REGEXP=/.*/:R.allow_html_data_urls&&(L.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),L})(b,T)),S.removed=[],y.reset()},sanitizeNamespaceElement:mR(b)}}return{sanitizeHtmlElement:(S,N)=>{const D=document.createNodeIterator(S,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let T;for(;T=D.nextNode();){const R=y.track(T);R1(T,b,v,R),Ce(T)&&cR(T,b,v,R)}y.reset()},sanitizeNamespaceElement:ke}})(r,t),i=n.addFilter,l=n.getFilters,c=n.removeFilter,d=o.addFilter,m=o.getFilters,f=o.removeFilter,g=(b,v)=>{const y=we(v.attr(Op)),S=v.type===1&&!Fe(b,v.name)&&!Sm(t,v)&&!ua(v.name);return v.type===3||S&&!y},h={schema:t,addAttributeFilter:d,getAttributeFilters:m,removeAttributeFilter:f,addNodeFilter:i,getNodeFilters:l,removeNodeFilter:c,parse:(b,v={})=>{var y,S;const N=r.validate,D=((y=v.context)!==null&&y!==void 0?y:r.root_name)==="#document",T=(S=v.context)!==null&&S!==void 0?S:D?"html":r.root_name,R=((ne,ae,Ae="html",$e=!1)=>{const Be=Ae==="xhtml",Pe=Be?"application/xhtml+xml":"text/html",ce=Fe(t.getSpecialElements(),ae.toLowerCase()),Ee=ce?`<${ae}>${ne}</${ae}>`:ne,j=s.parseFromString(/^[\s]*<head/i.test(ne)||/^[\s]*<html/i.test(ne)||/^[\s]*<!DOCTYPE/i.test(ne)?`<html${Be?j1:""}>${Ee}</html>`:Be?`<html${j1}><head></head><body>${Ee}</body></html>`:`<body>${Ee}</body>`,Pe),z=$e?j.documentElement:j.body;return a.sanitizeHtmlElement(z,Pe),ce?z.firstChild:z})(b,T,v.format,D);ym(t,R);const P=new On(T,11);F1(P,R,t.getSpecialElements(),a.sanitizeNamespaceElement,r.sanitize&&r.allow_html_in_comments),R.innerHTML="";const[L,F]=((ne,ae,Ae,$e)=>{const Be=Ae.validate,Pe=ae.getNonEmptyElements(),ce=ae.getWhitespaceElements(),Ee=I1(M1(L1),ae.getBlockElements()),j=N0(ae),z=/[ \t\r\n]+/g,G=/^[ \t\r\n]+/,Q=/[ \t\r\n]+$/,ge=xe=>{let Xe=xe.parent;for(;ee(Xe);){if(Xe.name in ce)return!0;Xe=Xe.parent}return!1},Le=xe=>xe.name in Ee||Sm(ae,xe)||ua(xe.name)&&xe.parent===ne,et=(xe,Xe)=>{const vt=Xe?xe.prev:xe.next;return!ee(vt)&&!kt(xe.parent)&&Le(xe.parent)&&(xe.parent!==ne||$e.isRootContent===!0)};return[xe=>{var Xe;if(xe.type===3&&!ge(xe)){let vt=(Xe=xe.value)!==null&&Xe!==void 0?Xe:"";vt=vt.replace(z," "),(((jt,dn)=>ee(jt)&&(dn(jt)||jt.name==="br"))(xe.prev,Le)||et(xe,!0))&&(vt=vt.replace(G,"")),vt.length===0||vt===" "&&xe.prev&&xe.prev.type===8&&xe.next&&xe.next.type===8?xe.remove():xe.value=vt}},xe=>{var Xe;if(xe.type===1){const vt=ae.getElementRule(xe.name);if(Be&&vt){const jt=Ql(ae,Pe,ce,xe);vt.paddInEmptyBlock&&jt&&(dn=>{let fe=dn;for(;ee(fe);){if(fe.name in j)return Ql(ae,Pe,ce,fe);fe=fe.parent}return!1})(xe)?yp(Ae,$e,Le,xe):vt.removeEmpty&&jt?Le(xe)?xe.remove():xe.unwrap():vt.paddEmpty&&(jt||(dn=>{var fe;return s1(dn,"#text")&&((fe=dn?.firstChild)===null||fe===void 0?void 0:fe.value)===Ft})(xe))&&yp(Ae,$e,Le,xe)}}else if(xe.type===3&&!ge(xe)){let vt=(Xe=xe.value)!==null&&Xe!==void 0?Xe:"";(xe.next&&Le(xe.next)||et(xe,!1))&&(vt=vt.replace(Q,"")),vt.length===0?xe.remove():xe.value=vt}}]})(P,t,r,v),W=[],O=N?ne=>((ae,Ae)=>{xp(t,ae)&&Ae.push(ae)})(ne,W):ke,I={nodes:{},attributes:{}},H=ne=>n1(l(),m(),ne,I);((ne,ae,Ae)=>{const $e=[];for(let Be=ne,Pe=Be;Be;Pe=Be,Be=Be.walk()){const ce=Be;K(ae,(Ee=>Ee(ce))),kt(ce.parent)&&ce!==ne?Be=Pe:$e.push(ce)}for(let Be=$e.length-1;Be>=0;Be--){const Pe=$e[Be];K(Ae,(ce=>ce(Pe)))}})(P,[L,H],[F,O]),W.reverse(),N&&W.length>0&&(v.context?v.invalid=!0:a1(W,t,P,H));const te=((ne,ae)=>{var Ae;const $e=(Ae=ae.forced_root_block)!==null&&Ae!==void 0?Ae:ne.forced_root_block;return $e===!1?"":$e===!0?"p":$e})(r,v);return te&&(P.name==="body"||v.isRootContent)&&((ne,ae)=>{const Ae=I1(M1(L1),t.getBlockElements()),$e=/^[ \t\r\n]+/,Be=/[ \t\r\n]+$/;let Pe=ne.firstChild,ce=null;const Ee=j=>{var z,G;j&&(Pe=j.firstChild,Pe&&Pe.type===3&&(Pe.value=(z=Pe.value)===null||z===void 0?void 0:z.replace($e,"")),Pe=j.lastChild,Pe&&Pe.type===3&&(Pe.value=(G=Pe.value)===null||G===void 0?void 0:G.replace(Be,"")))};if(t.isValidChild(ne.name,ae.toLowerCase())){for(;Pe;){const j=Pe.next;g(Ae,Pe)?(ce||(ce=new On(ae,1),ce.attr(r.forced_root_block_attrs),ne.insert(ce,Pe)),ce.append(Pe)):(Ee(ce),ce=null),Pe=j}Ee(ce)}})(P,te),v.invalid||o1(I,v),P}};return((b,v)=>{var y,S;const N=b.schema;b.addAttributeFilter("href",(P=>{let L=P.length;const F=W=>{const O=W?k.trim(W):"";return/\b(noopener)\b/g.test(O)?O:(I=>I.split(" ").filter((H=>H.length>0)).concat(["noopener"]).sort().join(" "))(O)};if(!v.allow_unsafe_link_target)for(;L--;){const W=P[L];W.name==="a"&&W.attr("target")==="_blank"&&W.attr("rel",F(W.attr("rel")))}})),v.allow_html_in_named_anchor||b.addAttributeFilter("id,name",(P=>{let L,F,W,O,I=P.length;for(;I--;)if(O=P[I],O.name==="a"&&O.firstChild&&!O.attr("href"))for(W=O.parent,L=O.lastChild;L&&W;)F=L.prev,W.insert(L,O),L=F})),v.fix_list_elements&&b.addNodeFilter("ul,ol",(P=>{let L,F,W=P.length;for(;W--;)if(L=P[W],F=L.parent,F&&(F.name==="ul"||F.name==="ol"))if(L.prev&&L.prev.name==="li")L.prev.append(L);else{const O=new On("li",1);O.attr("style","list-style-type: none"),L.wrap(O)}}));const D=N.getValidClasses();v.validate&&D&&b.addAttributeFilter("class",(P=>{var L;let F=P.length;for(;F--;){const W=P[F],O=(L=W.attr("class"))!==null&&L!==void 0?L:"",I=k.explode(O," ");let H="";for(let te=0;te<I.length;te++){const ne=I[te];let ae=!1,Ae=D["*"];Ae&&Ae[ne]&&(ae=!0),Ae=D[W.name],!ae&&Ae&&Ae[ne]&&(ae=!0),ae&&(H&&(H+=" "),H+=ne)}H.length||(H=null),W.attr("class",H)}})),((P,L)=>{const{blob_cache:F}=L;if(F){const W=O=>{const I=O.attr("src");(H=>H.attr("src")===p.transparentSrc||ee(H.attr("data-mce-placeholder")))(O)||(H=>ee(H.attr("data-mce-bogus")))(O)||kt(I)||f1(F,I,!0).each((H=>{O.attr("src",H.blobUri())}))};P.addAttributeFilter("src",(O=>K(O,W)))}})(b,v);const T=(y=v.sandbox_iframes)!==null&&y!==void 0&&y,R=So((S=v.sandbox_iframes_exclusions)!==null&&S!==void 0?S:[]);v.convert_unsafe_embeds&&b.addNodeFilter("object,embed",(P=>K(P,(L=>{L.replace((({type:F,src:W,width:O,height:I}={},H,te)=>{const ne=(Ae=>Mt(Ae)?"iframe":Sp(Ae,"image")?"img":Sp(Ae,"video")?"video":Sp(Ae,"audio")?"audio":"iframe")(F),ae=new On(ne,1);return ae.attr(ne==="audio"?{src:W}:{src:W,width:O,height:I}),ne!=="audio"&&ne!=="video"||ae.attr("controls",""),ne==="iframe"&&H&&p1(ae,te),ae})({type:L.attr("type"),src:L.name==="object"?L.attr("data"):L.attr("src"),width:L.attr("width"),height:L.attr("height")},T,R))})))),T&&b.addNodeFilter("iframe",(P=>K(P,(L=>p1(L,R)))))})(h,r),((b,v,y)=>{v.inline_styles&&LD(b,v,y)})(h,r,t),h},Gd=e=>e instanceof On,z1=(e,t,n)=>{const o=(s=>Gd(s)?Ds({validate:!1}).serialize(s):s)(e),r=t(o);if(r.isDefaultPrevented())return r;if(Gd(e)){if(r.content!==o){const s=Ri({validate:!1,forced_root_block:!1,...n}).parse(r.content,{context:e.name});return{...r,content:s}}return{...r,content:e}}return r},U1=e=>({sanitize:qb(e),sandbox_iframes:Vb(e),sandbox_iframes_exclusions:of(e)}),H1=(e,t)=>{if(t.no_events)return hn.value(t);{const n=((o,r)=>o.dispatch("BeforeGetContent",r))(e,t);return n.isDefaultPrevented()?hn.error(kb(e,{content:"",...n}).content):hn.value(n)}},$1=(e,t,n)=>n.no_events?t:z1(t,(r=>kb(e,{...n,content:r})),U1(e)).content,Bp=(e,t)=>{if(t.no_events)return hn.value(t);{const n=z1(t.content,(o=>((r,s)=>r.dispatch("BeforeSetContent",s))(e,{...t,content:o})),U1(e));return n.isDefaultPrevented()?(Eb(e,n),hn.error(void 0)):hn.value(n)}},Pp=(e,t,n)=>{n.no_events||Eb(e,{...n,content:t})},fR="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),pR=["content_css_cors"],gR="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),q1=[{name:"export",replacedWith:"Export to PDF"}],W1=(e,t)=>{const n=Oe(t,(o=>Fe(e,o)));return Vr(n)},hR=e=>{const t=W1(e,fR),n=e.forced_root_block;return n!==!1&&n!==""||t.push("forced_root_block (false only)"),Vr(t)},bR=e=>W1(e,pR),V1=(e,t)=>{const n=k.makeMap(e.plugins," "),o=Oe(t,(r=>Fe(n,r)));return Vr(o)},vR=e=>V1(e,gR),yR=e=>V1(e,q1.map((t=>t.name))),CR=e=>qt(q1,(t=>t.name===e)).fold((()=>e),(t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e)),xR={fire:'The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',selectionSetContent:'The "editor.selection.setContent" method has been deprecated and will be removed in TinyMCE 9. Use "editor.insertContent" instead.'},K1=e=>{console.warn(xR[e],new Error().stack)},X1=e=>e.dom.length===0?(ct(e),_.none()):_.some(e),Y1=(e,t,n,o,r)=>{e.bind((s=>((o?Xf:jd)(s.dom,o?s.dom.length:0,r),t.filter(St).map((a=>((i,l,c,d,m)=>{const f=i.dom,g=l.dom,h=d?f.length:g.length;d?(Yf(f,g,m,!1,!d),c.setStart(g,h)):(Yf(g,f,m,!1,!d),c.setEnd(g,h))})(s,a,n,o,r)))))).orThunk((()=>((a,i)=>a.filter((l=>_i.isBookmarkNode(l.dom))).bind(i?Qn:Xt))(t,o).or(t).filter(St).map((a=>((i,l,c)=>{vn(i).each((d=>{const m=i.dom;l&&Wl(d,Y(m,0),c)?jd(m,0,c):!l&&Vl(d,Y(m,m.length),c)&&Xf(m,m.length,c)}))})(a,o,r)))))},Qd=(e,t,n={})=>{const o=((r,s)=>({format:"html",...r,set:!0,selection:!0,content:s}))(n,t);Bp(e,o).each((r=>{const s=((i,l)=>{if(l.format!=="raw"){const c=i.selection.getRng(),d=i.dom.getParent(c.commonAncestorContainer,i.dom.isBlock),m=d?{context:d.nodeName.toLowerCase()}:{},f=i.parser.parse(l.content,{forced_root_block:!1,...m,...l});return Ds({validate:!1},i.schema).serialize(f)}return l.content})(e,r),a=e.selection.getRng();((i,l,c)=>{const d=_.from(l.firstChild).map(E.fromDom),m=_.from(l.lastChild).map(E.fromDom);i.deleteContents(),i.insertNode(l);const f=d.bind(Xt).filter(St).bind(X1),g=m.bind(Qn).filter(St).bind(X1);Y1(f,d,i,!0,c),Y1(g,m,i,!1,c),i.collapse(!1)})(a,a.createContextualFragment(s),e.schema),e.selection.setRng(a),Hl(e,a),Pp(e,s,r)}))},wR=(e,t)=>{let n=t.firstChild,o=t.lastChild;return n&&n.name==="meta"&&(n=n.next),o&&o.attr("id")==="mce_marker"&&(o=o.prev),((r,s)=>{const a=r.getNonEmptyElements();return ee(s)&&(s.isEmpty(a)||((i,l)=>i.getBlockElements()[l.name]&&(c=>ee(c.firstChild)&&c.firstChild===c.lastChild)(l)&&(c=>c.name==="br"||c.value===Ft)(l.firstChild))(r,s))})(e,o)&&(o=o?.prev),!(!n||n!==o||n.name!=="ul"&&n.name!=="ol")},SR=e=>{return e.length>0&&(!(n=e[e.length-1]).firstChild||ee((t=n)==null?void 0:t.firstChild)&&t.firstChild===t.lastChild&&(o=>o.data===Ft||$t(o))(t.firstChild))?e.slice(0,-1):e;var t,n},Lp=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},G1=(e,t)=>{const n=Y.after(e),o=Or(t).prev(n);return o?o.toRange():null},ER=(e,t,n,o)=>{const r=((m,f,g)=>{const h=f.serialize(g);return(b=>{var v,y;const S=b.firstChild,N=b.lastChild;return S&&S.nodeName==="META"&&((v=S.parentNode)===null||v===void 0||v.removeChild(S)),N&&N.id==="mce_marker"&&((y=N.parentNode)===null||y===void 0||y.removeChild(N)),b})(m.createFragment(h))})(t,e,o),s=Lp(t,n.startContainer),a=SR((i=r.firstChild,Oe((l=i?.childNodes)!==null&&l!==void 0?l:[],(m=>m.nodeName==="LI"))));var i,l;const c=t.getRoot(),d=m=>{const f=Y.fromRangeStart(n),g=Or(t.getRoot()),h=m===1?g.prev(f):g.next(f),b=h?.getNode();return!b||Lp(t,b)!==s};return s?d(1)?((m,f,g)=>{const h=m.parentNode;return h&&k.each(f,(b=>{h.insertBefore(b,m)})),((b,v)=>{const y=Y.before(b),S=Or(v).next(y);return S?S.toRange():null})(m,g)})(s,a,c):d(2)?((m,f,g,h)=>(h.insertAfter(f.reverse(),m),G1(f[0],g)))(s,a,c,t):((m,f,g,h)=>{const b=((y,S)=>{const N=S.cloneRange(),D=S.cloneRange();return N.setStartBefore(y),D.setEndAfter(y),[N.cloneContents(),D.cloneContents()]})(m,h),v=m.parentNode;return v&&(v.insertBefore(b[0],m),k.each(f,(y=>{v.insertBefore(y,m)})),v.insertBefore(b[1],m),v.removeChild(m)),G1(f[f.length-1],g)})(s,a,c,n):null},kR=["pre"],Mp=nd,_R=(e,t)=>{const n=e.schema.getTextInlineElements(),o=e.dom;if(t){const r=e.getBody(),s=sp(e),a="*[data-mce-fragment]",i=o.select(a);k.each(i,(l=>{const c=f=>ee(n[f.nodeName.toLowerCase()]),d=f=>f.childNodes.length===1;if(!Ay(o,m=l)&&!((f,g)=>Ay(f,g)&&Ct(Ti(f,g),(h=>(b=>_y.has(b))(h))))(o,m)&&c(l)&&d(l)){const f=Ti(o,l),g=(y,S)=>oo(y,(N=>Se(S,N))),h=y=>d(l)&&o.is(y,a)&&c(y)&&(y.nodeName===l.nodeName&&g(f,Ti(o,y))||h(y.children[0])),b=y=>ee(y)&&y!==r&&(s.compare(l,y)||b(y.parentElement)),v=y=>ee(y)&&y!==r&&o.is(y,a)&&(((S,N,D)=>{const T=Ti(S,N),R=Ti(S,D),P=L=>{var F,W;const O=(F=S.getStyle(N,L))!==null&&F!==void 0?F:"",I=(W=S.getStyle(D,L))!==null&&W!==void 0?W:"";return Eo(O)&&Eo(I)&&O!==I};return Ct(T,(L=>{const F=W=>Ct(W,(O=>O===L));if(!F(R)&&F(Ny)){const W=Oe(R,(O=>Ct(Ny,(I=>Jt(O,I)))));return Ct(W,P)}return P(L)}))})(o,l,y)||v(y.parentElement));(h(l.children[0])||b(l.parentElement)&&!v(l.parentElement))&&o.remove(l,!0)}var m})),((l,c)=>{const d=Oe(c,(m=>vp(l.formatter,m)));e1(l,"strikethrough",d)})(e,Tn(i))}},NR=(e,t,n)=>{var o;const r=e.selection,s=e.dom,a=e.parser,i=n.merge,l=Ds({validate:!0},e.schema),c='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=vo(t)),t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,c);let d=r.getRng();const m=d.startContainer,f=e.getBody();m===f&&r.isCollapsed()&&s.isBlock(f.firstChild)&&((S,N)=>ee(N)&&!S.schema.getVoidElements()[N.nodeName])(e,f.firstChild)&&s.isEmpty(f.firstChild)&&(d=s.createRng(),d.setStart(f.firstChild,0),d.setEnd(f.firstChild,0),r.setRng(d)),r.isCollapsed()||(S=>{const N=S.dom,D=Vd(S.selection.getRng());S.selection.setRng(D);const T=N.getParent(D.startContainer,Mp);((P,L,F)=>!!ee(F)&&F===P.getParent(L.endContainer,Mp)&&hf(E.fromDom(F),L))(N,D,T)?np(S,D,E.fromDom(T)):yf(D,sN)||(R=D,yf(R,se))?D.deleteContents():S.getDoc().execCommand("Delete",!1);var R})(e);const g=r.getNode(),h={context:g.nodeName.toLowerCase(),data:n.data,insert:!0},b=a.parse(t,h);if(n.paste===!0&&wR(e.schema,b)&&((S,N)=>!!Lp(S,N))(s,g))return d=ER(l,s,r.getRng(),b),d&&r.setRng(d),t;n.paste===!0&&((S,N,D,T)=>{var R;const P=N.firstChild,L=N.lastChild,F=P===(L.attr("data-mce-type")==="bookmark"?L.prev:L),W=Se(kR,P.name);if(F&&W){const O=P.attr("contenteditable")!=="false",I=((R=S.getParent(D,S.isBlock))===null||R===void 0?void 0:R.nodeName.toLowerCase())===P.name,H=_.from(Na(T,D)).forall(To);return O&&I&&H}return!1})(s,b,g,e.getBody())&&((o=b.firstChild)===null||o===void 0||o.unwrap()),(S=>{let N=S;for(;N=N.walk();)N.type===1&&N.attr("data-mce-fragment","1")})(b);let v=b.lastChild;if(v&&v.attr("id")==="mce_marker"){const S=v;for(v=v.prev;v&&v.name!=="table";v=v.walk(!0))if(v.type===3||!s.isBlock(v.name)){v.parent&&e.schema.isValidChild(v.parent.name,"span")&&v.parent.insert(S,v,v.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(g),h.invalid||((S,N,D)=>{var T;return Ct(D.children(),t1)&&((T=S.getParent(N,S.isBlock))===null||T===void 0?void 0:T.nodeName)==="SUMMARY"})(s,g,b)){Qd(e,c);let S,N=r.getNode();const D=e.getBody();for(hl(N)?N=S=D:S=N;S&&S!==D;)N=S,S=S.parentNode;t=N===D?D.innerHTML:s.getOuterHTML(N);const T=a.parse(t),R=(W=>{for(let O=W;O;O=O.walk())if(O.attr("id")==="mce_marker")return _.some(O);return _.none()})(T),P=R.bind(BD).getOr(T);R.each((W=>W.replace(b)));const L=(W=>{const O=[];for(let I=W.firstChild;ee(I);I=I.walk())O.push(I);return O})(b);b.unwrap();const F=Oe(L,(W=>xp(e.schema,W)));a1(F,e.schema,P),r1(a.getNodeFilters(),a.getAttributeFilters(),T),t=l.serialize(T),N===D?s.setHTML(D,t):s.setOuterHTML(N,t)}else t=l.serialize(b),((S,N,D)=>{var T;D.getAttribute("data-mce-bogus")==="all"?(T=D.parentNode)===null||T===void 0||T.insertBefore(S.dom.createFragment(N),D):((R,P)=>{if(R.isBlock(P)&&R.isEditable(P)){const L=P.childNodes;return L.length===1&&$t(L[0])||L.length===0}return!1})(S.dom,D)?S.dom.setHTML(D,N):Qd(S,N,{no_events:!0})})(e,t,g);var y;return _R(e,i),((S,N)=>{var D,T,R;let P;const L=S.dom,F=S.selection;if(!N)return;F.scrollIntoView(N);const W=Na(S.getBody(),N);if(W&&L.getContentEditable(W)==="false")return L.remove(N),void F.select(W);let O=L.createRng();const I=N.previousSibling;if(se(I)){O.setStart(I,(T=(D=I.nodeValue)===null||D===void 0?void 0:D.length)!==null&&T!==void 0?T:0);const te=N.nextSibling;se(te)&&(I.appendData(te.data),(R=te.parentNode)===null||R===void 0||R.removeChild(te))}else O.setStartBefore(N),O.setEndBefore(N);const H=L.getParent(N,L.isBlock);if(L.remove(N),H&&L.isEmpty(H)){const te=Mp(H);en(E.fromDom(H)),O.setStart(H,0),O.setEnd(H,0),te||(ne=>!!ne.getAttribute("data-mce-fragment"))(H)||!(P=(ne=>{let ae=Y.fromRangeStart(ne);return ae=Or(S.getBody()).next(ae),ae?.toRange()})(O))?L.add(H,L.create("br",te?{}:{"data-mce-bogus":"1"})):(O=P,L.remove(H))}F.setRng(O)})(e,s.get("mce_marker")),y=e.getBody(),k.each(y.getElementsByTagName("*"),(S=>{S.removeAttribute("data-mce-fragment")})),((S,N,D)=>{_.from(S.getParent(N,"td,th")).map(E.fromDom).each((T=>((R,P)=>{Vn(R).each((L=>{Xt(L).each((F=>{P.isBlock(Me(R))&&Ss(L)&&P.isBlock(Me(F))&&ct(L)}))}))})(T,D)))})(s,r.getStart(),e.schema),((S,N,D)=>{const T=on(E.fromDom(D),(R=>pe(R,E.fromDom(N))));Ws(T,T.length-2).filter(ot).fold((()=>ym(S,N)),(R=>ym(S,R.dom)))})(e.schema,e.getBody(),r.getStart()),t},Ip=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&(o=>{Ai(o)&&Un(o.getBody()).each((r=>{const s=r.getNode(),a=Ar(s)?Un(s).getOr(r):r;o.selection.setRng(a.toRange())}))})(e)},nc={},Q1=sr(["pre"]);(e=>{nc[e]||(nc[e]=[]),nc[e].push((t=>{if(!t.selection.getRng().collapsed){const n=t.selection.getSelectedBlocks(),o=Oe(Oe(n,Q1),(r=>s=>{const a=s.previousSibling;return Q1(a)&&Se(r,a)})(n));K(o,(r=>{((s,a)=>{const i=E.fromDom(a),l=Nn(i).dom;ct(i),De(E.fromDom(s),[E.fromTag("br",l),E.fromTag("br",l),...ht(i)])})(r.previousSibling,r)}))}}))})("pre");const J1=k.each,AR=k.each,TR=(e,t,n,o)=>{const r=e.formatter.get(t),s=r[0],a=!o&&e.selection.isCollapsed(),i=e.dom,l=e.selection,c=(g,h)=>{let b=!1;return AR(g,(v=>!(!Po(v)||(i.getContentEditable(h)!=="false"||v.ceFalseOverride)&&(!ee(v.collapsed)||v.collapsed===a)&&i.is(h,v.selector)&&!Oo(h)&&(Di(e,h,v,n,h),b=!0,1)))),b},d=g=>{if(we(g)){const h=i.create(g);return Di(e,h,s,n,o),h}return null},m=(g,h,b)=>{const v=[];let y=!0;const S=s.inline||s.block,N=d(S);Ul(g,h,(D=>{let T;const R=P=>{let L=!1,F=y,W=!1;const O=P.parentNode,I=O.nodeName.toLowerCase(),H=g.getContentEditable(P);ee(H)&&(F=y,y=H==="true",L=!0,W=Nv(e,P));const te=y&&!L;if($t(P)&&!((ne,ae,Ae,$e)=>{if(SA(ne)&&mn(ae)&&Ae.parentNode){const Be=N0(ne.schema),Pe=G_(E.fromDom(Ae),(ce=>Oo(ce.dom)));return gn(Be,$e)&&Zr(ne.schema,Ae.parentNode,{skipBogus:!1,includeZwsp:!0})&&!Pe}return!1})(e,s,P,I))return T=null,void(Br(s)&&g.remove(P));if((ne=>(ae=>Br(ae)&&ae.wrapper===!0)(s)&&Io(e,ne,t,n))(P))T=null;else{if(((ne,ae,Ae)=>{const $e=(Be=>Br(Be)&&Be.wrapper!==!0)(s)&&xf(e.schema,ne)&&Ei(e,ae,S);return Ae&&$e})(P,I,te)){const ne=g.rename(P,S);return Di(e,ne,s,n,P),v.push(ne),void(T=null)}if(Po(s)){let ne=c(r,P);if(!ne&&ee(O)&&_f(s)&&(ne=c(r,O)),!mn(s)||ne)return void(T=null)}ee(N)&&((ne,ae,Ae,$e)=>{const Be=ne.nodeName.toLowerCase(),Pe=Ei(e,S,Be)&&Ei(e,ae,S),ce=!b&&se(ne)&&cd(ne.data),Ee=Oo(ne),j=!mn(s)||!g.isBlock(ne);return(Ae||$e)&&Pe&&!ce&&!Ee&&j})(P,I,te,W)?(T||(T=g.clone(N,!1),O.insertBefore(T,P),v.push(T)),W&&L&&(y=F),T.appendChild(P)):(T=null,K(wn(P.childNodes),R),L&&(y=F),T=null)}};K(D,R)})),s.links===!0&&K(v,(D=>{const T=R=>{R.nodeName==="A"&&Di(e,R,s,n,o),K(wn(R.childNodes),T)};T(D)})),((D,T,R)=>{if(Se(RD,T)){const P=((L,F)=>Wt(F,(W=>{const O=Qc(W,(I=>vp(L,I)));return vp(L,W)?[W,...O]:O})))(D.formatter,R);e1(D,"strikethrough",P)}})(e,t,Tn(v)),K(v,(D=>{const T=(R=>{let P=0;return K(R.childNodes,(L=>{(F=>ee(F)&&se(F)&&F.length===0)(L)||Bo(L)||P++})),P})(D);!(v.length>1)&&g.isBlock(D)||T!==0?(mn(s)||Br(s)&&s.wrapper)&&(s.exact||T!==1||(D=(R=>qt(R.childNodes,Cf).filter((L=>g.getContentEditable(L)!=="false"&&qd(g,L,s))).map((L=>{const F=g.clone(L,!1);return Di(e,F,s,n,R),g.replace(F,R,!0),g.remove(L,!0),F})).getOr(R))(D)),((R,P,L,F)=>{J1(P,(W=>{mn(W)&&J1(R.dom.select(W.inline,F),(O=>{fp(O)&&Gl(R,W,L,O,W.exact?O:null)})),((O,I,H)=>{if(I.clear_child_styles){const te=I.links?"*:not(a)":"*";mp(O.select(te,H),(ne=>{fp(ne)&&O.isEditable(ne)&&mp(I.styles,((ae,Ae)=>{O.setStyle(ne,Ae,"")}))}))}})(R.dom,W,F)}))})(e,r,n,D),((R,P,L,F,W)=>{const O=W.parentNode;Io(R,O,L,F)&&Gl(R,P,F,W)||P.merge_with_parents&&O&&R.dom.getParent(O,(I=>!!Io(R,I,L,F)&&(Gl(R,P,F,W),!0)))})(e,s,t,n,D),((R,P,L,F)=>{if(P.styles&&P.styles.backgroundColor){const W=HC(R,"fontSize");pp(F,(O=>W(O)&&R.isEditable(O)),$C(R,"backgroundColor",Ts(P.styles.backgroundColor,L)))}})(g,s,n,D),((R,P,L,F)=>{const W=O=>{if(rr(O)&&Ce(O.parentNode)&&R.isEditable(O)){const I=Av(R,O.parentNode);R.getStyle(O,"color")&&I?R.setStyle(O,"text-decoration",I):R.getStyle(O,"text-decoration")===I&&R.setStyle(O,"text-decoration",null)}};P.styles&&(P.styles.color||P.styles.textDecoration)&&(k.walk(F,W,"childNodes"),W(F))})(g,s,0,D),((R,P,L,F)=>{if(mn(P)&&(P.inline==="sub"||P.inline==="sup")){const W=HC(R,"fontSize");pp(F,(I=>W(I)&&R.isEditable(I)),$C(R,"fontSize",""));const O=Oe(R.select(P.inline==="sup"?"sub":"sup",F),R.isEditable);R.remove(O,!0)}})(g,s,0,D),UC(e,s,0,D)):g.remove(D,!0)}))},f=zl(o)?o:l.getNode();if(i.getContentEditable(f)==="false"&&!Nv(e,f))return c(r,o=f),void wb(e,t,o,n);if(s){if(o)if(zl(o)){if(!c(r,o)){const g=i.createRng();g.setStartBefore(o),g.setEndAfter(o),m(i,Ea(i,g,r),!0)}}else m(i,o,!0);else a&&mn(s)&&!Si(e).length?((g,h,b)=>{let v;const y=g.selection,S=g.formatter.get(h);if(!S)return;const N=y.getRng();let D=N.startOffset;const T=N.startContainer.nodeValue;v=wa(g.getBody(),y.getStart());const R=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(T&&D>0&&D<T.length&&R.test(T.charAt(D))&&R.test(T.charAt(D-1))){const F=y.getBookmark();N.collapse(!0);let W=Ea(g.dom,N,S);W=Ld(W),g.formatter.apply(h,b,W),y.moveToBookmark(F)}else{let F=v?kC(v):null;v&&F?.data===Yl||(P=g.getDoc(),L=cp(!0).dom,v=P.importNode(L,!0),F=v.firstChild,N.insertNode(v),D=1,TC(g,v)),g.formatter.apply(h,b,v),y.setCursorLocation(F,D)}var P,L})(e,t,n):(l.setRng(Vd(l.getRng())),kv(e,(()=>{vf(e,((g,h)=>{const b=h?g:Ea(i,g,r);m(i,b,!1)}))}),zt),e.nodeChanged()),PC(e.formatter,t).each((g=>{K((h=>Oe((b=>{const v=b.getSelectedBlocks(),y=b.getRng();if(b.isCollapsed())return[];if(v.length===1)return LC(y,v[0])&&MC(y,v[0])?v:[];{const S=sn(v).filter((T=>LC(y,T))).toArray(),N=ro(v).filter((T=>MC(y,T))).toArray(),D=v.slice(1,-1);return S.concat(D).concat(N)}})(h),IC(h.dom)))(e.selection),(h=>wC(i,h,g,n)))}));((g,h)=>{Fe(nc,g)&&K(nc[g],(b=>{b(h)}))})(t,e)}wb(e,t,o,n)},Z1=(e,t,n,o)=>{(o||e.selection.isEditable())&&TR(e,t,n,o)},ex=e=>Fe(e,"vars"),tx=e=>e.selection.getStart(),nx=(e,t,n,o,r)=>go(t,(s=>{const a=e.formatter.matchNode(s,n,r??{},o);return!Mt(a)}),(s=>!!SC(e,s,n)||!o&&ee(e.formatter.matchNode(s,n,r,!0)))),ox=(e,t)=>{const n=t??tx(e);return Oe(Nd(e.dom,n),(o=>Ce(o)&&!da(o)))},rx=(e,t,n)=>{const o=ox(e,t);xt(n,((r,s)=>{const a=i=>{const l=nx(e,o,s,i.similar,ex(i)?i.vars:void 0),c=l.isSome();if(i.state.get()!==c){i.state.set(c);const d=l.getOr(t);ex(i)?i.callback(c,{node:d,format:s,parents:o}):K(i.callbacks,(m=>m(c,{node:d,format:s,parents:o})))}};K([r.withSimilar,r.withoutSimilar],a),K(r.withVars,a)}))},Fp=(e,t,n)=>({element:e,width:t,rows:n}),sx=(e,t)=>({element:e,cells:t}),DR=(e,t)=>({x:e,y:t}),ax=(e,t)=>at(e,t).bind(fs).getOr(1),RR=(e,t,n)=>{const o=e.rows;return!!(o[n]?o[n].cells:[])[t]},ix=e=>Qt(e,((t,n)=>n.cells.length>t?n.cells.length:t),0),lx=(e,t)=>{const n=e.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let s=0;s<r.length;s++)if(pe(r[s],t))return _.some(DR(s,o))}return _.none()},cx=(e,t,n,o,r)=>{const s=[],a=e.rows;for(let i=n;i<=r;i++){const l=a[i].cells,c=t<o?l.slice(t,o+1):l.slice(o,t+1);s.push(sx(a[i].element,c))}return s},OR=e=>((t,n)=>{const o=yn(t.element),r=E.fromTag("tbody");return De(r,n),X(o,r),o})(e,(t=>We(t.rows,(n=>{const o=We(n.cells,(s=>{const a=Ht(s);return rt(a,"colspan"),rt(a,"rowspan"),a})),r=yn(n.element);return De(r,o),r})))(e)),BR=(e,t,n)=>{const o=E.fromDom(t.commonAncestorContainer),r=es(o,e),s=Oe(r,(l=>n.isWrapper(Me(l)))),a=((l,c)=>qt(l,(d=>Me(d)==="li"&&hf(d,c))).fold(le([]),(d=>(m=>qt(m,(f=>Me(f)==="ul"||Me(f)==="ol")))(l).map((m=>{const f=E.fromTag(Me(m)),g=er(em(m),((h,b)=>Jt(b,"list-style")));return Wc(f,g),[E.fromTag("li"),f]})).getOr([]))))(r,t),i=s.concat(a.length?a:(l=>mi(l)?vn(l).filter(Im).fold(le([]),(c=>[l,c])):Im(l)?[l]:[])(o));return We(i,yn)},dx=()=>fl([]),PR=(e,t)=>((n,o)=>si(o,"table",ye(pe,n)))(e,t[0]).bind((n=>{const o=t[0],r=t[t.length-1],s=(a=>{const i=Fp(yn(a),0,[]);return K(Dn(a,"tr"),((l,c)=>{K(Dn(l,"td,th"),((d,m)=>{((f,g,h,b,v)=>{const y=ax(v,"rowspan"),S=ax(v,"colspan"),N=f.rows;for(let D=h;D<h+y;D++){N[D]||(N[D]=sx(Ht(b),[]));for(let T=g;T<g+S;T++)N[D].cells[T]=D===h&&T===g?v:yn(v)}})(i,((f,g,h)=>{for(;RR(f,g,h);)g++;return g})(i,m,c),c,l,d)}))})),Fp(i.element,ix(i.rows),i.rows)})(n);return((a,i,l)=>lx(a,i).bind((c=>lx(a,l).map((d=>((m,f,g)=>{const h=f.x,b=f.y,v=g.x,y=g.y,S=b<y?cx(m,h,b,v,y):cx(m,h,y,v,b);return Fp(m.element,ix(S),S)})(a,c,d))))))(s,o,r).map((a=>fl([OR(a)])))})).getOrThunk(dx),LR=(e,t,n)=>{const o=wv(t,e);return o.length>0?PR(e,o):((r,s,a)=>s.length>0&&s[0].collapsed?dx():((i,l,c)=>((d,m)=>{const f=Qt(m,((g,h)=>(X(h,g),h)),d);return m.length>0?fl([f]):f})(E.fromDom(l.cloneContents()),BR(i,l,c)))(r,s[0],a))(e,t,n)},Jd=(e,t)=>t>=0&&t<e.length&&Sa(e.charAt(t)),ux=e=>vo(e.innerText),mx=e=>Ce(e)?e.outerHTML:se(e)?pa.encodeRaw(e.data,!1):xs(e)?"<!--"+e.data+"-->":"",MR=(e,t)=>(((n,o)=>{let r=0;K(n,(s=>{s[0]===0?r++:s[0]===1?(((a,i,l)=>{const c=(d=>{let m;const f=document.createElement("div"),g=document.createDocumentFragment();for(d&&(f.innerHTML=d);m=f.firstChild;)g.appendChild(m);return g})(i);if(a.hasChildNodes()&&l<a.childNodes.length){const d=a.childNodes[l];a.insertBefore(c,d)}else a.appendChild(c)})(o,s[1],r),r++):s[0]===2&&((a,i)=>{if(a.hasChildNodes()&&i<a.childNodes.length){const l=a.childNodes[i];a.removeChild(l)}})(o,r)}))})(((n,o)=>{const r=n.length+o.length+2,s=new Array(r),a=new Array(r),i=(m,f,g,h,b)=>{const v=c(m,f,g,h);if(v===null||v.start===f&&v.diag===f-h||v.end===m&&v.diag===m-g){let y=m,S=g;for(;y<f||S<h;)y<f&&S<h&&n[y]===o[S]?(b.push([0,n[y]]),++y,++S):f-m>h-g?(b.push([2,n[y]]),++y):(b.push([1,o[S]]),++S)}else{i(m,v.start,g,v.start-v.diag,b);for(let y=v.start;y<v.end;++y)b.push([0,n[y]]);i(v.end,f,v.end-v.diag,h,b)}},l=(m,f,g,h)=>{let b=m;for(;b-f<h&&b<g&&n[b]===o[b-f];)++b;return((v,y,S)=>({start:v,end:y,diag:S}))(m,b,f)},c=(m,f,g,h)=>{const b=f-m,v=h-g;if(b===0||v===0)return null;const y=b-v,S=v+b,N=(S%2==0?S:S+1)/2;let D,T,R,P,L;for(s[1+N]=m,a[1+N]=f+1,D=0;D<=N;++D){for(T=-D;T<=D;T+=2){for(R=T+N,T===-D||T!==D&&s[R-1]<s[R+1]?s[R]=s[R+1]:s[R]=s[R-1]+1,P=s[R],L=P-m+g-T;P<f&&L<h&&n[P]===o[L];)s[R]=++P,++L;if(y%2!=0&&y-D<=T&&T<=y+D&&a[R-y]<=s[R])return l(a[R-y],T+m-g,f,h)}for(T=y-D;T<=y+D;T+=2){for(R=T+N-y,T===y-D||T!==y+D&&a[R+1]<=a[R-1]?a[R]=a[R+1]-1:a[R]=a[R-1],P=a[R]-1,L=P-m+g-T;P>=m&&L>=g&&n[P]===o[L];)a[R]=P--,L--;if(y%2==0&&-D<=T&&T<=D&&a[R]<=s[R+y])return l(a[R],T+m-g,f,h)}}return null},d=[];return i(0,n.length,0,o.length,d),d})(We(wn(t.childNodes),mx),e),t),t),IR=Wn((()=>document.implementation.createHTMLDocument("undo"))),Zd=e=>{const t=e.serializer.getTempAttrs(),n=Cy(e.getBody(),t);return(o=>o.querySelector("iframe")!==null)(n)?{type:"fragmented",fragments:Oe(We(wn(n.childNodes),In(vo,mx)),(o=>o.length>0)),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:vo(n.innerHTML),bookmark:null,beforeBookmark:null}},jp=(e,t,n)=>{const o=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?MR(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!ee(o)||!hv(o)||!o.isFakeCaret}),o&&(e.selection.moveToBookmark(o),e.selection.scrollIntoView())},zp=e=>e.type==="fragmented"?e.fragments.join(""):e.content,fx=e=>{const t=E.fromTag("body",IR());return ia(t,zp(e)),K(Dn(t,"*[data-mce-bogus]"),Yt),aa(t)},Up=(e,t)=>!(!e||!t)&&(!!((n,o)=>zp(n)===zp(o))(e,t)||((n,o)=>fx(n)===fx(o))(e,t)),Hp=e=>e.get()===0,eu=(e,t,n)=>{Hp(n)&&(e.typing=t)},px=(e,t)=>{e.typing&&(eu(e,!1,t),e.add())},gx=e=>({init:{bindEvents:ke},undoManager:{beforeChange:(t,n)=>((o,r,s)=>{Hp(r)&&s.set(Ym(o.selection))})(e,t,n),add:(t,n,o,r,s,a)=>((i,l,c,d,m,f,g)=>{const h=Zd(i),b=k.extend(f||{},h);if(!Hp(d)||i.removed)return null;const v=l.data[c.get()];if(i.dispatch("BeforeAddUndo",{level:b,lastLevel:v,originalEvent:g}).isDefaultPrevented()||v&&Up(v,b))return null;l.data[c.get()]&&m.get().each((N=>{l.data[c.get()].beforeBookmark=N}));const y=DA(i);if(y&&l.data.length>y){for(let N=0;N<l.data.length-1;N++)l.data[N]=l.data[N+1];l.data.length--,c.set(l.data.length)}b.bookmark=Ym(i.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(b),c.set(l.data.length-1);const S={level:b,lastLevel:v,originalEvent:g};return c.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",S),i.dispatch("change",S)):i.dispatch("AddUndo",S),b})(e,t,n,o,r,s,a),undo:(t,n,o)=>((r,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,eu(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],jp(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(e,t,n,o),redo:(t,n)=>((o,r,s)=>{let a;return r.get()<s.length-1&&(r.set(r.get()+1),a=s[r.get()],jp(o,a,!1),o.setDirty(!0),o.dispatch("Redo",{level:a})),a})(e,t,n),clear:(t,n)=>((o,r,s)=>{r.data=[],s.set(0),r.typing=!1,o.dispatch("ClearUndos")})(e,t,n),reset:t=>(n=>{n.clear(),n.add()})(t),hasUndo:(t,n)=>((o,r,s)=>s.get()>0||r.typing&&r.data[0]&&!Up(Zd(o),r.data[0]))(e,t,n),hasRedo:(t,n)=>((o,r)=>r.get()<o.data.length-1&&!o.typing)(t,n),transact:(t,n,o)=>((r,s,a)=>(px(r,s),r.beforeChange(),r.ignore(a),r.add()))(t,n,o),ignore:(t,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(t,n),extra:(t,n,o,r)=>((s,a,i,l,c)=>{if(a.transact(l)){const d=a.data[i.get()].bookmark,m=a.data[i.get()-1];jp(s,m,!0),a.transact(c)&&(a.data[i.get()-1].beforeBookmark=d)}})(e,t,n,o,r)},formatter:{match:(t,n,o,r)=>lp(e,t,n,o,r),matchAll:(t,n)=>((o,r,s)=>{const a=[],i={},l=o.selection.getStart();return o.dom.getParent(l,(c=>{for(let d=0;d<r.length;d++){const m=r[d];!i[m]&&Io(o,c,m,s)&&(i[m]=!0,a.push(m))}}),o.dom.getRoot()),a})(e,t,n),matchNode:(t,n,o,r)=>Io(e,t,n,o,r),canApply:t=>((n,o)=>{const r=n.formatter.get(o),s=n.dom;if(r&&n.selection.isEditable()){const a=n.selection.getStart(),i=Nd(s,a);for(let l=r.length-1;l>=0;l--){const c=r[l];if(!Po(c))return!0;for(let d=i.length-1;d>=0;d--)if(s.is(i[d],c.selector))return!0}}return!1})(e,t),closest:t=>((n,o)=>{const r=s=>pe(s,E.fromDom(n.getBody()));return _.from(n.selection.getStart(!0)).bind((s=>cm(E.fromDom(s),(a=>qn(o,(i=>((l,c)=>Io(n,l.dom,c)?_.some(c):_.none())(a,i)))),r))).getOrNull()})(e,t),apply:(t,n,o)=>Z1(e,t,n,o),remove:(t,n,o,r)=>JC(e,t,n,o,r),toggle:(t,n,o)=>((r,s,a,i)=>{const l=r.formatter.get(s);l&&(!lp(r,s,a,i)||"toggle"in l[0]&&!l[0].toggle?Z1(r,s,a,i):JC(r,s,a,i))})(e,t,n,o),formatChanged:(t,n,o,r,s)=>((a,i,l,c,d,m)=>(((f,g,h,b,v,y)=>{const S=g.get();K(h.split(","),(N=>{const D=Bt(S,N).getOrThunk((()=>{const R={withSimilar:{state:tn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:tn(!1),similar:!1,callbacks:[]},withVars:[]};return S[N]=R,R})),T=()=>{const R=ox(f);return nx(f,R,N,v,y).isSome()};if(Mt(y)){const R=v?D.withSimilar:D.withoutSimilar;R.callbacks.push(b),R.callbacks.length===1&&R.state.set(T())}else D.withVars.push({state:tn(T()),similar:v,vars:y,callback:b})})),g.set(S)})(a,i,l,c,d,m),{unbind:()=>((f,g,h)=>{const b=f.get();K(g.split(","),(v=>Bt(b,v).each((y=>{b[v]={withSimilar:{...y.withSimilar,callbacks:Oe(y.withSimilar.callbacks,(S=>S!==h))},withoutSimilar:{...y.withoutSimilar,callbacks:Oe(y.withoutSimilar.callbacks,(S=>S!==h))},withVars:Oe(y.withVars,(S=>S.callback!==h))}})))),f.set(b)})(i,l,c)}))(e,t,n,o,r,s)},editor:{getContent:t=>((n,o)=>_.from(n.getBody()).fold(le(o.format==="tree"?new On("body",11):""),(r=>iD(n,o,r))))(e,t),setContent:(t,n)=>((o,r,s)=>_.from(o.getBody()).map((a=>Gd(r)?((i,l,c,d)=>{r1(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),c);const m=Ds({validate:!1},i.schema).serialize(c),f=vo(ld(E.fromDom(l))?m:k.trim(m));return Ip(i,f,d.no_selection),{content:c,html:f}})(o,a,r,s):((i,l,c,d)=>{if((c=vo(c)).length===0||/^\s+$/.test(c)){const m='<br data-mce-bogus="1">';l.nodeName==="TABLE"?c="<tr><td>"+m+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+m+"</li>");const f=En(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),f.toLowerCase())?(c=m,c=i.dom.createHTML(f,vi(i),c)):c||(c=m),Ip(i,c,d.no_selection),{content:c,html:c}}{d.format!=="raw"&&(c=Ds({validate:!1},i.schema).serialize(i.parser.parse(c,{isRootContent:!0,insert:!0})));const m=ld(E.fromDom(l))?c:k.trim(c);return Ip(i,m,d.no_selection),{content:m,html:m}}})(o,a,r,s))).getOr({content:r,html:Gd(s.content)?"":s.content}))(e,t,n),insertContent:(t,n)=>NR(e,t,n),addVisual:t=>((n,o)=>{const r=n.dom,s=ee(o)?o:n.getBody();K(r.select("table,a",s),(a=>{switch(a.nodeName){case"TABLE":const i=MA(n),l=r.getAttrib(a,"border");l&&l!=="0"||!n.hasVisual?r.removeClass(a,i):r.addClass(a,i);break;case"A":if(!r.getAttrib(a,"href")){const c=r.getAttrib(a,"name")||a.id,d=Ub(n);c&&n.hasVisual?r.addClass(a,d):r.removeClass(a,d)}}})),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((o,r,s={})=>{const a=((i,l)=>({...i,format:l,get:!0,selection:!0,getInner:!0}))(s,r);return H1(o,a).fold(gt,(i=>{const l=((c,d)=>{if(d.format==="text")return(m=>_.from(m.selection.getRng()).map((f=>{var g;const h=_.from(m.dom.getParent(f.commonAncestorContainer,m.dom.isBlock)),b=m.getBody(),v=(T=>T.map((R=>R.nodeName)).getOr("div").toLowerCase())(h),y=E.fromDom(f.cloneContents());xy(y),wy(y);const S=m.dom.add(b,v,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},y.dom),N=ux(S),D=vo((g=S.textContent)!==null&&g!==void 0?g:"");if(m.dom.remove(S),Jd(D,0)||Jd(D,D.length-1)){const T=h.getOr(b),R=ux(T),P=R.indexOf(N);return P===-1?N:(Jd(R,P-1)?" ":"")+N+(Jd(R,P+N.length)?" ":"")}return N})).getOr(""))(c);{const m=((f,g)=>{const h=f.selection.getRng(),b=f.dom.create("body"),v=f.selection.getSel(),y=jf(f,pf(v)),S=g.contextual?LR(E.fromDom(f.getBody()),y,f.schema).dom:h.cloneContents();return S&&b.appendChild(S),f.selection.serializer.serialize(b,g)})(c,d);return d.format==="tree"?m:c.selection.isCollapsed()?"":m}})(o,i);return $1(o,l,i)}))})(e,t,n)},autocompleter:{addDecoration:ke,removeDecoration:ke},raw:{getModel:()=>_.none()}}),Lr=e=>Fe(e.plugins,"rtc"),$p=e=>e.rtcInstance?e.rtcInstance:gx(e),cn=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},hx=e=>cn(e).init.bindEvents(),bx=(e,t,n)=>{if(Fe(e,t)){const o=Oe(e[t],(r=>r!==n));o.length===0?delete e[t]:e[t]=o}},vx=e=>!(!e||!e.ownerDocument)&&tt(E.fromDom(e.ownerDocument),E.fromDom(e)),yx=(e,t,n,o)=>{let r,s;const{selectorChangedWithUnbind:a}=((b,v)=>{let y,S;const N=(T,R)=>qt(R,(P=>b.is(P,T))),D=T=>b.getParents(T,void 0,b.getRoot());return{selectorChangedWithUnbind:(T,R)=>(y||(y={},S={},v.on("NodeChange",(P=>{const L=P.element,F=D(L),W={};xt(y,((O,I)=>{N(I,F).each((H=>{S[I]||(K(O,(te=>{te(!0,{node:H,selector:I,parents:F})})),S[I]=O),W[I]=O}))})),xt(S,((O,I)=>{W[I]||(delete S[I],K(O,(H=>{H(!1,{node:L,selector:I,parents:F})})))}))}))),y[T]||(y[T]=[]),y[T].push(R),N(T,D(v.selection.getStart())).each((()=>{S[T]=y[T]})),{unbind:()=>{bx(y,T,R),bx(S,T,R)}})}})(e,o),i=b=>{const v=c();v.collapse(!!b),d(v)},l=()=>t.getSelection?t.getSelection():t.document.selection,c=()=>{let b;const v=(S,N,D)=>{try{return N.compareBoundaryPoints(S,D)}catch{return-1}},y=t.document;if(ee(o.bookmark)&&!Ai(o)){const S=Af(o);if(S.isSome())return S.map((N=>jf(o,[N])[0])).getOr(y.createRange())}try{const S=l();S&&!ed(S.anchorNode)&&(b=S.rangeCount>0?S.getRangeAt(0):y.createRange(),b=jf(o,[b])[0])}catch{}if(b||(b=y.createRange()),hl(b.startContainer)&&b.collapsed){const S=e.getRoot();b.setStart(S,0),b.setEnd(S,0)}return r&&s&&(v(b.START_TO_START,b,r)===0&&v(b.END_TO_END,b,r)===0?b=s:(r=null,s=null)),b},d=(b,v)=>{if(!(S=>!!S&&vx(S.startContainer)&&vx(S.endContainer))(b))return;const y=l();if(b=o.dispatch("SetSelectionRange",{range:b,forward:v}).range,y){s=b;try{y.removeAllRanges(),y.addRange(b)}catch{}v===!1&&y.extend&&(y.collapse(b.endContainer,b.endOffset),y.extend(b.startContainer,b.startOffset)),r=y.rangeCount>0?y.getRangeAt(0):null}if(!b.collapsed&&b.startContainer===b.endContainer&&y?.setBaseAndExtent&&b.endOffset-b.startOffset<2&&b.startContainer.hasChildNodes()){const S=b.startContainer.childNodes[b.startOffset];S&&S.nodeName==="IMG"&&(y.setBaseAndExtent(b.startContainer,b.startOffset,b.endContainer,b.endOffset),y.anchorNode===b.startContainer&&y.focusNode===b.endContainer||y.setBaseAndExtent(S,0,S,1))}o.dispatch("AfterSetSelectionRange",{range:b,forward:v})},m=()=>{const b=l(),v=b?.anchorNode,y=b?.focusNode;if(!b||!v||!y||ed(v)||ed(y))return!0;const S=e.createRng(),N=e.createRng();try{S.setStart(v,b.anchorOffset),S.collapse(!0),N.setStart(y,b.focusOffset),N.collapse(!0)}catch{return!0}return S.compareBoundaryPoints(S.START_TO_START,N)<=0},f={dom:e,win:t,serializer:n,editor:o,expand:(b={type:"word"})=>d(Pr(e).expand(c(),b)),collapse:i,setCursorLocation:(b,v)=>{const y=e.createRng();ee(b)&&ee(v)?(y.setStart(b,v),y.setEnd(b,v),d(y),i(!1)):(bf(e,y,o.getBody(),!0),d(y))},getContent:b=>((v,y={})=>((S,N,D)=>cn(S).selection.getContent(N,D))(v,y.format?y.format:"html",y))(o,b),setContent:(b,v)=>((y,S,N={})=>{K1("selectionSetContent"),Qd(y,S,N)})(o,b,v),getBookmark:(b,v)=>g.getBookmark(b,v),moveToBookmark:b=>g.moveToBookmark(b),select:(b,v)=>(((y,S,N)=>_.from(S).bind((D=>_.from(D.parentNode).map((T=>{const R=y.nodeIndex(D),P=y.createRng();return P.setStart(T,R),P.setEnd(T,R+1),N&&(bf(y,P,D,!0),bf(y,P,D,!1)),P})))))(e,b,v).each(d),b),isCollapsed:()=>{const b=c(),v=l();return!(!b||b.item)&&(b.compareEndPoints?b.compareEndPoints("StartToEnd",b)===0:!v||b.collapsed)},isEditable:()=>{if(o.mode.isReadOnly())return!1;const b=c(),v=o.getBody().querySelectorAll('[data-mce-selected="1"]');return v.length>0?oo(v,(y=>e.isEditable(y.parentElement))):cy(e,b)},isForward:m,setNode:b=>(Qd(o,e.getOuterHTML(b)),b),getNode:()=>((b,v)=>{if(!v)return b;let y=v.startContainer,S=v.endContainer;const N=v.startOffset,D=v.endOffset;let T=v.commonAncestorContainer;v.collapsed||(y===S&&D-N<2&&y.hasChildNodes()&&(T=y.childNodes[N]),se(y)&&se(S)&&(y=y.length===N?fy(y.nextSibling,!0):y.parentNode,S=D===0?fy(S.previousSibling,!1):S.parentNode,y&&y===S&&(T=y)));const R=se(T)?T.parentNode:T;return rr(R)?R:b})(o.getBody(),c()),getSel:l,setRng:d,getRng:c,getStart:b=>uy(o.getBody(),c(),b),getEnd:b=>my(o.getBody(),c(),b),getSelectedBlocks:(b,v)=>((y,S,N,D)=>{const T=[],R=y.getRoot(),P=y.getParent(N||uy(R,S,S.collapsed),y.isBlock),L=y.getParent(D||my(R,S,S.collapsed),y.isBlock);if(P&&P!==R&&T.push(P),P&&L&&P!==L){let F;const W=new ln(P,R);for(;(F=W.next())&&F!==L;)y.isBlock(F)&&T.push(F)}return L&&P!==L&&L!==R&&T.push(L),T})(e,c(),b,v),normalize:()=>{const b=c(),v=l();if(!(pf(v).length>1)&&kd(o)){const y=Bd(e,b);return y.each((S=>{d(S,m())})),y.getOr(b)}return b},selectorChanged:(b,v)=>(a(b,v),f),selectorChangedWithUnbind:a,getScrollContainer:()=>{let b,v=e.getRoot();for(;v&&v.nodeName!=="BODY";){if(v.scrollHeight>v.clientHeight){b=v;break}v=v.parentNode}return b},scrollIntoView:(b,v)=>{ee(b)?((y,S,N)=>{(y.inline?YT:QT)(y,S,N)})(o,b,v):Hl(o,c(),v)},placeCaretAt:(b,v)=>d(Jv(b,v,o.getDoc())),getBoundingClientRect:()=>{const b=c();return b.collapsed?Y.fromRangeStart(b).getClientRects()[0]:b.getBoundingClientRect()},destroy:()=>{t=r=s=null,h.destroy()}},g=_i(f),h=Qv(f,o);return f.bookmarkManager=g,f.controlSelection=h,f},FR=(e,t,n)=>{k.inArray(t,n)===-1&&(e.addAttributeFilter(n,((o,r)=>{let s=o.length;for(;s--;)o[s].attr(r,null)})),t.push(n))},jR=(e,t)=>{const n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},r=t&&t.dom?t.dom:Nt.DOM,s=t&&t.schema?t.schema:ws(o),a=Ri(o,s);return((i,l,c)=>{i.addAttributeFilter("data-mce-tabindex",((d,m)=>{let f=d.length;for(;f--;){const g=d[f];g.attr("tabindex",g.attr("data-mce-tabindex")),g.attr(m,null)}})),i.addAttributeFilter("src,href,style",((d,m)=>{const f="data-mce-"+m,g=l.url_converter,h=l.url_converter_scope;let b=d.length;for(;b--;){const v=d[b];let y=v.attr(f);y!==void 0?(v.attr(m,y.length>0?y:null),v.attr(f,null)):(y=v.attr(m),m==="style"?y=c.serializeStyle(c.parseStyle(y),v.name):g&&(y=g.call(h,y,m,v.name)),v.attr(m,y.length>0?y:null))}})),i.addAttributeFilter("class",(d=>{let m=d.length;for(;m--;){const f=d[m];let g=f.attr("class");g&&(g=g.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),f.attr("class",g.length>0?g:null))}})),i.addAttributeFilter("data-mce-type",((d,m,f)=>{let g=d.length;for(;g--;){const h=d[g];h.attr("data-mce-type")==="bookmark"&&!f.cleanup&&(_.from(h.firstChild).exists((v=>{var y;return!cd((y=v.value)!==null&&y!==void 0?y:"")}))?h.unwrap():h.remove())}})),i.addNodeFilter("script,style",((d,m)=>{var f;const g=b=>b.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let h=d.length;for(;h--;){const b=d[h],v=b.firstChild,y=(f=v?.value)!==null&&f!==void 0?f:"";if(m==="script"){const S=b.attr("type");S&&b.attr("type",S==="mce-no/type"?null:S.replace(/^mce\-/,"")),l.element_format==="xhtml"&&v&&y.length>0&&(v.value=`// <![CDATA[
`+g(y)+`
// ]]>`)}else l.element_format==="xhtml"&&v&&y.length>0&&(v.value=`<!--
`+g(y)+`
-->`)}})),i.addNodeFilter("#comment",(d=>{let m=d.length;for(;m--;){const f=d[m],g=f.value;l.preserve_cdata&&g?.indexOf("[CDATA[")===0?(f.name="#cdata",f.type=4,f.value=c.decode(g.replace(/^\[CDATA\[|\]\]$/g,""))):g?.indexOf("mce:protected ")===0&&(f.name="#text",f.type=3,f.raw=!0,f.value=unescape(g).substr(14))}})),i.addNodeFilter("xml:namespace,input",((d,m)=>{let f=d.length;for(;f--;){const g=d[f];g.type===7?g.remove():g.type===1&&(m!=="input"||g.attr("type")||g.attr("type","text"))}})),i.addAttributeFilter("data-mce-type",(d=>{K(d,(m=>{m.attr("data-mce-type")==="format-caret"&&(m.isEmpty(i.schema.getNonEmptyElements())?m.remove():m.unwrap())}))})),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",((d,m)=>{let f=d.length;for(;f--;)d[f].attr(m,null)})),l.remove_trailing_brs&&((d,m,f)=>{m.addNodeFilter("br",((g,h,b)=>{const v=k.extend({},f.getBlockElements()),y=f.getNonEmptyElements(),S=f.getWhitespaceElements();v.body=1;const N=D=>D.name in v||Sm(f,D);for(let D=0,T=g.length;D<T;D++){let R=g[D],P=R.parent;if(P&&N(P)&&R===P.lastChild){let L=R.prev;for(;L;){const F=L.name;if(F!=="span"||L.attr("data-mce-type")!=="bookmark"){F==="br"&&(R=null);break}L=L.prev}if(R&&(R.remove(),Ql(f,y,S,P))){const F=f.getElementRule(P.name);F&&(F.removeEmpty?P.remove():F.paddEmpty&&yp(d,b,N,P))}}else{let L=R;for(;P&&P.firstChild===L&&P.lastChild===L&&(L=P,!v[P.name]);)P=P.parent;if(L===P){const F=new On("#text",3);F.value=Ft,R.replace(F)}}}}))})(l,i,i.schema)})(a,o,r),{schema:s,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(i,l={})=>{const{indent:c,entity_encoding:d,...m}=l,f={format:"html",...m},g=((y,S,N)=>((D,T)=>ee(D)&&D.hasEventListeners("PreProcess")&&!T.no_events)(y,N)?((D,T,R)=>{let P;const L=D.dom;let F=T.cloneNode(!0);const W=document.implementation;if(W.createHTMLDocument){const O=W.createHTMLDocument("");k.each(F.nodeName==="BODY"?F.childNodes:[F],(I=>{O.body.appendChild(O.importNode(I,!0))})),F=F.nodeName!=="BODY"?O.body.firstChild:O.body,P=L.doc,L.doc=O}return((O,I)=>{O.dispatch("PreProcess",I)})(D,{...R,node:F}),P&&(L.doc=P),F})(y,S,N):S)(t,i,f),h=((y,S,N)=>{const D=vo(N.getInner?S.innerHTML:y.getOuterHTML(S));return N.selection||ld(E.fromDom(S))?D:k.trim(D)})(r,g,f),b=((y,S,N)=>{const D=N.selection?{forced_root_block:!1,...N}:N,T=y.parse(S,D);return(R=>{const P=F=>F?.name==="br",L=R.lastChild;if(P(L)){const F=L.prev;P(F)&&(L.remove(),F.remove())}})(T),T})(a,h,f);if(f.format==="tree")return b;const v={...o,...ee(c)?{indent:c}:{},...ee(d)?{entity_encoding:d}:{}};return((y,S,N,D,T)=>{const R=((P,L,F)=>Ds(P,L).serialize(F))(S,N,D);return((P,L,F)=>!L.no_events&&P?((O,I)=>O.dispatch("PostProcess",I))(P,{...L,content:F}).content:F)(y,T,R)})(t,v,s,b,f)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:ye(FR,a,n),getTempAttrs:le(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter}},Cx=(e,t)=>{const n=jR(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},qp=(e,t,n={})=>{const o=((r,s)=>({format:"html",...r,set:!0,content:s}))(n,t);Bp(e,o).each((r=>{const s=((a,i,l)=>$p(a).editor.setContent(i,l))(e,r.content,r);Pp(e,s.html,r)}))},tu=Nt.DOM,nu=e=>_.from(e).each((t=>t.destroy())),ou=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>Fe(e,t)}})(),Oi=zn.ModelManager,xx=(e,t)=>t.dom[e],wx=(e,t)=>parseInt(nr(t,e),10),zR=ye(xx,"clientWidth"),UR=ye(xx,"clientHeight"),HR=ye(wx,"margin-top"),$R=ye(wx,"margin-left"),Sx=e=>{const t=[],n=()=>{const l=e.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},o=()=>_.from(t[0]),r=()=>{o().each((l=>{l.reposition()}))},s=l=>{qs(t,(c=>c===l)).each((c=>{t.splice(c,1)}))},a=(l,c=!0)=>e.removed||!(d=>{return(m=d.inline?d.getBody():d.getContentAreaContainer(),_.from(m).map(E.fromDom)).map(Gr).getOr(!1);var m})(e)?{}:(c&&e.dispatch("BeforeOpenNotification",{notification:l}),qt(t,(d=>{return m=n().getArgs(d),f=l,!(m.type!==f.type||m.text!==f.text||m.progressBar||m.timeout||f.progressBar||f.timeout);var m,f})).getOrThunk((()=>{e.editorManager.setActive(e);const d=n().open(l,(()=>{s(d)}),(()=>Of(e)));return(m=>{t.push(m)})(d),r(),e.dispatch("OpenNotification",{notification:{...d}}),d}))),i=le(t);return(l=>{l.on("SkinLoaded",(()=>{const c=vA(l);c&&a({text:c,type:"warning",timeout:0},!1),r()})),l.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",(()=>{requestAnimationFrame(r)})),l.on("remove",(()=>{K(t.slice(),(c=>{n().close(c)}))})),l.on("keydown",(c=>{var d;const m=((d=c.key)===null||d===void 0?void 0:d.toLowerCase())==="f12"||c.keyCode===123;c.altKey&&m&&(c.preventDefault(),o().map((f=>E.fromDom(f.getEl()))).each((f=>vs(f))))}))})(e),{open:a,close:()=>{o().each((l=>{n().close(l),s(l),r()}))},getNotifications:i}},Bi=zn.PluginManager,Ta=zn.ThemeManager,Ex=e=>{let t=[];const n=()=>{const i=e.theme;return i&&i.getWindowManagerImpl?i.getWindowManagerImpl():(()=>{const l=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:l,openUrl:l,alert:l,confirm:l,close:l}})()},o=(i,l)=>(...c)=>l?l.apply(i,c):void 0,r=i=>{(c=>{e.dispatch("CloseWindow",{dialog:c})})(i);const l=qn(t,(({instanceApi:c,triggerElement:d})=>c===i?d:_.none()));t=Oe(t,(({instanceApi:c})=>c!==i)),t.length===0?e.focus():l.filter(Gr).each(vs)},s=i=>{e.editorManager.setActive(e),Td(e);const l=_r();e.ui.show();const c=i();return((d,m)=>{t.push({instanceApi:d,triggerElement:m}),(f=>{e.dispatch("OpenWindow",{dialog:f})})(d)})(c,l),c},a=i=>{t.length!==0&&i.each((l=>vs(l)))};return e.on("remove",(()=>{K(t,(({instanceApi:i})=>{n().close(i)}))})),{open:(i,l)=>s((()=>n().open(i,l,r))),openUrl:i=>s((()=>n().openUrl(i,r))),alert:(i,l,c)=>{const d=_r(),m=n();m.alert(i,o(c||m,(()=>{a(d),l?.()})))},confirm:(i,l,c)=>{const d=_r(),m=n();m.confirm(i,o(c||m,(f=>{a(d),l?.(f)})))},close:()=>{_.from(t[t.length-1]).each((({instanceApi:i})=>{n().close(i),r(i)}))}}},kx=(e,t)=>{e.notificationManager.open({type:"error",text:t})},ru=(e,t)=>{e._skinLoaded?kx(e,t):e.on("SkinLoaded",(()=>{kx(e,t)}))},Pi=(e,t,n)=>{xb(e,t,{message:n}),console.error(n)},Li=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,su=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},_x=new WeakMap,Nx=(e,t)=>{const{type:n,message:o}=t;e.notificationManager.open({type:n,text:o})},qR=e=>{(n=>{switch(n){case"error":return console.error;case"info":return console.info;case"warn":return console.warn;default:return console.log}})(e.type)(e.message)},Wp=(e,t)=>{const{console:n,editor:o}=t;ee(o)&&(e._skinLoaded?Nx(e,o):e.on("SkinLoaded",(()=>{Nx(e,o)}))),ee(n)&&qR(n)},Vp="Read more: https://www.tiny.cloud/docs/tinymce/latest/license-key/",WR="Make sure to provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms.",Ax=(e,t)=>{Wp(e,{console:{type:"error",message:[`The "${t}" plugin requires a valid TinyMCE license key.`,Vp].join(" ")}})},Tx="licensekeymanager",Dx=e=>{const t=(r=>we(mT(r))?"online":"offline")(e),n=(r=>{var s;const a=(s=uT(r))===null||s===void 0?void 0:s.toLowerCase();return a==="gpl"?"gpl":kt(a)?"no_key":"non_gpl"})(e),o=new Set(Ol(e)).has(Tx);return n!=="gpl"||t==="online"||o?{type:"use_plugin",onlineStatus:t,licenseKeyType:n,forcePlugin:o}:{type:"use_gpl",onlineStatus:t,licenseKeyType:n,forcePlugin:o}},au="manager",VR=Tx,Kp=(()=>{const e=zn();return{load:(t,n)=>{if(Dx(t).type==="use_plugin"){const o=`plugins/${VR}/plugin${n}.js`;e.load(au,o).catch((()=>{((r,s)=>{Pi(r,"LicenseKeyManagerLoadError",Li("license key manager",s))})(t,o)}))}},add:t=>{e.add(au,t)},init:t=>{const n=s=>{Object.defineProperty(t,"licenseKeyManager",{value:s,writable:!1,configurable:!1,enumerable:!0})},o=Dx(t),r=e.get(au);if(ee(r))n(r(t,e.urls[au]));else switch(o.type){case"use_gpl":n((s=>({validate:a=>{const{plugin:i}=a,l=we(i);return l&&Ax(s,i),Promise.resolve(!l)}}))(t));break;case"use_plugin":(s=>{_x.has(s)||(_x.set(s,!0),s.initialized?(s.removed||s.mode.set("readonly"),s.options.set("disabled",!0)):s.on("init",(()=>{s.removed||s.mode.set("readonly"),s.options.set("disabled",!0)})),s.on("DisabledStateChange",(a=>{const{state:i}=a;i||a.preventDefault()}),!0),s.on("SwitchMode",(a=>{const{mode:i}=a;i!=="readonly"&&s.mode.set("readonly")})))})(t),n((s=>({validate:a=>{const{plugin:i}=a;return we(i)&&Ax(s,i),Promise.resolve(!1)}}))(t)),o.onlineStatus==="offline"&&o.licenseKeyType==="no_key"?(s=>{const a="The editor is disabled because a TinyMCE license key has not been provided.";Wp(s,{console:{type:"error",message:[`${a}`,WR,Vp].join(" ")},editor:{type:"warning",message:`${a}`}})})(t):((s,a)=>{const i=(a==="online"?"API":"license")+" key",l=`The editor is disabled because the TinyMCE ${i} could not be validated.`;Wp(s,{console:{type:"error",message:[`${l}`,`The TinyMCE Commercial License Key Manager plugin is required for the provided ${i} to be validated but could not be loaded.`,Vp].join(" ")},editor:{type:"warning",message:`${l}`}})})(t,o.onlineStatus)}t.licenseKeyManager.validate({})}}})(),Xp=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},Rx=(e,t,n)=>{am(e,t)&&!n?gl(e,t):n&&ai(e,t)},Ox=e=>{const t=E.fromDom(e.getBody());Rx(t,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),(n=>{_.from(n.selection.getNode()).each((o=>{o.removeAttribute("data-mce-selected")}))})(e)},Bx=e=>{const t=E.fromDom(e.getBody());Rx(t,"mce-content-readonly",!1),e.hasEditableRoot()&&Gc(t,!0),((n,o)=>{Xp(n,"StyleWithCSS",o),Xp(n,"enableInlineTableEditing",o),Xp(n,"enableObjectResizing",o)})(e,!1),Of(e)&&e.focus(),(n=>{n.selection.setRng(n.selection.getRng())})(e),e.nodeChanged()},rs=e=>vd(e),Da="data-mce-contenteditable",Px=(e,t)=>{const n=E.fromDom(e.getBody());t?(Ox(e),Gc(n,!1),K(Dn(n,'*[contenteditable="true"]'),(o=>{Te(o,Da,"true"),Gc(o,!1)}))):(K(Dn(n,`*[${Da}="true"]`),(o=>{rt(o,Da),Gc(o,!0)})),Bx(e))},Lx=e=>{e.parser.addAttributeFilter("contenteditable",(t=>{rs(e)&&K(t,(n=>{n.attr(Da,n.attr("contenteditable")),n.attr("contenteditable","false")}))})),e.serializer.addAttributeFilter(Da,(t=>{rs(e)&&K(t,(n=>{n.attr("contenteditable",n.attr(Da))}))})),e.serializer.addTempAttr(Da)},KR=["copy"],Yp=e=>"content/"+e+"/content.css",Mx=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`;return We(t,(r=>(s=>tinymce.Resource.has(Yp(s)))(r)?r:(s=>/^[a-z0-9\-]+$/i.test(s))(r)&&!e.inline?`${n}/${r}/${o}`:e.documentBaseURI.toAbsolute(r)))},XR=(e,t)=>{const n={};return{findAll:(o,r=zt)=>{const s=Oe((i=>i?wn(i.getElementsByTagName("img")):[])(o),(i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===p.transparentSrc)&&(Jt(l,"blob:")?!e.isUploaded(l)&&r(i):!!Jt(l,"data:")&&r(i))})),a=We(s,(i=>{const l=i.src;if(Fe(n,l))return n[l].then((c=>we(c)?c:{image:i,blobInfo:c.blobInfo}));{const c=((d,m)=>{const f=()=>Promise.reject("Invalid data URI");if(Jt(m,"blob:")){const b=d.getByUri(m);return ee(b)?Promise.resolve(b):(g=m,Jt(g,"blob:")?(v=>fetch(v).then((y=>y.ok?y.blob():Promise.reject())).catch((()=>Promise.reject({message:`Cannot convert ${v} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))))(g):Jt(g,"data:")?(h=g,new Promise(((v,y)=>{wp(h).bind((({type:S,data:N,base64Encoded:D})=>c1(S,N,D))).fold((()=>y("Invalid data URI")),v)}))):Promise.reject("Unknown URI format")).then((v=>d1(v).then((y=>u1(y,!1,(S=>_.some(m1(d,v,S)))).getOrThunk(f)))))}var g,h;return Jt(m,"data:")?f1(d,m).fold(f,(b=>Promise.resolve(b))):Promise.reject("Unknown image data format")})(t,l).then((d=>(delete n[l],{image:i,blobInfo:d}))).catch((d=>(delete n[l],d)));return n[l]=c,c}}));return Promise.all(a)}}},Ix=()=>{let e={};const t=(o,r)=>({status:o,resultUri:r}),n=o=>o in e;return{hasBlobUri:n,getResultUri:o=>{const r=e[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&e[o].status===1,isUploaded:o=>!!n(o)&&e[o].status===2,markPending:o=>{e[o]=t(1,null)},markUploaded:(o,r)=>{e[o]=t(2,r)},removeFailed:o=>{delete e[o]},destroy:()=>{e={}}}};let YR=0;const GR=(e,t)=>{const n={},o=(l,c)=>new Promise(((d,m)=>{const f=new XMLHttpRequest;f.open("POST",t.url),f.withCredentials=t.credentials,f.upload.onprogress=h=>{c(h.loaded/h.total*100)},f.onerror=()=>{m("Image upload failed due to a XHR Transport error. Code: "+f.status)},f.onload=()=>{if(f.status<200||f.status>=300)return void m("HTTP Error: "+f.status);const h=JSON.parse(f.responseText);var b,v;h&&we(h.location)?d((b=t.basePath,v=h.location,b?b.replace(/\/$/,"")+"/"+v.replace(/^\//,""):v)):m("Invalid JSON: "+f.responseText)};const g=new FormData;g.append("file",l.blob(),l.filename()),f.send(g)})),r=bt(t.handler)?t.handler:o,s=(l,c)=>({url:c,blobInfo:l,status:!0}),a=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),i=(l,c)=>{k.each(n[l],(d=>{d(c)})),delete n[l]};return{upload:(l,c)=>t.url||r!==o?((d,m)=>(d=k.grep(d,(f=>!e.isUploaded(f.blobUri()))),Promise.all(k.map(d,(f=>e.isPending(f.blobUri())?(g=>{const h=g.blobUri();return new Promise((b=>{n[h]=n[h]||[],n[h].push(b)}))})(f):((g,h,b)=>(e.markPending(g.blobUri()),new Promise((v=>{let y,S;try{const N=()=>{y&&(y.close(),S=ke)},D=R=>{N(),e.markUploaded(g.blobUri(),R),i(g.blobUri(),s(g,R)),v(s(g,R))},T=R=>{N(),e.removeFailed(g.blobUri()),i(g.blobUri(),a(g,R)),v(a(g,R))};S=R=>{R<0||R>100||_.from(y).orThunk((()=>_.from(b).map(gr))).each((P=>{y=P,P.progressBar.value(R)}))},h(g,S).then(D,(R=>{T(we(R)?{message:R}:R)}))}catch(N){v(a(g,N))}}))))(f,r,m))))))(l,c):new Promise((d=>{d([])}))}},Fx=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),jx=(e,t)=>GR(t,{url:sA(e),basePath:aA(e),credentials:iA(e),handler:lA(e)}),QR=e=>{const t=(()=>{let b=[];const v=N=>{if(!N.blob||!N.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const D=N.id||"blobid"+YR+++(()=>{const L=()=>Math.round(4294967295*$a()).toString(36);return"s"+new Date().getTime().toString(36)+L()+L()+L()})(),T=N.name||D,R=N.blob;var P;return{id:le(D),name:le(T),filename:le(N.filename||T+"."+(P=R.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[P.toLowerCase()]||"dat")),blob:le(R),base64:le(N.base64),blobUri:le(N.blobUri||URL.createObjectURL(R)),uri:le(N.uri)}},y=N=>qt(b,N).getOrUndefined(),S=N=>y((D=>D.id()===N));return{create:(N,D,T,R,P)=>{if(we(N))return v({id:N,name:R,filename:P,blob:D,base64:T});if(Ue(N))return v(N);throw new Error("Unknown input type")},add:N=>{S(N.id())||b.push(N)},get:S,getByUri:N=>y((D=>D.blobUri()===N)),getByData:(N,D)=>y((T=>T.base64()===N&&T.blob().type===D)),findFirst:y,removeByUri:N=>{b=Oe(b,(D=>D.blobUri()!==N||(URL.revokeObjectURL(D.blobUri()),!1)))},destroy:()=>{K(b,(N=>{URL.revokeObjectURL(N.blobUri())})),b=[]}}})();let n,o;const r=Ix(),s=[],a=b=>v=>e.selection?b(v):[],i=(b,v,y)=>{let S=0;do S=b.indexOf(v,S),S!==-1&&(b=b.substring(0,S)+y+b.substr(S+v.length),S+=y.length-v.length+1);while(S!==-1);return b},l=(b,v,y)=>{const S=`src="${y}"${y===p.transparentSrc?' data-mce-placeholder="1"':""}`;return b=i(b,`src="${v}"`,S),i(b,'data-mce-src="'+v+'"','data-mce-src="'+y+'"')},c=(b,v)=>{K(e.undoManager.data,(y=>{y.type==="fragmented"?y.fragments=We(y.fragments,(S=>l(S,b,v))):y.content=l(y.content,b,v)}))},d=()=>(n||(n=jx(e,r)),g().then(a((b=>{const v=We(b,(y=>y.blobInfo));return n.upload(v,Fx(e)).then(a((y=>{const S=[];let N=!1;const D=We(y,((T,R)=>{const{blobInfo:P,image:L}=b[R];let F=!1;return T.status&&oA(e)?(T.url&&!bn(L.src,T.url)&&(N=!0),t.removeByUri(L.src),Lr(e)||((W,O)=>{const I=e.convertURL(O,"src");var H;c(W.src,O),Ne(E.fromDom(W),{src:Ob(e)?(H=O,H+(H.indexOf("?")===-1?"?":"&")+new Date().getTime()):O,"data-mce-src":I})})(L,T.url)):T.error&&(T.error.remove&&(c(L.src,p.transparentSrc),S.push(L),F=!0),((W,O)=>{ru(W,lr.translate(["Failed to upload image: {0}",O]))})(e,T.error.message)),{element:L,status:T.status,uploadUri:T.url,blobInfo:P,removed:F}}));return S.length>0&&!Lr(e)?e.undoManager.transact((()=>{K(Tn(S),(T=>{const R=vn(T);ct(T),R.each((P=>L=>{((F,W)=>F.dom.isEmpty(W.dom)&&ee(F.schema.getTextBlockElements()[Me(W)]))(P,L)&&X(L,E.fromHtml('<br data-mce-bogus="1" />'))})(e)),t.removeByUri(T.dom.src)}))})):N&&e.undoManager.dispatchChange(),D})))})))),m=()=>Rb(e)?d():Promise.resolve([]),f=b=>oo(s,(v=>v(b))),g=()=>(o||(o=XR(r,t)),o.findAll(e.getBody(),f).then(a((b=>{const v=Oe(b,(y=>we(y)?(ru(e,y),!1):y.uriType!=="blob"));return Lr(e)||K(v,(y=>{c(y.image.src,y.blobInfo.blobUri()),y.image.src=y.blobInfo.blobUri(),y.image.removeAttribute("data-mce-src")})),v})))),h=b=>b.replace(/src="(blob:[^"]+)"/g,((v,y)=>{const S=r.getResultUri(y);if(S)return'src="'+S+'"';let N=t.getByUri(y);return N||(N=Qt(e.editorManager.get(),((D,T)=>D||T.editorUpload&&T.editorUpload.blobCache.getByUri(y)),void 0)),N?'src="data:'+N.blob().type+";base64,"+N.base64()+'"':v}));return e.on("SetContent",(()=>{Rb(e)?m():g()})),e.on("RawSaveContent",(b=>{b.content=h(b.content)})),e.on("GetContent",(b=>{b.source_view||b.format==="raw"||b.format==="tree"||(b.content=h(b.content))})),e.on("PostRender",(()=>{e.parser.addNodeFilter("img",(b=>{K(b,(v=>{const y=v.attr("src");if(!y||t.getByUri(y))return;const S=r.getResultUri(y);S&&v.attr("src",S)}))}))})),{blobCache:t,addFilter:b=>{s.push(b)},uploadImages:d,uploadImagesAuto:m,scanForImages:g,destroy:()=>{t.destroy(),r.destroy(),o=n=null}}},zx={remove_similar:!0,inherit:!1},Mi={selector:"td,th",...zx},JR={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Mi},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Mi},tablecellbordercolor:{styles:{borderColor:"%value"},...Mi},tablecellclass:{classes:["%value"],...Mi},tableclass:{selector:"table",classes:["%value"],...zx},tablecellborderstyle:{styles:{borderStyle:"%value"},...Mi},tablecellborderwidth:{styles:{borderWidth:"%value"},...Mi}},ZR=le(JR),iu=k.each,Fo=Nt.DOM,Gp=e=>ee(e)&&Ue(e),Ux=(e,t)=>{const n=t&&t.schema||ws({}),o=a=>{const i=we(a)?{name:a,classes:[],attrs:{}}:a,l=Fo.create(i.name);return((c,d)=>{d.classes.length>0&&Fo.addClass(c,d.classes.join(" ")),Fo.setAttribs(c,d.attrs)})(l,i),l},r=(a,i,l)=>{let c;const d=i[0],m=Gp(d)?d.name:void 0,f=((b,v)=>{const y=n.getElementRule(b.nodeName.toLowerCase()),S=y?.parentsRequired;return!(!S||!S.length)&&(v&&Se(S,v)?v:S[0])})(a,m);if(f)m===f?(c=d,i=i.slice(1)):c=f;else if(d)c=d,i=i.slice(1);else if(!l)return a;const g=c?o(c):Fo.create("div");g.appendChild(a),l&&k.each(l,(b=>{const v=o(b);g.insertBefore(v,a)}));const h=Gp(c)?c.siblings:void 0;return r(g,i,h)},s=Fo.create("div");if(e.length>0){const a=e[0],i=o(a),l=Gp(a)?a.siblings:void 0;s.appendChild(r(i,e.slice(1),l))}return s},eO=e=>{let t="div";const n={name:t,classes:[],attrs:{},selector:e=k.trim(e)};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,((o,r,s,a,i)=>{switch(r){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":k.inArray("checked disabled enabled read-only required".split(" "),s)!==-1&&(n.attrs[s]=s)}if(a==="["){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""}))),n.name=t||"div",n},tO=(e,t)=>{let n="",o=wA(e);if(o==="")return"";const r=g=>we(g)?g.replace(/%(\w+)/g,""):"",s=(g,h)=>Fo.getStyle(h??e.getBody(),g,!0);if(we(t)){const g=e.formatter.get(t);if(!g)return"";t=g[0]}if("preview"in t){const g=t.preview;if(g===!1)return"";o=g||o}let a,i=t.block||t.inline||"span";const l=(c=t.selector,we(c)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),k.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),(g=>{const h=k.map(g.split(/(?:~\+|~|\+)/),eO),b=h.pop();return h.length&&(b.siblings=h),b})).reverse()):[]);var c;l.length>0?(l[0].name||(l[0].name=i),i=t.selector,a=Ux(l,e)):a=Ux([i],e);const d=Fo.select(i,a)[0]||a.firstChild;iu(t.styles,((g,h)=>{const b=r(g);b&&Fo.setStyle(d,h,b)})),iu(t.attributes,((g,h)=>{const b=r(g);b&&Fo.setAttrib(d,h,b)})),iu(t.classes,(g=>{const h=r(g);Fo.hasClass(d,h)||Fo.addClass(d,h)})),e.dispatch("PreviewFormats"),Fo.setStyles(a,{position:"absolute",left:-65535}),e.getBody().appendChild(a);const m=s("fontSize"),f=/px$/.test(m)?parseInt(m,10):0;return iu(o.split(" "),(g=>{let h=s(g,d);if(!(g==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(h)&&(h=s(g),vl(h).toLowerCase()==="#ffffff")||g==="color"&&vl(h).toLowerCase()==="#000000")){if(g==="font-size"&&/em|%$/.test(h)){if(f===0)return;h=parseFloat(h)/(/%$/.test(h)?100:1)*f+"px"}g==="border"&&h&&(n+="padding:0 2px;"),n+=g+":"+h+";"}})),e.dispatch("AfterPreviewFormats"),Fo.remove(a),n},Hx=e=>{const t=(o=>{const r={},s=(a,i)=>{a&&(we(a)?(re(i)||(i=[i]),K(i,(l=>{Mt(l.deep)&&(l.deep=!Po(l)),Mt(l.split)&&(l.split=!Po(l)||mn(l)),Mt(l.remove)&&Po(l)&&!mn(l)&&(l.remove="none"),Po(l)&&mn(l)&&(l.mixed=!0,l.block_expand=!0),we(l.classes)&&(l.classes=l.classes.split(/\s+/))})),r[a]=i):xt(a,((l,c)=>{s(c,l)})))};return s((a=>{const i=a.dom,l=a.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:d=>{i.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:d=>{i.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const d={inline:"span",styles:{textDecoration:"line-through"},exact:!0},m={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return l!=="html4"?[f,d,m]:[d,f,m]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(d,m,f)=>Ce(d)&&d.hasAttribute("href"),onformat:(d,m,f)=>{k.each(f,((g,h)=>{i.setAttrib(d,h,g)}))}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":d=>{var m;return(m=d?.customValue)!==null&&m!==void 0?m:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return k.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),(d=>{c[d]={block:d,remove:"all"}})),c})(o)),s(ZR()),s(xA(o)),{get:a=>ee(a)?r[a]:r,has:a=>Fe(r,a),register:s,unregister:a=>(a&&r[a]&&delete r[a],r)}})(e),n=tn({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),(o=>{o.on("mouseup keydown",(r=>{var s;((a,i,l)=>{const c=a.selection,d=a.getBody();up(a,null,l),i!==8&&i!==46||!c.isCollapsed()||c.getStart().innerHTML!==Yl||up(a,wa(d,c.getStart()),!0),i!==37&&i!==39||up(a,wa(d,c.getStart()),!0)})(o,r.keyCode,(s=o.selection.getRng().endContainer,se(s)&&Ya(s.data,Ft)))}))})(e),Lr(e)||((o,r)=>{o.set({}),r.on("NodeChange",(s=>{rx(r,s.element,o.get())})),r.on("FormatApply FormatRemove",(s=>{const a=_.from(s.node).map((i=>zl(i)?i:i.startContainer)).bind((i=>Ce(i)?_.some(i):_.from(i.parentElement))).getOrThunk((()=>tx(r)));rx(r,a,o.get())}))})(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(o,r,s)=>{((a,i,l,c)=>{cn(a).formatter.apply(i,l,c)})(e,o,r,s)},remove:(o,r,s,a)=>{((i,l,c,d,m)=>{cn(i).formatter.remove(l,c,d,m)})(e,o,r,s,a)},toggle:(o,r,s)=>{((a,i,l,c)=>{cn(a).formatter.toggle(i,l,c)})(e,o,r,s)},match:(o,r,s,a)=>((i,l,c,d,m)=>cn(i).formatter.match(l,c,d,m))(e,o,r,s,a),closest:o=>((r,s)=>cn(r).formatter.closest(s))(e,o),matchAll:(o,r)=>((s,a,i)=>cn(s).formatter.matchAll(a,i))(e,o,r),matchNode:(o,r,s,a)=>((i,l,c,d,m)=>cn(i).formatter.matchNode(l,c,d,m))(e,o,r,s,a),canApply:o=>((r,s)=>cn(r).formatter.canApply(s))(e,o),formatChanged:(o,r,s,a)=>((i,l,c,d,m,f)=>cn(i).formatter.formatChanged(l,c,d,m,f))(e,n,o,r,s,a),getCssText:ye(tO,e)}},$x=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},qx=e=>{const t=Wo(),n=tn(0),o=tn(0),r={data:[],typing:!1,beforeChange:()=>{((s,a,i)=>{cn(s).undoManager.beforeChange(a,i)})(e,n,t)},add:(s,a)=>((i,l,c,d,m,f,g)=>cn(i).undoManager.add(l,c,d,m,f,g))(e,r,o,n,t,s,a),dispatchChange:()=>{e.setDirty(!0);const s=Zd(e);s.bookmark=Ym(e.selection),e.dispatch("change",{level:s,lastLevel:Ws(r.data,o.get()).getOrUndefined()})},undo:()=>((s,a,i,l)=>cn(s).undoManager.undo(a,i,l))(e,r,n,o),redo:()=>((s,a,i)=>cn(s).undoManager.redo(a,i))(e,o,r.data),clear:()=>{((s,a,i)=>{cn(s).undoManager.clear(a,i)})(e,r,o)},reset:()=>{((s,a)=>{cn(s).undoManager.reset(a)})(e,r)},hasUndo:()=>((s,a,i)=>cn(s).undoManager.hasUndo(a,i))(e,r,o),hasRedo:()=>((s,a,i)=>cn(s).undoManager.hasRedo(a,i))(e,r,o),transact:s=>((a,i,l,c)=>cn(a).undoManager.transact(i,l,c))(e,r,n,s),ignore:s=>{((a,i,l)=>{cn(a).undoManager.ignore(i,l)})(e,n,s)},extra:(s,a)=>{((i,l,c,d,m)=>{cn(i).undoManager.extra(l,c,d,m)})(e,r,o,s,a)}};return Lr(e)||((s,a,i)=>{const l=tn(!1),c=d=>{eu(a,!1,i),a.add({},d)};s.on("init",(()=>{a.add()})),s.on("BeforeExecCommand",(d=>{const m=d.command;$x(m)||(px(a,i),a.beforeChange())})),s.on("ExecCommand",(d=>{const m=d.command;$x(m)||c(d)})),s.on("ObjectResizeStart cut",(()=>{a.beforeChange()})),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",(d=>{const m=d.keyCode;if(d.isDefaultPrevented())return;const f=p.os.isMacOS()&&d.key==="Meta";(m>=33&&m<=36||m>=37&&m<=40||m===45||d.ctrlKey||f)&&(c(),s.nodeChanged()),m!==46&&m!==8||s.nodeChanged(),l.get()&&a.typing&&!Up(Zd(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())})),s.on("keydown",(d=>{const m=d.keyCode;if(d.isDefaultPrevented())return;if(m>=33&&m<=36||m>=37&&m<=40||m===45)return void(a.typing&&c(d));const f=d.ctrlKey&&!d.altKey||d.metaKey;if((m<16||m>20)&&m!==224&&m!==91&&!a.typing&&!f)return a.beforeChange(),eu(a,!0,i),a.add({},d),void l.set(!0);(p.os.isMacOS()?d.metaKey:d.ctrlKey&&!d.altKey)&&a.beforeChange()})),s.on("mousedown",(d=>{a.typing&&c(d)})),s.on("input",(d=>{var m;d.inputType&&(d.inputType==="insertReplacementText"||(m=d).inputType==="insertText"&&m.data===null||(f=>f.inputType==="insertFromPaste"||f.inputType==="insertFromDrop")(d))&&c(d)})),s.on("AddUndo Undo Redo ClearUndos",(d=>{d.isDefaultPrevented()||s.nodeChanged()}))})(e,r,n),(s=>{s.addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo")})(e),r},nO=[9,27,me.HOME,me.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,me.DOWN,me.UP,me.LEFT,me.RIGHT].concat(p.browser.isFirefox()?[224]:[]),Wx="data-mce-placeholder",Vx=e=>e.type==="keydown"||e.type==="keyup",Kx=e=>{const t=e.keyCode;return t===me.BACKSPACE||t===me.DELETE},lu=e=>t=>ee(t)&&e.test(t.nodeName),Mr=e=>ee(e)&&e.nodeType===3,Xx=e=>ee(e)&&e.nodeType===1,jo=lu(/^(OL|UL|DL)$/),oO=lu(/^(OL|UL)$/),cu=lu(/^(LI|DT|DD)$/),rO=lu(/^(DT|DD)$/),Ra=e=>ee(e)&&e.nodeName.toLowerCase()==="br",Qp=(e,t)=>ee(t)&&t.nodeName in e.schema.getTextBlockElements(),Jp=(e,t)=>ee(e)&&e.nodeName in t,sO=(e,t)=>ee(t)&&t.nodeName in e.schema.getVoidElements(),Oa=(e,t,n)=>{const o=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&o},Yx=(e,t)=>e.isChildOf(t,e.getRoot()),Gx=Nt.DOM,Zp=(e,t)=>{const n=k.grep(e.select("ol,ul",t));k.each(n,(o=>{((r,s)=>{const a=s.parentElement;if(a&&a.nodeName==="LI"&&a.firstChild===s){const i=a.previousSibling;i&&i.nodeName==="LI"?(i.appendChild(s),Oa(r,a)&&Gx.remove(a)):Gx.setStyle(a,"listStyleType","none")}if(jo(a)){const i=a.previousSibling;i&&i.nodeName==="LI"&&i.appendChild(s)}})(e,o)}))},Qx=(e,t)=>{if(Mr(e))return{container:e,offset:t};const n=Pr.getNode(e,t);return Mr(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&Mr(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&Mr(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},eg=e=>{const t=e.cloneRange(),n=Qx(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);const o=Qx(e.endContainer,e.endOffset);return t.setEnd(o.container,o.offset),t},Jx=["OL","UL","DL"],Zx=Jx.join(","),oc=(e,t)=>{const n=t||e.selection.getStart(!0);return e.dom.getParent(n,Zx,rc(e,n))},tg=e=>{const t=e.selection.getSelectedBlocks();return Oe(((n,o)=>{const r=k.map(o,(s=>n.dom.getParent(s,"li,dd,dt",rc(n,s))||s));return So(r)})(e,t),cu)},ng=(e,t)=>{const n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},rc=(e,t)=>{const n=e.dom.getParents(t,e.dom.isBlock);return qt(n,(r=>{return(i=>i.nodeName.toLowerCase()!==En(e))(r)&&(s=e.schema,!jo(a=r)&&!cu(a)&&Ct(Jx,(i=>s.isValidChild(a.nodeName,i))));var s,a})).getOr(e.getBody())},ew=(e,t)=>{const n=e.dom.getParents(t,"ol,ul",rc(e,t));return ro(n)},aO=(e,t)=>{const n=We(t,(o=>ew(e,o).getOr(o)));return So(n)},du=e=>/\btox\-/.test(e.className),tw=(e,t)=>t!==null&&!e.dom.isEditable(t),og=(e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return tw(e,n)||!e.selection.isEditable()},Ba=(e,t,n)=>e.dispatch("ListMutation",{action:t,element:n}),nw=(e,t,n={})=>{const o=e.dom,r=e.schema.getBlockElements(),s=o.createFragment(),a=En(e),i=vi(e);let l,c,d=!1;for(c=o.create(a,{...i,...n.style?{style:n.style}:{}}),Jp(t.firstChild,r)||s.appendChild(c);l=t.firstChild;){const m=l.nodeName;d||m==="SPAN"&&l.getAttribute("data-mce-type")==="bookmark"||(d=!0),Jp(l,r)?(s.appendChild(l),c=null):(c||(c=o.create(a,i),s.appendChild(c)),c.appendChild(l))}return!d&&c&&c.appendChild(o.create("br",{"data-mce-bogus":"1"})),s},sc=e=>ut(e,"OL,UL"),ow=e=>Pt(e).exists(sc),Pa=e=>"listAttributes"in e,rw=e=>"isComment"in e,sw=e=>e.depth>0,iO=e=>e.isSelected,lO=e=>{const t=ht(e),n=Vn(e).exists(sc)?t.slice(0,-1):t;return We(n,Ht)},aw=(e,t)=>{X(e.item,t.list)},cO=(e,t)=>{const n={list:E.fromTag(t,e),item:E.fromTag("li",e)};return X(n.list,n.item),n},iw=(e,t,n)=>{const o=t.slice(0,n.depth);return ro(o).each((r=>{if(Pa(n)){const s=((a,i,l)=>{const c=E.fromTag("li",a);return Ne(c,i),De(c,l),c})(e,n.itemAttributes,n.content);((a,i)=>{X(a.list,i),a.item=i})(r,s),((a,i)=>{Me(a.list)!==i.listType&&(a.list=Xo(a.list,i.listType)),Ne(a.list,i.listAttributes)})(r,n)}else if((s=>"isFragment"in s)(n))De(r.item,n.content);else{const s=E.fromHtml(`<!--${n.content}-->`);X(r.list,s)}})),o},lw=e=>(K(e,((t,n)=>{((o,r)=>{const s=o[r].depth,a=l=>l.depth===s&&!l.dirty,i=l=>l.depth<s;return go(wo(o.slice(0,r)),a,i).orThunk((()=>go(o.slice(r+1),a,i)))})(e,n).fold((()=>{t.dirty&&Pa(t)&&(o=>{o.listAttributes=er(o.listAttributes,((r,s)=>s!=="start"))})(t)}),(o=>{return s=o,void(Pa(r=t)&&Pa(s)&&(r.listType=s.listType,r.listAttributes={...s.listAttributes}));var r,s}))})),e),cw=(e,t,n,o)=>{var r;if(wt(o))return[{depth:e+1,content:(r=o.dom.nodeValue)!==null&&r!==void 0?r:"",dirty:!1,isSelected:!1,isComment:!0}];t.each((i=>{pe(i.start,o)&&n.set(!0)}));const s=((i,l,c)=>vn(i).filter(ot).map((d=>({depth:l,dirty:!1,isSelected:c,content:lO(i),itemAttributes:Zt(i),listAttributes:Zt(d),listType:Me(d),isInPreviousLi:!1}))))(o,e,n.get());t.each((i=>{pe(i.end,o)&&n.set(!1)}));const a=Vn(o).filter(sc).map((i=>uu(e,t,n,i))).getOr([]);return s.toArray().concat(a)},dO=(e,t,n,o)=>Pt(o).filter(sc).fold((()=>cw(e,t,n,o)),(r=>{const s=Qt(ht(o),((a,i,l)=>{if(l===0)return a;if(ut(i,"LI"))return a.concat(cw(e,t,n,i));{const c={isFragment:!0,depth:e,content:[i],isSelected:!1,dirty:!1,parentListType:Me(r)};return a.concat(c)}}),[]);return uu(e,t,n,r).concat(s)})),uu=(e,t,n,o)=>Wt(ht(o),(r=>(sc(r)?uu:dO)(e+1,t,n,r))),uO=(e,t)=>{const n=lw(t);return((o,r)=>{let s=_.none();const a=Qt(r,((i,l,c)=>rw(l)?c===0?(s=_.some(l),i):iw(o,i,l):l.depth>i.length?((d,m,f)=>{const g=((b,v,y)=>{const S=[];for(let N=0;N<y;N++)S.push(cO(b,Pa(v)?v.listType:v.parentListType));return S})(d,f,f.depth-m.length);var h;return(b=>{for(let v=1;v<b.length;v++)aw(b[v-1],b[v])})(g),((b,v)=>{for(let y=0;y<b.length-1;y++)qc(b[y].item,"list-style-type","none");ro(b).each((y=>{Pa(v)&&(Ne(y.list,v.listAttributes),Ne(y.item,v.itemAttributes)),De(y.item,v.content)}))})(g,f),h=g,Ut(ro(m),sn(h),aw),m.concat(g)})(o,i,l):iw(o,i,l)),[]);return s.each((i=>{const l=E.fromHtml(`<!--${i.content}-->`);sn(a).each((c=>{q(c.list,l)}))})),sn(a).map((i=>i.list))})(e.contentDocument,n).toArray()},mO=(e,t,n)=>{const o=((r,s)=>{const a=tn(!1);return We(r,(i=>({sourceList:i,entries:uu(0,s,a,i)})))})(t,(r=>{const s=We(tg(r),E.fromDom);return Ut(qt(s,qo(ow)),qt(wo(s),qo(ow)),((a,i)=>({start:a,end:i})))})(e));K(o,(r=>{((i,l,c)=>{K(Oe(l,iO),(d=>((m,f,g)=>{switch(f){case"Indent":if(!((h,b)=>Kb(h).map((v=>v>=b)).getOr(!0))(m,g.depth))return;g.depth++;break;case"Outdent":g.depth--;break;case"Flatten":g.depth=0}g.dirty=!0})(i,c,d)))})(e,r.entries,n);const s=((i,l)=>Wt(((c,d)=>{if(c.length===0)return[];{let m=d(c[0]);const f=[];let g=[];for(let h=0,b=c.length;h<b;h++){const v=c[h],y=d(v);y!==m&&(f.push(g),g=[]),m=y,g.push(v)}return g.length!==0&&f.push(g),f}})(l,sw),(c=>sn(c).exists(sw)?uO(i,c):((d,m)=>{const f=lw(m);return We(f,(g=>{const h=rw(g)?fl([E.fromHtml(`<!--${g.content}-->`)]):fl(g.content),b=Pa(g)?g.itemAttributes:{};return E.fromDom(nw(d,h.dom,b))}))})(i,c))))(e,r.entries);var a;K(s,(i=>{Ba(e,n==="Indent"?"IndentList":"OutdentList",i.dom)})),a=r.sourceList,K(s,(i=>{un(a,i)})),ct(r.sourceList)}))},Ms=Nt.DOM,fO=Sn("dd"),dw=Sn("dt"),pO=e=>{dw(e)&&Xo(e,"dd")},gO=(e,t,n)=>{K(n,t==="Indent"?pO:o=>((r,s)=>{fO(s)?Xo(s,"dt"):dw(s)&&An(s).each((a=>((i,l,c)=>{const d=Ms.select('span[data-mce-type="bookmark"]',l),m=nw(i,c),f=Ms.createRng();f.setStartAfter(c),f.setEndAfter(l);const g=f.extractContents();for(let b=g.firstChild;b;b=b.firstChild)if(b.nodeName==="LI"&&i.dom.isEmpty(b)){Ms.remove(b);break}i.dom.isEmpty(g)||Ms.insertAfter(g,l),Ms.insertAfter(m,l);const h=c.parentElement;h&&Oa(i.dom,h)&&(b=>{const v=b.parentNode;v&&k.each(d,(y=>{v.insertBefore(y,c.parentNode)})),Ms.remove(b)})(h),Ms.remove(c),Oa(i.dom,l)&&Ms.remove(l)})(r,a.dom,s.dom)))})(e,o))},hO=(e,t)=>{const n=Tn((s=>{const a=(l=>{const c=ew(l,l.selection.getStart()),d=Oe(l.selection.getSelectedBlocks(),oO);return c.toArray().concat(d)})(s),i=(l=>{const c=l.selection.getStart();return l.dom.getParents(c,"ol,ul",rc(l,c))})(s);return qt(i,(l=>{return c=E.fromDom(l),vn(c).exists((d=>cu(d.dom)&&Pt(d).exists((m=>!jo(m.dom)))&&Vn(d).exists((m=>!jo(m.dom)))));var c})).fold((()=>aO(s,a)),(l=>[l]))})(e)),o=Tn((s=>Oe(tg(s),rO))(e));let r=!1;if(n.length||o.length){const s=e.selection.getBookmark();mO(e,n,t),gO(e,t,o),e.selection.moveToBookmark(s),e.selection.setRng(eg(e.selection.getRng())),e.nodeChanged(),r=!0}return r},rg=(e,t)=>!(n=>{const o=oc(n);return tw(n,o)||!n.selection.isEditable()})(e)&&hO(e,t),uw=e=>rg(e,"Indent"),sg=e=>rg(e,"Outdent"),mu=e=>rg(e,"Flatten"),Ii=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},mw=(e,t)=>{k.each(t,((n,o)=>{e.setAttribute(o,n)}))},Fi=(e,t,n)=>{((o,r,s)=>{const a=s["list-style-type"]?s["list-style-type"]:null;o.setStyle(r,"list-style-type",a)})(e,t,n),((o,r,s)=>{mw(r,s["list-attributes"]),k.each(o.select("li",r),(a=>{mw(a,s["list-item-attributes"])}))})(e,t,n)},fu=(e,t)=>ee(t)&&!Jp(t,e.schema.getBlockElements()),ag=(e,t,n,o)=>{let r=t[n?"startContainer":"endContainer"];const s=t[n?"startOffset":"endOffset"];Xx(r)&&(r=r.childNodes[Math.min(s,r.childNodes.length-1)]||r),!n&&Ra(r.nextSibling)&&(r=r.nextSibling);const a=(i,l)=>{var c;const d=new ln(i,(g=>{for(;!e.dom.isBlock(g)&&g.parentNode&&o!==g;)g=g.parentNode;return g})(i)),m=l?"next":"prev";let f;for(;f=d[m]();)if(!sO(e,f)&&!Xr(f.textContent)&&((c=f.textContent)===null||c===void 0?void 0:c.length)!==0)return _.some(f);return _.none()};if(n&&Mr(r))if(Xr(r.textContent))r=a(r,!1).getOr(r);else for(r.parentNode!==null&&fu(e,r.parentNode)&&(r=r.parentNode);r.previousSibling!==null&&(fu(e,r.previousSibling)||Mr(r.previousSibling));)r=r.previousSibling;if(!n&&Mr(r))if(Xr(r.textContent))r=a(r,!0).getOr(r);else for(r.parentNode!==null&&fu(e,r.parentNode)&&(r=r.parentNode);r.nextSibling!==null&&(fu(e,r.nextSibling)||Mr(r.nextSibling));)r=r.nextSibling;for(;r.parentNode!==o;){const i=r.parentNode;if(Qp(e,r)||/^(TD|TH)$/.test(i.nodeName))return r;r=i}return r},ig=(e,t,n)=>{const o=e.selection.getRng();let r="LI";const s=rc(e,((c,d)=>{const m=c.selection.getStart(!0),f=ag(c,d,!0,c.getBody());return g=E.fromDom(f),h=E.fromDom(d.commonAncestorContainer),im(g,ye(pe,h))?d.commonAncestorContainer:m;var g,h})(e,o)),a=e.dom;if(a.getContentEditable(e.selection.getNode())==="false")return;(t=t.toUpperCase())==="DL"&&(r="DT");const i=ts(o),l=Oe(((c,d,m)=>{const f=[],g=c.dom,h=ag(c,d,!0,m),b=ag(c,d,!1,m);let v;const y=[];for(let S=h;S&&(y.push(S),S!==b);S=S.nextSibling);return k.each(y,(S=>{var N;if(Qp(c,S))return f.push(S),void(v=null);if(g.isBlock(S)||Ra(S))return Ra(S)&&g.remove(S),void(v=null);const D=S.nextSibling;_i.isBookmarkNode(S)&&(jo(D)||Qp(c,D)||!D&&S.parentNode===m)?v=null:(v||(v=g.create("p"),(N=S.parentNode)===null||N===void 0||N.insertBefore(v,S),f.push(v)),v.appendChild(S))})),f})(e,o,s),e.dom.isEditable);k.each(l,(c=>{let d;const m=c.previousSibling,f=c.parentNode;cu(f)||(m&&jo(m)&&m.nodeName===t&&((g,h,b)=>{const v=g.getStyle(h,"list-style-type");let y=b?b["list-style-type"]:"";return y=y===null?"":y,v===y})(a,m,n)?(d=m,c=a.rename(c,r),m.appendChild(c)):(d=a.create(t),f.insertBefore(d,c),d.appendChild(c),c=a.rename(c,r)),((g,h)=>{k.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],(b=>g.setStyle(h,b,"")))})(a,c),Fi(a,d,n),lg(e.dom,d))})),e.selection.setRng(ns(i))},fw=(e,t,n)=>{return((r,s)=>jo(r)&&r.nodeName===s?.nodeName)(t,n)&&((r,s,a)=>r.getStyle(s,"list-style-type",!0)===r.getStyle(a,"list-style-type",!0))(e,t,n)&&(o=n,t.className===o.className);var o},lg=(e,t)=>{let n,o=t.nextSibling;if(fw(e,t,o)){const r=o;for(;n=r.firstChild;)t.appendChild(n);e.remove(r)}if(o=t.previousSibling,fw(e,t,o)){const r=o;for(;n=r.lastChild;)t.insertBefore(n,t.firstChild);e.remove(r)}},bO=(e,t,n,o)=>{if(t.nodeName!==n){const r=e.dom.rename(t,n);Fi(e.dom,r,o),Ba(e,Ii(n),r)}else Fi(e.dom,t,o),Ba(e,Ii(n),t)},vO=(e,t,n,o)=>{if(t.classList.forEach(((r,s,a)=>{r.startsWith("tox-")&&(a.remove(r),a.length===0&&t.removeAttribute("class"))})),t.nodeName!==n){const r=e.dom.rename(t,n);Fi(e.dom,r,o),Ba(e,Ii(n),r)}else Fi(e.dom,t,o),Ba(e,Ii(n),t)},pw=e=>"list-style-type"in e,cg=(e,t,n)=>{const o=oc(e);if(og(e,o))return;const r=(a=>{const i=oc(a),l=a.selection.getSelectedBlocks();return((c,d)=>ee(c)&&d.length===1&&d[0]===c)(i,l)?(c=>Oe(c.querySelectorAll(Zx),jo))(i):Oe(l,(c=>jo(c)&&i!==c))})(e),s=Ue(n)?n:{};r.length>0?((a,i,l,c,d)=>{const m=jo(i);if(!m||i.nodeName!==c||pw(d)||du(i)){ig(a,c,d);const f=ts(a.selection.getRng()),g=m?[i,...l]:l,h=m&&du(i)?vO:bO;k.each(g,(b=>{h(a,b,c,d)})),a.selection.setRng(ns(f))}else mu(a)})(e,o,r,t,s):((a,i,l,c)=>{if(i!==a.getBody())if(i)if(i.nodeName!==l||pw(c)||du(i)){const d=ts(a.selection.getRng());du(i)&&i.classList.forEach(((f,g,h)=>{f.startsWith("tox-")&&(h.remove(f),h.length===0&&i.removeAttribute("class"))})),Fi(a.dom,i,c);const m=a.dom.rename(i,l);lg(a.dom,m),a.selection.setRng(ns(d)),ig(a,l,c),Ba(a,Ii(l),m)}else mu(a);else ig(a,l,c),Ba(a,Ii(l),i)})(e,o,t,s)},gw=(e,t,n,o)=>{let r=t.startContainer;const s=t.startOffset;if(Mr(r)&&(n?s<r.data.length:s>0))return r;const a=e.schema.getNonEmptyElements();Xx(r)&&(r=Pr.getNode(r,s));const i=new ln(r,o);n&&((c,d)=>!!Ra(d)&&c.isBlock(d.nextSibling)&&!Ra(d.previousSibling))(e.dom,r)&&i.next();const l=n?i.next.bind(i):i.prev2.bind(i);for(;r=l();)if(r.nodeName==="LI"&&!r.hasChildNodes()||a[r.nodeName]||Mr(r)&&r.data.length>0)return r;return null},hw=(e,t)=>{const n=t.childNodes;return n.length===1&&!jo(n[0])&&e.isBlock(n[0])},bw=(e,t,n)=>{let o;const r=hw(e,n)?n.firstChild:n;if(((s,a)=>{var i;hw(s,a)&&(i=a.firstChild,_.from(i).map(E.fromDom).filter(io).exists((l=>Qr(l)&&!Se(["details"],Me(l)))))&&s.remove(a.firstChild,!0)})(e,t),!Oa(e,t,!0))for(;o=t.firstChild;)r.appendChild(o)},dg=(e,t,n)=>{let o;const r=t.parentNode;if(!Yx(e,t)||!Yx(e,n))return;jo(n.lastChild)&&(o=n.lastChild),r===n.lastChild&&Ra(r.previousSibling)&&e.remove(r.previousSibling);const s=n.lastChild;s&&Ra(s)&&t.hasChildNodes()&&e.remove(s),Oa(e,n,!0)&&en(E.fromDom(n)),bw(e,t,n),o&&n.appendChild(o);const a=tt(E.fromDom(n),E.fromDom(t))?e.getParents(t,jo,n):[];e.remove(t),K(a,(i=>{Oa(e,i)&&i!==e.getRoot()&&e.remove(i)}))},yO=(e,t)=>{const n=e.dom,o=e.selection,r=o.getStart(),s=ng(e,r),a=n.getParent(o.getStart(),"LI",s);if(a){const i=a.parentElement;if(i===e.getBody()&&Oa(n,i))return!0;const l=eg(o.getRng()),c=n.getParent(gw(e,l,t,s),"LI",s),d=c&&(t?n.isChildOf(a,c):n.isChildOf(c,a));if(c&&c!==a&&!d)return e.undoManager.transact((()=>{var m,f;t?((g,h,b,v)=>{const y=g.dom;if(y.isEmpty(v))((S,N,D)=>{en(E.fromDom(D)),dg(S.dom,N,D),S.selection.setCursorLocation(D,0)})(g,b,v);else{const S=ts(h);dg(y,b,v),g.selection.setRng(ns(S))}})(e,l,c,a):((f=(m=a).parentNode)===null||f===void 0?void 0:f.firstChild)===m?sg(e):((g,h,b,v)=>{const y=ts(h);dg(g.dom,b,v);const S=ns(y);g.selection.setRng(S)})(e,l,a,c)})),!0;if(d&&!t&&c!==a){const m=l.commonAncestorContainer.parentElement;return!(!m||n.isChildOf(c,m)||(e.undoManager.transact((()=>{const f=ts(l);bw(n,m,c),m.remove();const g=ns(f);e.selection.setRng(g)})),0))}if(!c&&!t&&l.startOffset===0&&l.endOffset===0)return e.undoManager.transact((()=>{mu(e)})),!0}return!1},ug=e=>{const t=e.selection.getStart(),n=ng(e,t),o=e.dom.getParent(t,"LI,DT,DD",n);return ee(o)||tg(e).length>0},mg=(e,t)=>{const n=e.selection;return!og(e,n.getNode())&&(n.isCollapsed()?((o,r)=>yO(o,r)||((s,a)=>{const i=s.dom,l=s.selection.getStart(),c=ng(s,l),d=i.getParent(l,i.isBlock,c);if(d&&i.isEmpty(d,void 0,{checkRootAsContent:!0})){const m=eg(s.selection.getRng()),f=gw(s,m,a,c),g=i.getParent(f,"LI",c);if(f&&g){const h=S=>Se(["td","th","caption"],Me(S)),b=S=>S.dom===c,v=or(E.fromDom(g),h,b),y=or(E.fromDom(m.startContainer),h,b);return!!Wa(v,y,pe)&&(s.undoManager.transact((()=>{const S=g.parentNode;((N,D,T)=>{const R=N.getParent(D.parentNode,N.isBlock,T);N.remove(D),R&&N.isEmpty(R)&&N.remove(R)})(i,d,c),lg(i,S),s.selection.select(f,!0),s.selection.collapse(a)})),!0)}}return!1})(o,r))(e,t):(o=>!!ug(o)&&(o.undoManager.transact((()=>{let r=!0;const s=()=>r=!1;o.on("input",s),o.execCommand("Delete"),o.off("input",s),r&&o.dispatch("input"),Zp(o.dom,o.getBody())})),!0))(e))},CO=(e,t)=>({from:e,to:t}),fg=(e,t)=>{const n=E.fromDom(e),o=E.fromDom(t.container());return Ud(n,o).map((r=>((s,a)=>({block:s,position:a}))(r,t)))},vw=(e,t)=>or(t,(n=>_l(n)||To(n.dom)),(n=>pe(n,e))).filter(ot).getOr(e),yw=(e,t)=>{const n=((o,r)=>{const s=ht(o);return qs(s,(a=>r.isBlock(Me(a)))).fold(le(s),(a=>s.slice(0,a)))})(e,t);return K(n,ct),n},Cw=(e,t,n)=>{const o=es(n,t);return qt(o.reverse(),(r=>jn(e,r))).each(ct)},xO=(e,t,n,o,r)=>{if(jn(o,n))return Es(n),Un(n.dom);((a,i)=>Oe(Fn(i),(l=>!jn(a,l))).length===0)(o,r)&&jn(o,t)&&un(r,E.fromTag("br"));const s=lo(n.dom,Y.before(r.dom));return K(yw(t,o),(a=>{un(r,a)})),Cw(o,e,t),s},wO=(e,t,n,o)=>{if(jn(o,n)){if(jn(o,t)){const s=i=>{const l=(c,d)=>Pt(c).fold((()=>d),(m=>((f,g)=>f.isInline(Me(g)))(o,m)?l(m,d.concat(yn(m))):d));return l(i,[])},a=Wr(s(n),((i,l)=>(oe(i,l),l)),fi());en(t),X(t,a)}return ct(n),Un(t.dom)}const r=Yo(n.dom);return K(yw(t,o),(s=>{X(n,s)})),Cw(o,e,t),r},xw=(e,t)=>{wi(e,t.dom).bind((n=>_.from(n.getNode()))).map(E.fromDom).filter(Ss).each(ct)},ww=(e,t,n,o)=>(xw(!0,t),xw(!1,n),((r,s)=>tt(s,r)?((a,i)=>{const l=es(i,a);return _.from(l[l.length-1])})(s,r):_.none())(t,n).fold(ye(wO,e,t,n,o),ye(xO,e,t,n,o))),Sw=(e,t,n,o,r)=>t?ww(e,o,n,r):ww(e,n,o,r),pg=(e,t)=>{const n=E.fromDom(e.getBody());return((r,s,a,i)=>i.collapsed?((l,c,d,m)=>{const f=fg(c,Y.fromRangeStart(m)),g=f.bind((h=>Ro(d,c,h.position).bind((b=>fg(c,b).map((v=>((y,S,N,D)=>$t(D.position.getNode())&&!jn(y,D.block)?wi(!1,D.block.dom).bind((T=>T.isEqual(D.position)?Ro(N,S,T).bind((R=>fg(S,R))):_.some(D))).getOr(D):D)(l,c,d,v)))))));return Ut(f,g,CO).filter((h=>(b=>!pe(b.from.block,b.to.block))(h)&&((b,v)=>{const y=E.fromDom(b);return pe(vw(y,v.from.block),vw(y,v.to.block))})(c,h)&&(b=>Lt(b.from.block.dom)===!1&&Lt(b.to.block.dom)===!1)(h)&&(b=>{const v=y=>$0(y)||Cm(y.dom)||mi(y);return v(b.from.block)&&v(b.to.block)})(h)&&(b=>!(tt(b.to.block,b.from.block)||tt(b.from.block,b.to.block)))(h)))})(r,s,a,i):_.none())(e.schema,n.dom,t,e.selection.getRng()).map((r=>()=>{Sw(n,t,r.from.block,r.to.block,e.schema).each((s=>{e.selection.setRng(s.toRange())}))}))},Ew=(e,t)=>{const n=E.fromDom(t),o=ye(pe,e);return Nr(n,_l,o).isSome()},SO=e=>{const t=E.fromDom(e.getBody());return((n,o)=>{const r=lo(n.dom,Y.fromRangeStart(o)).isNone(),s=eo(n.dom,Y.fromRangeEnd(o)).isNone();return!((a,i)=>Ew(a,i.startContainer)||Ew(a,i.endContainer))(n,o)&&r&&s})(t,e.selection.getRng())?(n=>_.some((()=>{n.setContent(""),n.selection.setCursorLocation()})))(e):((n,o,r)=>{const s=o.getRng();return Ut(Ud(n,E.fromDom(s.startContainer)),Ud(n,E.fromDom(s.endContainer)),((a,i)=>pe(a,i)?_.none():_.some((()=>{s.deleteContents(),Sw(n,!0,a,i,r).each((l=>{o.setRng(l.toRange())}))})))).getOr(_.none())})(t,e.selection,e.schema)},gg=(e,t)=>e.selection.isCollapsed()?_.none():SO(e),ss=(e,t,n,o,r)=>_.from(t._selectionOverrides.showCaret(e,n,o,r)),ac=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?_.none():_.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(t)),hg=(e,t,n)=>t.collapsed?((o,r,s)=>{const a=af(1,o.getBody(),r),i=Y.fromRangeStart(a),l=i.getNode();if(Bl(l))return ss(1,o,l,!i.isAtEnd(),!1);const c=i.getNode(!0);if(Bl(c))return ss(1,o,c,!1,!1);const d=Na(o.dom.getRoot(),i.getNode());return Bl(d)?ss(1,o,d,!1,s):_.none()})(e,t,n).getOr(t):t,EO=e=>Os(e)||$l(e),kO=e=>Bs(e)||ql(e),kw=(e,t,n,o,r,s)=>{ss(o,e,s.getNode(!r),r,!0).each((a=>{if(t.collapsed){const i=t.cloneRange();r?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else t.deleteContents();e.selection.setRng(a)})),((a,i)=>{se(i)&&i.data.length===0&&a.remove(i)})(e.dom,n)},bg=(e,t)=>((n,o)=>{const r=n.selection.getRng();if(!se(r.commonAncestorContainer))return _.none();const s=o?1:-1,a=Or(n.getBody()),i=ye(lf,o?a.next:a.prev),l=o?EO:kO,c=Fl(s,n.getBody(),r),d=i(c),m=d&&Mo(o,d);if(!m||!xd(c,m))return _.none();if(l(m))return _.some((()=>kw(n,r,c.getNode(),s,o,m)));const f=i(m);return f&&l(f)&&xd(m,f)?_.some((()=>kw(n,r,c.getNode(),s,o,f))):_.none()})(e,t),vg=(e,t)=>{const n=e.getBody();return t?Un(n).filter(Os):Yo(n).filter(Bs)},yg=e=>{const t=e.selection.getRng();return!t.collapsed&&(vg(e,!0).exists((n=>n.isEqual(Y.fromRangeStart(t))))||vg(e,!1).exists((n=>n.isEqual(Y.fromRangeEnd(t)))))},zo=ho([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),_w=(e,t,n,o)=>Ro(t,e,n).bind((r=>{return s=r.getNode(),ee(s)&&(_l(E.fromDom(s))||mi(E.fromDom(s)))||((a,i,l,c,d)=>{const m=f=>d.isInline(f.nodeName.toLowerCase())&&!Dr(l,c,a);return av(!i,l).fold((()=>av(i,c).fold(_t,m)),m)})(e,t,n,r,o)?_.none():t&&Lt(r.getNode())||!t&&Lt(r.getNode(!0))?((a,i,l,c,d)=>{const m=d.getNode(!l);return Ud(E.fromDom(i),E.fromDom(c.getNode())).map((f=>jn(a,f)?zo.remove(f.dom):zo.moveToElement(m))).orThunk((()=>_.some(zo.moveToElement(m))))})(o,e,t,n,r):t&&Bs(n)||!t&&Os(n)?_.some(zo.moveToPosition(r)):_.none();var s})),Nw=(e,t)=>_.from(Na(e.getBody(),t)),_O=(e,t)=>{const n=e.selection.getNode();return Nw(e,n).filter(Lt).fold((()=>((o,r,s,a)=>{const i=af(r?1:-1,o,s),l=Y.fromRangeStart(i),c=E.fromDom(o);return!r&&Bs(l)?_.some(zo.remove(l.getNode(!0))):r&&Os(l)?_.some(zo.remove(l.getNode())):!r&&Os(l)&&Fd(c,l,a)?Fy(c,l,a).map((d=>zo.remove(d.getNode()))):r&&Bs(l)&&Wf(c,l,a)?pD(c,l,a).map((d=>zo.remove(d.getNode()))):((d,m,f,g)=>((h,b)=>{const v=b.getNode(!h),y=h?"after":"before";return Ce(v)&&v.getAttribute("data-mce-caret")===y})(m,f)?((h,b)=>kt(b)?_.none():h&&Lt(b.nextSibling)?_.some(zo.moveToElement(b.nextSibling)):!h&&Lt(b.previousSibling)?_.some(zo.moveToElement(b.previousSibling)):_.none())(m,f.getNode(!m)).orThunk((()=>_w(d,m,f,g))):_w(d,m,f,g).bind((h=>((b,v,y)=>y.fold((S=>_.some(zo.remove(S))),(S=>_.some(zo.moveToElement(S))),(S=>Dr(v,S,b)?_.none():_.some(zo.moveToPosition(S)))))(d,f,h))))(o,r,l,a)})(e.getBody(),t,e.selection.getRng(),e.schema).map((o=>()=>o.fold(((r,s)=>a=>(r._selectionOverrides.hideFakeCaret(),Ps(r,s,E.fromDom(a)),!0))(e,t),((r,s)=>a=>{const i=s?Y.before(a):Y.after(a);return r.selection.setRng(i.toRange()),!0})(e,t),(r=>s=>(r.selection.setRng(s.toRange()),!0))(e))))),(()=>_.some(ke)))},Aw=e=>{const t=e.dom,n=e.selection,o=Na(e.getBody(),n.getNode());if(To(o)&&t.isBlock(o)&&t.isEmpty(o)){const r=t.create("br",{"data-mce-bogus":"1"});t.setHTML(o,""),o.appendChild(r),n.setRng(Y.before(r).toRange())}return!0},Cg=(e,t)=>e.selection.isCollapsed()?_O(e,t):((n,o)=>{const r=n.selection.getNode();return Lt(r)&&!nd(r)?Nw(n,r.parentNode).filter(Lt).fold((()=>_.some((()=>{var s;s=E.fromDom(n.getBody()),K(Dn(s,".mce-offscreen-selection"),ct),Ps(n,o,E.fromDom(n.selection.getNode())),Gf(n)}))),(()=>_.some(ke))):yg(n)?_.some((()=>{aC(n,n.selection.getRng(),E.fromDom(n.getBody()))})):_.none()})(e,t),xg=(e,t)=>{var n;const o=e.dom,r=o.getParent(e.selection.getStart(),o.isBlock),s=o.getParent(e.selection.getEnd(),o.isBlock),a=e.getBody();if(((n=r?.nodeName)===null||n===void 0?void 0:n.toLowerCase())==="div"&&r&&s&&r===a.firstChild&&s===a.lastChild&&!o.isEmpty(a)){const i=r.cloneNode(!1),l=()=>{if(t?oC(e):zd(e),a.firstChild!==r){const c=ts(e.selection.getRng(),(()=>document.createElement("span")));Array.from(a.childNodes).forEach((d=>i.appendChild(d))),a.appendChild(i),e.selection.setRng(ns(c))}};return _.some(l)}return _.none()},wg=(e,t)=>e.selection.isCollapsed()?((n,o)=>{const r=Y.fromRangeStart(n.selection.getRng());return Ro(o,n.getBody(),r).filter((s=>o?cD(s):dD(s))).bind((s=>sf(o?0:-1,s))).map((s=>()=>n.selection.select(s)))})(e,t):_.none(),ji=se,Tw=e=>ji(e)&&e.data[0]===Cn,Dw=e=>ji(e)&&e.data[e.data.length-1]===Cn,Rw=e=>{var t;return((t=e.ownerDocument)!==null&&t!==void 0?t:document).createTextNode(Cn)},pu=(e,t)=>e?(n=>{var o;if(ji(n.previousSibling))return Dw(n.previousSibling)||n.previousSibling.appendData(Cn),n.previousSibling;if(ji(n))return Tw(n)||n.insertData(0,Cn),n;{const r=Rw(n);return(o=n.parentNode)===null||o===void 0||o.insertBefore(r,n),r}})(t):(n=>{var o,r;if(ji(n.nextSibling))return Tw(n.nextSibling)||n.nextSibling.insertData(0,Cn),n.nextSibling;if(ji(n))return Dw(n)||n.appendData(Cn),n;{const s=Rw(n);return n.nextSibling?(o=n.parentNode)===null||o===void 0||o.insertBefore(s,n.nextSibling):(r=n.parentNode)===null||r===void 0||r.appendChild(s),s}})(t),NO=ye(pu,!0),AO=ye(pu,!1),Ow=(e,t)=>se(e.container())?pu(t,e.container()):pu(t,e.getNode()),Bw=(e,t)=>{const n=t.get();return n&&e.container()===n&&ks(n)},Sg=(e,t)=>t.fold((n=>{xa(e.get());const o=NO(n);return e.set(o),_.some(Y(o,o.length-1))}),(n=>Un(n).map((o=>{if(Bw(o,e)){const r=e.get();return Y(r,1)}{xa(e.get());const r=Ow(o,!0);return e.set(r),Y(r,1)}}))),(n=>Yo(n).map((o=>{if(Bw(o,e)){const r=e.get();return Y(r,r.length-1)}{xa(e.get());const r=Ow(o,!1);return e.set(r),Y(r,r.length-1)}}))),(n=>{xa(e.get());const o=AO(n);return e.set(o),_.some(Y(o,1))})),Pw=(e,t)=>{for(let n=0;n<e.length;n++){const o=e[n].apply(null,t);if(o.isSome())return o}return _.none()},Kn=ho([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Lw=(e,t)=>As(t,e)||e,TO=(e,t,n)=>{const o=eC(n),r=Lw(t,o.container());return Ls(e,r,o).fold((()=>eo(r,o).bind(ye(Ls,e,r)).map((s=>Kn.before(s)))),_.none)},DO=(e,t)=>wa(e,t)===null,Mw=(e,t,n)=>Ls(e,t,n).filter(ye(DO,t)),RO=(e,t,n)=>{const o=tC(n);return Mw(e,t,o).bind((r=>lo(r,o).isNone()?_.some(Kn.start(r)):_.none()))},OO=(e,t,n)=>{const o=eC(n);return Mw(e,t,o).bind((r=>eo(r,o).isNone()?_.some(Kn.end(r)):_.none()))},BO=(e,t,n)=>{const o=tC(n),r=Lw(t,o.container());return Ls(e,r,o).fold((()=>lo(r,o).bind(ye(Ls,e,r)).map((s=>Kn.after(s)))),_.none)},Iw=e=>!Zy(Eg(e)),Ir=(e,t,n)=>Pw([TO,RO,OO,BO],[e,t,n]).filter(Iw),Eg=e=>e.fold(gt,gt,gt,gt),Fw=e=>e.fold(le("before"),le("start"),le("end"),le("after")),gu=e=>e.fold(Kn.before,Kn.before,Kn.after,Kn.after),kg=e=>e.fold(Kn.start,Kn.start,Kn.end,Kn.end),PO=(e,t,n,o,r,s)=>Ut(Ls(t,n,o),Ls(t,n,r),((a,i)=>a!==i&&((l,c,d)=>{const m=As(c,l),f=As(d,l);return ee(m)&&m===f})(n,a,i)?Kn.after(e?a:i):s)).getOr(s),LO=(e,t)=>e.fold(zt,(n=>{return r=t,!(Fw(o=n)===Fw(r)&&Eg(o)===Eg(r));var o,r})),MO=(e,t)=>e?t.fold(In(_.some,Kn.start),_.none,In(_.some,Kn.after),_.none):t.fold(_.none,In(_.some,Kn.before),_.none,In(_.some,Kn.end)),jw=(e,t,n)=>{const o=e?1:-1;return t.setRng(Y(n.container(),n.offset()+o).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};var Fr;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Fr||(Fr={}));const hu=(e,t)=>e===-1?wo(t):t,IO=(e,t,n)=>e===1?t.next(n):t.prev(n),FO=(e,t,n,o)=>$t(o.getNode(t===1))?Fr.Br:Dr(n,o)===!1?Fr.Block:Fr.Wrap,zw=(e,t,n,o)=>{const r=Or(n);let s=o;const a=[];for(;s;){const i=IO(t,r,s);if(!i)break;if($t(i.getNode(!1)))return t===1?{positions:hu(t,a).concat([i]),breakType:Fr.Br,breakAt:_.some(i)}:{positions:hu(t,a),breakType:Fr.Br,breakAt:_.some(i)};if(i.isVisible()){if(e(s,i)){const l=FO(0,t,s,i);return{positions:hu(t,a),breakType:l,breakAt:_.some(i)}}a.push(i),s=i}else s=i}return{positions:hu(t,a),breakType:Fr.Eol,breakAt:_.none()}},Uw=(e,t,n,o)=>t(n,o).breakAt.map((r=>{const s=t(n,r).positions;return e===-1?s.concat(r):[r].concat(s)})).getOr([]),_g=(e,t)=>Qt(e,((n,o)=>n.fold((()=>_.some(o)),(r=>Ut(sn(r.getClientRects()),sn(o.getClientRects()),((s,a)=>{const i=Math.abs(t-s.left);return Math.abs(t-a.left)<=i?o:r})).or(n)))),_.none()),bu=(e,t)=>sn(t.getClientRects()).bind((n=>_g(e,n.left))),ic=ye(zw,Y.isAbove,-1),lc=ye(zw,Y.isBelow,1),Hw=ye(Uw,-1,ic),$w=ye(Uw,1,lc),Ng=(e,t)=>ic(e,t).breakAt.isNone(),Ag=(e,t)=>lc(e,t).breakAt.isNone(),qw=(e,t)=>bu(Hw(e,t),t),Ww=(e,t)=>bu($w(e,t),t),jO=Lt,Vw=(e,t)=>Math.abs(e.left-t),Kw=(e,t)=>Math.abs(e.right-t),Xw=(e,t)=>Gn(e,((n,o)=>{const r=Math.min(Vw(n,t),Kw(n,t)),s=Math.min(Vw(o,t),Kw(o,t));return s===r&&gn(o,"node")&&jO(o.node)||s<r?o:n})),zO=e=>{const t=n=>We(n,(o=>{const r=va(o);return r.node=e,r}));if(Ce(e))return t(e.getClientRects());if(se(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},Yw=e=>Wt(e,zO);var La;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(La||(La={}));const Gw=(e,t,n,o,r,s)=>{let a=0;const i=[],l=m=>{let f=Yw([m]);e===La.Up&&(f=f.reverse());for(let g=0;g<f.length;g++){const h=f[g];if(!n(h,c)){if(i.length>0&&t(h,ko(i))&&a++,h.line=a,r(h))return!0;i.push(h)}}return!1},c=ko(s.getClientRects());if(!c)return i;const d=s.getNode();return d&&(l(d),((m,f,g,h)=>{let b=h;for(;b=Ll(b,m,J0,f);)if(g(b))return})(e,o,l,d)),i},UO=ye(Gw,La.Up,Nl,Al),HO=ye(Gw,La.Down,Al,Nl),Qw=e=>ko(e.getClientRects()),Jw=e=>t=>((n,o)=>o.line>n)(e,t),Tg=e=>t=>((n,o)=>o.line===n)(e,t),jr=(e,t)=>{e.selection.setRng(t),Hl(e,e.selection.getRng())},Dg=(e,t,n)=>_.some(hg(e,t,n)),Zw=(e,t,n,o,r,s)=>{const a=t===1,i=Or(e.getBody()),l=ye(lf,a?i.next:i.prev),c=a?o:r;if(!n.collapsed){const h=md(n);if(s(h))return ss(t,e,h,t===-1,!1);if(yg(e)){const b=n.cloneRange();return b.collapse(t===-1),_.from(b)}}const d=Fl(t,e.getBody(),n);if(c(d))return ac(e,d.getNode(!a));let m=l(d);const f=W0(n);if(!m)return f?_.some(n):_.none();if(m=Mo(a,m),c(m))return ss(t,e,m.getNode(!a),a,!1);const g=l(m);return g&&c(g)&&xd(m,g)?ss(t,e,g.getNode(!a),a,!1):f?Dg(e,m.toRange(),!1):_.none()},eS=(e,t,n,o,r,s)=>{const a=Fl(t,e.getBody(),n),i=ko(a.getClientRects()),l=t===La.Down,c=e.getBody();if(!i)return _.none();if(yg(e)){const b=l?Y.fromRangeEnd(n):Y.fromRangeStart(n);return(l?Ww:qw)(c,b).orThunk((()=>_.from(b))).map((v=>v.toRange()))}const d=(l?HO:UO)(c,Jw(1),a),m=Oe(d,Tg(1)),f=i.left,g=Xw(m,f);if(g&&s(g.node)){const b=Math.abs(f-g.left),v=Math.abs(f-g.right);return ss(t,e,g.node,b<v,!1)}let h;if(h=o(a)?a.getNode():r(a)?a.getNode(!0):md(n),h){const b=((y,S,N,D)=>{const T=Or(S);let R,P,L,F;const W=[];let O=0;y===La.Down?(R=T.next,P=Al,L=Nl,F=Y.after(D)):(R=T.prev,P=Nl,L=Al,F=Y.before(D));const I=Qw(F);do{if(!F.isVisible())continue;const H=Qw(F);if(L(H,I))continue;W.length>0&&P(H,ko(W))&&O++;const te=va(H);if(te.position=F,te.line=O,N(te))return W;W.push(te)}while(F=R(F));return W})(t,c,Jw(1),h);let v=Xw(Oe(b,Tg(1)),f);if(v||(v=ko(Oe(b,Tg(0))),v))return Dg(e,v.position.toRange(),!1)}return m.length===0?Rg(e,l).filter(l?r:o).map((b=>hg(e,b.toRange(),!1))):_.none()},Rg=(e,t)=>{const n=e.selection.getRng(),o=t?Y.fromRangeEnd(n):Y.fromRangeStart(n),r=(s=o.container(),a=e.getBody(),Nr(E.fromDom(s),(i=>wT(i.dom)),(i=>i.dom===a)).map((i=>i.dom)).getOr(a));var s,a;if(t){const i=lc(r,o);return ro(i.positions)}{const i=ic(r,o);return sn(i.positions)}},tS=(e,t,n)=>Rg(e,t).filter(n).exists((o=>(e.selection.setRng(o.toRange()),!0))),vu=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},nS=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},oS=(e,t,n)=>Sg(t,n).map((o=>(vu(e,o),n))),$O=(e,t,n)=>{const o=e.getBody(),r=((s,a,i)=>{const l=Y.fromRangeStart(s);if(s.collapsed)return l;{const c=Y.fromRangeEnd(s);return i?lo(a,c).getOr(c):eo(a,l).getOr(l)}})(e.selection.getRng(),o,n);return((s,a,i,l)=>{const c=Mo(s,l),d=Ir(a,i,c);return Ir(a,i,c).bind(ye(MO,s)).orThunk((()=>((m,f,g,h,b)=>{const v=Mo(m,b);return Ro(m,g,v).map(ye(Mo,m)).fold((()=>h.map(gu)),(y=>Ir(f,g,y).map(ye(PO,m,f,g,v,y)).filter(ye(LO,h)))).filter(Iw)})(s,a,i,d,l)))})(n,ye(_a,e),o,r).bind((s=>oS(e,t,s)))},rS=(e,t,n)=>!!Rl(e)&&$O(e,t,n).isSome(),sS=(e,t,n)=>!!Rl(t)&&((o,r)=>{const s=r.selection.getRng(),a=o?Y.fromRangeEnd(s):Y.fromRangeStart(s);return!!(i=>bt(i.selection.getSel().modify))(r)&&(o&&Fm(a)?jw(!0,r.selection,a):!(o||!jm(a))&&jw(!1,r.selection,a))})(e,t),qO=e=>{const t=tn(null),n=ye(_a,e);return e.on("NodeChange",(o=>{Rl(e)&&(((r,s,a)=>{const i=We(Dn(E.fromDom(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),(d=>d.dom)),l=Oe(i,r),c=Oe(a,r);K(Qe(l,c),ye(nS,!1)),K(Qe(c,l),ye(nS,!0))})(n,e.dom,o.parents),((r,s)=>{const a=s.get();if(r.selection.isCollapsed()&&!r.composing&&a){const i=Y.fromRangeStart(r.selection.getRng());Y.isTextPosition(i)&&!(l=>Fm(l)||jm(l))(i)&&(vu(r,bT(a,i)),s.set(null))}})(e,t),((r,s,a,i)=>{if(s.selection.isCollapsed()){const l=Oe(i,r);K(l,(c=>{const d=Y.fromRangeStart(s.selection.getRng());Ir(r,s.getBody(),d).bind((m=>oS(s,a,m)))}))}})(n,e,t,o.parents))})),t},WO=ye(sS,!0),VO=ye(sS,!1),yu=(e,t,n)=>{if(Rl(e)){const o=Rg(e,t).getOrThunk((()=>{const r=e.selection.getRng();return t?Y.fromRangeEnd(r):Y.fromRangeStart(r)}));return Ir(ye(_a,e),e.getBody(),o).exists((r=>{const s=gu(r);return Sg(n,s).exists((a=>(vu(e,a),!0)))}))}return!1},aS=(e,t)=>n=>Sg(t,n).map((o=>()=>vu(e,o))),iS=(e,t,n,o)=>{const r=e.getBody(),s=ye(_a,e);e.undoManager.ignore((()=>{e.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,o)),zd(e),Ir(s,r,Y.fromRangeStart(e.selection.getRng())).map(kg).bind(aS(e,t)).each(Yn)})),e.nodeChanged()},Og=(e,t,n)=>{if(e.selection.isCollapsed()&&Rl(e)){const o=Y.fromRangeStart(e.selection.getRng());return((r,s,a,i)=>{const l=((m,f)=>As(f,m)||m)(r.getBody(),i.container()),c=ye(_a,r),d=Ir(c,l,i);return d.bind((m=>a?m.fold(le(_.some(kg(m))),_.none,le(_.some(gu(m))),_.none):m.fold(_.none,le(_.some(gu(m))),_.none,le(_.some(kg(m)))))).map(aS(r,s)).getOrThunk((()=>{const m=xi(a,l,i),f=m.bind((g=>Ir(c,l,g)));return Ut(d,f,(()=>Ls(c,l,i).bind((g=>(h=>Ut(Un(h),Yo(h),((b,v)=>{const y=Mo(!0,b),S=Mo(!1,v);return eo(h,y).forall((N=>N.isEqual(S)))})).getOr(!0))(g)?_.some((()=>{Ps(r,a,E.fromDom(g))})):_.none())))).getOrThunk((()=>f.bind((()=>m.map((g=>()=>{a?iS(r,s,i,g):iS(r,s,g,i)}))))))}))})(e,t,n,o)}return _.none()},lS=(e,t)=>{const n=E.fromDom(e.getBody()),o=E.fromDom(e.selection.getStart()),r=es(o,n);return qs(r,t).fold(le(r),(s=>r.slice(0,s)))},KO=e=>Er(e)===1,cS=(e,t)=>{const n=ye(OC,e);return Wt(t,(o=>n(o)?[o.dom]:[]))},Bg=e=>{const t=(n=>lS(n,(o=>n.schema.isBlock(Me(o)))))(e);return cS(e,t)},XO=(e,t)=>{const n=Oe((o=>lS(o,(r=>o.schema.isBlock(Me(r))||(s=>Er(s)>1)(r))))(e),KO);return ro(n).bind((o=>{const r=Y.fromRangeStart(e.selection.getRng());return rC(t,r,o.dom)&&!Nf(o)?_.some((()=>((s,a,i,l)=>{const c=cS(a,l);if(c.length===0)Ps(a,s,i);else{const d=RC(i.dom,c);a.selection.setRng(d.toRange())}})(t,e,o,n))):_.none()}))},dS=(e,t)=>{const n=e.selection.getStart(),o=((r,s)=>{const a=s.parentElement;return $t(s)&&!Ge(a)&&r.dom.isEmpty(a)})(e,n)||Nf(E.fromDom(n))?RC(n,t):((r,s)=>{const{caretContainer:a,caretPosition:i}=DC(s);return r.insertNode(a.dom),i})(e.selection.getRng(),t);e.selection.setRng(o.toRange())},uS=(e,t)=>{const n=Qe(t,Bg(e));n.length>0&&dS(e,n)},mS=e=>se(e.startContainer),YO=e=>{const t=e.selection.getRng();return(n=>n.startOffset===0&&mS(n))(t)&&((n,o)=>{const r=o.startContainer.parentElement;return!Ge(r)&&OC(n,E.fromDom(r))})(e,t)&&(n=>(o=>(r=>{const s=r.startContainer.parentNode,a=r.endContainer.parentNode;return!Ge(s)&&!Ge(a)&&s.isEqualNode(a)})(o)&&(r=>{const s=r.endContainer;return r.endOffset===(se(s)?s.length:s.childNodes.length)})(o))(n)||(o=>!o.endContainer.isEqualNode(o.commonAncestorContainer))(n))(t)},Pg=(e,t)=>e.selection.isCollapsed()?XO(e,t):(n=>{if(YO(n)){const o=Bg(n);return _.some((()=>{zd(n),uS(n,o)}))}return _.none()})(e),cc=e=>((t=>{const n=t.selection.getRng();return n.collapsed&&(mS(n)||t.dom.isEmpty(n.startContainer))&&!(o=>{return r=E.fromDom(o.selection.getStart()),s=o.schema,im(r,(a=>Oo(a.dom)),(a=>s.isBlock(Me(a))));var r,s})(t)})(e)&&dS(e,[]),!0),Lg=(e,t,n)=>ee(n)?_.some((()=>{e._selectionOverrides.hideFakeCaret(),Ps(e,t,E.fromDom(n))})):_.none(),Mg=(e,t)=>e.selection.isCollapsed()?((n,o)=>{const r=o?$l:ql,s=Fl(o?1:-1,n.getBody(),n.selection.getRng());return r(s)?Lg(n,o,s.getNode(!o)):_.from(Mo(o,s)).filter((a=>r(a)&&xd(s,a))).bind((a=>Lg(n,o,a.getNode(!o))))})(e,t):((n,o)=>{const r=n.selection.getNode();return ar(r)?Lg(n,o,r):_.none()})(e,t),Ig=e=>fs(e??"").getOr(0),fS=(e,t)=>(e||Me(t)==="table"?"margin":"padding")+(nr(t,"direction")==="rtl"?"-right":"-left"),pS=e=>{const t=hS(e);return!e.mode.isReadOnly()&&(t.length>1||((n,o)=>oo(o,(r=>{const s=fS(Lb(n),r),a=ni(r,s).map(Ig).getOr(0);return n.dom.getContentEditable(r.dom)!=="false"&&a>0})))(e,t))},gS=e=>Im(e)||mi(e),hS=e=>Oe(Tn(e.selection.getSelectedBlocks()),(t=>!gS(t)&&!(n=>vn(n).exists(gS))(t)&&or(t,(n=>To(n.dom)||Lt(n.dom))).exists((n=>To(n.dom))))),bS=(e,t)=>{var n,o;if(e.mode.isReadOnly())return;const{dom:r}=e,s=uA(e),a=(o=(n=/[a-z%]+$/i.exec(s))===null||n===void 0?void 0:n[0])!==null&&o!==void 0?o:"px",i=Ig(s),l=Lb(e);K(hS(e),(c=>{((d,m,f,g,h,b)=>{const v=fS(f,E.fromDom(b)),y=Ig(d.getStyle(b,v));if(m==="outdent"){const S=Math.max(0,y-g);d.setStyle(b,v,S?S+h:"")}else{const S=y+g+h;d.setStyle(b,v,S)}})(r,t,l,i,a,c.dom)})),t==="indent"?uw(e):sg(e)},vS=e=>bS(e,"outdent"),yS=e=>{if(e.selection.isCollapsed()&&pS(e)){const t=e.dom,n=e.selection.getRng(),o=Y.fromRangeStart(n),r=t.getParent(n.startContainer,t.isBlock);if(r!==null&&qf(E.fromDom(r),o,e.schema))return _.some((()=>vS(e)))}return _.none()},Fg=(e,t)=>e.selection.isCollapsed()?_.none():((n,o)=>{return r=Vd(n.selection.getRng()),yf(r,rr)?_.some((()=>Ps(n,o,E.fromDom(n.selection.getNode())))):_.none();var r})(e,t),CS=(e,t,n)=>qn([yS,Cg,bg,(o,r)=>Og(o,t,r),pg,rp,wg,Mg,gg,Pg,xg,Fg],(o=>o(e,n))).filter((o=>e.selection.isEditable())),jg=(e,t)=>{CS(e,t,!1).fold((()=>{e.selection.isEditable()&&(zd(e),Gf(e))}),Yn),ug(e)&&Zp(e.dom,e.getBody())},xS=e=>e.touches===void 0||e.touches.length!==1?_.none():_.some(e.touches[0]),zg=(e,t)=>Fe(e,t.nodeName),GO=(e,t)=>!!se(t)||!!Ce(t)&&!(zg(e.getBlockElements(),t)||Bo(t)||ma(e,t)||bm(t)||o0(t)),QO=(e,t)=>{if(se(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||zg(e,t.nextSibling)||bm(t.nextSibling)}return!1},Ug=e=>e.dom.create(En(e),vi(e)),wS=(e,t,n)=>{const o=E.fromDom(Ug(e)),r=fi();X(o,r),n(t,o);const s=document.createRange();return s.setStartBefore(r.dom),s.setEndBefore(r.dom),s},SS=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,JO=(e,t,n)=>function(o){const r=arguments,s=r[r.length-2],a=s>0?t.charAt(s-1):"";if(a==='"')return o;if(a===">"){const i=t.lastIndexOf("<",s);if(i!==-1&&t.substring(i,s).indexOf('contenteditable="false"')!==-1)return o}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(r[0])+'">'+e.dom.encode(typeof r[1]=="string"?r[1]:r[0])+"</span>"},ZO=(e,t)=>oo(e,(n=>{const o=t.match(n);return o!==null&&o[0].length===t.length})),ES=(e,t)=>{t.hasAttribute("data-mce-caret")&&(zm(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},eB=(e,t)=>{const n=(o=>Yc(E.fromDom(o.getBody()),"*[data-mce-caret]").map((r=>r.dom)).getOrNull())(e);if(n)return t.type==="compositionstart"?(t.preventDefault(),t.stopPropagation(),void ES(e,n)):void(q0(n)&&(ES(e,n),e.undoManager.add()))},kS=Lt,_S=(e,t,n)=>{const o=Or(e.getBody()),r=ye(lf,t===1?o.next:o.prev);if(n.collapsed){const s=e.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!r(Y.fromRangeStart(n))){const a=E.fromDom((i=>{const l=i.dom.create(En(i));return l.innerHTML='<br data-mce-bogus="1">',l})(e));t===1?M(E.fromDom(s),a):un(E.fromDom(s),a),e.selection.select(a.dom,!0),e.selection.collapse()}}},NS=(e,t)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return((a,i,l)=>Zw(i,a,l,Os,Bs,kS))(r,n,s).orThunk((()=>(_S(n,r,s),_.none())))})(e,((n,o)=>{const r=o?n.getEnd(!0):n.getStart(!0);return Zy(r)?!o:o})(e.selection,t)).exists((n=>(jr(e,n),!0))),AS=(e,t)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return((a,i,l)=>eS(i,a,l,(c=>Os(c)||Oy(c)),(c=>Bs(c)||Hf(c)),kS))(r,n,s).orThunk((()=>(_S(n,r,s),_.none())))})(e,t).exists((n=>(jr(e,n),!0))),TS=(e,t)=>tS(e,t,t?Bs:Os),Cu=(e,t)=>vg(e,!t).map((n=>{const o=n.toRange(),r=e.selection.getRng();return t?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o})).exists((n=>(jr(e,n),!0))),DS=(e,t)=>{const n=r=>pe(r,t),o=E.fromDom(e.container());return or(o,(r=>To(r.dom)),n).filter((r=>!n(r)))},RS=(e,t)=>((n,o)=>{const r=Y.fromRangeStart(n.selection.getRng()),s=Y.fromRangeEnd(n.selection.getRng()),a=E.fromDom(n.getBody());return Ut(DS(r,a),DS(s,a),((i,l)=>pe(i,l)?_.some(i):_.none())).bind(gt).fold(_t,(i=>!!(o&&Ag(i.dom,s)||!o&&Ng(i.dom,r))&&((l,c,d)=>(d?Ww:qw)(l.getBody(),c).map((m=>m.toRange())))(n,o?s:r,o).exists((l=>(jr(n,l),!0)))))})(e,t),tB=e=>Se(["figcaption"],Me(e)),OS=(e,t)=>!!e.selection.isCollapsed()&&((n,o)=>{const r=E.fromDom(n.getBody()),s=Y.fromRangeStart(n.selection.getRng());return((a,i,l)=>{const c=ye(pe,i);return or(E.fromDom(a.container()),(d=>l.isBlock(Me(d))),c).filter(tB)})(s,r,n.schema).exists((()=>{if(((a,i,l)=>i?Ag(a.dom,l):Ng(a.dom,l))(r,o,s)){const a=wS(n,r,o?X:q);return n.selection.setRng(a),!0}return!1}))})(e,t),BS=(e,t)=>((n,o)=>o?_.from(n.dom.getParent(n.selection.getNode(),"details")).map((r=>((s,a)=>{const i=s.selection.getRng(),l=Y.fromRangeStart(i);return!(s.getBody().lastChild!==a||!Ag(a,l)||(s.execCommand("InsertNewBlockAfter"),0))})(n,r))).getOr(!1):_.from(n.dom.getParent(n.selection.getNode(),"summary")).bind((r=>_.from(n.dom.getParent(r,"details")).map((s=>((a,i,l)=>{const c=a.selection.getRng(),d=Y.fromRangeStart(c);return!(a.getBody().firstChild!==i||!Ng(l,d)||(a.execCommand("InsertNewBlockBefore"),0))})(n,s,r))))).getOr(!1))(e,t),PS={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},LS=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,Ie=(e,...t)=>()=>e.apply(null,t),dc=(e,t)=>qt(((n,o)=>Wt((r=>We(r,(s=>({...PS,...s}))))(n),(r=>LS(r,o)?[r]:[])))(e,t),(n=>n.action())),MS=(e,t)=>qn(((n,o)=>Wt((r=>We(r,(s=>({...PS,...s}))))(n),(r=>LS(r,o)?[r]:[])))(e,t),(n=>n.action())),IS=(e,t)=>{const n=t?1:-1,o=e.selection.getRng();return Zw(e,n,o,$l,ql,ar).exists((r=>(jr(e,r),!0)))},FS=(e,t)=>{const n=t?1:-1,o=e.selection.getRng();return eS(e,n,o,$l,ql,ar).exists((r=>(jr(e,r),!0)))},jS=(e,t)=>tS(e,t,t?ql:$l),zS=(e,t,n)=>Wt(ht(e),(o=>J(o,t)?n(o)?[o]:[]:zS(o,t,n))),US=(e,t)=>Cs(e,"table",t),HS=ho([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),uc={...HS,none:e=>HS.none(e)},Hg=(e,t,n,o,r=zt)=>{const s=o===1;if(!s&&n<=0)return uc.first(e[0]);if(s&&n>=e.length-1)return uc.last(e[e.length-1]);{const a=n+o,i=e[a];return r(i)?uc.middle(t,i):Hg(e,t,a,o,r)}},$S=(e,t)=>US(e,t).bind((n=>{const o=zS(n,"th,td",zt);return qs(o,(r=>pe(e,r))).map((r=>({index:r,all:o})))}));var nB=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const $g=(e,t)=>({element:e,offset:t}),qS=(e,t)=>{if(e.property().isText(t))return $g(t,e.property().getText(t).length);{const n=e.property().children(t);return n.length>0?qS(e,n[n.length-1]):$g(t,n.length)}},WS=(e,t,n)=>{const o=e.property().children(t);return o.length>0&&n<o.length?WS(e,o[n],0):o.length>0&&e.property().isElement(t)&&o.length===n?qS(e,o[o.length-1]):$g(t,n)},oB=WS,rB={up:le({selector:si,closest:Cs,predicate:Nr,all:on}),down:le({selector:Dn,predicate:Qc}),styles:le({get:nr,getRaw:ni,set:qc,remove:Vc}),attrs:le({get:ft,set:Te,remove:rt,copyTo:(e,t)=>{const n=Zt(e);Ne(t,n)}}),insert:le({before:un,after:M,afterAll:de,append:X,appendAll:De,prepend:q,wrap:oe}),remove:le({unwrap:Yt,remove:ct}),create:le({nu:E.fromTag,clone:e=>E.fromDom(e.dom.cloneNode(!1)),text:E.fromText}),query:le({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:Xt,nextSibling:Qn}),property:le({children:ht,name:Me,parent:vn,document:e=>Nn(e).dom,isText:St,isComment:wt,isElement:ot,isSpecial:e=>{const t=Me(e);return Se(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>ot(e)?at(e,"lang"):_.none(),getText:ri,setText:rm,isBoundary:e=>!!ot(e)&&(Me(e)==="body"||Se(nB,Me(e))),isEmptyTag:e=>!!ot(e)&&Se(["br","img","hr","input"],Me(e)),isNonEditable:e=>ot(e)&&ft(e,"contenteditable")==="false"}),eq:pe,is:ut},VS=Xs("image"),qg=Xs("event"),xu=e=>t=>{t[qg]=e},KS=xu(0),sB=xu(2),aB=xu(1),iB=e=>{const t=e;return _.from(t[qg]).exists((n=>n===0))},Wg=Xs("mode"),wu=e=>t=>{t[Wg]=e},XS=(e,t)=>wu(t)(e),YS=wu(0),Vg=wu(2),lB=wu(1),GS=e=>t=>{const n=t;return _.from(n[Wg]).exists((o=>o===e))},zi=GS(0),QS=GS(1),cB=["none","copy","link","move"],dB=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Kg=()=>{const e=new window.DataTransfer;let t="move",n="all";const o={get dropEffect(){return t},set dropEffect(r){Se(cB,r)&&(t=r)},get effectAllowed(){return n},set effectAllowed(r){iB(o)&&Se(dB,r)&&(n=r)},get items(){return((r,s)=>({...s,get length(){return s.length},add:(a,i)=>{if(zi(r)){if(!we(a))return s.add(a);if(!Mt(i))return s.add(a,i)}return null},remove:a=>{zi(r)&&s.remove(a)},clear:()=>{zi(r)&&s.clear()}}))(o,e.items)},get files(){return QS(o)?Object.freeze({length:0,item:r=>null}):e.files},get types(){return e.types},setDragImage:(r,s,a)=>{var i;zi(o)&&(i={image:r,x:s,y:a},o[VS]=i,e.setDragImage(r,s,a))},getData:r=>QS(o)?"":e.getData(r),setData:(r,s)=>{zi(o)&&e.setData(r,s)},clearData:r=>{zi(o)&&e.clearData(r)}};return YS(o),o},JS=(e,t)=>e.setData("text/html",t),ZS=(e,t,n,o,r)=>{const s=Dn(E.fromDom(n),"td,th,caption").map((i=>i.dom)),a=Oe(((i,l)=>Wt(l,(c=>{const d=((m,f)=>({left:m.left-f,top:m.top-f,right:m.right+-2,bottom:m.bottom+-2,width:m.width+f,height:m.height+f}))(va(c.getBoundingClientRect()),-1);return[{x:d.left,y:i(d),cell:c},{x:d.right,y:i(d),cell:c}]})))(e,s),(i=>t(i,r)));return((i,l,c)=>Qt(i,((d,m)=>d.fold((()=>_.some(m)),(f=>{const g=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c)),h=Math.sqrt(Math.abs(m.x-l)+Math.abs(m.y-c));return _.some(h<g?m:f)}))),_.none()))(a,o,r).map((i=>i.cell))},uB=ye(ZS,(e=>e.bottom),((e,t)=>e.y<t)),mB=ye(ZS,(e=>e.top),((e,t)=>e.y>t)),eE=(e,t,n)=>{const o=e(t,n);return(r=>r.breakType===Fr.Wrap&&r.positions.length===0)(o)||!$t(n.getNode())&&(r=>r.breakType===Fr.Br&&r.positions.length===1)(o)?!((r,s,a)=>a.breakAt.exists((i=>r(s,i).breakAt.isSome())))(e,t,o):o.breakAt.isNone()},fB=ye(eE,ic),pB=ye(eE,lc),gB=(e,t,n,o)=>{const r=e.selection.getRng(),s=t?1:-1;return!(!ev()||!((a,i,l)=>{const c=Y.fromRangeStart(i);return wi(!a,l).exists((d=>d.isEqual(c)))})(t,r,n)||(ss(s,e,n,!t,!1).each((a=>{jr(e,a)})),0))},tE=(e,t,n)=>{const o=((s,a)=>{const i=a.getNode(s);return Ar(i)?_.some(i):_.none()})(!!t,n),r=t===!1;o.fold((()=>jr(e,n.toRange())),(s=>wi(r,e.getBody()).filter((a=>a.isEqual(n))).fold((()=>jr(e,n.toRange())),(a=>((i,l,c)=>{l.undoManager.transact((()=>{const d=i?M:un,m=wS(l,E.fromDom(c),d);jr(l,m)}))})(t,e,s)))))},hB=(e,t,n,o)=>{const r=e.selection.getRng(),s=Y.fromRangeStart(r),a=e.getBody();if(!t&&fB(o,s)){const i=((l,c,d)=>((m,f)=>sn(f.getClientRects()).bind((g=>uB(m,g.left,g.top))).bind((g=>{return bu(Yo(h=g).map((b=>ic(h,b).positions.concat(b))).getOr([]),f);var h})))(c,d).orThunk((()=>sn(d.getClientRects()).bind((m=>_g(Hw(l,Y.before(c)),m.left))))).getOr(Y.before(c)))(a,n,s);return tE(e,t,i),!0}if(t&&pB(o,s)){const i=((l,c,d)=>((m,f)=>ro(f.getClientRects()).bind((g=>mB(m,g.left,g.top))).bind((g=>{return bu(Un(h=g).map((b=>[b].concat(lc(h,b).positions))).getOr([]),f);var h})))(c,d).orThunk((()=>sn(d.getClientRects()).bind((m=>_g($w(l,Y.after(c)),m.left))))).getOr(Y.after(c)))(a,n,s);return tE(e,t,i),!0}return!1},nE=(e,t,n)=>_.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((o=>_.from(e.dom.getParent(o,"table")).map((r=>n(e,t,r,o))))).getOr(!1),oE=(e,t)=>nE(e,t,gB),Xg=(e,t)=>nE(e,t,hB),rE=(e,t,n)=>n.fold(_.none,_.none,((o,r)=>{return(s=r,Xc(s,J_)).map((a=>(i=>{const l=ii.exact(i,0,i,0);return eN(l)})(a)));var s}),(o=>!e.mode.isReadOnly()&&bB(o)&&(r=>Su(r)||an(r).some((s=>io(s)&&Su(s))))(o)?(e.execCommand("mceTableInsertRowAfter"),sE(e,t,o)):_.none())),bB=e=>or(e,Sn("table")).exists(Qr),sE=(e,t,n)=>{return rE(e,t,(r=Su,$S(o=n,void 0).fold((()=>uc.none(o)),(s=>Hg(s.all,o,s.index,1,r)))));var o,r},vB=(e,t,n)=>{return rE(e,t,(r=Su,$S(o=n,void 0).fold((()=>uc.none()),(s=>Hg(s.all,o,s.index,-1,r)))));var o,r},Su=e=>Qr(e)||lm(e,yB),yB=e=>io(e)&&Qr(e),aE=(e,t)=>{const n=["table","li","dl"],o=E.fromDom(e.getBody()),r=a=>{const i=Me(a);return pe(a,o)||Se(n,i)},s=e.selection.getRng();return((a,i)=>((l,c,d=_t)=>d(c)?_.none():Se(l,Me(c))?_.some(c):si(c,l.join(","),(m=>J(m,"table")||d(m))))(["td","th"],a,i))(E.fromDom(t?s.endContainer:s.startContainer),r).map((a=>(US(a,r).each((i=>{e.model.table.clearSelectedCells(i.dom)})),e.selection.collapse(!t),(t?sE:vB)(e,r,a).each((i=>{e.selection.setRng(i)})),!0))).getOr(!1)},mr=(e,t)=>({container:e,offset:t}),Eu=Nt.DOM,ku=e=>t=>e===t?-1:0,Yg=(e,t,n)=>{if(se(e)&&t>=0)return _.some(mr(e,t));{const o=ba(Eu);return _.from(o.backwards(e,t,ku(e),n)).map((r=>mr(r.container,r.container.data.length)))}},Gg=(e,t,n)=>{if(!se(e))return _.none();const o=e.data;if(t>=0&&t<=o.length)return _.some(mr(e,t));{const r=ba(Eu);return _.from(r.backwards(e,t,ku(e),n)).bind((s=>{const a=s.container.data;return Gg(s.container,t+a.length,n)}))}},iE=(e,t,n)=>{if(!se(e))return _.none();const o=e.data;if(t<=o.length)return _.some(mr(e,t));{const r=ba(Eu);return _.from(r.forwards(e,t,ku(e),n)).bind((s=>iE(s.container,t-o.length,n)))}},Qg=(e,t,n,o,r)=>{const s=ba(e,(a=>i=>a.isBlock(i)||Se(["BR","IMG","HR","INPUT"],i.nodeName)||a.getContentEditable(i)==="false")(e));return _.from(s.backwards(t,n,o,r))},lE=e=>e!==""&&` \xA0\uFEFF\f
\r	\v`.indexOf(e)!==-1,CB=(e,t)=>e.substring(t.length),Jg=(e,t,n,o=!1)=>{if(!(r=t).collapsed||!se(r.startContainer))return _.none();var r;const s={text:"",offset:0},a=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return Qg(e,t.startContainer,t.startOffset,((i,l,c)=>(s.text=c+s.text,s.offset+=l,((d,m,f,g=!1)=>{let h;const b=f.charAt(0);for(h=m-1;h>=0;h--){const v=d.charAt(h);if(!g&&lE(v))return _.none();if(b===v&&bn(d,f,h,m))break}return _.some(h)})(s.text,s.offset,n,o).getOr(l))),a).bind((i=>{const l=t.cloneRange();if(l.setStart(i.container,i.offset),l.setEnd(t.endContainer,t.endOffset),l.collapsed)return _.none();const c=(d=>vo(d.toString().replace(/\u00A0/g," ")))(l);return c.lastIndexOf(n)!==0?_.none():_.some({text:CB(c,n),range:l,trigger:n})}))},cE=e=>{if((t=>t.nodeType===3)(e))return mr(e,e.data.length);{const t=e.childNodes;return t.length>0?cE(t[t.length-1]):mr(e,t.length)}},dE=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?dE(n[t],0):n.length>0&&(o=>o.nodeType===1)(e)&&n.length===t?cE(n[n.length-1]):mr(e,t)},uE=(e,t,n,o={})=>{var r;const s=t(),a=(r=e.selection.getRng().startContainer.nodeValue)!==null&&r!==void 0?r:"",i=Oe(s.lookupByTrigger(n.trigger),(c=>n.text.length>=c.minChars&&c.matches.getOrThunk((()=>(d=>m=>{const f=dE(m.startContainer,m.startOffset);return!((g,h)=>{var b;const v=(b=g.getParent(h.container,g.isBlock))!==null&&b!==void 0?b:g.getRoot();return Qg(g,h.container,h.offset,((y,S)=>S===0?-1:S),v).filter((y=>{const S=y.container.data.charAt(y.offset-1);return!lE(S)})).isSome()})(d,f)})(e.dom)))(n.range,a,n.text)));if(i.length===0)return _.none();const l=Promise.all(We(i,(c=>c.fetch(n.text,c.maxResults,o).then((d=>({matchText:n.text,items:d,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))))));return _.some({lookupData:l,context:n})};var zr;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(zr||(zr={}));const Zg=(e,t,n)=>e.stype===zr.Error?t(e.serror):n(e.svalue),Ui=e=>({stype:zr.Value,svalue:e}),mc=e=>({stype:zr.Error,serror:e}),xB=Zg,mE=e=>Ue(e)&&pn(e).length>100?" removed due to size":JSON.stringify(e,null,2),fE=(e,t)=>mc([{path:e,getErrorInfo:t}]),eh=e=>({extract:(t,n)=>{return o=e(n),r=s=>((a,i)=>fE(a,le(i)))(t,s),o.stype===zr.Error?r(o.serror):o;var o,r},toString:le("val")}),wB=eh(Ui),th=le(wB),_u=(e,t)=>eh((n=>{const o=typeof n;return e(n)?Ui(n):mc(`Expected type: ${t} but got: ${o}`)})),SB=_u(x,"number"),nh=_u(we,"string");_u(xn,"boolean");const pE=_u(bt,"function"),gE=e=>{if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every((t=>gE(e[t])));default:return!1}};eh((e=>gE(e)?Ui(e):mc("Expected value to be acceptable for sending via postMessage")));const hE=e=>({tag:"defaultedThunk",process:le(e)}),bE=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},EB=e=>{const t=(o=>{const r=[],s=[];return K(o,(a=>{Zg(a,(i=>s.push(i)),(i=>r.push(i)))})),{values:r,errors:s}})(e);return t.errors.length>0?(n=t.errors,In(mc,wc)(n)):Ui(t.values);var n},vE=(e,t,n,o)=>o(Bt(e,t).getOrThunk((()=>n(e)))),kB=(e,t,n,o,r)=>{const s=i=>r.extract(t.concat([o]),i),a=i=>i.fold((()=>Ui(_.none())),(l=>{return d=r.extract(t.concat([o]),l),m=_.some,d.stype===zr.Value?{stype:zr.Value,svalue:m(d.svalue)}:d;var d,m}));switch(e.tag){case"required":return((i,l,c,d)=>Bt(l,c).fold((()=>((m,f,g)=>fE(m,(()=>'Could not find valid *required* value for "'+f+'" in '+mE(g))))(i,c,l)),d))(t,n,o,s);case"defaultedThunk":return vE(n,o,e.process,s);case"option":return((i,l,c)=>c(Bt(i,l)))(n,o,a);case"defaultedOptionThunk":return((i,l,c,d)=>d(Bt(i,l).map((m=>m===!0?c(i):m))))(n,o,e.process,a);case"mergeWithThunk":return vE(n,o,le({}),(i=>{const l=qa(e.process(n),i);return s(l)}))}},yE=e=>({extract:(t,n)=>((o,r,s)=>{const a={},i=[];for(const l of s)bE(l,((c,d,m,f)=>{const g=kB(m,o,r,c,f);xB(g,(h=>{i.push(...h)}),(h=>{a[d]=h}))}),((c,d)=>{a[c]=d(r)}));return i.length>0?mc(i):Ui(a)})(t,n,e),toString:()=>`obj{
`+We(e,(n=>bE(n,((o,r,s,a)=>o+" -> "+a.toString()),((o,r)=>"state("+o+")")))).join(`
`)+"}"}),CE=(e,t,n)=>{return o=((r,s,a)=>((i,l)=>i.stype===zr.Error?{stype:zr.Error,serror:l(i.serror)}:i)(s.extract([r],a),(i=>({input:a,errors:i}))))(e,t,n),Zg(o,hn.error,hn.value);var o},xE=e=>`Errors: 
`+(t=>{const n=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:le("... (only showing first ten failures)")}]):t;return We(n,(o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo()))})(e.errors).join(`
`)+`

Input object: `+mE(e.input),Hi=(e,t,n,o)=>({tag:"field",key:e,newKey:t,presence:n,prop:o}),wE=(e,t)=>Hi(e,e,{tag:"required",process:{}},t),SE=e=>wE(e,nh),EE=e=>wE(e,pE),kE=(e,t)=>Hi(e,e,{tag:"option",process:{}},t),fr=e=>kE(e,nh),_E=(e,t,n)=>Hi(e,e,hE(t),n),NE=(e,t)=>_E(e,t,SB),_B=SE("type"),NB=EE("fetch"),AB=EE("onAction");fr("name"),fr("text"),fr("role"),fr("icon"),fr("url"),fr("tooltip"),fr("chevronTooltip"),fr("label"),fr("shortcut");const TB=yE([_B,SE("trigger"),NE("minChars",1),(e=>Hi(e,e,hE(1),th()))("columns"),NE("maxResults",10),kE("matches",pE),NB,AB,(AE=nh,_E("highlightOn",[],(oh=AE,{extract:(e,t)=>{const n=We(t,((o,r)=>oh.extract(e.concat(["["+r+"]"]),o)));return EB(n)},toString:()=>"array("+oh.toString()+")"})))]);var AE,oh;const DB=e=>{const t=Wo(),n=tn(!1),o=t.isSet,r=()=>{o()&&((l=>{l.dispatch("AutocompleterEnd")})(e),n.set(!1),t.clear())},s=Wn((()=>(l=>{const c=l.ui.registry.getAll().popups,d=Vs(c,(g=>{return(h=g,CE("Autocompleter",TB,h)).fold((b=>{throw new Error(xE(b))}),gt);var h})),m=Ac(Cr(d,(g=>g.trigger))),f=Ha(d);return{dataset:d,triggers:m,lookupByTrigger:g=>Oe(f,(h=>h.trigger===g))}})(e))),a=l=>{(c=>t.get().map((d=>Jg(e.dom,e.selection.getRng(),d.trigger,!0).bind((m=>uE(e,s,m,c))))).getOrThunk((()=>((d,m)=>{const f=m(),g=d.selection.getRng();return((h,b,v)=>qn(v.triggers,(y=>Jg(h,b,y))))(d.dom,g,f).bind((h=>uE(d,m,h)))})(e,s))))(l).fold(r,(c=>{(d=>{o()||t.set({trigger:d.trigger,matchLength:d.text.length})})(c.context),c.lookupData.then((d=>{t.get().map((m=>{const f=c.context;m.trigger===f.trigger&&(t.set({...m,matchLength:f.text.length}),n.get()?(Qm(e,{range:f.range}),((g,h)=>{g.dispatch("AutocompleterUpdate",h)})(e,{lookupData:d})):(n.set(!0),Qm(e,{range:f.range}),((g,h)=>{g.dispatch("AutocompleterStart",h)})(e,{lookupData:d})))}))}))}))},i=()=>t.get().bind((({trigger:l})=>{const c=e.selection.getRng();return Jg(e.dom,c,l,n.get()).filter((({range:d})=>((m,f)=>{const g=m.compareBoundaryPoints(window.Range.START_TO_START,f),h=m.compareBoundaryPoints(window.Range.END_TO_END,f);return g>=0&&h<=0})(c,d))).map((({range:d})=>d))}));e.addCommand("mceAutocompleterReload",((l,c)=>{const d=Ue(c)?c.fetchOptions:{};a(d)})),e.addCommand("mceAutocompleterClose",r),e.addCommand("mceAutocompleterRefreshActiveRange",(()=>{i().each((l=>{Qm(e,{range:l})}))})),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",(()=>i().isSome())),((l,c)=>{const d=so(c.load,50);l.on("input",(m=>{(m.inputType!=="insertCompositionText"||l.composing)&&d.throttle()})),l.on("keydown",(m=>{const f=m.which;f===8?d.throttle():f===27?(d.cancel(),c.cancelIfNecessary()):f!==38&&f!==40||d.cancel()}),!0),l.on("remove",d.cancel)})(e,{cancelIfNecessary:r,load:a})},RB=No().browser.isSafari(),TE=e=>Es(E.fromDom(e)),DE=(e,t)=>{var n;return e.startOffset===0&&e.endOffset===((n=t.textContent)===null||n===void 0?void 0:n.length)},Nu=(e,t)=>_.from(e.getParent(t.container(),"details")),RE=(e,t)=>Nu(e,t).isSome(),OE=(e,t)=>{const n=t.getNode();Mt(n)||e.selection.setCursorLocation(n,t.offset())},BE=(e,t,n)=>{const o=e.dom.getParent(t.container(),"details");if(o&&!o.open){const r=e.dom.select("summary",o)[0];r&&(n?Un(r):Yo(r)).each((s=>OE(e,s)))}else OE(e,t)},PE=(e,t,n)=>{const{dom:o,selection:r}=e,s=e.getBody();if(n==="character"){const a=Y.fromRangeStart(r.getRng()),i=o.getParent(a.container(),o.isBlock),l=Nu(o,a),c=i&&o.isEmpty(i),d=Ge(i?.previousSibling),m=Ge(i?.nextSibling);return!!(c&&(t?m:d)&&xi(!t,s,a).exists((f=>RE(o,f)&&!Wa(l,Nu(o,f)))))||xi(t,s,a).fold(_t,(f=>{const g=Nu(o,f);if(RE(o,f)&&!Wa(l,g)){if(t||BE(e,f,!1),i&&c){if(t&&d||!t&&m)return!0;BE(e,f,t),e.dom.remove(i)}return!0}return!1}))}return!1},OB=(e,t,n,o)=>{const r=e.selection.getRng(),s=Y.fromRangeStart(r),a=e.getBody();return o==="selection"?((i,l)=>{const c=l.startSummary.exists((f=>f.contains(i.startContainer))),d=l.startSummary.exists((f=>f.contains(i.endContainer))),m=l.startDetails.forall((f=>l.endDetails.forall((g=>f!==g))));return(c||d)&&!(c&&d)||m})(r,t):n?((i,l)=>l.startSummary.exists((c=>((d,m)=>Yo(m).exists((f=>$t(f.getNode())&&lo(m,f).exists((g=>g.isEqual(d)))||f.isEqual(d))))(i,c))))(s,t)||((i,l,c)=>c.startDetails.exists((d=>eo(i,l).forall((m=>!d.contains(m.container()))))))(a,s,t):((i,l)=>l.startSummary.exists((c=>((d,m)=>Un(m).exists((f=>f.isEqual(d))))(i,c))))(s,t)||((i,l)=>l.startDetails.exists((c=>lo(c,i).forall((d=>l.startSummary.exists((m=>!m.contains(i.container())&&m.contains(d.container()))))))))(s,t)},Ma=(e,t,n)=>((o,r,s)=>((a,i)=>{const l=_.from(a.getParent(i.startContainer,"details")),c=_.from(a.getParent(i.endContainer,"details"));if(l.isSome()||c.isSome()){const d=l.bind((m=>_.from(a.select("summary",m)[0])));return _.some({startSummary:d,startDetails:l,endDetails:c})}return _.none()})(o.dom,o.selection.getRng()).fold((()=>PE(o,r,s)),(a=>OB(o,a,r,s)||PE(o,r,s))))(e,t,n)||RB&&((o,r,s)=>{const a=o.selection,i=a.getNode(),l=a.getRng(),c=Y.fromRangeStart(l);return!!lN(i)&&(s==="selection"&&DE(l,i)||rC(r,c,i)?TE(i):o.undoManager.transact((()=>{const d=a.getSel();let{anchorNode:m,anchorOffset:f,focusNode:g,focusOffset:h}=d??{};const b=()=>{ee(m)&&ee(f)&&ee(g)&&ee(h)&&d?.setBaseAndExtent(m,f,g,h)},v=(S,N)=>{K(S.childNodes,(D=>{zl(D)&&N.appendChild(D)}))},y=o.dom.create("span",{"data-mce-bogus":"1"});v(i,y),i.appendChild(y),b(),s!=="word"&&s!=="line"||d==null||d.modify("extend",r?"right":"left",s),!a.isCollapsed()&&DE(a.getRng(),y)?TE(i):(o.execCommand(r?"ForwardDelete":"Delete"),m=d?.anchorNode,f=d?.anchorOffset,g=d?.focusNode,h=d?.focusOffset,v(y,i),b()),o.dom.remove(y)})),!0)})(e,t,n)?_.some(ke):_.none(),LE=e=>(t,n,o={})=>{const r=t.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:ke,inputType:n},a=O0(new InputEvent(e));return t.dispatch(e,{...a,...s,...o})},fc=LE("input"),Au=LE("beforeinput"),ME=No(),IE=ME.os,FE=IE.isMacOS()||IE.isiOS(),BB=ME.browser.isFirefox(),$i=(e,t)=>{const n=e.dom,o=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const s=l=>/^(ul|ol|dl)$/.test(Me(l)),a=l=>s(l)?_.from(l):Xc(l,s),i=l=>n.isEmpty(l.dom);(l=>{for(;l;){if(Ce(l)||se(l)&&l.data&&/[\r\n\s]/.test(l.data))return _.from(E.fromDom(l));l=l.nextSibling}return _.none()})(t.firstChild).each((l=>{a(l).fold((()=>{if(i(l)){const c=(d=>oB(rB,d,0))(l).element;ot(c)&&!Ss(c)&&X(c,E.fromText(Ft))}}),(c=>{un(c,E.fromText(Ft))}))}))}const r=n.createRng();if(t.normalize(),t.hasChildNodes()){const s=new ln(t,t);let a,i=t;for(;a=s.current();){if(se(a)){r.setStart(a,0),r.setEnd(a,0);break}if(o[a.nodeName.toLowerCase()]){r.setStartBefore(a),r.setEndBefore(a);break}i=a,a=s.next()}a||(r.setStart(i,0),r.setEnd(i,0))}else $t(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)):(r.setStart(t,0),r.setEnd(t,0));e.selection.setRng(r),Hl(e,r)},pc=(e,t)=>{const n=e.getRoot();let o,r=t;for(;r!==n&&r&&e.getContentEditable(r)!=="false";){if(e.getContentEditable(r)==="true"){o=r;break}r=r.parentNode}return r!==n?o:n},rh=e=>_.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),sh=e=>{e.innerHTML='<br data-mce-bogus="1">'},gc=(e,t)=>{En(e).toLowerCase()===t.tagName.toLowerCase()&&((n,o,r)=>{const s=n.dom;_.from(r.style).map(s.parseStyle).each((d=>{const m={...em(E.fromDom(o)),...d};s.setStyles(o,m)}));const a=_.from(r.class).map((d=>d.split(/\s+/))),i=_.from(o.className).map((d=>Oe(d.split(/\s+/),(m=>m!==""))));Ut(a,i,((d,m)=>{const f=Oe(m,(h=>!Se(d,h))),g=[...d,...f];s.setAttrib(o,"class",g.join(" "))}));const l=["style","class"],c=er(r,((d,m)=>!Se(l,m)));s.setAttribs(o,c)})(e,t,vi(e))},jE=(e,t,n,o,r=!0,s,a)=>{const i=e.dom,l=e.schema,c=En(e),d=n?n.nodeName.toUpperCase():"";let m=t;const f=l.getTextInlineElements();let g;g=s||d==="TABLE"||d==="HR"?i.create(s||c,a||{}):n.cloneNode(!1);let h=g;if(r){do if(f[m.nodeName]){if(Oo(m)||Bo(m))continue;const b=m.cloneNode(!1);i.setAttrib(b,"id",""),g.hasChildNodes()?(b.appendChild(g.firstChild),g.appendChild(b)):(h=b,g.appendChild(b))}while((m=m.parentNode)&&m!==o);((b,v)=>{const y=E.fromDom(b),S=E.fromDom(v),N=Sn("span"),D=ye(pe,y),T=P=>ot(P)&&ni(P,"font-size").isSome(),R=[...T(S)?[S]:[],...Xh(S,T,D)];K(R.slice(1),(P=>{Vc(P,"font-size"),rt(P,"data-mce-style"),N(P)&&mt(P)&&Yt(P)}))})(g,h)}else i.setAttrib(g,"style",null),i.setAttrib(g,"class",null);return gc(e,g),sh(h),g},zE=(e,t)=>{const n=e?.parentNode;return ee(n)&&n.nodeName===t},UE=e=>ee(e)&&/^(OL|UL|LI)$/.test(e.nodeName),ah=e=>ee(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Tu=e=>{const t=e.parentNode;return ah(t)?t:e},Du=(e,t,n)=>{let o=e[n?"firstChild":"lastChild"];for(;o&&!Ce(o);)o=o[n?"nextSibling":"previousSibling"];return o===t},HE=e=>Qt(Cr(em(E.fromDom(e)),((t,n)=>`${n}: ${t};`)),((t,n)=>t+n),""),PB=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),ih=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,lh=(e,t)=>ee(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",ch=(e,t,n)=>se(t)?e?n===1&&t.data.charAt(n-1)===Cn?0:n:n===t.data.length-1&&t.data.charAt(n)===Cn?t.data.length:n:n,$E={insert:(e,t)=>{let n,o,r,s,a=!1;const i=e.dom,l=e.schema.getNonEmptyElements(),c=e.selection.getRng(),d=En(e),m=E.fromDom(c.startContainer),f=Vt(m,c.startOffset),g=f.exists((F=>io(F)&&!Qr(F))),h=c.collapsed&&g,b=(F,W)=>jE(e,n,T,D,tA(e),F,W),v=F=>{const W=ch(F,n,o);if(se(n)&&(F?W>0:W<n.data.length))return!1;if((n.parentNode===T||n===T)&&a&&!F||F&&Ce(n)&&n===T.firstChild)return!0;if(ih(n,"TABLE")||ih(n,"HR"))return(H=>H.nodeName==="BR"||H.nextSibling&&H.nextSibling.nodeName==="BR")(n)?!F:a&&!F||!a&&F;const O=new ln(n,T);let I;for(se(n)&&(F&&W===0?O.prev():F||W!==n.data.length||O.next());I=O.current();){if(Ce(I)){if(!I.getAttribute("data-mce-bogus")){const H=I.nodeName.toLowerCase();if(l[H]&&H!=="br")return!1}}else if(se(I)&&!li(I.data))return!1;F?O.prev():O.next()}return!0},y=()=>{let F;return F=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&R!=="HGROUP"?b(d):b(),((W,O)=>{const I=nA(W);return!kt(O)&&(we(I)?Se(k.explode(I),O.nodeName.toLowerCase()):I)})(e,s)&&lh(i,s)&&i.isEmpty(T,void 0,{includeZwsp:!0})?F=i.split(s,T):i.insertAfter(F,T),$i(e,F),F};Bd(i,c).each((F=>{c.setStart(F.startContainer,F.startOffset),c.setEnd(F.endContainer,F.endOffset)})),n=c.startContainer,o=c.startOffset;const S=!(!t||!t.shiftKey),N=!(!t||!t.ctrlKey);Ce(n)&&n.hasChildNodes()&&!h&&(a=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=a&&se(n)?n.data.length:0);const D=pc(i,n);if(!D||((F,W)=>{const O=F.dom.getParent(W,"ol,ul,dl");return O!==null&&F.dom.getContentEditableParent(O)==="false"})(e,n))return;S||(n=((F,W,O,I,H)=>{var te,ne;const ae=F.dom,Ae=(te=pc(ae,I))!==null&&te!==void 0?te:ae.getRoot();let $e=ae.getParent(I,ae.isBlock);if(!$e||!lh(ae,$e)){if($e=$e||Ae,!$e.hasChildNodes()){const Ee=ae.create(W);return gc(F,Ee),$e.appendChild(Ee),O.setStart(Ee,0),O.setEnd(Ee,0),Ee}let Be,Pe=I;for(;Pe&&Pe.parentNode!==$e;)Pe=Pe.parentNode;for(;Pe&&!ae.isBlock(Pe);)Be=Pe,Pe=Pe.previousSibling;const ce=(ne=Be?.parentElement)===null||ne===void 0?void 0:ne.nodeName;if(Be&&ce&&F.schema.isValidChild(ce,W.toLowerCase())){const Ee=Be.parentNode,j=ae.create(W);for(gc(F,j),Ee.insertBefore(j,Be),Pe=Be;Pe&&!ae.isBlock(Pe);){const z=Pe.nextSibling;j.appendChild(Pe),Pe=z}O.setStart(I,H),O.setEnd(I,H)}}return I})(e,d,c,n,o));let T=i.getParent(n,i.isBlock)||i.getRoot();s=ee(T?.parentNode)?i.getParent(T.parentNode,i.isBlock):null,r=T?T.nodeName.toUpperCase():"";const R=s?s.nodeName.toUpperCase():"";if(R!=="LI"||N||(T=s,s=s.parentNode,r=R),Ce(s)&&((F,W,O)=>!W&&O.nodeName.toLowerCase()===En(F)&&F.dom.isEmpty(O)&&((I,H)=>{let te=H;for(;te&&te!==I&&Ge(te.nextSibling);){const ae=te.parentElement;if(!ae||(ne=ae,!Fe(F.schema.getTextBlockElements(),ne.nodeName.toLowerCase())))return gm(ae);te=ae}var ne;return!1})(F.getBody(),O))(e,S,T))return((F,W,O)=>{var I,H,te;const ne=W(En(F)),ae=((Ae,$e)=>Ae.dom.getParent($e,gm))(F,O);ae&&(F.dom.insertAfter(ne,ae),$i(F,ne),((te=(H=(I=O.parentElement)===null||I===void 0?void 0:I.childNodes)===null||H===void 0?void 0:H.length)!==null&&te!==void 0?te:0)>1&&F.dom.remove(O))})(e,b,T);if(/^(LI|DT|DD)$/.test(r)&&Ce(s)&&i.isEmpty(T))return void((F,W,O,I,H)=>{const te=F.dom,ne=F.selection.getRng(),ae=O.parentNode;if(O===F.getBody()||!ae)return;var Ae;UE(Ae=O)&&UE(Ae.parentNode)&&(H="LI");const $e=ah(I)?HE(I):void 0;let Be=ah(I)&&$e?W(H,{style:HE(I)}):W(H);if(Du(O,I,!0)&&Du(O,I,!1))if(zE(O,"LI")){const Pe=Tu(O);te.insertAfter(Be,Pe),(ce=>{var Ee;return((Ee=ce.parentNode)===null||Ee===void 0?void 0:Ee.firstChild)===ce})(O)?te.remove(Pe):te.remove(O)}else te.replace(Be,O);else if(Du(O,I,!0))zE(O,"LI")?(te.insertAfter(Be,Tu(O)),Be.appendChild(te.doc.createTextNode(" ")),Be.appendChild(O)):ae.insertBefore(Be,O),te.remove(I);else if(Du(O,I,!1))te.insertAfter(Be,Tu(O)),te.remove(I);else{O=Tu(O);const Pe=ne.cloneRange();Pe.setStartAfter(I),Pe.setEndAfter(O);const ce=Pe.extractContents();if(H==="LI"&&(Ee=>Ee.firstChild&&Ee.firstChild.nodeName==="LI")(ce)){const Ee=Oe(We(Be.children,E.fromDom),qo(Sn("br")));Be=ce.firstChild,te.insertAfter(ce,O),K(Ee,(j=>q(E.fromDom(Be),j))),$e&&Be.setAttribute("style",$e)}else te.insertAfter(ce,O),te.insertAfter(Be,O);te.remove(I)}$i(F,Be)})(e,b,s,T,d);if(!(h||T!==e.getBody()&&lh(i,T)))return;const P=T.parentNode;let L;if(h)L=b(d),f.fold((()=>{X(m,E.fromDom(L))}),(F=>{un(F,E.fromDom(L))})),e.selection.setCursorLocation(L,0);else if(gi(T))L=zm(T),i.isEmpty(T)&&sh(T),gc(e,L),$i(e,L);else if(v(!1))L=y();else if(v(!0)&&P){const F=Y.fromRangeStart(c),W=Hf(F),O=E.fromDom(T),I=Fd(O,F,e.schema)?Fy(O,F,e.schema).bind((te=>_.from(te.getNode()))):_.none();L=P.insertBefore(b(),T);const H=ih(T,"HR")||W?L:I.getOr(T);$i(e,H)}else{const F=(O=>{const I=O.cloneRange();return I.setStart(O.startContainer,ch(!0,O.startContainer,O.startOffset)),I.setEnd(O.endContainer,ch(!1,O.endContainer,O.endOffset)),I})(c).cloneRange();F.setEndAfter(T);const W=F.extractContents();(O=>{K(Qc(E.fromDom(O),St),(I=>{const H=I.dom;H.nodeValue=vo(H.data)}))})(W),(O=>{let I=O;do se(I)&&(I.data=I.data.replace(/^[\r\n]+/,"")),I=I.firstChild;while(I)})(W),L=W.firstChild,T===L?ee(P)&&i.insertAfter(W,P):i.insertAfter(W,T),((O,I,H)=>{var te;const ne=[];if(!H)return;let ae=H;for(;ae=ae.firstChild;){if(O.isBlock(ae))return;Ce(ae)&&!I[ae.nodeName.toLowerCase()]&&ne.push(ae)}let Ae=ne.length;for(;Ae--;)ae=ne[Ae],(!ae.hasChildNodes()||ae.firstChild===ae.lastChild&&((te=ae.firstChild)===null||te===void 0?void 0:te.nodeValue)===""||PB(O,ae))&&O.remove(ae)})(i,l,L),((O,I)=>{I.normalize();const H=I.lastChild;(!H||Ce(H)&&/^(left|right)$/gi.test(O.getStyle(H,"float",!0)))&&O.add(I,"br")})(i,T),i.isEmpty(T)&&sh(T),L.normalize(),i.isEmpty(L)?(i.remove(L),y()):(gc(e,L),$i(e,L))}i.setAttrib(L,"id",""),e.dispatch("NewBlock",{newBlock:L})},fakeEventName:"insertParagraph"},qE=(e,t,n)=>{const o=e.dom.createRng();n?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),e.selection.setRng(o),Hl(e,o)},LB=(e,t)=>{const n=E.fromTag("br");un(E.fromDom(t),n),e.undoManager.add()},MB=(e,t)=>{IB(e.getBody(),t)||M(E.fromDom(t),E.fromTag("br"));const n=E.fromTag("br");M(E.fromDom(t),n),qE(e,n.dom,!1),e.undoManager.add()},IB=(e,t)=>{return n=Y.after(t),!!$t(n.getNode())||eo(e,Y.after(t)).map((o=>$t(o.getNode()))).getOr(!1);var n},WE=e=>e&&e.nodeName==="A"&&"href"in e,FB=e=>e.fold(_t,WE,WE,_t),jB=(e,t)=>{t.fold(ke,ye(LB,e),ye(MB,e),ke)},VE={insert:(e,t)=>{const n=(o=>{const r=ye(_a,o),s=Y.fromRangeStart(o.selection.getRng());return Ir(r,o.getBody(),s).filter(FB)})(e);n.isSome()?n.each(ye(jB,e)):((o,r)=>{const s=o.selection,a=o.dom,i=s.getRng();let l,c=!1;Bd(a,i).each((v=>{i.setStart(v.startContainer,v.startOffset),i.setEnd(v.endContainer,v.endOffset)}));let d=i.startOffset,m=i.startContainer;if(Ce(m)&&m.hasChildNodes()){const v=d>m.childNodes.length-1;m=m.childNodes[Math.min(d,m.childNodes.length-1)]||m,d=v&&se(m)?m.data.length:0}let f=a.getParent(m,a.isBlock);const g=f&&f.parentNode?a.getParent(f.parentNode,a.isBlock):null,h=g?g.nodeName.toUpperCase():"",b=!(!r||!r.ctrlKey);h!=="LI"||b||(f=g),se(m)&&d>=m.data.length&&(((v,y,S)=>{const N=new ln(y,S);let D;const T=v.getNonEmptyElements();for(;D=N.next();)if(T[D.nodeName.toLowerCase()]||se(D)&&D.length>0)return!0;return!1})(o.schema,m,f||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),c=!0)),l=a.create("br"),Vm(a,i,l),qE(o,l,c),o.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},KE=(e,t)=>rh(e).filter((n=>t.length>0&&J(E.fromDom(n),t))).isSome(),yo=ho([{br:[]},{block:[]},{none:[]}]),zB=(e,t)=>(n=>KE(n,eA(n)))(e),XE=e=>(t,n)=>(o=>rh(o).filter((r=>mi(E.fromDom(r)))).isSome())(t)===e,YE=(e,t)=>(n,o)=>(s=>rh(s).fold(le(""),(a=>a.nodeName.toUpperCase())))(n)===e.toUpperCase()===t,UB=e=>{const t=pc(e.dom,e.selection.getStart());return kt(t)},hc=e=>YE("pre",e),Ru=e=>(t,n)=>QN(t)===e,HB=(e,t)=>(n=>KE(n,ZN(n)))(e),Ou=(e,t)=>t,$B=e=>{const t=En(e),n=pc(e.dom,e.selection.getStart());return ee(n)&&e.schema.isValidChild(n.nodeName,t)},qB=e=>{const t=e.selection.getRng(),n=E.fromDom(t.startContainer),o=Vt(n,t.startOffset).map((r=>io(r)&&!Qr(r)));return t.collapsed&&o.getOr(!0)},Uo=(e,t)=>(n,o)=>Qt(e,((r,s)=>r&&s(n,o)),!0)?_.some(t):_.none(),Bu=(e,t,n)=>{if(!t.mode.isReadOnly()){if(t.selection.isCollapsed()||(o=>{o.execCommand("delete")})(t),ee(n)&&Au(t,e.fakeEventName).isDefaultPrevented())return;e.insert(t,n),ee(n)&&fc(t,e.fakeEventName)}},GE=(e,t)=>{if(e.mode.isReadOnly())return;const n=()=>Bu(VE,e,t),o=()=>Bu($E,e,t),r=((s,a)=>Pw([Uo([zB],yo.none()),Uo([hc(!0),UB],yo.none()),Uo([YE("summary",!0)],yo.br()),Uo([hc(!0),Ru(!1),Ou],yo.br()),Uo([hc(!0),Ru(!1)],yo.block()),Uo([hc(!0),Ru(!0),Ou],yo.block()),Uo([hc(!0),Ru(!0)],yo.br()),Uo([XE(!0),Ou],yo.br()),Uo([XE(!0)],yo.block()),Uo([HB],yo.br()),Uo([Ou],yo.br()),Uo([$B],yo.block()),Uo([qB],yo.block())],[s,!(!a||!a.shiftKey)]).getOr(yo.none()))(e,t);switch(JN(e)){case"linebreak":r.fold(n,n,ke);break;case"block":r.fold(o,o,ke);break;case"invert":r.fold(o,n,ke);break;default:r.fold(n,o,ke)}},QE=No(),WB=QE.os.isiOS()&&QE.browser.isSafari(),JE=(e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact((()=>{GE(e,t)})))},VB=No(),ZE=e=>e.stopImmediatePropagation(),ek=e=>e.keyCode===me.PAGE_UP||e.keyCode===me.PAGE_DOWN,tk=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",ZE,!0):!n&&e.get()&&t.off("NodeChange",ZE),e.set(n)},nk=(e,t)=>e===t||e.contains(t),ok=(e,t)=>{const n=t.container(),o=t.offset();return se(n)?(n.insertData(o,e),_.some(Y(n,o+e.length))):Cd(t).map((r=>{const s=E.fromText(e);return t.isAtEnd()?M(r,s):un(r,s),Y(s.dom,e.length)}))},rk=ye(ok,Ft),sk=ye(ok," "),ak=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},KB=e=>{const t=Y.fromRangeStart(e.selection.getRng()),n=E.fromDom(e.getBody());if(e.selection.isCollapsed()){const o=ye(_a,e),r=Y.fromRangeStart(e.selection.getRng());return Ir(o,e.getBody(),r).bind((s=>a=>a.fold((i=>lo(s.dom,Y.before(i))),(i=>Un(i)),(i=>Yo(i)),(i=>eo(s.dom,Y.after(i)))))(n)).map((s=>()=>((a,i,l)=>c=>qy(a,c,l)?rk(i):sk(i))(n,t,e.schema)(s).each(ak(e))))}return _.none()},XB=e=>{return Kr(p.browser.isFirefox()&&e.selection.isEditable()&&(t=e.dom,n=e.selection.getRng().startContainer,t.isEditable(t.getParent(n,"summary"))),(()=>{const o=E.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),((r,s,a)=>qy(r,s,a)?rk(s):sk(s))(o,Y.fromRangeStart(e.selection.getRng()),e.schema).each(ak(e))}));var t,n},YB=e=>iT(e)?[{keyCode:me.TAB,action:Ie(aE,e,!0)},{keyCode:me.TAB,shiftKey:!0,action:Ie(aE,e,!1)}]:[],GB=e=>{if(e.addShortcut("Meta+P","","mcePrint"),DB(e),Lr(e))return tn(null);{const t=qO(e);return(n=>{n.on("beforeinput",(o=>{n.selection.isEditable()&&!Ct(o.getTargetRanges(),(r=>!((s,a)=>!nk(s.getBody(),a.startContainer)||!nk(s.getBody(),a.endContainer)||cy(s.dom,a))(n,r)))||o.preventDefault()}))})(e),(n=>{n.on("keyup compositionstart",ye(eB,n))})(e),((n,o)=>{n.on("keydown",(r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=p.os.isMacOS()||p.os.isiOS(),c=p.browser.isFirefox();dc([{keyCode:me.RIGHT,action:Ie(NS,s,!0)},{keyCode:me.LEFT,action:Ie(NS,s,!1)},{keyCode:me.UP,action:Ie(AS,s,!1)},{keyCode:me.DOWN,action:Ie(AS,s,!0)},...l?[{keyCode:me.UP,action:Ie(Cu,s,!1),metaKey:!0,shiftKey:!0},{keyCode:me.DOWN,action:Ie(Cu,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:me.RIGHT,action:Ie(oE,s,!0)},{keyCode:me.LEFT,action:Ie(oE,s,!1)},{keyCode:me.UP,action:Ie(Xg,s,!1)},{keyCode:me.DOWN,action:Ie(Xg,s,!0)},{keyCode:me.UP,action:Ie(Xg,s,!1)},{keyCode:me.UP,action:Ie(BS,s,!1)},{keyCode:me.DOWN,action:Ie(BS,s,!0)},{keyCode:me.RIGHT,action:Ie(IS,s,!0)},{keyCode:me.LEFT,action:Ie(IS,s,!1)},{keyCode:me.UP,action:Ie(FS,s,!1)},{keyCode:me.DOWN,action:Ie(FS,s,!0)},{keyCode:me.RIGHT,action:Ie(rS,s,a,!0)},{keyCode:me.LEFT,action:Ie(rS,s,a,!1)},{keyCode:me.RIGHT,ctrlKey:!l,altKey:l,action:Ie(WO,s,a)},{keyCode:me.LEFT,ctrlKey:!l,altKey:l,action:Ie(VO,s,a)},{keyCode:me.UP,action:Ie(OS,s,!1)},{keyCode:me.DOWN,action:Ie(OS,s,!0)},...c?[{keyCode:me.UP,action:Ie(RS,s,!1)},{keyCode:me.DOWN,action:Ie(RS,s,!0)}]:[]],i).each((d=>{i.preventDefault()}))})(n,o,r)}))})(e,t),((n,o)=>{let r=!1,s=[];n.on("keydown",(a=>{r=a.keyCode===me.BACKSPACE,s=Bg(n),a.isDefaultPrevented()||((i,l,c)=>{const d=c.keyCode===me.BACKSPACE?"deleteContentBackward":"deleteContentForward",m=i.selection.isCollapsed(),f=m?"character":"selection",g=h=>m?h?"word":"line":"selection";MS([{keyCode:me.BACKSPACE,action:Ie(yS,i)},{keyCode:me.BACKSPACE,action:Ie(Cg,i,!1)},{keyCode:me.DELETE,action:Ie(Cg,i,!0)},{keyCode:me.BACKSPACE,action:Ie(bg,i,!1)},{keyCode:me.DELETE,action:Ie(bg,i,!0)},{keyCode:me.BACKSPACE,action:Ie(Og,i,l,!1)},{keyCode:me.DELETE,action:Ie(Og,i,l,!0)},{keyCode:me.BACKSPACE,action:Ie(rp,i,!1)},{keyCode:me.DELETE,action:Ie(rp,i,!0)},{keyCode:me.BACKSPACE,action:Ie(Ma,i,!1,f)},{keyCode:me.DELETE,action:Ie(Ma,i,!0,f)},...FE?[{keyCode:me.BACKSPACE,altKey:!0,action:Ie(Ma,i,!1,g(!0))},{keyCode:me.DELETE,altKey:!0,action:Ie(Ma,i,!0,g(!0))},{keyCode:me.BACKSPACE,metaKey:!0,action:Ie(Ma,i,!1,g(!1))}]:[{keyCode:me.BACKSPACE,ctrlKey:!0,action:Ie(Ma,i,!1,g(!0))},{keyCode:me.DELETE,ctrlKey:!0,action:Ie(Ma,i,!0,g(!0))}],{keyCode:me.BACKSPACE,action:Ie(wg,i,!1)},{keyCode:me.DELETE,action:Ie(wg,i,!0)},{keyCode:me.BACKSPACE,action:Ie(Mg,i,!1)},{keyCode:me.DELETE,action:Ie(Mg,i,!0)},{keyCode:me.BACKSPACE,action:Ie(gg,i,!1)},{keyCode:me.DELETE,action:Ie(gg,i,!0)},{keyCode:me.BACKSPACE,action:Ie(pg,i,!1)},{keyCode:me.DELETE,action:Ie(pg,i,!0)},{keyCode:me.BACKSPACE,action:Ie(Pg,i,!1)},{keyCode:me.DELETE,action:Ie(Pg,i,!0)},{keyCode:me.BACKSPACE,action:Ie(xg,i,!1)},{keyCode:me.DELETE,action:Ie(xg,i,!0)},{keyCode:me.BACKSPACE,action:Ie(Fg,i,!1)},{keyCode:me.DELETE,action:Ie(Fg,i,!0)}],c).filter((h=>i.selection.isEditable())).each((h=>{c.preventDefault(),Au(i,d).isDefaultPrevented()||(h(),fc(i,d))}))})(n,o,a)})),n.on("keyup",(a=>{a.isDefaultPrevented()||(((i,l,c,d)=>{dc([{keyCode:me.BACKSPACE,action:Ie(Aw,i)},{keyCode:me.DELETE,action:Ie(Aw,i)},...FE?[{keyCode:me.BACKSPACE,altKey:!0,action:Ie(cc,i)},{keyCode:me.DELETE,altKey:!0,action:Ie(cc,i)},...c?[{keyCode:BB?224:91,action:Ie((()=>(uS(i,d),cc(i))))}]:[]]:[{keyCode:me.BACKSPACE,ctrlKey:!0,action:Ie(cc,i)},{keyCode:me.DELETE,ctrlKey:!0,action:Ie(cc,i)}]],l)})(n,a,r,s),s.length=0),r=!1}))})(e,t),(n=>{let o=_.none();n.on("keydown",(r=>{r.keyCode===me.ENTER&&(WB&&(s=>{if(!s.collapsed)return!1;const a=s.startContainer;if(se(a)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=a.data.charAt(s.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(s=>{o=_.some(s.selection.getBookmark()),s.undoManager.add()})(n):JE(n,r))})),n.on("keyup",(r=>{r.keyCode===me.ENTER&&o.each((()=>((s,a)=>{s.undoManager.undo(),o.fold(ke,(i=>s.selection.moveToBookmark(i))),JE(s,a),o=_.none()})(n,r)))}))})(e),(n=>{n.on("keydown",(o=>{o.isDefaultPrevented()||((r,s)=>{MS([{keyCode:me.SPACEBAR,action:Ie(KB,r)},{keyCode:me.SPACEBAR,action:Ie(XB,r)}],s).each((a=>{s.preventDefault(),Au(r,"insertText",{data:" "}).isDefaultPrevented()||(a(),fc(r,"insertText",{data:" "}))}))})(n,o)}))})(e),(n=>{n.on("input",(o=>{o.isComposing||(r=>{const s=E.fromDom(r.getBody());r.selection.isCollapsed()&&gD(s,Y.fromRangeStart(r.selection.getRng()),r.schema).each((a=>{r.selection.setRng(a.toRange())}))})(n)}))})(e),(n=>{n.on("keydown",(o=>{o.isDefaultPrevented()||((r,s)=>{dc([...YB(r)],s).each((a=>{s.preventDefault()}))})(n,o)}))})(e),((n,o)=>{n.on("keydown",(r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=p.os.isMacOS()||p.os.isiOS();dc([{keyCode:me.END,action:Ie(TS,s,!0)},{keyCode:me.HOME,action:Ie(TS,s,!1)},...l?[]:[{keyCode:me.HOME,action:Ie(Cu,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:me.END,action:Ie(Cu,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:me.END,action:Ie(jS,s,!0)},{keyCode:me.HOME,action:Ie(jS,s,!1)},{keyCode:me.END,action:Ie(yu,s,!0,a)},{keyCode:me.HOME,action:Ie(yu,s,!1,a)}],i).each((c=>{i.preventDefault()}))})(n,o,r)}))})(e,t),((n,o)=>{if(VB.os.isMacOS())return;const r=tn(!1);n.on("keydown",(s=>{ek(s)&&tk(r,n,!0)})),n.on("keyup",(s=>{s.isDefaultPrevented()||((a,i,l)=>{dc([{keyCode:me.PAGE_UP,action:Ie(yu,a,!1,i)},{keyCode:me.PAGE_DOWN,action:Ie(yu,a,!0,i)}],l)})(n,o,s),ek(s)&&r.get()&&(tk(r,n,!1),n.nodeChanged())}))})(e,t),t}},dh=(e,t)=>()=>{const n=oc(e);return ee(n)&&n.nodeName===t},ik=e=>e.type===3,lk=e=>e.length===0,QB=e=>{const t=(o,r)=>{const s=On.create("li");K(o,(a=>s.append(a))),r?e.insert(s,r,!0):e.append(s)},n=Qt(e.children(),((o,r)=>ik(r)?[...o,r]:lk(o)||ik(r)?o:(t(o,r),[])),[]);lk(n)||t(n)},JB=e=>{(t=>{t.on("keydown",(n=>{n.keyCode===me.BACKSPACE?mg(t,!1)&&n.preventDefault():n.keyCode===me.DELETE&&mg(t,!0)&&n.preventDefault()}))})(e),(t=>{t.addCommand("InsertUnorderedList",((n,o)=>{cg(t,"UL",o)})),t.addCommand("InsertOrderedList",((n,o)=>{cg(t,"OL",o)})),t.addCommand("InsertDefinitionList",((n,o)=>{cg(t,"DL",o)})),t.addCommand("RemoveList",(()=>{mu(t)})),t.addCommand("mceListUpdate",((n,o)=>{Ue(o)&&((r,s)=>{const a=oc(r);a===null||og(r,a)||r.undoManager.transact((()=>{Ue(s.styles)&&r.dom.setStyles(a,s.styles),Ue(s.attrs)&&xt(s.attrs,((i,l)=>r.dom.setAttrib(a,l,i)))}))})(t,o)})),t.addCommand("mceListBackspaceDelete",((n,o)=>{mg(t,o)})),t.addQueryStateHandler("InsertUnorderedList",dh(t,"UL")),t.addQueryStateHandler("InsertOrderedList",dh(t,"OL")),t.addQueryStateHandler("InsertDefinitionList",dh(t,"DL"))})(e),(t=>{t.on("PreInit",(()=>{const{parser:n}=t;n.addNodeFilter("ul,ol",(o=>K(o,QB)))}))})(e),(t=>{gT(t)&&(n=>{n.on("keydown",(o=>{o.keyCode!==me.TAB||me.metaKeyPressed(o)||n.undoManager.transact((()=>{(o.shiftKey?sg(n):uw(n))&&o.preventDefault()}))}))})(t)})(e)};class ZB{constructor(t){let n;this.lastPath=[],this.editor=t;const o=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",(r=>{const s=t.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};r.type!=="nodechange"&&Lf(a,n)||t.dispatch("SelectionChange"),n=a})),t.on("contextmenu",(()=>{Td(t),t.dispatch("SelectionChange")})),t.on("SelectionChange",(()=>{const r=t.selection.getStart(!0);r&&kd(t)&&!o.isSameElementPath(r)&&t.dom.isChildOf(r,t.getBody())&&t.nodeChanged({selectionChange:!0})})),t.on("mouseup",(r=>{!r.isDefaultPrevented()&&kd(t)&&(t.selection.getNode().nodeName==="IMG"?Lo.setEditorTimeout(t,(()=>{t.nodeChanged()})):t.nodeChanged())}))}nodeChanged(t={}){const n=this.editor,o=n.selection;let r;if(n.initialized&&o&&!RA(n)&&!vd(n)){const s=n.getBody();r=o.getStart(!0)||s,r.ownerDocument===n.getDoc()&&n.dom.isChildOf(r,s)||(r=s);const a=[];n.dom.getParent(r,(i=>i===s||(a.push(i),!1))),n.dispatch("NodeChange",{...t,element:r,parents:a})}}isSameElementPath(t){let n;const o=this.editor,r=wo(o.dom.getParents(t,zt,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=r,!0}return this.lastPath=r,!1}}const ck="x-tinymce/html",Pu=le(ck),uh="<!-- "+ck+" -->",eP=e=>uh+e,dk=e=>e.indexOf(uh)!==-1,uk="%MCEPASTEBIN%",mh=e=>e.dom.get("mcepastebin"),tP=e=>ee(e)&&e.id==="mcepastebin",mk=e=>e===uk,fk=(e,t)=>(k.each(t,(n=>{e=xo(n,RegExp)?e.replace(n,""):e.replace(n[0],n[1])})),e),pk=e=>fk(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(t,n,o)=>n||o?Ft:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),gk=(e,t)=>({content:e,cancelled:t}),fh=(e,t)=>(e.insertContent(t,{merge:YA(e),paste:!0}),!0),ph=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),nP=(e,t,n)=>!(e.selection.isCollapsed()||!ph(t))&&((o,r,s)=>(o.undoManager.extra((()=>{s(o,r)}),(()=>{o.execCommand("mceInsertLink",!1,r)})),!0))(e,t,n),oP=(e,t,n)=>!!((o,r)=>ph(r)&&Ct(Wb(o),(s=>Ya(r.toLowerCase(),`.${s.toLowerCase()}`))))(e,t)&&((o,r,s)=>(o.undoManager.extra((()=>{s(o,r)}),(()=>{o.insertContent('<img src="'+r+'">')})),!0))(e,t,n),rP=(()=>{let e=0;return()=>"mceclip"+e++})(),sP=e=>{const t=Kg();return JS(t,e),Vg(t),t},hk=(e,t,n,o,r)=>{const s=((a,i,l)=>((c,d,m)=>{const f=((h,b,v)=>h.dispatch("PastePreProcess",{content:b,internal:v}))(c,d,m),g=((h,b)=>{const v=Ri({sanitize:qb(h),sandbox_iframes:Vb(h),sandbox_iframes_exclusions:of(h),convert_unsafe_embeds:dT(h)},h.schema);v.addNodeFilter("meta",(S=>{k.each(S,(N=>{N.remove()}))}));const y=v.parse(b,{forced_root_block:!1,isRootContent:!0});return Ds({validate:!0},h.schema).serialize(y)})(c,f.content);return c.hasEventListeners("PastePostProcess")&&!f.isDefaultPrevented()?((h,b,v)=>{const y=h.dom.create("div",{style:"display:none"},b),S=((N,D,T)=>N.dispatch("PastePostProcess",{node:D,internal:T}))(h,y,v);return gk(S.node.innerHTML,S.isDefaultPrevented())})(c,g,m):gk(g,f.isDefaultPrevented())})(a,i,l))(e,t,n);if(!s.cancelled){const a=s.content,i=()=>((l,c,d)=>{d||!GA(l)?fh(l,c):((m,f)=>{k.each([nP,oP,fh],(g=>!g(m,f,fh)))})(l,c)})(e,a,o);r?Au(e,"insertFromPaste",{dataTransfer:sP(a)}).isDefaultPrevented()||(i(),fc(e,"insertFromPaste")):i()}},Lu=(e,t,n,o)=>{const r=n||dk(t);hk(e,(s=>s.replace(uh,""))(t),r,!1,o)},gh=(e,t,n)=>{const o=e.dom.encode(t).replace(/\r\n/g,`
`),r=((s,a,i)=>{const l=s.split(/\n\n/),c=((f,g)=>{let h="<"+f;const b=Cr(g,((v,y)=>y+'="'+pa.encodeAllRaw(v)+'"'));return b.length&&(h+=" "+b.join(" ")),h+">"})(a,i),d="</"+a+">",m=We(l,(f=>f.split(/\n/).join("<br />")));return m.length===1?m[0]:We(m,(f=>c+f+d)).join("")})(e0(o,JA(e)),En(e),vi(e));hk(e,r,!1,!0,n)},bk=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const o=e.types[n];try{t[o]=e.getData(o)}catch{t[o]=""}}return t},Is=(e,t)=>t in e&&e[t].length>0,vk=e=>Is(e,"text/html")||Is(e,"text/plain"),yk=(e,t,n)=>{const o=t.type==="paste"?t.clipboardData:t.dataTransfer;var r;if(bd(e)&&o){const s=((a,i)=>{const l=i.items?Wt(wn(i.items),(d=>d.kind==="file"?[d.getAsFile()]:[])):[],c=i.files?wn(i.files):[];return Oe(l.length>0?l:c,(d=>{const m=Wb(d);return f=>Jt(f.type,"image/")&&Ct(m,(g=>(h=>{const b=h.toLowerCase(),v={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return k.hasOwn(v,b)?"image/"+v[b]:"image/"+b})(g)===f.type))})(a))})(e,o);if(s.length>0)return t.preventDefault(),(r=s,Promise.all(We(r,(a=>d1(a).then((i=>({file:a,uri:i}))))))).then((a=>{n&&e.selection.setRng(n),K(a,(i=>{((l,c)=>{wp(c.uri).each((({data:d,type:m,base64Encoded:f})=>{const g=f?d:btoa(d),h=c.file,b=l.editorUpload.blobCache,v=b.getByData(g,m),y=v??((S,N,D,T)=>{const R=rP(),P=Ob(S)&&ee(D.name),L=P?((O,I)=>{const H=I.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ee(H)?O.dom.encode(H[1]):void 0})(S,D.name):R,F=P?D.name:void 0,W=N.create(R,D,T,L,F);return N.add(W),W})(l,b,h,g);Lu(l,`<img src="${y.blobUri()}">`,!1,!0)}))})(e,i)}))})),!0}return!1},hh=(e,t,n,o,r)=>{let s=pk(n);const a=Is(t,Pu())||dk(n),i=!a&&(c=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(c))(s),l=ph(s);(mk(s)||!s.length||i&&!l)&&(o=!0),(o||l)&&(s=Is(t,"text/plain")&&i?t["text/plain"]:(c=>{const d=ws(),m=Ri({},d);let f="";const g=d.getVoidElements(),h=k.makeMap("script noscript style textarea video audio iframe object"," "),b=d.getBlockElements(),v=y=>{const S=y.name,N=y;if(S!=="br"){if(S!=="wbr")if(g[S]&&(f+=" "),h[S])f+=" ";else{if(y.type===3&&(f+=y.value),!(y.name in d.getVoidElements())){let D=y.firstChild;if(D)do v(D);while(D=D.next)}b[S]&&N.next&&(f+=`
`,S==="p"&&(f+=`
`))}}else f+=`
`};return c=fk(c,[/<!\[[^\]]+\]>/g]),v(m.parse(c)),f})(s)),mk(s)||(o?gh(e,s,r):Lu(e,s,a,r))},aP=(e,t,n)=>{((o,r,s)=>{let a;o.on("keydown",(i=>{(l=>me.metaKeyPressed(l)&&l.keyCode===86||l.shiftKey&&l.keyCode===45)(i)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&i.keyCode===86)})),o.on("paste",(i=>{if(i.isDefaultPrevented()||(d=>{var m,f;return p.os.isAndroid()&&((f=(m=d.clipboardData)===null||m===void 0?void 0:m.items)===null||f===void 0?void 0:f.length)===0})(i))return;const l=s.get()==="text"||a;a=!1;const c=bk(i.clipboardData);!vk(c)&&yk(o,i,r.getLastRng()||o.selection.getRng())||(Is(c,"text/html")?(i.preventDefault(),hh(o,c,c["text/html"],l,!0)):Is(c,"text/plain")&&Is(c,"text/uri-list")?(i.preventDefault(),hh(o,c,c["text/plain"],l,!0)):(r.create(),Lo.setEditorTimeout(o,(()=>{const d=r.getHtml();r.remove(),hh(o,c,d,l,!1)}),0)))}))})(e,t,n),(o=>{const r=a=>Jt(a,"webkit-fake-url"),s=a=>Jt(a,"data:");o.parser.addNodeFilter("img",((a,i,l)=>{if(!bd(o)&&(c=>{var d;return((d=c.data)===null||d===void 0?void 0:d.paste)===!0})(l))for(const c of a){const d=c.attr("src");we(d)&&!c.attr("data-mce-object")&&d!==p.transparentSrc&&(r(d)||!ZA(o)&&s(d))&&c.remove()}}))})(e)},Ck=(e,t,n,o)=>{((r,s,a)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",s),r.setData("text/plain",a),r.setData(Pu(),s),!0}catch{return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),o()):n(t.html,o)},xk=e=>(t,n)=>{const{dom:o,selection:r}=e,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=o.create("div",{contenteditable:"true"},t);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),o.add(e.getBody(),s);const i=r.getRng();a.focus();const l=o.createRng();l.selectNodeContents(a),r.setRng(l),Lo.setEditorTimeout(e,(()=>{r.setRng(i),o.remove(s),n()}),0)},wk=e=>({html:eP(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),Sk=e=>!e.selection.isCollapsed()||(t=>!!t.dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody()))(e),Ek=(e,t)=>{var n,o;return Pr.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(o=t.clientY)!==null&&o!==void 0?o:0,e.getDoc())},kk=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},iP=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,_k=e=>k.trim(e).replace(iP,vl).toLowerCase(),lP=(e,t,n)=>{const o=KA(e);if(n||o==="all"||!XA(e))return t;const r=o?o.split(/[, ]/):[];if(r&&o!=="none"){const s=e.dom,a=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,((i,l,c,d)=>{const m=s.parseStyle(s.decode(c)),f={};for(let h=0;h<r.length;h++){const b=m[r[h]];let v=b,y=s.getStyle(a,r[h],!0);/color/.test(r[h])&&(v=_k(v),y=_k(y)),y!==v&&(f[r[h]]=b)}const g=s.serializeStyle(f,"span");return g?l+' style="'+g+'"'+d:l+d}))}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,((s,a,i,l)=>a+' style="'+i+'"'+l)),t},cP=(e,t)=>{const n=tn(!1),o=tn(QA(e)?"text":"html"),r=(s=>{const a=tn(null);return{create:()=>((i,l)=>{const{dom:c,selection:d}=i,m=i.getBody();l.set(d.getRng());const f=c.add(i.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},uk);p.browser.isFirefox()&&c.setStyle(f,"left",c.getStyle(m,"direction",!0)==="rtl"?65535:-65535),c.bind(f,"beforedeactivate focusin focusout",(g=>{g.stopPropagation()})),f.focus(),d.select(f,!0)})(s,a),remove:()=>((i,l)=>{const c=i.dom;if(mh(i)){let d;const m=l.get();for(;d=mh(i);)c.remove(d),c.unbind(d);m&&i.selection.setRng(m)}l.set(null)})(s,a),getEl:()=>mh(s),getHtml:()=>(i=>{const l=i.dom,c=(g,h)=>{g.appendChild(h),l.remove(h,!0)},[d,...m]=Oe(i.getBody().childNodes,tP);K(m,(g=>{c(d,g)}));const f=l.select("div[id=mcepastebin]",d);for(let g=f.length-1;g>=0;g--){const h=l.create("div");d.insertBefore(h,f[g]),c(h,f[g])}return d?d.innerHTML:""})(s),getLastRng:a.get}})(e);(s=>{(p.browser.isChromium()||p.browser.isSafari())&&((a,i)=>{a.on("PastePreProcess",(l=>{l.content=i(a,l.content,l.internal)}))})(s,lP)})(e),((s,a)=>{s.addCommand("mceTogglePlainTextPaste",(()=>{((i,l)=>{l.get()==="text"?(l.set("html"),_b(i,!1)):(l.set("text"),_b(i,!0)),i.focus()})(s,a)})),s.addCommand("mceInsertClipboardContent",((i,l)=>{l.html&&Lu(s,l.html,l.internal,!1),l.text&&gh(s,l.text,!1)}))})(e,o),(s=>{const a=c=>d=>{c(s,d)},i=qA(s);bt(i)&&s.on("PastePreProcess",a(i));const l=WA(s);bt(l)&&s.on("PastePostProcess",a(l))})(e),e.addQueryStateHandler("mceTogglePlainTextPaste",(()=>o.get()==="text")),e.on("PreInit",(()=>{((s,a)=>{s.on("cut",((i,l)=>c=>{!c.isDefaultPrevented()&&Sk(i)&&i.selection.isEditable()&&Ck(c,wk(i),xk(i),(()=>{if(p.browser.isChromium()||p.browser.isFirefox()){const d=i.selection.getRng();Lo.setEditorTimeout(i,(()=>{i.selection.setRng(d),jg(i,l)}),0)}else jg(i,l)}))})(s,a)),s.on("copy",(i=>l=>{!l.isDefaultPrevented()&&Sk(i)&&Ck(l,wk(i),xk(i),ke)})(s))})(e,t),((s,a)=>{$A(s)&&s.on("dragend dragover draggesture dragdrop drop drag",(i=>{i.preventDefault(),i.stopPropagation()})),bd(s)||s.on("drop",(i=>{const l=i.dataTransfer;l&&(c=>Ct(c.files,(d=>/^image\//.test(d.type))))(l)&&i.preventDefault()})),s.on("drop",(i=>{if(i.isDefaultPrevented())return;const l=Ek(s,i);if(kt(l))return;const c=bk(i.dataTransfer),d=Is(c,Pu());if((!vk(c)||(b=>{const v=b["text/plain"];return!!v&&v.indexOf("file://")===0})(c))&&yk(s,i,l))return;const m=c[Pu()],f=m||c["text/html"]||c["text/plain"],g=((b,v,y,S)=>{const N=b.getParent(y,(D=>ma(v,D)));if(!Ge(b.getParent(y,"summary")))return!0;if(N&&Fe(S,"text/html")){const D=new DOMParser().parseFromString(S["text/html"],"text/html").body;return!Ge(D.querySelector(N.nodeName.toLowerCase()))}return!1})(s.dom,s.schema,l.startContainer,c),h=a.get();h&&!g||f&&(i.preventDefault(),Lo.setEditorTimeout(s,(()=>{s.undoManager.transact((()=>{(m||h&&g)&&s.execCommand("Delete"),kk(s,l);const b=pk(f);c["text/html"]?Lu(s,b,d,!0):gh(s,b,!0)}))})))})),s.on("dragstart",(i=>{a.set(!0)})),s.on("dragover dragend",(i=>{bd(s)&&!a.get()&&(i.preventDefault(),kk(s,Ek(s,i))),i.type==="dragend"&&a.set(!1)})),(i=>{i.on("input",(l=>{const c=d=>Ge(d.querySelector("summary"));if(l.inputType==="deleteByDrag"){const d=Oe(i.dom.select("details"),c);K(d,(m=>{$t(m.firstChild)&&m.firstChild.remove();const f=i.dom.create("summary");f.appendChild(fi().dom),m.prepend(f)}))}}))})(s)})(e,n),aP(e,r,o)}))},dP=$t,Nk=se,uP=e=>Lt(e.dom),Ak=e=>t=>pe(E.fromDom(e),t),Tk=(e,t)=>or(E.fromDom(e),uP,Ak(t)),Dk=(e,t,n)=>{const o=new ln(e,t),r=n?o.next.bind(o):o.prev.bind(o);let s=e;for(let a=n?e:r();a&&!dP(a);a=r())cr(a)&&(s=a);return s},mP=e=>{const t=((n,o,r)=>{const s=Y.fromRangeStart(n).getNode(),a=((d,m,f)=>or(E.fromDom(d),(g=>(h=>To(h.dom))(g)||f.isBlock(Me(g))),Ak(m)).getOr(E.fromDom(m)).dom)(s,o,r),i=Dk(s,a,!1),l=Dk(s,a,!0),c=document.createRange();return Tk(i,a).fold((()=>{Nk(i)?c.setStart(i,0):c.setStartBefore(i)}),(d=>c.setStartBefore(d.dom))),Tk(l,a).fold((()=>{Nk(l)?c.setEnd(l,l.data.length):c.setEndAfter(l)}),(d=>c.setEndAfter(d.dom))),c})(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Vd(t))};var qi;(function(e){e.Before="before",e.After="after"})(qi||(qi={}));const fP=(e,t)=>Math.abs(e.left-t),pP=(e,t)=>Math.abs(e.right-t),gP=(e,t)=>(n=>Qt(n,((o,r)=>o.fold((()=>_.some(r)),(s=>{const a=Math.min(r.left,s.left),i=Math.min(r.top,s.top),l=Math.max(r.right,s.right),c=Math.max(r.bottom,s.bottom);return _.some({top:i,right:l,bottom:c,left:a,width:l-a,height:c-i})}))),_.none()))(Oe(e,(n=>{return(o=t)>=(r=n).top&&o<=r.bottom;var o,r}))).fold((()=>[[],e]),(n=>{const{pass:o,fail:r}=Zo(e,(s=>((a,i)=>{const l=((c,d)=>Math.max(0,Math.min(c.bottom,d.bottom)-Math.max(c.top,d.top)))(a,i)/Math.min(a.height,i.height);return((c,d)=>c.top<d.bottom&&c.bottom>d.top)(a,i)&&l>.5})(s,n)));return[o,r]})),hP=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),bh=(e,t,n,o)=>{const r=d=>cr(d.node)?_.some(d):Ce(d.node)?bh(wn(d.node.childNodes),t,n,!1):_.none(),s=(d,m)=>{const f=Vr(d,((g,h)=>m(g,t,n)-m(h,t,n)));return qn(f,r).map((g=>o&&!se(g.node)&&f.length>1?((h,b,v)=>r(b).filter((y=>Math.abs(v(h,t,n)-v(y,t,n))<2&&se(y.node))))(g,f[1],m).getOr(g):g))},[a,i]=gP(Yw(e),n),{pass:l,fail:c}=Zo(i,(d=>d.top<n));return s(a,hP).orThunk((()=>s(c,X0))).orThunk((()=>s(l,X0)))},Rk=(e,t,n)=>((o,r,s)=>{const a=E.fromDom(o),i=Nn(a),l=E.fromPoint(i,r,s).filter((c=>tt(a,c))).getOr(a);return((c,d,m,f)=>{const g=(h,b)=>{const v=Oe(h.dom.childNodes,qo((y=>Ce(y)&&y.classList.contains("mce-drag-container"))));return b.fold((()=>bh(v,m,f,!0)),(y=>{const S=Oe(v,(N=>N!==y.dom));return bh(S,m,f,!0)})).orThunk((()=>(pe(h,c)?_.none():An(h)).bind((y=>g(y,_.some(h))))))};return g(d,_.none())})(a,l,r,s)})(e,t,n).filter((o=>Pl(o.node))).map((o=>((r,s)=>({node:r.node,position:fP(r,s)<pP(r,s)?qi.Before:qi.After}))(o,t))),Ok=e=>{var t,n;const o=e.getBoundingClientRect(),r=e.ownerDocument,s=r.documentElement,a=r.defaultView;return{top:o.top+((t=a?.scrollY)!==null&&t!==void 0?t:0)-s.clientTop,left:o.left+((n=a?.scrollX)!==null&&n!==void 0?n:0)-s.clientLeft}},Bk=e=>({target:e,srcElement:e}),bP=(e,t,n,o)=>{const r=((s,a)=>{const i=(l=>{const c=Kg(),d=(m=>{const f=m;return _.from(f[Wg])})(l);return Vg(l),KS(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(m=>{const f=m;return _.from(f[VS])})(l).each((m=>c.setDragImage(m.image,m.x,m.y))),K(l.types,(m=>{m!=="Files"&&c.setData(m,l.getData(m))})),K(l.files,(m=>c.items.add(m))),(m=>{const f=m;return _.from(f[qg])})(l).each((m=>{((f,g)=>{xu(g)(f)})(c,m)})),d.each((m=>{XS(l,m),XS(c,m)})),c})(s);return a==="dragstart"?(KS(i),YS(i)):a==="drop"?(sB(i),Vg(i)):(aB(i),lB(i)),i})(n,e);return Mt(o)?((s,a,i)=>{const l=po("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:ke,stopImmediatePropagation:ke,stopPropagation:ke,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...Bk(a)}})(e,t,r):((s,a,i,l)=>({...a,dataTransfer:l,type:s,...Bk(i)}))(e,o,t,r)},Pk=Lt,vP=((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})(Pk,To),yP=(e,t,n,o)=>{const r=e.dom,s=t.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const a=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},Mu=(e,t)=>n=>()=>{const o=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:o+t,behavior:"smooth"})},Lk=Mu("left",-32),Mk=Mu("left",32),Ik=Mu("top",-32),Fk=Mu("top",32),jk=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},bc=(e,t,n,o,r)=>{t==="dragstart"&&JS(o,e.dom.getOuterHTML(n));const s=bP(t,n,o,r);return e.dispatch(t,s)},CP=(e,t)=>{const n=Ys(((r,s)=>((a,i,l)=>{a._selectionOverrides.hideFakeCaret(),Rk(a.getBody(),i,l).fold((()=>a.selection.placeCaretAt(i,l)),(c=>{const d=a._selectionOverrides.showCaret(1,c.node,c.position===qi.Before,!1);d?a.selection.setRng(d):a.selection.placeCaretAt(i,l)}))})(t,r,s)),0);t.on("remove",n.cancel);const o=e;return r=>e.on((s=>{const a=Math.max(Math.abs(r.screenX-s.screenX),Math.abs(r.screenY-s.screenY));if(!s.dragging&&a>10){const c=bc(t,"dragstart",s.element,s.dataTransfer,r);if(ee(c.dataTransfer)&&(s.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;s.dragging=!0,t.focus()}if(s.dragging){const c=r.currentTarget===t.getDoc().documentElement,d=((m,f)=>({pageX:f.pageX-m.relX,pageY:f.pageY+5}))(s,((m,f)=>{return g=(v=>v.inline?Ok(v.getBody()):{left:0,top:0})(m),h=(v=>{const y=v.getBody();return v.inline?{left:y.scrollLeft,top:y.scrollTop}:{left:0,top:0}})(m),b=((v,y)=>{if(y.target.ownerDocument!==v.getDoc()){const S=Ok(v.getContentAreaContainer()),N=(D=>{const T=D.getBody(),R=D.getDoc().documentElement,P={left:T.scrollLeft,top:T.scrollTop},L={left:T.scrollLeft||R.scrollLeft,top:T.scrollTop||R.scrollTop};return D.inline?P:L})(v);return{left:y.pageX-S.left+N.left,top:y.pageY-S.top+N.top}}return{left:y.pageX,top:y.pageY}})(m,f),{pageX:b.left-g.left+h.left,pageY:b.top-g.top+h.top};var g,h,b})(t,r));i=s.ghost,l=t.getBody(),i.parentNode!==l&&l.appendChild(i),((m,f,g,h,b,v,y,S,N,D,T,R)=>{let P=0,L=0;m.style.left=f.pageX+"px",m.style.top=f.pageY+"px",f.pageX+g>b&&(P=f.pageX+g-b),f.pageY+h>v&&(L=f.pageY+h-v),m.style.width=g-P+"px",m.style.height=h-L+"px";const F=N.clientHeight,W=N.clientWidth,O=y+N.getBoundingClientRect().top,I=S+N.getBoundingClientRect().left;T.on((H=>{H.intervalId.clear(),H.dragging&&R&&(y+8>=F?H.intervalId.set(Fk(D)):y-8<=0?H.intervalId.set(Ik(D)):S+8>=W?H.intervalId.set(Mk(D)):S-8<=0?H.intervalId.set(Lk(D)):O+16>=window.innerHeight?H.intervalId.set(Fk(window)):O-16<=0?H.intervalId.set(Ik(window)):I+16>=window.innerWidth?H.intervalId.set(Mk(window)):I-16<=0&&H.intervalId.set(Lk(window)))}))})(s.ghost,d,s.width,s.height,s.maxX,s.maxY,r.clientY,r.clientX,t.getContentAreaContainer(),t.getWin(),o,c),n.throttle(r.clientX,r.clientY)}var i,l}))},zk=(e,t,n)=>{e.on((o=>{o.intervalId.clear(),o.dragging&&n.fold((()=>bc(t,"dragend",o.element,o.dataTransfer)),(r=>bc(t,"dragend",o.element,o.dataTransfer,r)))})),Uk(e)},Uk=e=>{e.on((t=>{t.intervalId.clear(),jk(t.ghost)})),e.clear()},xP=e=>{const t=Wo(),n=Nt.DOM,o=document,r=((l,c)=>d=>{if((m=>m.button===0)(d)){const m=qt(c.dom.getParents(d.target),vP).getOr(null);if(ee(m)&&((f,g,h)=>Pk(h)&&h!==g&&f.isEditable(h.parentElement))(c.dom,c.getBody(),m)){const f=c.dom.getPos(m),g=c.getBody(),h=c.getDoc().documentElement;l.set({element:m,dataTransfer:Kg(),dragging:!1,screenX:d.screenX,screenY:d.screenY,maxX:(c.inline?g.scrollWidth:h.offsetWidth)-2,maxY:(c.inline?g.scrollHeight:h.offsetHeight)-2,relX:d.pageX-f.x,relY:d.pageY-f.y,width:m.offsetWidth,height:m.offsetHeight,ghost:yP(c,m,m.offsetWidth,m.offsetHeight),intervalId:Xa(100)})}}})(t,e),s=CP(t,e),a=((l,c)=>d=>{l.on((m=>{var f;if(m.intervalId.clear(),m.dragging){if(((g,h,b)=>!kt(h)&&h!==b&&!g.dom.isChildOf(h,b)&&g.dom.isEditable(h))(c,(g=>{const h=g.getSel();if(ee(h)){const b=h.getRangeAt(0).startContainer;return se(b)?b.parentNode:b}return null})(c.selection),m.element)){const g=(f=c.getDoc().elementFromPoint(d.clientX,d.clientY))!==null&&f!==void 0?f:c.getBody();bc(c,"drop",g,m.dataTransfer,d).isDefaultPrevented()||c.undoManager.transact((()=>{((h,b)=>{const v=h.getParent(b.parentNode,h.isBlock);jk(b),v&&v!==h.getRoot()&&h.isEmpty(v)&&Es(E.fromDom(v))})(c.dom,m.element),(h=>{const b=h.getData("text/html");return b===""?_.none():_.some(b)})(m.dataTransfer).each((h=>c.insertContent(h))),c._selectionOverrides.hideFakeCaret()}))}bc(c,"dragend",c.getBody(),m.dataTransfer,d)}})),Uk(l)})(t,e),i=((l,c)=>d=>zk(l,c,_.some(d)))(t,e);e.on("mousedown",r),e.on("mousemove",s),e.on("mouseup",a),n.bind(o,"mousemove",s),n.bind(o,"mouseup",i),e.on("remove",(()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",i)})),e.on("keydown",(l=>{l.keyCode===me.ESC&&zk(t,e,_.none())}))},vc=Lt,Hk=(e,t)=>Na(e.getBody(),t),wP=e=>{const t=e.selection,n=e.dom,o=e.getBody(),r=xT(e,o,n.isBlock,(()=>Ai(e))),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=v=>v!==o&&(vc(v)||ar(v))&&n.isChildOf(v,o)&&n.isEditable(v.parentNode),c=(v,y,S,N=!0)=>e.dispatch("ShowCaret",{target:y,direction:v,before:S}).isDefaultPrevented()?null:(N&&t.scrollIntoView(y,v===-1),r.show(S,y)),d=v=>Do(v)||dd(v)||ud(v),m=v=>d(v.startContainer)||d(v.endContainer),f=v=>{const y=e.schema.getVoidElements(),S=n.createRng(),N=v.startContainer,D=v.startOffset,T=v.endContainer,R=v.endOffset;return Fe(y,N.nodeName.toLowerCase())?D===0?S.setStartBefore(N):S.setStartAfter(N):S.setStart(N,D),Fe(y,T.nodeName.toLowerCase())?R===0?S.setEndBefore(T):S.setEndAfter(T):S.setEnd(T,R),S},g=(v,y)=>{if(!v)return null;if(v.collapsed){if(!m(v)){const T=y?1:-1,R=Fl(T,o,v),P=R.getNode(!y);if(ee(P)){if(Pl(P))return c(T,P,!!y&&!R.isAtEnd(),!1);if(ks(P)&&Lt(P.nextSibling)){const F=n.createRng();return F.setStart(P,0),F.setEnd(P,0),F}}const L=R.getNode(y);if(ee(L)){if(Pl(L))return c(T,L,!y&&!R.isAtEnd(),!1);if(ks(L)&&Lt(L.previousSibling)){const F=n.createRng();return F.setStart(L,1),F.setEnd(L,1),F}}}return null}let S=v.startContainer,N=v.startOffset;const D=v.endOffset;if(se(S)&&N===0&&vc(S.parentNode)&&(S=S.parentNode,N=n.nodeIndex(S),S=S.parentNode),!Ce(S))return null;if(D===N+1&&S===v.endContainer){const T=S.childNodes[N];if(l(T))return(R=>{const P=R.cloneNode(!0),L=e.dispatch("ObjectSelected",{target:R,targetClone:P});if(L.isDefaultPrevented())return null;const F=((O,I)=>{const H=E.fromDom(e.getBody()),te=e.getDoc(),ne=Yc(H,"#"+s).getOrThunk((()=>{const $e=E.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',te);return Te($e,"id",s),X(H,$e),$e})),ae=n.createRng();en(ne),De(ne,[E.fromText(Ft,te),E.fromDom(I),E.fromText(Ft,te)]),ae.setStart(ne.dom.firstChild,1),ae.setEnd(ne.dom.lastChild,0),Wc(ne,{top:n.getPos(O,e.getBody()).y+"px"}),vs(ne);const Ae=t.getSel();return Ae&&(Ae.removeAllRanges(),Ae.addRange(ae)),ae})(R,L.targetClone),W=E.fromDom(R);return K(Dn(E.fromDom(e.getBody()),`*[${a}]`),(O=>{pe(W,O)||rt(O,a)})),n.getAttrib(R,a)||R.setAttribute(a,"1"),i=R,b(),F})(T)}return null},h=()=>{i&&i.removeAttribute(a),Yc(E.fromDom(e.getBody()),"#"+s).each(ct),i=null},b=()=>{r.hide()};return Lr(e)||(e.on("click",(v=>{n.isEditable(v.target)||(v.preventDefault(),e.focus())})),e.on("blur NewBlock",h),e.on("ResizeWindow FullscreenStateChanged",r.reposition),e.on("tap",(v=>{const y=v.target,S=Hk(e,y);vc(S)?(v.preventDefault(),ac(e,S).each(g)):l(y)&&ac(e,y).each(g)}),!0),e.on("mousedown",(v=>{const y=v.target;if(y!==o&&y.nodeName!=="HTML"&&!n.isChildOf(y,o)||!((N,D,T)=>{const R=E.fromDom(N.getBody()),P=N.inline?R:E.fromDom(Nn(R).dom.documentElement),L=((F,W,O,I)=>{const H=(te=>te.dom.getBoundingClientRect())(W);return{x:O-(F?H.left+W.dom.clientLeft+$R(W):0),y:I-(F?H.top+W.dom.clientTop+HR(W):0)}})(N.inline,P,D,T);return((F,W,O)=>{const I=zR(F),H=UR(F);return W>=0&&O>=0&&W<=I&&O<=H})(P,L.x,L.y)})(e,v.clientX,v.clientY))return;h(),b();const S=Hk(e,y);vc(S)?(v.preventDefault(),ac(e,S).each(g)):Rk(o,v.clientX,v.clientY).each((N=>{var D;v.preventDefault(),(D=c(1,N.node,N.position===qi.Before,!1))&&t.setRng(D),rr(S)?S.focus():e.getBody().focus()}))})),e.on("keypress",(v=>{me.modifierPressed(v)||vc(t.getNode())&&v.preventDefault()})),e.on("GetSelectionRange",(v=>{let y=v.range;if(i){if(!i.parentNode)return void(i=null);y=y.cloneRange(),y.selectNode(i),v.range=y}})),e.on("focusin",(v=>{if(!ar(v.target)&&e.getBody().contains(v.target)&&v.target!==e.getBody()&&!e.dom.isEditable(v.target.parentNode)){r.isShowing()&&r.hide(),v.target.contains(e.selection.getNode())||(e.selection.select(v.target,!0),e.selection.collapse(!0));const y=g(e.selection.getRng(),!0);y&&e.selection.setRng(y)}})),e.on("SetSelectionRange",(v=>{v.range=f(v.range);const y=g(v.range,v.forward);y&&(v.range=y)})),e.on("AfterSetSelectionRange",(v=>{const y=v.range,S=y.startContainer.parentElement;var N;m(y)||Ce(N=S)&&N.id==="mcepastebin"||b(),(D=>ee(D)&&n.hasClass(D,"mce-offscreen-selection"))(S)||h()})),(v=>{xP(v),PA(v)&&(y=>{const S=T=>{if(!T.isDefaultPrevented()){const R=T.dataTransfer;R&&(Se(R.types,"Files")||R.files.length>0)&&(T.preventDefault(),T.type==="drop"&&ru(y,"Dropped file type is not supported"))}},N=T=>{Dd(y,T.target)&&S(T)},D=()=>{const T=Nt.DOM,R=y.dom,P=document,L=y.inline?y.getBody():y.getDoc(),F=["drop","dragover"];K(F,(W=>{T.bind(P,W,N),R.bind(L,W,S)})),y.on("remove",(()=>{K(F,(W=>{T.unbind(P,W,N),R.unbind(L,W,S)}))}))};y.on("init",(()=>{Lo.setEditorTimeout(y,D,0)}))})(v)})(e),(v=>{const y=Ys((()=>{if(!v.removed&&v.getBody().contains(document.activeElement)){const S=v.selection.getRng();if(S.collapsed){const N=hg(v,S,!1);v.selection.setRng(N)}}}),0);v.on("focus",(()=>{y.throttle()})),v.on("blur",(()=>{y.cancel()}))})(e),(v=>{v.on("init",(()=>{v.on("focusin",(y=>{const S=y.target;if(ar(S)){const N=Na(v.getBody(),S),D=Lt(N)?N:S;v.selection.getNode()!==D&&ac(v,D).each((T=>v.selection.setRng(T)))}}))}))})(e)),{showCaret:c,showBlockCaretContainer:v=>{v.hasAttribute("data-mce-caret")&&(zm(v),t.scrollIntoView(v))},hideFakeCaret:b,destroy:()=>{r.destroy(),i=null}}},SP=(e,t)=>{let n=t;for(let o=e.previousSibling;se(o);o=o.previousSibling)n+=o.data.length;return n},$k=(e,t,n,o,r)=>{if(se(n)&&(o<0||o>n.data.length))return[];const s=r&&se(n)?[SP(n,o)]:[o];let a=n;for(;a!==t&&a.parentNode;)s.push(e.nodeIndex(a,r)),a=a.parentNode;return a===t?s.reverse():[]},vh=(e,t,n,o,r,s,a=!1)=>({start:$k(e,t,n,o,a),end:$k(e,t,r,s,a)}),qk=(e,t)=>{const n=t.slice(),o=n.pop();return x(o)?Qt(n,((r,s)=>r.bind((a=>_.from(a.childNodes[s])))),_.some(e)).bind((r=>se(r)&&(o<0||o>r.data.length)?_.none():_.some({node:r,offset:o}))):_.none()},Wk=(e,t)=>qk(e,t.start).bind((({node:n,offset:o})=>qk(e,t.end).map((({node:r,offset:s})=>{const a=document.createRange();return a.setStart(n,o),a.setEnd(r,s),a})))),Wi=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const o=t.parentNode;e.remove(t,se(t.firstChild)&&li(t.firstChild.data)),Wi(e,o,n)}},Iu=(e,t,n,o=!0)=>{const r=t.startContainer.parentNode,s=t.endContainer.parentNode;t.deleteContents(),o&&!n(t.startContainer)&&(se(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),se(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),Wi(e,r,n),r!==s&&Wi(e,s,n))},Fu=(e,t)=>_.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),yh=(e,t,n)=>{const o=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:vb(o).concat(e.blockPatterns),inlinePatterns:yb(o).concat(e.inlinePatterns)}},Ch=(e,t,n,o)=>{const r=e.createRng();return r.setStart(t,0),r.setEnd(n,o),r.toString()},Vk=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),ju=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},Kk=(e,t,n)=>{const o=Wk(e.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,a=o.endOffset===0?s:s.splitText(o.endOffset),i=o.startOffset===0?r:r.splitText(o.startOffset),l=i.parentNode;return{prefix:t,end:a.parentNode.insertBefore(Vk(e,t+"-end"),a),start:l.insertBefore(Vk(e,t+"-start"),i)}},Xk=(e,t,n)=>{Wi(e,e.get(t.prefix+"-end"),n),Wi(e,e.get(t.prefix+"-start"),n)},xh=e=>e.start.length===0,Yk=(e,t,n,o)=>{const r=t.start;var s;return Qg(e,o.container,o.offset,(s=r,(a,i)=>{const l=a.data.substring(0,i),c=l.lastIndexOf(s.charAt(s.length-1)),d=l.lastIndexOf(s);return d!==-1?d+s.length:c!==-1?c+1:-1}),n).bind((a=>{var i,l;const c=(l=(i=n.textContent)===null||i===void 0?void 0:i.indexOf(r))!==null&&l!==void 0?l:-1;if(c!==-1&&a.offset>=c+r.length){const d=e.createRng();return d.setStart(a.container,a.offset-r.length),d.setEnd(a.container,a.offset),_.some(d)}{const d=a.offset-r.length;return Gg(a.container,d,n).map((m=>{const f=e.createRng();return f.setStart(m.container,m.offset),f.setEnd(a.container,a.offset),f})).filter((m=>m.toString()===r)).orThunk((()=>Yk(e,t,n,mr(a.container,0))))}}))},EP=(e,t,n,o)=>{const r=e.dom,s=r.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return Gg(i,l-n.pattern.end.length,t).bind((c=>{const d=vh(r,s,c.container,c.offset,i,l,o);if(xh(a))return _.some({matches:[{pattern:a,startRng:d,endRng:d}],position:c});{const m=zu(e,n.remainingPatterns,c.container,c.offset,t,o),f=m.getOr({matches:[],position:c}),g=f.position;return((b,v,y,S,N,D=!1)=>{if(v.start.length===0&&!D){const T=b.createRng();return T.setStart(y,S),T.setEnd(y,S),_.some(T)}return Yg(y,S,N).bind((T=>Yk(b,v,N,T).bind((R=>{var P;return D&&(R.endContainer===T.container&&R.endOffset===T.offset||T.offset===0&&((P=R.endContainer.textContent)===null||P===void 0?void 0:P.length)===R.endOffset)?_.none():_.some(R)}))))})(r,a,g.container,g.offset,t,m.isNone()).map((b=>{const v=((y,S,N,D=!1)=>vh(y,S,N.startContainer,N.startOffset,N.endContainer,N.endOffset,D))(r,s,b,o);return{matches:f.matches.concat([{pattern:a,startRng:v,endRng:d}]),position:mr(b.startContainer,b.startOffset)}}))}}))},zu=(e,t,n,o,r,s)=>{const a=e.dom;return Yg(n,o,a.getRoot()).bind((i=>{const l=Ch(a,r,n,o);for(let c=0;c<t.length;c++){const d=t[c];if(!Ya(l,d.end))continue;const m=t.slice();m.splice(c,1);const f=EP(e,r,{pattern:d,remainingPatterns:m,position:i},s);if(f.isNone()&&o>0)return zu(e,t,n,o-1,r,s);if(f.isSome())return f}return _.none()}))},Gk=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?K(t.format,(o=>{e.formatter.apply(o)})):e.execCommand(t.cmd,!1,t.value)},Qk=(e,t,n,o,r,s)=>{var a;return((i,l)=>{const c=oo(i,(d=>Ct(l,(m=>d.pattern.start===m.pattern.start&&d.pattern.end===m.pattern.end))));return i.length===l.length?c?i:l:i.length>l.length?i:l})(zu(e,r.inlinePatterns,n,o,t,s).fold((()=>[]),(i=>i.matches)),zu(e,(a=r.inlinePatterns,Vr(a,((i,l)=>l.end.length-i.end.length))),n,o,t,s).fold((()=>[]),(i=>i.matches)))},Jk=(e,t)=>{if(t.length===0)return;const n=e.dom,o=e.selection.getBookmark(),r=((s,a)=>{const i=Xs("mce_textpattern"),l=Wr(a,((c,d)=>{const m=Kk(s,i+`_end${c.length}`,d.endRng);return c.concat([{...d,endMarker:m}])}),[]);return Wr(l,((c,d)=>{const m=l.length-c.length-1,f=xh(d.pattern)?d.endMarker:Kk(s,i+`_start${m}`,d.startRng);return c.concat([{...d,startMarker:f}])}),[])})(n,t);K(r,(s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;xh(s.pattern)?((l,c,d,m)=>{const f=ju(l.dom,d);Iu(l.dom,f,m),Gk(l,c,f)})(e,s.pattern,s.endMarker,i):((l,c,d,m,f)=>{const g=l.dom,h=ju(g,m),b=ju(g,d);Iu(g,b,f),Iu(g,h,f);const v={prefix:d.prefix,start:d.end,end:m.start},y=ju(g,v);Gk(l,c,y)})(e,s.pattern,s.startMarker,s.endMarker,i),Xk(n,s.endMarker,i),Xk(n,s.startMarker,i)})),e.selection.moveToBookmark(o)},Zk=(e,t,n)=>((o,r,s)=>{if(se(o)&&0>=o.length)return _.some(mr(o,0));{const a=ba(Eu);return _.from(a.forwards(o,0,ku(o),s)).map((i=>mr(i.container,0)))}})(t,0,t).map((o=>{const r=o.container;return iE(r,n.start.length,t).each((s=>{const a=e.createRng();a.setStart(r,0),a.setEnd(s.container,s.offset),Iu(e,a,(i=>i===t))})),r})),e_=e=>(t,n)=>{const o=t.dom,r=n.pattern,s=Wk(o.getRoot(),n.range).getOrDie("Unable to resolve path range");return Fu(t,s).each((a=>{r.type==="block-format"?((i,l)=>{const c=l.get(i);return re(c)&&sn(c).exists((d=>Fe(d,"block")))})(r.format,t.formatter)&&t.undoManager.transact((()=>{e(t.dom,a,r),t.formatter.apply(r.format)})):r.type==="block-command"&&t.undoManager.transact((()=>{e(t.dom,a,r),t.execCommand(r.cmd,!1,r.value)}))})),!0},t_=e=>(t,n)=>{const o=(s=>Vr(s,((a,i)=>i.start.length-a.start.length)))(t),r=n.replace(Ft," ");return qt(o,(s=>e(s,n,r)))},n_=(e,t)=>(n,o,r,s,a)=>{var i;a===void 0&&(a=(i=o.textContent)!==null&&i!==void 0?i:"");const l=n.dom,c=En(n);return l.is(o,c)?e(r.blockPatterns,a).map((d=>t&&k.trim(a).length===d.start.length?[]:[{pattern:d,range:vh(l,l.getRoot(),o,0,o,0,s)}])).getOr([]):[]},kP=e_(((e,t,n)=>{Zk(e,t,n).each((o=>{const r=E.fromDom(o),s=ri(r);/^\s[^\s]/.test(s)&&rm(r,s.slice(1))}))})),_P=t_(((e,t,n)=>t.indexOf(e.start)===0||n.indexOf(e.start)===0)),NP=n_(_P,!0),AP=e_(Zk),TP=t_(((e,t,n)=>t===e.start||n===e.start)),DP=n_(TP,!1),o_=(e,t,n)=>{for(let o=0;o<e.length;o++)if(n(e[o],t))return!0;return!1},RP=e=>{const t=[",",".",";",":","!","?"],n=[32],o=()=>{return a=eT(e).filter((l=>l.type!=="inline-command"&&l.type!=="block-command"||e.queryCommandSupported(l.cmd))),i=tT(e),{inlinePatterns:yb(a),blockPatterns:vb(a),dynamicPatternsLookup:i};var a,i},r=()=>(a=>a.options.isSet("text_patterns_lookup"))(e);e.on("keydown",(a=>{if(a.keyCode===13&&!me.modifierPressed(a)&&e.selection.isCollapsed()&&e.selection.isEditable()){const i=Gm(o(),"enter");(i.inlinePatterns.length>0||i.blockPatterns.length>0||r())&&((l,c)=>((d,m)=>{const f=d.selection.getRng();return Fu(d,f).map((g=>{var h;const b=Math.max(0,f.startOffset),v=yh(m,g,(h=g.textContent)!==null&&h!==void 0?h:"");return{inlineMatches:Qk(d,g,f.startContainer,b,v,!0),blockMatches:NP(d,g,v,!0)}})).filter((({inlineMatches:g,blockMatches:h})=>h.length>0||g.length>0))})(l,c).fold(_t,(({inlineMatches:d,blockMatches:m})=>(l.undoManager.add(),l.undoManager.extra((()=>{l.execCommand("mceInsertNewLine")}),(()=>{(h=>{h.insertContent(Cn,{preserve_zwsp:!0})})(l),Jk(l,d),((h,b)=>{if(b.length===0)return;const v=h.selection.getBookmark();K(b,(y=>kP(h,y))),h.selection.moveToBookmark(v)})(l,m);const f=l.selection.getRng(),g=Yg(f.startContainer,f.startOffset,l.dom.getRoot());l.execCommand("mceInsertNewLine"),g.each((h=>{const b=h.container;b.data.charAt(h.offset-1)===wr&&(b.deleteData(h.offset-1,1),Wi(l.dom,b.parentNode,(v=>v===l.dom.getRoot())))}))})),!0))))(e,i)&&a.preventDefault()}}),!0),e.on("keydown",(a=>{if(a.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const i=Gm(o(),"space");(i.blockPatterns.length>0||r())&&((l,c)=>((d,m)=>{const f=d.selection.getRng();return Fu(d,f).map((g=>{const h=Math.max(0,f.startOffset),b=Ch(d.dom,g,f.startContainer,h),v=yh(m,g,b);return DP(d,g,v,!1,b)})).filter((g=>g.length>0))})(l,c).fold(_t,(d=>(l.undoManager.transact((()=>{((m,f)=>{K(f,(g=>AP(m,g)))})(l,d)})),!0))))(e,i)&&a.preventDefault()}}),!0);const s=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const a=Gm(o(),"space");(a.inlinePatterns.length>0||r())&&((i,l)=>{const c=i.selection.getRng();Fu(i,c).map((d=>{const m=Math.max(0,c.startOffset-1),f=Ch(i.dom,d,c.startContainer,m),g=yh(l,d,f),h=Qk(i,d,c.startContainer,m,g,!1);h.length>0&&i.undoManager.transact((()=>{Jk(i,h)}))}))})(e,a)}};e.on("keyup",(a=>{o_(n,a,((i,l)=>i===l.keyCode&&!me.modifierPressed(l)))&&s()})),e.on("keypress",(a=>{o_(t,a,((i,l)=>i.charCodeAt(0)===l.charCode))&&Lo.setEditorTimeout(e,s)}))},OP=e=>{const t=k.each,n=me.BACKSPACE,o=me.DELETE,r=e.dom,s=e.selection,a=e.parser,i=p.browser,l=i.isFirefox(),c=i.isChromium()||i.isSafari(),d=p.deviceType.isiPhone()||p.deviceType.isiPad(),m=p.os.isMacOS()||p.os.isiOS(),f=(O,I)=>{try{e.getDoc().execCommand(O,!1,String(I))}catch{}},g=O=>O.isDefaultPrevented(),h=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},b=()=>{e.inline||r.bind(e.getDoc(),"mousedown mouseup",(O=>{var I;let H;if(O.target===e.getDoc().documentElement)if(H=s.getRng(),((I=e.getDoc().getSelection())===null||I===void 0?void 0:I.anchorNode)!==null&&e.getBody().focus(),O.type==="mousedown"){if(Do(H.startContainer))return;s.placeCaretAt(O.clientX,O.clientY)}else s.setRng(H)}))},v=()=>{Range.prototype.getClientRects||e.on("mousedown",(O=>{if(!g(O)&&O.target.nodeName==="HTML"){const I=e.getBody();I.blur(),Lo.setEditorTimeout(e,(()=>{I.focus()}))}}))},y=()=>{const O=Ub(e);e.on("click",(I=>{const H=I.target;/^(IMG|HR)$/.test(H.nodeName)&&r.isEditable(H)&&(I.preventDefault(),e.selection.select(H),e.nodeChanged()),H.nodeName==="A"&&r.hasClass(H,O)&&H.childNodes.length===0&&r.isEditable(H.parentNode)&&(I.preventDefault(),s.select(H))}))},S=()=>{e.on("keydown",(O=>{if(!g(O)&&O.keyCode===n&&s.isCollapsed()&&s.getRng().startOffset===0){const I=s.getNode().previousSibling;if(I&&I.nodeName&&I.nodeName.toLowerCase()==="table")return O.preventDefault(),!1}return!0}))},N=()=>{jb(e)||e.on("BeforeExecCommand mousedown",(()=>{f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),Ib(e)||f("enableObjectResizing",!1)}))},D=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},T=()=>{e.inline||e.on("keydown",(()=>{document.activeElement===document.body&&e.getWin().focus()}))},R=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",(O=>{let I;O.target.nodeName==="HTML"&&(I=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(I),e.selection.normalize(),e.nodeChanged())})))},P=()=>{m&&e.on("keydown",(O=>{!me.metaKeyPressed(O)||O.shiftKey||O.keyCode!==37&&O.keyCode!==39||(O.preventDefault(),e.selection.getSel().modify("move",O.keyCode===37?"backward":"forward","lineboundary"))}))},L=()=>{e.on("click",(O=>{let I=O.target;do if(I.tagName==="A")return void O.preventDefault();while(I=I.parentNode)})),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},F=()=>{e.on("init",(()=>{e.dom.bind(e.getBody(),"submit",(O=>{O.preventDefault()}))}))},W=ke;return Lr(e)?(c&&(b(),y(),F(),h(),d&&(T(),R(),L())),l&&(v(),N(),D(),P())):(e.on("keydown",(O=>{if(g(O)||O.keyCode!==me.BACKSPACE)return;let I=s.getRng();const H=I.startContainer,te=I.startOffset,ne=r.getRoot();let ae=H;if(I.collapsed&&te===0){for(;ae.parentNode&&ae.parentNode.firstChild===ae&&ae.parentNode!==ne;)ae=ae.parentNode;ae.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,ae),I=r.createRng(),I.setStart(H,0),I.setEnd(H,0),s.setRng(I))}})),(()=>{const O=I=>{const H=r.create("body"),te=I.cloneContents();return H.appendChild(te),s.serializer.serialize(H,{format:"html"})};e.on("keydown",(I=>{const H=I.keyCode;if(!g(I)&&(H===o||H===n)&&e.selection.isEditable()){const te=e.selection.isCollapsed(),ne=e.getBody();if(te&&!Zr(e.schema,ne)||!te&&!(ae=>{const Ae=O(ae),$e=r.createRng();return $e.selectNode(e.getBody()),Ae===O($e)})(e.selection.getRng()))return;I.preventDefault(),e.setContent(""),ne.firstChild&&r.isBlock(ne.firstChild)?e.selection.setCursorLocation(ne.firstChild,0):e.selection.setCursorLocation(ne,0),e.nodeChanged()}}))})(),p.windowsPhone||e.on("keyup focusin mouseup",(O=>{me.modifierPressed(O)||(I=>{const H=I.getBody(),te=I.selection.getRng();return te.startContainer===te.endContainer&&te.startContainer===H&&te.startOffset===0&&te.endOffset===H.childNodes.length})(e)||s.normalize()}),!0),c&&(b(),y(),e.on("init",(()=>{f("DefaultParagraphSeparator",En(e))})),F(),S(),a.addNodeFilter("br",(O=>{let I=O.length;for(;I--;)O[I].attr("class")==="Apple-interchange-newline"&&O[I].remove()})),d?(T(),R(),L()):h()),l&&((()=>{const O=Sn("figcaption");e.on("keydown",(I=>{if(I.keyCode===me.LEFT||I.keyCode===me.RIGHT){const H=E.fromDom(e.selection.getNode());O(H)&&e.selection.isCollapsed()&&vn(H).bind((te=>{var ne;return e.selection.getRng().startOffset===0&&I.keyCode===me.LEFT?Xt(te):e.selection.getRng().endOffset===((ne=H.dom.textContent)===null||ne===void 0?void 0:ne.length)&&I.keyCode===me.RIGHT?Qn(te):_.none()})).each((te=>{e.selection.setCursorLocation(te.dom,0)}))}}))})(),e.on("mousedown",(O=>{Ut(_.from(O.clientX),_.from(O.clientY),((I,H)=>{var te;const ne=e.getDoc().caretPositionFromPoint(I,H),ae=((te=ne?.offsetNode)===null||te===void 0?void 0:te.childNodes[ne.offset-(ne.offset>0?1:0)])||ne?.offsetNode;if(ee(ae)&&(Ae=ae).nodeName==="IMG"&&e.dom.isEditable(Ae)){const $e=ae.getBoundingClientRect();O.preventDefault(),e.hasFocus()||e.focus(),e.selection.select(ae),O.clientX<$e.left||O.clientY<$e.top?e.selection.collapse(!0):(O.clientX>$e.right||O.clientY>$e.bottom)&&e.selection.collapse(!1)}var Ae}))})),e.on("keydown",(O=>{if(!g(O)&&O.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&s.getRng().startOffset===0){const I=s.getNode(),H=I.previousSibling;if(I.nodeName==="HR")return r.remove(I),void O.preventDefault();H&&H.nodeName&&H.nodeName.toLowerCase()==="hr"&&(r.remove(H),O.preventDefault())}}})),v(),(()=>{const O=()=>{const H=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const te=s.getStart();te!==e.getBody()&&(r.setAttrib(te,"style",null),t(H,(ne=>{te.setAttributeNode(ne.cloneNode(!0))})))}},I=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);e.on("keypress",(H=>{let te;return!(!(g(H)||H.keyCode!==8&&H.keyCode!==46)&&I()&&(te=O(),e.getDoc().execCommand("delete",!1),te(),H.preventDefault(),1))})),r.bind(e.getDoc(),"cut",(H=>{if(!g(H)&&I()){const te=O();Lo.setEditorTimeout(e,(()=>{te()}))}}))})(),N(),e.on("SetContent ExecCommand",(O=>{O.type!=="setcontent"&&O.command!=="mceInsertLink"||t(r.select("a:not([data-mce-block])"),(I=>{var H;let te=I.parentNode;const ne=r.getRoot();if(te?.lastChild===I){for(;te&&!r.isBlock(te);){if(((H=te.parentNode)===null||H===void 0?void 0:H.lastChild)!==te||te===ne)return;te=te.parentNode}r.add(te,"br",{"data-mce-bogus":1})}}))})),D(),P(),S())),{refreshContentEditable:W,isHidden:()=>{if(!l||e.removed)return!1;const O=e.selection.getSel();return!O||!O.rangeCount||O.rangeCount===0}}},wh=Nt.DOM,BP=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Sh=e=>er(e,(t=>Mt(t)===!1)),r_=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Sh({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_html_in_comments:t("allow_html_in_comments"),allow_mathml_annotation_encodings:t("allow_mathml_annotation_encodings"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),extended_mathml_attributes:t("extended_mathml_attributes"),extended_mathml_elements:t("extended_mathml_elements"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:BP(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:of(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},s_=e=>{const t=e.options.get;return Sh({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},Eh=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,a_=e=>{const t=Eh(e),n=Mb(e),o=e.contentCSS,r=()=>{t.unloadAll(o),e.inline||e.ui.styleSheetLoader.unloadAll(n)},s=()=>{e.removed?r():e.on("remove",r)};if(e.contentStyles.length>0){let l="";k.each(e.contentStyles,(c=>{l+=c+`\r
`})),e.dom.addStyle(l)}const a=Promise.all(((l,c,d)=>{const{pass:m,fail:f}=Zo(c,(b=>tinymce.Resource.has(Yp(b)))),g=m.map((b=>{const v=tinymce.Resource.get(Yp(b));return we(v)?Promise.resolve(Eh(l).loadRawCss(b,v)):Promise.resolve()})),h=[...g,Eh(l).loadAll(f)];return l.inline?h:h.concat([l.ui.styleSheetLoader.loadAll(d)])})(e,o,n)).then(s).catch(s),i=fA(e);return i&&((l,c)=>{const d=E.fromDom(l.getBody()),m=oa(Jn(d)),f=E.fromTag("style");Te(f,"type","text/css"),X(f,E.fromText(c)),X(m,f),l.on("remove",(()=>{ct(f)}))})(e,i),a},kh=e=>{e.removed!==!0&&((t=>{Lr(t)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"})})(e),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,(o=>{o.dispatch("Init")})(t),t.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||kd(o)&&o.selection.getStart(!0)!==r||Un(r).each((s=>{const a=s.getNode(),i=Ar(a)?Un(a).getOr(s):s;o.selection.setRng(i.toRange())}))})(t),t.nodeChanged({initial:!0});const n=FA(t);bt(n)&&n.call(t,t),(o=>{const r=zA(o);r&&Lo.setEditorTimeout(o,(()=>{let s;s=r===!0?o:o.editorManager.get(r),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())}),100)})(t),rs(t)&&Px(t,!0)})(e))},i_=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(wh.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const o=e.getBody();o.disabled=!0,e.readonly=jb(e),e._editableRoot=OA(e),!vd(e)&&e.hasEditableRoot()&&(e.inline&&wh.getStyle(o,"position",!0)==="static"&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,e.editorUpload=QR(e),e.schema=ws(s_(e)),e.dom=Nt(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:cA(e),referrerPolicy:Zm(e),crossOrigin:ef(e),onSetAttrib:a=>{e.dispatch("SetAttrib",a)}}),e.parser=(a=>{const i=Ri(r_(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",((l,c)=>{const d=a.dom,m="data-mce-"+c;let f=l.length;for(;f--;){const g=l[f];let h=g.attr(c);if(h&&!g.attr(m)){if(h.indexOf("data:")===0||h.indexOf("blob:")===0)continue;c==="style"?(h=d.serializeStyle(d.parseStyle(h),g.name),h.length||(h=null),g.attr(m,h),g.attr(c,h)):c==="tabindex"?(g.attr(m,h),g.attr(c,null)):g.attr(m,a.convertURL(h,c,g.name))}}})),i.addNodeFilter("script",(l=>{let c=l.length;for(;c--;){const d=l[c],m=d.attr("type")||"no/type";m.indexOf("mce-")!==0&&d.attr("type","mce-"+m)}})),rT(a)&&i.addNodeFilter("#cdata",(l=>{var c;let d=l.length;for(;d--;){const m=l[d];m.type=8,m.name="#comment",m.value="[CDATA["+a.dom.encode((c=m.value)!==null&&c!==void 0?c:"")+"]]"}})),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(l=>{let c=l.length;const d=a.schema.getNonEmptyElements();for(;c--;){const m=l[c];m.isEmpty(d)&&m.getAll("br").length===0&&m.append(new On("br",1))}})),i})(e),e.serializer=Cx((a=>{const i=a.options.get;return{...r_(a),...s_(a),...Sh({remove_trailing_brs:i("remove_trailing_brs"),pad_empty_with_br:i("pad_empty_with_br"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(e),e),e.selection=yx(e.dom,e.getWin(),e.serializer,e),e.annotator=Uv(e),e.formatter=Hx(e),e.undoManager=qx(e),e._nodeChangeDispatcher=new ZB(e),e._selectionOverrides=wP(e),JB(e),(a=>{const i=Wo(),l=tn(!1),c=so((d=>{a.dispatch("longpress",{...d,type:"longpress"}),l.set(!0)}),400);a.on("touchstart",(d=>{xS(d).each((m=>{c.cancel();const f={x:m.clientX,y:m.clientY,target:d.target};c.throttle(d),l.set(!1),i.set(f)}))}),!0),a.on("touchmove",(d=>{c.cancel(),xS(d).each((m=>{i.on((f=>{((g,h)=>{const b=Math.abs(g.clientX-h.x),v=Math.abs(g.clientY-h.y);return b>5||v>5})(m,f)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))}))}))}),!0),a.on("touchend touchcancel",(d=>{c.cancel(),d.type!=="touchcancel"&&i.get().filter((m=>m.target.isEqualNode(d.target))).each((()=>{l.get()?d.preventDefault():a.dispatch("tap",{...d,type:"tap"})}))}),!0)})(e),(a=>{(i=>{i.on("click",(l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()}))})(a),(i=>{i.parser.addNodeFilter("details",(l=>{const c=lT(i);K(l,(d=>{c==="expanded"?d.attr("open","open"):c==="collapsed"&&d.attr("open",null)}))})),i.serializer.addNodeFilter("details",(l=>{const c=cT(i);K(l,(d=>{c==="expanded"?d.attr("open","open"):c==="collapsed"&&d.attr("open",null)}))}))})(a)})(e),(a=>{const i="contenteditable",l=" "+k.trim(nT(a))+" ",c=" "+k.trim($b(a))+" ",d=SS(l),m=SS(c),f=oT(a);f.length>0&&a.on("BeforeSetContent",(g=>{((h,b,v)=>{let y=b.length,S=v.content;if(v.format!=="raw"){for(;y--;)S=S.replace(b[y],JO(h,S,$b(h)));v.content=S}})(a,f,g)})),a.parser.addAttributeFilter("class",(g=>{let h=g.length;for(;h--;){const b=g[h];d(b)?b.attr(i,"true"):m(b)&&b.attr(i,"false")}})),a.serializer.addAttributeFilter(i,(g=>{let h=g.length;for(;h--;){const b=g[h];if(!d(b)&&!m(b))continue;const v=b.attr("data-mce-content");f.length>0&&v?ZO(f,v)?(b.name="#text",b.type=3,b.raw=!0,b.value=v):b.remove():b.attr(i,null)}}))})(e),Lr(e)||((a=>{a.on("mousedown",(i=>{i.detail>=3&&(i.preventDefault(),mP(a))}))})(e),(a=>{RP(a)})(e));const r=GB(e);((a,i)=>{a.addCommand("delete",(()=>{jg(a,i)})),a.addCommand("forwardDelete",(()=>{((l,c)=>{CS(l,c,!0).fold((()=>{l.selection.isEditable()&&oC(l)}),Yn),ug(l)&&Zp(l.dom,l.getBody())})(a,i)}))})(e,r),(a=>{a.on("NodeChange",(()=>(i=>{const l=i.dom,c=i.selection,d=i.schema,m=d.getBlockElements(),f=c.getStart(),g=i.getBody();let h,b,v=null;const y=En(i);if(!f||!Ce(f))return;const S=g.nodeName.toLowerCase();if(!d.isValidChild(S,y.toLowerCase())||((D,T,R)=>Ct(By(E.fromDom(R),E.fromDom(T)),(P=>zg(D,P.dom))))(m,g,f))return;if(g.firstChild===g.lastChild&&$t(g.firstChild))return h=Ug(i),h.appendChild(fi().dom),g.replaceChild(h,g.firstChild),i.selection.setCursorLocation(h,0),void i.nodeChanged();let N=g.firstChild;for(;N;)if(Ce(N)&&fN(d,N),GO(d,N)){if(QO(m,N)){b=N,N=N.nextSibling,l.remove(b);continue}if(!h){if(!v&&i.hasFocus()&&(v=ts(i.selection.getRng(),(()=>document.createElement("span")))),!N.parentNode){N=null;break}h=Ug(i),g.insertBefore(h,N)}b=N,N=N.nextSibling,h.appendChild(b)}else h=null,N=N.nextSibling;v&&(i.selection.setRng(ns(v)),i.nodeChanged())})(a)))})(e),(a=>{var i;const l=a.dom,c=En(a),d=(i=bA(a))!==null&&i!==void 0?i:"",m=(f,g)=>{if((v=>{if(Vx(v)){const y=v.keyCode;return!Kx(v)&&(me.metaKeyPressed(v)||v.altKey||y>=112&&y<=123||Se(nO,y))}return!1})(f))return;const h=a.getBody(),b=!(v=>Vx(v)&&!(Kx(v)||v.type==="keyup"&&v.keyCode===229))(f)&&((v,y,S)=>{if(v.isEmpty(y,void 0,{skipBogus:!1,includeZwsp:!0})){const N=y.firstElementChild;return!N||!v.getStyle(y.firstElementChild,"padding-left")&&!v.getStyle(y.firstElementChild,"padding-right")&&S===N.nodeName.toLowerCase()}return!1})(l,h,c);(l.getAttrib(h,Wx)!==""!==b||g)&&(l.setAttrib(h,Wx,b?d:null),((v,y)=>{v.dispatch("PlaceholderToggle",{state:y})})(a,b),a.on(b?"keydown":"keyup",m),a.off(b?"keyup":"keydown",m))};Eo(d)&&a.on("init",(f=>{m(f,!0),a.on("change SetContent ExecCommand",m),a.on("paste",(g=>Lo.setEditorTimeout(a,(()=>m(g)))))}))})(e),cP(e,r);const s=(a=>{const i=a;return(l=>Bt(l.plugins,"rtc").bind((c=>_.from(c.setup))))(a).fold((()=>(i.rtcInstance=gx(a),_.none())),(l=>(i.rtcInstance=(()=>{const c=le(null),d=le("");return{init:{bindEvents:ke},undoManager:{beforeChange:ke,add:c,undo:c,redo:c,clear:ke,reset:ke,hasUndo:_t,hasRedo:_t,transact:c,ignore:ke,extra:ke},formatter:{match:_t,matchAll:le([]),matchNode:le(void 0),canApply:_t,closest:d,apply:ke,remove:ke,toggle:ke,formatChanged:le({unbind:ke})},editor:{getContent:d,setContent:le({content:"",html:""}),insertContent:le(""),addVisual:ke},selection:{getContent:d},autocompleter:{addDecoration:ke,removeDecoration:ke},raw:{getModel:le(_.none())}}})(),_.some((()=>l().then((c=>(i.rtcInstance=(d=>{const m=N=>Ue(N)?N:{},{init:f,undoManager:g,formatter:h,editor:b,selection:v,autocompleter:y,raw:S}=d;return{init:{bindEvents:f.bindEvents},undoManager:{beforeChange:g.beforeChange,add:g.add,undo:g.undo,redo:g.redo,clear:g.clear,reset:g.reset,hasUndo:g.hasUndo,hasRedo:g.hasRedo,transact:(N,D,T)=>g.transact(T),ignore:(N,D)=>g.ignore(D),extra:(N,D,T,R)=>g.extra(T,R)},formatter:{match:(N,D,T,R)=>h.match(N,m(D),R),matchAll:h.matchAll,matchNode:h.matchNode,canApply:N=>h.canApply(N),closest:N=>h.closest(N),apply:(N,D,T)=>h.apply(N,m(D)),remove:(N,D,T,R)=>h.remove(N,m(D)),toggle:(N,D,T)=>h.toggle(N,m(D)),formatChanged:(N,D,T,R,P)=>h.formatChanged(D,T,R,P)},editor:{getContent:N=>b.getContent(N),setContent:(N,D)=>({content:b.setContent(N,D),html:""}),insertContent:(N,D)=>(b.insertContent(N),""),addVisual:b.addVisual},selection:{getContent:(N,D)=>v.getContent(D)},autocompleter:{addDecoration:y.addDecoration,removeDecoration:y.removeDecoration},raw:{getModel:()=>_.some(S.getRawModel())}}})(c),c.rtc.isRemote))))))))})(e);(a=>{const i=a.getDoc(),l=a.getBody();(m=>{m.dispatch("PreInit")})(a),UA(a)||(i.body.spellcheck=!1,wh.setAttrib(l,"spellcheck","false")),a.quirks=OP(a),(m=>{m.dispatch("PostRender")})(a);const c=pA(a);c!==void 0&&(l.dir=c);const d=HA(a);d&&a.on("BeforeSetContent",(m=>{k.each(d,(f=>{m.content=m.content.replace(f,(g=>"<!--mce:protected "+escape(g)+"-->"))}))})),a.on("SetContent",(()=>{a.addVisual(a.getBody())})),a.on("compositionstart compositionend",(m=>{a.composing=m.type==="compositionstart"}))})(e),s.fold((()=>{const a=(i=>{let l=!1;const c=setTimeout((()=>{l||i.setProgressState(!0)}),500);return()=>{clearTimeout(c),l=!0,i.setProgressState(!1)}})(e);a_(e).then((()=>{kh(e),a()}))}),(a=>{e.setProgressState(!0),a_(e).then((()=>{a().then((i=>{e.setProgressState(!1),kh(e),hx(e)}),(i=>{e.notificationManager.open({type:"error",text:String(i)}),kh(e),hx(e)}))}))}))},_h=Nt.DOM,l_=Nt.DOM,c_=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),d_=e=>{const t=e.getElement();return e.inline?c_(null):(n=>{const o=l_.create("div");return l_.insertAfter(o,n),c_(o,o)})(t)},PP=async e=>{e.dispatch("ScriptsLoaded"),(n=>{const o=k.trim(Bb(n)),r=n.ui.registry.getAll().icons,s={...ou.get("default").icons,...ou.get(o).icons};xt(s,((a,i)=>{Fe(r,i)||n.ui.registry.addIcon(i,a)}))})(e),(n=>{const o=r=>{r.keyCode!==me.ESC||r.defaultPrevented||(s=>s.dispatch("CloseActiveTooltips"))(n).isDefaultPrevented()&&r.preventDefault()};document.addEventListener("keyup",o),n.inline||n.on("keyup",o),n.on("remove",(()=>{document.removeEventListener("keyup",o),n.inline||n.off("keyup",o)}))})(e),(n=>{const o=yi(n);if(we(o)){const r=Ta.get(o);n.theme=r(n,Ta.urls[o])||{},bt(n.theme.init)&&n.theme.init(n,Ta.urls[o]||n.editorManager.documentBaseURL.replace(/\/$/,""))}else n.theme={}})(e),(n=>{const o=tf(n),r=Oi.get(o);n.model=r(n,Oi.urls[o])})(e),(n=>{Kp.init(n)})(e),(n=>{const o=[];K(Ol(n),(r=>{((s,a,i)=>{const l=Bi.get(i),c=Bi.urls[i]||s.editorManager.documentBaseURL.replace(/\/$/,"");if(i=k.trim(i),l&&k.inArray(a,i)===-1){if(s.plugins[i])return;try{const d=l(s,c)||{};s.plugins[i]=d,bt(d.init)&&(d.init(s,c),a.push(i))}catch(d){((m,f,g)=>{const h=lr.translate(["Failed to initialize plugin: {0}",f]);xb(m,"PluginLoadError",{message:h}),su(h,g),ru(m,h)})(s,i,d)}}})(n,o,(s=>s.replace(/^\-/,""))(r))}))})(e);const t=await(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,we(yi(n))?(r=>{const s=r.theme.renderUI;return s?s():d_(r)})(n):bt(yi(n))?(r=>{const s=r.getElement(),a=yi(r)(r,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||r.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||r.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):d_(n)})(e);((n,o)=>{const r={show:_.from(o.show).getOr(ke),hide:_.from(o.hide).getOr(ke),isEnabled:_.from(o.isEnabled).getOr(zt),setEnabled:s=>{s&&(n.mode.get()==="readonly"||rs(n))||_.from(o.setEnabled).each((a=>a(s)))}};n.ui={...n.ui,...r}})(e,_.from(t.api).getOr({})),e.editorContainer=t.editorContainer,(n=>{n.contentCSS=n.contentCSS.concat((o=>Mx(o,mA(o)))(n),(o=>Mx(o,Mb(o)))(n))})(e),e.inline?i_(e):((n,o)=>{((r,s)=>{const a=Hb(r),i=r.translate(a),l=at(E.fromDom(r.getElement()),"tabindex").bind(fs),c=((d,m,f,g)=>{const h=E.fromTag("iframe");return g.each((b=>Te(h,"tabindex",b))),Ne(h,f),Ne(h,{id:d+"_ifr",frameBorder:"0",allowTransparency:"true",...p.browser.isFirefox()?{title:m}:{}}),ai(h,"tox-edit-area__iframe"),h})(r.id,i,KN(r),l).dom;c.onload=()=>{c.onload=null,r.dispatch("load")},r.contentAreaContainer=s.iframeContainer,r.iframeElement=c,r.iframeHTML=(d=>{let m=XN(d)+"<html><head>";Tb(d)!==d.editorManager.documentBaseURL&&(m+='<base href="'+d.documentBaseURI.getURI()+'" />'),m+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const f=YN(d),g=GN(d),h=d.translate(Hb(d)),b=p.browser.isFirefox()?"":`aria-label="${h}"`;return Db(d)&&(m+='<meta http-equiv="Content-Security-Policy" content="'+Db(d)+'" />'),m+=`</head><body id="${f}" class="mce-content-body ${g}" data-id="${d.id}" ${b}><br></body></html>`,m})(r),_h.add(s.iframeContainer,c)})(n,o),o.editorContainer&&(o.editorContainer.style.display=n.orgDisplay,n.hidden=_h.isHidden(o.editorContainer)),n.getElement().style.display="none",_h.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(r=>{const s=r.iframeElement,a=()=>{r.contentDocument=s.contentDocument,i_(r)};if(aT(r)||p.browser.isFirefox()){const l=r.getDoc();l.open(),l.write(r.iframeHTML),l.close(),a()}else{const l=(i=E.fromDom(s),Za(i,"load",ml,(()=>{l.unbind(),a()})));s.srcdoc=r.iframeHTML}var i})(n)})(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},Ia=Nt.DOM,u_=e=>e.charAt(0)==="-",m_=(e,t,n)=>_.from(t).filter((o=>Eo(o)&&!ou.has(o))).map((o=>({url:`${e.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:_.some(o)}))),LP=(e,t)=>{const n=Tr.ScriptLoader,o=()=>{!e.removed&&(r=>{const s=yi(r);return!we(s)||ee(Ta.get(s))})(e)&&(r=>{const s=tf(r);return ee(Oi.get(s))})(e)&&PP(e)};((r,s)=>{const a=yi(r);if(we(a)&&!u_(a)&&!Fe(Ta.urls,a)){const i=yA(r),l=i?r.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;Ta.load(a,l).catch((()=>{((c,d,m)=>{Pi(c,"ThemeLoadError",Li("theme",d,m))})(r,l,a)}))}})(e,t),((r,s)=>{const a=tf(r);if(a!=="plugin"&&!Fe(Oi.urls,a)){const i=CA(r),l=we(i)?r.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;Oi.load(a,l).catch((()=>{((c,d,m)=>{Pi(c,"ModelLoadError",Li("model",d,m))})(r,l,a)}))}})(e,t),((r,s)=>{Kp.load(r,s)})(e,t),((r,s)=>{const a=Pb(s),i=dA(s);if(!lr.hasCode(a)&&a!=="en"){const l=Eo(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;r.add(l).catch((()=>{((c,d,m)=>{Pi(c,"LanguageLoadError",Li("language",d,m))})(s,l,a)}))}})(n,e),((r,s,a)=>{const i=m_(s,"default",a),l=(c=>_.from(rA(c)).filter(Eo).map((d=>({url:d,name:_.none()}))))(s).orThunk((()=>m_(s,Bb(s),"")));K((c=>{const d=[],m=f=>{d.push(f)};for(let f=0;f<c.length;f++)c[f].each(m);return d})([i,l]),(c=>{r.add(c.url).catch((()=>{((d,m,f)=>{Pi(d,"IconsLoadError",Li("icons",m,f))})(s,c.url,c.name.getOrUndefined())}))}))})(n,e,t),((r,s)=>{const a=(i,l)=>{i!=="licensekeymanager"&&Bi.load(i,l).catch((()=>{((c,d,m)=>{Pi(c,"PluginLoadError",Li("plugin",d,m))})(r,l,i)}))};xt(BA(r),((i,l)=>{a(l,i),r.options.set("plugins",Ol(r).concat(l))})),K(Ol(r),(i=>{!(i=k.trim(i))||Bi.urls[i]||u_(i)||a(i,`plugins/${i}/plugin${s}.js`)}))})(e,t),n.loadQueue().then(o,o)},f_=["#E41B60","#AD1457","#1939EC","#001CB5","#648000","#465B00","#006CE7","#0054B4","#00838F","#006064","#00866F","#004D40","#51742F","#385021","#CF4900","#A84600","#CC0000","#6A1B9A","#9C27B0","#6A00AB","#3041BA","#0A1877","#774433","#452B24","#607D8B","#455A64"],Nh=(e,t={size:36})=>{return n=(s=>{var a;return Intl.Segmenter?`${(a=new Intl.Segmenter().segment(s)[Symbol.iterator]().next().value)===null||a===void 0?void 0:a.segment}`:s.trim()[0]})(e.name),o=(s=>{const a=((i,l)=>{let c=5381;for(let d=0;d<i.length;d++)c=(c<<5)+c+i.charCodeAt(d);return(c>>>0)%(l+1)})(s??"",f_.length-1);return f_[a]})(e.id),r=t.size,"data:image/svg+xml,"+encodeURIComponent(((s,a,i)=>{const l=i/2;return`<svg height="${i}" width="${i}" xmlns="http://www.w3.org/2000/svg"><circle cx="${l}" cy="${l}" r="${l}" fill="${a}"/><text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" fill="#FFF" font-family="sans-serif" font-size="${l}">`+s+"</text></svg>"})(n,o,r));var n,o,r},MP=yE([Hi("id","id",{tag:"required",process:{}},th()),fr("name"),fr("avatar"),(e=>Hi(e,e,{tag:"option",process:{}},th()))("custom")]),IP=e=>{const t={};return xt(e,((n,o)=>{n.each((r=>{t[o]=r}))})),t},FP=e=>{if(!Array.isArray(e))throw new Error("fetch_users must return an array");const t=We(e,(r=>CE("Invalid user object",MP,r))),{errors:n,values:o}=Ka(t);if(n.length>0){const r=We(n,((s,a)=>`User at index ${a}: ${xE(s)}`));console.warn(`User validation errors:
`+r.join(`
`))}return We(o,(r=>{const{id:s,name:a,avatar:i,...l}=r;return{id:s,name:a.getOr(s),avatar:i.getOr(Nh({id:s,name:a.getOr(s)})),...IP(l)}}))},p_=No().deviceType,g_=p_.isPhone(),jP=p_.isTablet(),yc=e=>{if(kt(e))return[];{const t=re(e)?e:e.split(/[ ,]/),n=We(t,xr);return Oe(n,Eo)}},zP=(e,t)=>{const n=(s=>{const a={},i={};return yr(s,((l,c)=>Se(e,c)),vr(a),vr(i)),{t:a,f:i}})(t);return o=n.t,r=n.f,{sections:le(o),options:le(r)};var o,r},Ah=(e,t)=>Fe(e.sections(),t),UP=(e,t)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Bt(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}}),HP=(e,t)=>{var n;const o=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?k.extend({},e.external_plugins,o):o},$P=(e,t,n,o,r)=>{var s;const a=e?{mobile:UP((s=r.mobile)!==null&&s!==void 0?s:{},t)}:{},i=zP(["mobile"],qa(a,r)),l=k.extend(n,o,i.options(),((c,d)=>c&&Ah(d,"mobile"))(e,i)?((c,d,m={})=>{const f=c.sections(),g=Bt(f,d).getOr({});return k.extend({},m,g)})(i,"mobile"):{},{external_plugins:HP(o,i.options())});return((c,d,m,f)=>{const g=yc(m.forced_plugins),h=yc(f.plugins),b=((S,N)=>Ah(S,N)?S.sections()[N]:{})(d,"mobile"),v=((S,N,D,T)=>S&&Ah(N,"mobile")?T:D)(c,d,h,b.plugins?yc(b.plugins):h),y=((S,N)=>[...yc(S),...yc(N)])(g,v);return k.extend(f,{forced_plugins:g,plugins:y})})(e,i,o,l)},qP=e=>{(t=>{const n=o=>()=>{K("left,center,right,justify".split(","),(r=>{o!==r&&t.formatter.remove("align"+r)})),o!=="none"&&(r=>{t.formatter.toggle(r,void 0),t.nodeChanged()})("align"+o)};t.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(e),(t=>{const n=o=>()=>{const r=t.selection,s=r.isCollapsed()?[t.dom.getParent(r.getNode(),t.dom.isBlock)]:r.getSelectedBlocks();return Ct(s,(a=>ee(t.formatter.matchNode(a,o))))};t.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(e)},WP=(e,t)=>{const n=e.selection,o=e.dom;return/^ | $/.test(t)?((r,s,a,i)=>{const l=E.fromDom(r.getRoot());return a=Wl(l,Y.fromRangeStart(s),i)?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),Vl(l,Y.fromRangeEnd(s),i)?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),t,e.schema):t},Uu=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:o}=(r=>{if(typeof r!="string"){const s=k.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:s}}return{content:r,details:{}}})(t);Bp(e,{...o,content:WP(e,n),format:"html",set:!1,selection:!0}).each((r=>{const s=((a,i,l)=>$p(a).editor.insertContent(i,l))(e,r.content,o);Pp(e,s,r),e.addVisual()}))}},VP={"font-size":"size","font-family":"face"},KP=Sn("font"),h_=e=>(t,n)=>_.from(n).map(E.fromDom).filter(ot).bind((o=>((r,s,a)=>cm(E.fromDom(a),(i=>(l=>ni(l,r).orThunk((()=>KP(l)?Bt(VP,r).bind((c=>at(l,c))):_.none())))(i)),(i=>pe(E.fromDom(s),i))))(e,t,o.dom).or(((r,s)=>_.from(Nt.DOM.getStyle(s,r,!0)))(e,o.dom)))).getOr(""),XP=h_("font-size"),YP=In((e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")),h_("font-family")),GP=e=>Un(e.getBody()).bind((t=>{const n=t.container();return _.from(se(n)?n.parentNode:n)})),Th=(e,t)=>((n,o)=>(r=>_.from(r.selection.getRng()).bind((s=>{const a=r.getBody();return s.startContainer===a&&s.startOffset===0?_.none():_.from(r.selection.getStart(!0))})))(n).orThunk(ye(GP,n)).map(E.fromDom).filter(ot).bind(o))(e,$s(_.some,t)),b_=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const o=(s=>k.explode(s.options.get("font_size_style_values")))(e),r=(s=>k.explode(s.options.get("font_size_classes")))(e);return r.length>0?r[n-1]||t:o[n-1]||t}return t}return t},QP=e=>{const t=e.split(/\s*,\s*/);return We(t,(n=>n.indexOf(" ")===-1||Jt(n,'"')||Jt(n,"'")?n:`'${n}'`)).join(",")},JP=e=>{e.editorCommands.addCommands({Indent:()=>{(t=>{bS(t,"indent")})(e)},Outdent:()=>{vS(e)}}),e.editorCommands.addCommands({Outdent:()=>pS(e),Indent:()=>(t=>!t.mode.isReadOnly()&&(n=>Kb(n).forall((o=>{const r=n.selection.getSelectedBlocks();return Ct(r,(s=>Cs(E.fromDom(s),"li").forall((a=>{return(i=a,Xh(i,(l=>J(l,"ol,ul")),void 0)).length<=o;var i}))))})))(t))(e)},"state")},v_=(e,t)=>{if(e.mode.isReadOnly())return;const n=e.dom,o=e.selection.getRng(),r=t?e.selection.getStart():e.selection.getEnd(),s=t?o.startContainer:o.endContainer,a=pc(n,s);if(!a||!a.isContentEditable)return;const i=t?un:M,l=En(e);((c,d,m,f)=>{const g=c.dom,h=v=>g.isBlock(v)&&v.parentElement===m,b=h(d)?d:g.getParent(f,h,m);return _.from(b).map(E.fromDom)})(e,r,a,s).each((c=>{const d=jE(e,s,c.dom,a,!1,l);i(c,E.fromDom(d)),e.selection.setCursorLocation(d,0),e.dispatch("NewBlock",{newBlock:d}),fc(e,"insertParagraph")}))},ZP=e=>{qP(e),(t=>{t.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=t.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n!=="paste"||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let s=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(p.os.isMacOS()||p.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),t.notificationManager.open({text:s,type:"error"})}}})})(e),(t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})})(e),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let s=0;t.dom.getParent(t.selection.getNode(),(a=>!Ce(a)||s++!==r||(t.selection.select(a),!1)),t.getBody())},mceSelectNode:(n,o,r)=>{t.selection.select(r)},selectAll:()=>{const n=t.dom.getParent(t.selection.getStart(),To);if(n){const o=t.dom.createRng();o.selectNodeContents(n),t.selection.setRng(o)}}})})(e),(t=>{t.editorCommands.addCommands({mceCleanup:()=>{const n=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Uu(t,t.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Uu(t,t.dom.encode(r))},insertHTML:(n,o,r)=>{Uu(t,r)},mceInsertContent:(n,o,r)=>{Uu(t,r)},mceSetContent:(n,o,r)=>{t.setContent(r)},mceReplaceContent:(n,o,r)=>{t.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent(VA(t))}})})(e),(t=>{const n=(o,r,s)=>{if(t.mode.isReadOnly())return;const a=we(s)?{href:s}:s,i=t.dom.getParent(t.selection.getNode(),"a");Ue(a)&&we(a.href)&&(a.href=a.href.replace(/ /g,"%20").replace(/&amp;/g,"&"),i&&a.href||t.formatter.remove("link"),a.href&&t.formatter.apply("link",a,i))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isEditable()){if(t.selection.isCollapsed()){const o=t.dom.getParent(t.selection.getStart(),"a");return void(o&&t.dom.remove(o,!0))}t.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(e),JP(e),(t=>{t.editorCommands.addCommands({InsertNewBlockBefore:()=>{(n=>{v_(n,!0)})(t)},InsertNewBlockAfter:()=>{(n=>{v_(n,!1)})(t)}})})(e),(t=>{t.editorCommands.addCommands({insertParagraph:()=>{Bu($E,t)},mceInsertNewLine:(n,o,r)=>{GE(t,r)},InsertLineBreak:(n,o,r)=>{Bu(VE,t)}})})(e),(t=>{(n=>{const o=(r,s)=>{n.formatter.toggle(r,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,s,a)=>{o(r,{value:a})},BackColor:(r,s,a)=>{o("hilitecolor",{value:a})},FontName:(r,s,a)=>{((i,l)=>{const c=b_(i,l);i.formatter.toggle("fontname",{value:QP(c)}),i.nodeChanged()})(n,a)},FontSize:(r,s,a)=>{((i,l)=>{i.formatter.toggle("fontsize",{value:b_(i,l)}),i.nodeChanged()})(n,a)},LineHeight:(r,s,a)=>{((i,l)=>{i.formatter.toggle("lineheight",{value:String(l)}),i.nodeChanged()})(n,a)},Lang:(r,s,a)=>{var i;o(r,{value:a.code,customValue:(i=a.customCode)!==null&&i!==void 0?i:null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,s,a)=>{o(we(a)?a:"p")},mceToggleFormat:(r,s,a)=>{o(a)}})})(t),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",(()=>(r=>Th(r,(s=>YP(r.getBody(),s.dom))).getOr(""))(n))),n.editorCommands.addQueryValueHandler("FontSize",(()=>(r=>Th(r,(s=>XP(r.getBody(),s.dom))).getOr(""))(n))),n.editorCommands.addQueryValueHandler("LineHeight",(()=>(r=>Th(r,(s=>{const a=E.fromDom(r.getBody());return cm(s,(l=>ni(l,"line-height")),ye(pe,a)).getOrThunk((()=>{const l=parseFloat(nr(s,"line-height")),c=parseFloat(nr(s,"font-size"));return String(l/c)}))})).getOr(""))(n)))})(t)})(e),(t=>{t.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const s=r??t.selection.getNode();if(s!==t.getBody()){const a=t.selection.getBookmark();t.dom.remove(s,!0),t.selection.moveToBookmark(a)}},mcePrint:()=>{t.getWin().print()},mceFocus:(n,o,r)=>{((s,a)=>{s.removed||(a?Bf(s):(i=>{const l=i.selection,c=i.getBody();let d=l.getRng();i.quirks.refreshContentEditable();const m=g=>{Af(g).each((h=>{g.selection.setRng(h),d=h}))};!Ai(i)&&i.hasEditableRoot()&&m(i);const f=((g,h)=>g.dom.getParent(h,(b=>g.dom.getContentEditable(b)==="true")))(i,l.getNode());if(f&&i.dom.isChildOf(f,c))return((g,h)=>g.dom.getParent(h,(b=>g.dom.getContentEditable(b)==="false"))!==null)(i,f)||Rd(c),Rd(f),i.hasEditableRoot()||m(i),Yv(i,d),void Bf(i);i.inline||(p.browser.isOpera()||Rd(c),i.getWin().focus()),(p.browser.isFirefox()||i.inline)&&(Rd(c),Yv(i,d)),Bf(i)})(s))})(t,r===!0)},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})})(e)},eL=["toggleview"],y_=e=>Se(eL,e.toLowerCase());class C_{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,o,r){const s=this.editor,a=t.toLowerCase(),i=r?.skip_focus;if(s.removed||(a!=="mcefocus"&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?(c=>{Af(c).each((d=>c.selection.setRng(d)))})(s):s.focus()),s.dispatch("BeforeExecCommand",{command:t,ui:n,value:o}).isDefaultPrevented()))return!1;const l=this.commands.exec[a];return!!bt(l)&&(l(a,n,o,r),s.dispatch("ExecCommand",{command:t,ui:n,value:o,args:r}),!0)}queryCommandState(t){if(!y_(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),o=this.commands.state[n];return!!bt(o)&&o(n)}queryCommandValue(t){if(!y_(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),o=this.commands.value[n];return bt(o)?o(n):""}addCommands(t,n="exec"){const o=this.commands;xt(t,((r,s)=>{K(s.toLowerCase().split(","),(a=>{o[n][a]=r}))}))}addCommand(t,n,o){const r=t.toLowerCase();this.commands.exec[r]=(s,a,i,l)=>n.call(o??this.editor,a,i,l)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,o){this.commands.state[t.toLowerCase()]=()=>n.call(o??this.editor)}addQueryValueHandler(t,n,o){this.commands.value[t.toLowerCase()]=()=>n.call(o??this.editor)}}const tL=k.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Dh{static isNative(t){return!!tL[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||_t}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const o=t.toLowerCase(),r=Om(o,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[o];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(l.func.call(this.scope,r)===!1)return r.preventDefault(),r}}return r}on(t,n,o,r){if(n===!1&&(n=_t),n){const s={func:n,removed:!1};r&&k.extend(s,r);const a=t.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=o?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(t,n){if(t){const o=t.toLowerCase().split(" ");let r=o.length;for(;r--;){const s=o[r];let a=this.bindings[s];if(!s)return xt(this.bindings,((i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]})),this;if(a){if(n){const i=Zo(a,(l=>l.func===n));a=i.fail,this.bindings[s]=a,K(i.pass,(l=>{l.removed=!0}))}else a.length=0;a.length||(this.toggleEvent(t,!1),delete this.bindings[s])}}}else xt(this.bindings,((o,r)=>{this.toggleEvent(r,!1)})),this.bindings={};return this}once(t,n,o){return this.on(t,n,o,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||n.length===0)}}const Cc=e=>(e._eventDispatcher||(e._eventDispatcher=new Dh({scope:e,toggleEvent:(t,n)=>{Dh.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),Rh={fire(e,t,n){return K1("fire"),this.dispatch(e,t,n)},dispatch(e,t,n){const o=this;if(o.removed&&e!=="remove"&&e!=="detach")return Om(e.toLowerCase(),t??{},o);const r=Cc(o).dispatch(e,t);if(n!==!1&&o.parent){let s=o.parent();for(;s&&!r.isPropagationStopped();)s.dispatch(e,r,!1),s=s.parent?s.parent():void 0}return r},on(e,t,n){return Cc(this).on(e,t,n)},off(e,t){return Cc(this).off(e,t)},once(e,t){return Cc(this).once(e,t)},hasEventListeners(e){return Cc(this).has(e)}},Hu=Nt.DOM;let Fa;const $u=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=Fb(e);return n?(e.eventRoot||(e.eventRoot=Hu.select(n)[0]),e.eventRoot):e.getBody()},x_=(e,t,n)=>{(o=>!o.hidden&&!rs(o))(e)?e.dispatch(t,n):rs(e)&&((o,r)=>{if((s=>s.type==="click")(r)&&!me.metaKeyPressed(r)){const s=E.fromDom(r.target);((a,i)=>Cs(i,"a",(l=>pe(l,E.fromDom(a.getBody())))).bind((l=>at(l,"href"))))(o,s).each((a=>{if(r.preventDefault(),/^#/.test(a)){const i=o.dom.select(`${a},[name="${us(a,"#")}"]`);i.length&&o.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))}else(s=>Se(KR,s.type))(r)&&o.dispatch(r.type,r)})(e,n)},w_=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=$u(e,t);if(Fb(e)){if(Fa||(Fa={},e.editorManager.on("removeEditor",(()=>{e.editorManager.activeEditor||Fa&&(xt(Fa,((r,s)=>{e.dom.unbind($u(e,s))})),Fa=null)}))),Fa[t])return;const o=r=>{const s=r.target,a=e.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||Hu.isChildOf(s,l))&&x_(a[i],t,r)}};Fa[t]=o,Hu.bind(n,t,o)}else{const o=r=>{x_(e,t,r)};Hu.bind(n,t,o),e.delegates[t]=o}},S_={...Rh,bindPendingEventDelegates(){const e=this;k.each(e._pendingNativeEvents,(t=>{w_(e,t)}))},toggleNativeEvent(e,t){const n=this;e!=="focus"&&e!=="blur"&&(n.removed||(t?n.initialized?w_(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind($u(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(xt(e.delegates,((o,r)=>{e.dom.unbind($u(e,r),r,o)})),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},nL=e=>we(e)?{value:e.split(/[ ,]/),valid:!0}:Mn(e,we)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},E_=(e,t)=>e+(ms(t.message)?"":`. ${t.message}`),k_=e=>e.valid,Oh=(e,t,n="")=>{const o=t(e);return xn(o)?o?{value:e,valid:!0}:{valid:!1,message:n}:o},Vi=e=>e.readonly,oL=["design","readonly"],__=(e,t,n,o)=>{const r=n[t.get()],s=n[o];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${o}:`,a)}r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&((a,i)=>{const l=E.fromDom(a.getBody());i?(a.readonly=!0,a.hasEditableRoot()&&(l.dom.contentEditable="true"),Ox(a)):(a.readonly=!1,Bx(a))})(e,s.editorReadOnly),t.set(o),((a,i)=>{a.dispatch("SwitchMode",{mode:i})})(e,o)},rL=e=>{const t=tn("design"),n=tn({design:{activate:ke,deactivate:ke,editorReadOnly:!1},readonly:{activate:ke,deactivate:ke,editorReadOnly:!0}});return(o=>{const r=a=>{Vi(o)&&(i=>Ct(i,(l=>l.type==="characterData"||l.type==="childList")))(a)&&(i=>{const l=i.undoManager.add();ee(l)&&(i.undoManager.undo(),i.undoManager.reset())})(o)},s=new MutationObserver(r);o.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",(a=>{Vi(o)&&a.preventDefault()})),o.on("BeforeExecCommand",(a=>{a.command!=="Undo"&&a.command!=="Redo"||!Vi(o)||a.preventDefault()})),o.on("compositionstart",(()=>{Vi(o)&&s.observe(o.getBody(),{characterData:!0,childList:!0,subtree:!0})})),o.on("compositionend",(()=>{if(Vi(o)){const a=s.takeRecords();r(a)}s.disconnect()}))})(e),(o=>{(r=>{r.serializer?Lx(r):r.on("PreInit",(()=>{Lx(r)}))})(o),(r=>{r.on("ShowCaret ObjectSelected",(s=>{rs(r)&&s.preventDefault()})),r.on("DisabledStateChange",(s=>{s.isDefaultPrevented()||Px(r,s.state)}))})(o)})(e),{isReadOnly:()=>Vi(e),set:o=>((r,s,a,i)=>{if(!(i===a.get()||r.initialized&&rs(r))){if(!Fe(s,i))throw new Error(`Editor mode '${i}' is invalid`);r.initialized?__(r,a,s,i):r.on("init",(()=>__(r,a,s,i)))}})(e,n.get(),t,o),get:()=>t.get(),register:(o,r)=>{n.set(((s,a,i)=>{if(Se(oL,a))throw new Error(`Cannot override default mode ${a}`);return{...s,[a]:{...i,deactivate:()=>{try{i.deactivate()}catch(l){console.error(`problem while deactivating editor mode ${a}:`,l)}}}}})(n.get(),o,r))}}},Bh=k.each,Ph=k.explode,sL={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},N_=k.makeMap("alt,ctrl,shift,meta,access"),aL=e=>{const t={},n=p.os.isMacOS()||p.os.isiOS();Bh(Ph(e.toLowerCase(),"+"),(s=>{(a=>a in N_)(s)?t[s]=!0:/^[0-9]{2,}$/.test(s)?t.keyCode=parseInt(s,10):(t.charCode=s.charCodeAt(0),t.keyCode=sL[s]||s.toUpperCase().charCodeAt(0))}));const o=[t.keyCode];let r;for(r in N_)t[r]?o.push(r):t[r]=!1;return t.id=o.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class A_{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",(o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(Bh(n.shortcuts,(r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),o.type==="keydown"&&n.executeShortcutAction(r))})),n.matchShortcut(o,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&o.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))}))}add(t,n,o,r){const s=this,a=s.normalizeCommandFunc(o);return Bh(Ph(k.trim(t)),(i=>{const l=s.createShortcut(i,n,a,r);s.shortcuts[l.id]=l})),!0}remove(t){const n=this.createShortcut(t);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(t){const n=this,o=t;return typeof o=="string"?()=>{n.editor.execCommand(o,!1,null)}:k.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(t,n,o,r){const s=k.map(Ph(t,">"),aL);return s[s.length-1]=k.extend(s[s.length-1],{func:o,scope:r||this.editor}),k.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!!n&&n.ctrl===t.ctrlKey&&n.meta===t.metaKey&&n.alt===t.altKey&&n.shift===t.shiftKey&&!!(t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode)&&(t.preventDefault(),!0)}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const iL=()=>{const e=(()=>{const t={},n={},o={},r={},s={},a={},i={},l={},c={},d=(f,g)=>(h,b)=>{f[h.toLowerCase()]={...b,type:g}};return{addButton:d(t,"button"),addGroupToolbarButton:d(t,"grouptoolbarbutton"),addToggleButton:d(t,"togglebutton"),addMenuButton:d(t,"menubutton"),addSplitButton:d(t,"splitbutton"),addMenuItem:d(n,"menuitem"),addNestedMenuItem:d(n,"nestedmenuitem"),addToggleMenuItem:d(n,"togglemenuitem"),addAutocompleter:d(o,"autocompleter"),addContextMenu:d(s,"contextmenu"),addContextToolbar:d(a,"contexttoolbar"),addContextForm:(m=a,(f,g)=>{m[f.toLowerCase()]={type:"contextform",...g}}),addSidebar:d(l,"sidebar"),addView:d(c,"views"),addIcon:(f,g)=>r[f.toLowerCase()]=g,addContext:(f,g)=>i[f.toLowerCase()]=g,getAll:()=>({buttons:t,menuItems:n,icons:r,popups:o,contextMenus:s,contextToolbars:a,sidebars:l,views:c,contexts:i})};var m})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},ja=Nt.DOM,T_=k.extend,lL=k.each;class qu{constructor(t,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=o,T_(this,S_);const r=this;this.id=t,this.editorUid=Ec(),this.hidden=!1;const s=((g,h)=>{const b=Qu(h);return $P(g_||jP,g_,b,g,b)})(o.defaultOptions,n);this.options=((g,h,b=h)=>{const v={},y={},S=(D,T,R)=>{const P=Oh(T,R);return k_(P)?(y[D]=P.value,!0):(console.warn(E_(`Invalid value passed for the ${D} option`,P)),!1)},N=D=>Fe(v,D);return{register:(D,T)=>{const R=(L=>we(L.processor))(T)?(L=>{const F=(()=>{switch(L){case"array":return re;case"boolean":return xn;case"function":return bt;case"number":return x;case"object":return Ue;case"string":return we;case"string[]":return nL;case"object[]":return W=>Mn(W,Ue);case"regexp":return W=>xo(W,RegExp);default:return zt}})();return W=>Oh(W,F,`The value must be a ${L}.`)})(T.processor):T.processor,P=((L,F,W)=>{if(!Mt(F)){const O=Oh(F,W);if(k_(O))return O.value;console.error(E_(`Invalid default value passed for the "${L}" option`,O))}})(D,T.default,R);v[D]={...T,default:P,processor:R},Bt(y,D).orThunk((()=>Bt(h,D))).each((L=>S(D,L,R)))},isRegistered:N,get:D=>Bt(y,D).orThunk((()=>Bt(v,D).map((T=>T.default)))).getOrUndefined(),set:(D,T)=>{if(N(D)){const R=v[D];return R.immutable?(console.error(`"${D}" is an immutable option and cannot be updated`),!1):S(D,T,R.processor)}return console.warn(`"${D}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:D=>{const T=N(D);return T&&delete y[D],T},isSet:D=>Fe(y,D),debug:()=>{try{console.log(JSON.parse(JSON.stringify(b,((D,T)=>xn(T)||x(T)||we(T)||Ge(T)||re(T)||Re(T)?T:Object.prototype.toString.call(T)))))}catch(D){console.error(D)}}}})(0,s,n),(g=>{const h=g.options.register;h("id",{processor:"string",default:g.id}),h("selector",{processor:"string"}),h("target",{processor:"object"}),h("suffix",{processor:"string"}),h("cache_suffix",{processor:"string"}),h("base_url",{processor:"string"}),h("referrer_policy",{processor:"string",default:""}),h("crossorigin",{processor:"function",default:le(void 0)}),h("language_load",{processor:"boolean",default:!0}),h("inline",{processor:"boolean",default:!1}),h("iframe_attrs",{processor:"object",default:{}}),h("doctype",{processor:"string",default:"<!DOCTYPE html>"}),h("document_base_url",{processor:"string",default:g.editorManager.documentBaseURL}),h("body_id",{processor:Ab(g,"tinymce"),default:"tinymce"}),h("body_class",{processor:Ab(g),default:""}),h("content_security_policy",{processor:"string",default:""}),h("br_in_pre",{processor:"boolean",default:!0}),h("forced_root_block",{processor:b=>{const v=we(b)&&Eo(b);return v?{value:b,valid:v}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),h("forced_root_block_attrs",{processor:"object",default:{}}),h("newline_behavior",{processor:b=>{const v=Se(["block","linebreak","invert","default"],b);return v?{value:b,valid:v}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),h("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),h("no_newline_selector",{processor:"string",default:""}),h("keep_styles",{processor:"boolean",default:!0}),h("end_container_on_empty_block",{processor:b=>xn(b)||we(b)?{valid:!0,value:b}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),h("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),h("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),h("font_size_classes",{processor:"string",default:""}),h("automatic_uploads",{processor:"boolean",default:!0}),h("images_reuse_filename",{processor:"boolean",default:!1}),h("images_replace_blob_uris",{processor:"boolean",default:!0}),h("icons",{processor:"string",default:""}),h("icons_url",{processor:"string",default:""}),h("images_upload_url",{processor:"string",default:""}),h("images_upload_base_path",{processor:"string",default:""}),h("images_upload_credentials",{processor:"boolean",default:!1}),h("images_upload_handler",{processor:"function"}),h("language",{processor:"string",default:"en"}),h("language_url",{processor:"string",default:""}),h("entity_encoding",{processor:"string",default:"named"}),h("indent",{processor:"boolean",default:!0}),h("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),h("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),h("indent_use_margin",{processor:"boolean",default:!1}),h("indentation",{processor:"string",default:"40px"}),h("content_css",{processor:b=>{const v=b===!1||we(b)||Mn(b,we);return v?we(b)?{value:We(b.split(","),xr),valid:v}:re(b)?{value:b,valid:v}:b===!1?{value:[],valid:v}:{value:b,valid:v}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:nf(g)?[]:["default"]}),h("content_style",{processor:"string"}),h("content_css_cors",{processor:"boolean",default:!1}),h("font_css",{processor:b=>{const v=we(b)||Mn(b,we);return v?{value:re(b)?b:We(b.split(","),xr),valid:v}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),h("extended_mathml_attributes",{processor:"string[]"}),h("extended_mathml_elements",{processor:"string[]"}),h("inline_boundaries",{processor:"boolean",default:!0}),h("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),h("object_resizing",{processor:b=>{const v=xn(b)||we(b);return v?b===!1||Jm.isiPhone()||Jm.isiPad()?{value:"",valid:v}:{value:b===!0?"table,img,figure.image,div,video,iframe":b,valid:v}:{valid:!1,message:"Must be boolean or a string"}},default:!WN}),h("resize_img_proportional",{processor:"boolean",default:!0}),h("event_root",{processor:"string"}),h("service_message",{processor:"string"}),h("onboarding",{processor:"boolean",default:!0}),h("tiny_cloud_entry_url",{processor:"string"}),h("theme",{processor:b=>b===!1||we(b)||bt(b),default:"silver"}),h("theme_url",{processor:"string"}),h("formats",{processor:"object"}),h("format_empty_lines",{processor:"boolean",default:!1}),h("format_noneditable_selector",{processor:"string",default:""}),h("preview_styles",{processor:b=>{const v=b===!1||we(b);return v?{value:b===!1?"":b,valid:v}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),h("custom_ui_selector",{processor:"string",default:""}),h("hidden_input",{processor:"boolean",default:!0}),h("submit_patch",{processor:"boolean",default:!0}),h("encoding",{processor:"string"}),h("add_form_submit_trigger",{processor:"boolean",default:!0}),h("add_unload_trigger",{processor:"boolean",default:!0}),h("custom_undo_redo_levels",{processor:"number",default:0}),h("disable_nodechange",{processor:"boolean",default:!1}),h("disabled",{processor:b=>xn(b)?(g.initialized&&vd(g)!==b&&Promise.resolve().then((()=>{((v,y)=>{v.dispatch("DisabledStateChange",{state:y})})(g,b)})),{valid:!0,value:b}):{valid:!1,message:"The value must be a boolean."},default:!1}),h("readonly",{processor:"boolean",default:!1}),h("editable_root",{processor:"boolean",default:!0}),h("plugins",{processor:"string[]",default:[]}),h("external_plugins",{processor:"object"}),h("forced_plugins",{processor:"string[]"}),h("model",{processor:"string",default:g.hasPlugin("rtc")?"plugin":"dom"}),h("model_url",{processor:"string"}),h("block_unsupported_drop",{processor:"boolean",default:!0}),h("visual",{processor:"boolean",default:!0}),h("visual_table_class",{processor:"string",default:"mce-item-table"}),h("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),h("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(g.hasPlugin("help")?". Press ALT-0 for help.":"")}),h("setup",{processor:"function"}),h("init_instance_callback",{processor:"function"}),h("url_converter",{processor:"function",default:g.convertURL}),h("url_converter_scope",{processor:"object",default:g}),h("urlconverter_callback",{processor:"function"}),h("allow_conditional_comments",{processor:"boolean",default:!1}),h("allow_html_data_urls",{processor:"boolean",default:!1}),h("allow_svg_data_urls",{processor:"boolean"}),h("allow_html_in_named_anchor",{processor:"boolean",default:!1}),h("allow_html_in_comments",{processor:"boolean",default:!1}),h("allow_script_urls",{processor:"boolean",default:!1}),h("allow_unsafe_link_target",{processor:"boolean",default:!1}),h("allow_mathml_annotation_encodings",{processor:b=>{const v=Mn(b,we);return v?{value:b,valid:v}:{valid:!1,message:"Must be an array of strings."}},default:[]}),h("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),h("fix_list_elements",{processor:"boolean",default:!1}),h("preserve_cdata",{processor:"boolean",default:!1}),h("remove_trailing_brs",{processor:"boolean",default:!0}),h("pad_empty_with_br",{processor:"boolean",default:!1}),h("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),h("element_format",{processor:"string",default:"html"}),h("entities",{processor:"string"}),h("schema",{processor:"string",default:"html5"}),h("convert_urls",{processor:"boolean",default:!0}),h("relative_urls",{processor:"boolean",default:!0}),h("remove_script_host",{processor:"boolean",default:!0}),h("custom_elements",{processor:hd}),h("extended_valid_elements",{processor:"string"}),h("invalid_elements",{processor:"string"}),h("invalid_styles",{processor:hd}),h("valid_children",{processor:"string"}),h("valid_classes",{processor:hd}),h("valid_elements",{processor:"string"}),h("valid_styles",{processor:hd}),h("verify_html",{processor:"boolean",default:!0}),h("auto_focus",{processor:b=>we(b)||b===!0}),h("browser_spellcheck",{processor:"boolean",default:!1}),h("protect",{processor:"array"}),h("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),h("deprecation_warnings",{processor:"boolean",default:!0}),h("a11y_advanced_options",{processor:"boolean",default:!1}),h("api_key",{processor:"string"}),h("license_key",{processor:"string"}),h("paste_block_drop",{processor:"boolean",default:!1}),h("paste_data_images",{processor:"boolean",default:!0}),h("paste_preprocess",{processor:"function"}),h("paste_postprocess",{processor:"function"}),h("paste_webkit_styles",{processor:"string",default:"none"}),h("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),h("paste_merge_formats",{processor:"boolean",default:!0}),h("smart_paste",{processor:"boolean",default:!0}),h("paste_as_text",{processor:"boolean",default:!1}),h("paste_tab_spaces",{processor:"number",default:4}),h("text_patterns",{processor:b=>Mn(b,Ue)||b===!1?{value:Cb(b===!1?[]:b),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),h("text_patterns_lookup",{processor:b=>{return bt(b)?{value:(v=b,y=>{const S=v(y);return Cb(S)}),valid:!0}:{valid:!1,message:"Must be a single function"};var v},default:b=>[]}),h("noneditable_class",{processor:"string",default:"mceNonEditable"}),h("editable_class",{processor:"string",default:"mceEditable"}),h("noneditable_regexp",{processor:b=>Mn(b,Nb)?{value:b,valid:!0}:Nb(b)?{value:[b],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),h("table_tab_navigation",{processor:"boolean",default:!0}),h("highlight_on_focus",{processor:"boolean",default:!0}),h("xss_sanitization",{processor:"boolean",default:!0}),h("details_initial_state",{processor:b=>{const v=Se(["inherited","collapsed","expanded"],b);return v?{value:b,valid:v}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),h("details_serialized_state",{processor:b=>{const v=Se(["inherited","collapsed","expanded"],b);return v?{value:b,valid:v}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),h("init_content_sync",{processor:"boolean",default:!1}),h("newdocument_content",{processor:"string",default:""}),h("sandbox_iframes",{processor:"boolean",default:!0}),h("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),h("convert_unsafe_embeds",{processor:"boolean",default:!0}),h("user_id",{processor:"string",default:"Anonymous"}),h("fetch_users",{processor:b=>b===void 0?{valid:!0,value:void 0}:bt(b)?{valid:!0,value:b}:{valid:!1,message:"fetch_users must be a function that returns a Promise<ExpectedUser[]>"}}),g.on("ScriptsLoaded",(()=>{h("directionality",{processor:"string",default:lr.isRtl()?"rtl":void 0}),h("placeholder",{processor:"string",default:VN.getAttrib(g.getElement(),"placeholder")})})),h("lists_indent_on_tab",{processor:"boolean",default:!0}),h("list_max_depth",{processor:b=>{const v=x(b);if(v){if(b<0)throw new Error("list_max_depth cannot be set to lower than 0");return{value:b,valid:v}}return{valid:!1,message:"Must be a number"}}})})(r),this.userLookup=(g=>{const h=new Map,b=new Map,v=N=>_.from(h.get(N)),y=(N,D)=>_.from(b.get(N)).each((({reject:T})=>{T(D),b.delete(N)})),S=fT(g);return Object.freeze({userId:S,fetchUsers:N=>{const D=pT(g);if(!Array.isArray(N))return{};if(!D)return _n(N,(R=>Promise.resolve({id:R,name:R,avatar:Nh({id:R,name:R})})));const T=So(Oe(N,(R=>!v(R).isSome())));return K(T,(R=>{const P=new Promise(((L,F)=>{b.set(R,{resolve:L,reject:F})}));((L,F)=>{h.set(F,L)})(P,R)})),T.length>0&&D(T).then(FP).then((R=>{const P=new Set(We(R,(L=>L.id)));K(R,(L=>((F,W)=>_.from(b.get(F)).each((({resolve:O})=>{O(W),b.delete(F)})))(L.id,L))),K(T,(L=>{P.has(L)||y(L,new Error(`User ${L} not found`))}))})).catch((R=>{K(T,(P=>y(P,R instanceof Error?R:new Error("Network error"))))})),Qt(N,((R,P)=>(R[P]=v(P).getOr(Promise.resolve({id:P,name:P,avatar:Nh({id:P,name:P})})),R)),{})}})})(this);const a=this.options.get;a("deprecation_warnings")&&((g,h)=>{((b,v)=>{const y=hR(b),S=vR(v),N=S.length>0,D=y.length>0,T=v.theme==="mobile";if(N||D||T){const P=T?`

Themes:
- mobile`:"",L=N?`

Plugins:
- ${S.join(`
- `)}`:"",F=D?`

Options:
- ${y.join(`
- `)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 8.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/8/migration-from-7x/ for more information."+P+L+F)}})(g,h),((b,v)=>{const y=bR(b),S=yR(v),N=S.length>0,D=y.length>0;if(N||D){const R=N?`

Plugins:
- ${S.map(CR).join(`
- `)}`:"",P=D?`

Options:
- ${y.join(`
- `)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+R+P)}})(g,h)})(n,s);const i=a("suffix");i&&(o.suffix=i),this.suffix=o.suffix;const l=a("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const c=Zm(r);c&&(Tr.ScriptLoader._setReferrerPolicy(c),Nt.DOM.styleSheetLoader._setReferrerPolicy(c)),Tr.ScriptLoader._setCrossOrigin((g=>ef(r)(g,"script"))),Nt.DOM.styleSheetLoader._setCrossOrigin((g=>ef(r)(g,"stylesheet")));const d=zb(r);ee(d)&&Nt.DOM.styleSheetLoader._setContentCssCors(d),zn.languageLoad=a("language_load"),zn.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new Qo(Tb(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=nf(r),this.hasVisual=LA(r),this.shortcuts=new A_(this),this.editorCommands=new C_(this),ZP(this);const m=a("cache_suffix");m&&(p.cacheSuffix=m.replace(/^[\?\&]+/,"")),this.ui={registry:iL(),styleSheetLoader:void 0,show:ke,hide:ke,setEnabled:ke,isEnabled:zt},this.mode=rL(r),Object.defineProperty(this,"editorUid",{writable:!1,configurable:!1,enumerable:!0}),o.dispatch("SetupEditor",{editor:this});const f=IA(r);bt(f)&&f.call(r,r)}render(){(t=>{const n=t.id;lr.setCode(Pb(t));const o=()=>{Ia.unbind(window,"ready",o),t.render()};if(!ga.Event.domLoaded)return void Ia.bind(window,"ready",o);if(!t.getElement())return;const r=E.fromDom(t.getElement()),s=Zt(r);t.on("remove",(()=>{br(r.dom.attributes,(i=>rt(r,i.name))),Ne(r,s)})),t.ui.styleSheetLoader=((i,l)=>p0.forElement(i,{contentCssCors:zb(l),referrerPolicy:Zm(l)}))(r,t),nf(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const a=t.getElement().form||Ia.getParent(n,"form");a&&(t.formElement=a,_A(t)&&!mm(t.getElement())&&(Ia.insertAfter(Ia.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=i=>{t.dispatch(i.type,i)},Ia.bind(a,"submit reset",t.formEventDelegate),t.on("reset",(()=>{t.resetContent()})),!NA(t)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),a._mceOldSubmit(a)))),t.windowManager=Ex(t),t.notificationManager=Sx(t),(i=>i.options.get("encoding")==="xml")(t)&&t.on("GetContent",(i=>{i.save&&(i.content=Ia.encode(i.content))})),AA(t)&&t.on("submit",(()=>{t.initialized&&t.save()})),TA(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),LP(t,t.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return Ai(this)}translate(t){return lr.translate(t)}getParam(t,n,o){const r=this.options;return r.isRegistered(t)||(ee(o)?r.register(t,{processor:o,default:n}):r.register(t,{processor:zt,default:n})),r.isSet(t)||Mt(n)?r.get(t):n}hasPlugin(t,n){return!(!Se(Ol(this),t)||n&&Bi.get(t)===void 0)}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,o){this.editorCommands.addCommand(t,n,o)}addQueryStateHandler(t,n,o){this.editorCommands.addQueryStateHandler(t,n,o)}addQueryValueHandler(t,n,o){this.editorCommands.addQueryValueHandler(t,n,o)}addShortcut(t,n,o,r){this.shortcuts.add(t,n,o,r)}execCommand(t,n,o,r){return this.editorCommands.execCommand(t,n,o,r)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(ja.show(t.getContainer()),ja.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(ja.hide(t.getContainer()),ja.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,o=n.getElement();if(!n.removed&&o){const r={...t,load:!0},s=mm(o)?o.value:o.innerHTML;n.setContent(s,r),r.no_events||n.dispatch("LoadContent",{...r,element:o})}}save(t={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r={...t,save:!0,element:o};let s=n.getContent(r);const a={...r,content:s};if(a.no_events||n.dispatch("SaveContent",a),a.format==="raw"&&n.dispatch("RawSaveContent",a),s=a.content,mm(o))o.value=s;else{!t.is_removing&&n.inline||(o.innerHTML=s);const i=ja.getParent(n.id,"form");i&&lL(i.elements,(l=>l.name!==n.id||(l.value=s,!1)))}return a.element=r.element=o=null,a.set_dirty!==!1&&n.setDirty(!1),s}setContent(t,n){qp(this,t,n)}getContent(t){return((n,o={})=>{const r=((s,a)=>({...s,format:a,get:!0,getInner:!0}))(o,o.format?o.format:"html");return H1(n,r).fold(gt,(s=>{const a=((i,l)=>$p(i).editor.getContent(l))(n,s);return $1(n,a,s)}))})(this,t)}insertContent(t,n){n&&(t=T_({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?qp(this,this.startContent,{initial:!0,format:"raw"}):qp(this,t,{initial:!0}),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||ja.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=ja.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const o=this.getDoc();return(n=(t=this.bodyElement)!==null&&t!==void 0?t:o?.body)!==null&&n!==void 0?n:null}convertURL(t,n,o){const r=this,s=r.options.get,a=jA(r);if(bt(a))return a.call(r,t,o,!0,n);if(!s("convert_urls")||o==="link"||Ue(o)&&o.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0)return t;const i=new Qo(t);return i.protocol!=="http"&&i.protocol!=="https"&&i.protocol!==""?t:s("relative_urls")?r.documentBaseURI.toRelative(t):t=r.documentBaseURI.toAbsolute(t,s("remove_script_host"))}addVisual(t){((n,o)=>{((r,s)=>{cn(r).editor.addVisual(s)})(n,o)})(this,t)}setEditableRoot(t){((n,o)=>{n._editableRoot!==o&&(n._editableRoot=o,rs(n)||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),((r,s)=>{r.dispatch("EditableRootStateChange",{state:s})})(n,o))})(this,t)}hasEditableRoot(){return this._editableRoot}remove(){(t=>{if(!t.removed){const{_selectionOverrides:n,editorUpload:o}=t,r=t.getBody(),s=t.getElement();r&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&ee(s?.nextSibling)&&tu.remove(s.nextSibling),(a=>{a.dispatch("remove")})(t),t.editorManager.remove(t),!t.inline&&r&&(a=>{tu.setStyle(a.id,"display",a.orgDisplay)})(t),(a=>{a.dispatch("detach")})(t),tu.remove(t.getContainer()),nu(n),nu(o),t.destroy()}})(this)}destroy(t){((n,o)=>{const{selection:r,dom:s}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),nu(r),nu(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),tu.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;if(l){const c=l.dom;i.selection=l.win=l.dom=c.doc=null}})(n),n.destroyed=!0):n.remove())})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Ki=Nt.DOM,Wu=k.each;let Vu,D_=!1,to=[];const Ku=e=>{const t=e.type;Wu(Fs.get(),(n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}}))},R_=e=>{if(e!==D_){const t=Nt.DOM;e?(t.bind(window,"resize",Ku),t.bind(window,"scroll",Ku)):(t.unbind(window,"resize",Ku),t.unbind(window,"scroll",Ku)),D_=e}},O_=e=>{const t=to;return to=Oe(to,(n=>e!==n)),Fs.activeEditor===e&&(Fs.activeEditor=to.length>0?to[0]:null),Fs.focusedEditor===e&&(Fs.focusedEditor=null),t.length!==to.length},cL=document.compatMode!=="CSS1Compat",Fs={...Rh,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,pageUid:Ec(),majorVersion:"8",minorVersion:"1.2",releaseDate:"TBD",i18n:lr,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",o=Qo.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)t=r.base||r.baseURL,n=r.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(l==="")continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){c.indexOf(".min")!==-1&&(n=".min"),t=l.substring(0,l.lastIndexOf("/"));break}}if(!t&&document.currentScript){const i=document.currentScript.src;i.indexOf(".min")!==-1&&(n=".min"),t=i.substring(0,i.lastIndexOf("/"))}}var s;e.baseURL=new Qo(o).toAbsolute(t),e.documentBaseURL=o,e.baseURI=new Qo(e.baseURL),e.suffix=n,(s=e).on("AddEditor",ye(HT,s)),s.on("RemoveEditor",ye($T,s)),K(["majorVersion","minorVersion","releaseDate","pageUid","_addLicenseKeyManager"],(a=>Object.defineProperty(e,a,{writable:!1,configurable:!1,enumerable:!0})))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const o=e.plugin_base_urls;o!==void 0&&xt(o,((r,s)=>{zn.PluginManager.urls[s]=r}))},init(e){const t=this;let n;const o=k.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=a=>{n=a};const s=()=>{let a=0;const i=[];let l;Ki.unbind(window,"ready",s),(()=>{const c=e.onpageload;c&&c.apply(t,[])})(),l=So((c=>p.browser.isIE()||p.browser.isEdge()?(su("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/8/support/#supportedwebbrowsers"),[]):cL?(su("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):we(c.selector)?Ki.select(c.selector):ee(c.target)?[c.target]:[])(e)),k.each(l,(c=>{var d;(d=t.get(c.id))&&d.initialized&&!(d.getContainer()||d.getBody()).parentNode&&(O_(d),d.unbindAllNativeEvents(),d.destroy(!0),d.removed=!0)})),l=k.grep(l,(c=>!t.get(c.id))),l.length===0?r([]):Wu(l,(c=>{((d,m)=>d.inline&&m.tagName.toLowerCase()in o)(e,c)?su("Could not initialize inline editor on invalid inline target element",c):((d,m,f)=>{const g=new qu(d,m,t);i.push(g),g.on("init",(()=>{++a===l.length&&r(i)})),g.targetElm=g.targetElm||f,g.render()})((d=>{let m=d.id;return m||(m=Bt(d,"name").filter((f=>!Ki.get(f))).getOrThunk(Ki.uniqueId),d.setAttribute("id",m)),m})(c),e,c)}))};return Ki.bind(window,"ready",s),new Promise((a=>{n?a(n):r=i=>{a(i)}}))},get(e){return arguments.length===0?to.slice(0):we(e)?qt(to,(t=>t.id===e)).getOr(null):x(e)&&to[e]?to[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&to.push(e),R_(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),Vu||(Vu=o=>{const r=t.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",Vu))),e},createEditor(e,t){return this.add(new qu(e,t,this))},remove(e){const t=this;let n;if(e){if(!we(e))return n=e,Ge(t.get(n.id))?null:(O_(n)&&t.dispatch("RemoveEditor",{editor:n}),to.length===0&&window.removeEventListener("beforeunload",Vu),n.remove(),R_(to.length>0),n);Wu(Ki.select(e),(o=>{n=t.get(o.id),n&&t.remove(n)}))}else for(let o=to.length-1;o>=0;o--)t.remove(to[o])},execCommand(e,t,n){var o;const r=this,s=Ue(n)?(o=n.id)!==null&&o!==void 0?o:n.index:n;switch(e){case"mceAddEditor":if(!r.get(s)){const a=n.options;new qu(s,a,r).render()}return!0;case"mceRemoveEditor":{const a=r.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=r.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:()=>{Wu(to,(e=>{e.save()}))},addI18n:(e,t)=>{lr.add(e,t)},translate:e=>lr.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Qo(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Qo(this.baseURL)},_addLicenseKeyManager:e=>Kp.add(e)};Fs.setup();const dL=(()=>{const e=Wo();return{FakeClipboardItem:t=>({items:t,types:pn(t),getType:n=>Bt(t,n).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),B_=Math.min,Xi=Math.max,Xu=Math.round,P_=(e,t,n)=>{let o=t.x,r=t.y;const s=e.w,a=e.h,i=t.w,l=t.h,c=(n||"").split("");return c[0]==="b"&&(r+=l),c[1]==="r"&&(o+=i),c[0]==="c"&&(r+=Xu(l/2)),c[1]==="c"&&(o+=Xu(i/2)),c[3]==="b"&&(r-=a),c[4]==="r"&&(o-=s),c[3]==="c"&&(r-=Xu(a/2)),c[4]==="c"&&(o-=Xu(s/2)),Yi(o,r,s,a)},Yi=(e,t,n,o)=>({x:e,y:t,w:n,h:o}),uL={inflate:(e,t,n)=>Yi(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:P_,findBestRelativePosition:(e,t,n,o)=>{for(let r=0;r<o.length;r++){const s=P_(e,t,o[r]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return o[r]}return null},intersect:(e,t)=>{const n=Xi(e.x,t.x),o=Xi(e.y,t.y),r=B_(e.x+e.w,t.x+t.w),s=B_(e.y+e.h,t.y+t.h);return r-n<0||s-o<0?null:Yi(n,o,r-n,s-o)},clamp:(e,t,n)=>{let o=e.x,r=e.y,s=e.x+e.w,a=e.y+e.h;const i=t.x+t.w,l=t.y+t.h,c=Xi(0,t.x-o),d=Xi(0,t.y-r),m=Xi(0,s-i),f=Xi(0,a-l);return o+=c,r+=d,n&&(s+=c,a+=d,o-=m,r-=f),s-=m,a-=f,Yi(o,r,s-o,a-r)},create:Yi,fromClientRect:e=>Yi(e.left,e.top,e.width,e.height)},mL=(()=>{const e={},t={},n={};return{load:(o,r)=>{const s=`Script at URL "${r}" failed to load`,a=`Script at URL "${r}" did not call \`tinymce.Resource.add('${o}', data)\` within 1 second`;if(e[o]!==void 0)return e[o];{const i=new Promise(((l,c)=>{const d=((m,f,g=1e3)=>{let h=!1,b=null;const v=N=>(...D)=>{h||(h=!0,b!==null&&(window.clearTimeout(b),b=null),N.apply(null,D))},y=v(m),S=v(f);return{start:(...N)=>{h||b!==null||(b=window.setTimeout((()=>S.apply(null,N)),g))},resolve:y,reject:S}})(l,c);t[o]=d.resolve,Tr.ScriptLoader.loadScript(r).then((()=>d.start(a)),(()=>d.reject(s)))}));return e[o]=i,i}},add:(o,r)=>{t[o]!==void 0&&(t[o](r),delete t[o]),e[o]=Promise.resolve(r),n[o]=r},has:o=>o in n,get:o=>n[o],unload:o=>{delete e[o],delete n[o]}}})();let xc;try{const e="__storage_test__";xc=window.localStorage,xc.setItem(e,e),xc.removeItem(e)}catch{xc=(()=>{let t={},n=[];const o={getItem:r=>t[r]||null,setItem:(r,s)=>{n.push(r),t[r]=String(s)},key:r=>n[r],removeItem:r=>{n=n.filter((s=>s===r)),delete t[r]},clear:()=>{n=[],t={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const fL={geom:{Rect:uL},util:{Delay:Lo,Tools:k,VK:me,URI:Qo,EventDispatcher:Dh,Observable:Rh,I18n:lr,LocalStorage:xc,ImageUploader:e=>{const t=Ix(),n=jx(e,t);return{upload:(o,r=!0)=>n.upload(o,r?Fx(e):void 0)}}},dom:{EventUtils:ga,TreeWalker:ln,TextSeeker:ba,DOMUtils:Nt,ScriptLoader:Tr,RangeUtils:Pr,Serializer:Cx,StyleSheetLoader:f0,ControlSelection:Qv,BookmarkManager:_i,Selection:yx,Event:ga.Event},html:{Styles:Rm,Entities:pa,Node:On,Schema:ws,DomParser:Ri,Writer:Ey,Serializer:Ds},Env:p,AddOnManager:zn,Annotator:Uv,Formatter:Hx,UndoManager:qx,EditorCommands:C_,WindowManager:Ex,NotificationManager:Sx,EditorObservable:S_,Shortcuts:A_,Editor:qu,FocusManager:Vv,EditorManager:Fs,DOM:Nt.DOM,ScriptLoader:Tr.ScriptLoader,PluginManager:Bi,ThemeManager:Ta,ModelManager:Oi,IconManager:ou,Resource:mL,FakeClipboard:dL,trim:k.trim,isArray:k.isArray,is:k.is,toArray:k.toArray,makeMap:k.makeMap,each:k.each,map:k.map,grep:k.grep,inArray:k.inArray,extend:k.extend,walk:k.walk,resolve:k.resolve,explode:k.explode,_addCacheSuffix:k._addCacheSuffix},L_=k.extend(Fs,fL);(e=>{window.tinymce=e,window.tinyMCE=e})(L_),(e=>{if(typeof module=="object")try{module.exports=e}catch{}})(L_)})();/*! jQuery v3.7.1 | (c) OpenJS Foundation and other contributors | jquery.org/license */(function(ve,Ke){"use strict";typeof module=="object"&&typeof module.exports=="object"?module.exports=ve.document?Ke(ve,!0):function(Ye){if(!Ye.document)throw new Error("jQuery requires a window with a document");return Ke(Ye)}:Ke(ve)})(typeof window<"u"?window:this,function(ve,Ke){"use strict";var Ye=[],qe=Object.getPrototypeOf,it=Ye.slice,Gt=Ye.flat?function(u){return Ye.flat.call(u)}:function(u){return Ye.concat.apply([],u)},Pn=Ye.push,rn=Ye.indexOf,Xn={},Co=Xn.toString,Ln=Xn.hasOwnProperty,xo=Ln.toString,we=xo.call(Object),Ue={},Re=function(u){return typeof u=="function"&&typeof u.nodeType!="number"&&typeof u.item!="function"},re=function(u){return u!=null&&u===u.window},Ge=ve.document,xn={type:!0,src:!0,nonce:!0,noModule:!0};function Mt(u,p,C){var w,A,k=(C=C||Ge).createElement("script");if(k.text=u,p)for(w in xn)(A=p[w]||p.getAttribute&&p.getAttribute(w))&&k.setAttribute(w,A);C.head.appendChild(k).parentNode.removeChild(k)}function kt(u){return u==null?u+"":typeof u=="object"||typeof u=="function"?Xn[Co.call(u)]||"object":typeof u}var ee="3.7.1",bt=/HTML$/i,x=function(u,p){return new x.fn.init(u,p)};function Mn(u){var p=!!u&&"length"in u&&u.length,C=kt(u);return!Re(u)&&!re(u)&&(C==="array"||p===0||typeof p=="number"&&0<p&&p-1 in u)}function ke(u,p){return u.nodeName&&u.nodeName.toLowerCase()===p.toLowerCase()}x.fn=x.prototype={jquery:ee,constructor:x,length:0,toArray:function(){return it.call(this)},get:function(u){return u==null?it.call(this):u<0?this[u+this.length]:this[u]},pushStack:function(u){var p=x.merge(this.constructor(),u);return p.prevObject=this,p},each:function(u){return x.each(this,u)},map:function(u){return this.pushStack(x.map(this,function(p,C){return u.call(p,C,p)}))},slice:function(){return this.pushStack(it.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(u,p){return(p+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(u,p){return p%2}))},eq:function(u){var p=this.length,C=+u+(u<0?p:0);return this.pushStack(0<=C&&C<p?[this[C]]:[])},end:function(){return this.prevObject||this.constructor()},push:Pn,sort:Ye.sort,splice:Ye.splice},x.extend=x.fn.extend=function(){var u,p,C,w,A,k,B=arguments[0]||{},E=1,U=arguments.length,V=!1;for(typeof B=="boolean"&&(V=B,B=arguments[E]||{},E++),typeof B=="object"||Re(B)||(B={}),E===U&&(B=this,E--);E<U;E++)if((u=arguments[E])!=null)for(p in u)w=u[p],p!=="__proto__"&&B!==w&&(V&&w&&(x.isPlainObject(w)||(A=Array.isArray(w)))?(C=B[p],k=A&&!Array.isArray(C)?[]:A||x.isPlainObject(C)?C:{},A=!1,B[p]=x.extend(V,k,w)):w!==void 0&&(B[p]=w));return B},x.extend({expando:"jQuery"+(ee+Math.random()).replace(/\D/g,""),isReady:!0,error:function(u){throw new Error(u)},noop:function(){},isPlainObject:function(u){var p,C;return!(!u||Co.call(u)!=="[object Object]")&&(!(p=qe(u))||typeof(C=Ln.call(p,"constructor")&&p.constructor)=="function"&&xo.call(C)===we)},isEmptyObject:function(u){var p;for(p in u)return!1;return!0},globalEval:function(u,p,C){Mt(u,{nonce:p&&p.nonce},C)},each:function(u,p){var C,w=0;if(Mn(u))for(C=u.length;w<C&&p.call(u[w],w,u[w])!==!1;w++);else for(w in u)if(p.call(u[w],w,u[w])===!1)break;return u},text:function(u){var p,C="",w=0,A=u.nodeType;if(!A)for(;p=u[w++];)C+=x.text(p);return A===1||A===11?u.textContent:A===9?u.documentElement.textContent:A===3||A===4?u.nodeValue:C},makeArray:function(u,p){var C=p||[];return u!=null&&(Mn(Object(u))?x.merge(C,typeof u=="string"?[u]:u):Pn.call(C,u)),C},inArray:function(u,p,C){return p==null?-1:rn.call(p,u,C)},isXMLDoc:function(u){var p=u&&u.namespaceURI,C=u&&(u.ownerDocument||u).documentElement;return!bt.test(p||C&&C.nodeName||"HTML")},merge:function(u,p){for(var C=+p.length,w=0,A=u.length;w<C;w++)u[A++]=p[w];return u.length=A,u},grep:function(u,p,C){for(var w=[],A=0,k=u.length,B=!C;A<k;A++)!p(u[A],A)!==B&&w.push(u[A]);return w},map:function(u,p,C){var w,A,k=0,B=[];if(Mn(u))for(w=u.length;k<w;k++)(A=p(u[k],k,C))!=null&&B.push(A);else for(k in u)(A=p(u[k],k,C))!=null&&B.push(A);return Gt(B)},guid:1,support:Ue}),typeof Symbol=="function"&&(x.fn[Symbol.iterator]=Ye[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(u,p){Xn["[object "+p+"]"]=p.toLowerCase()});var In=Ye.pop,$s=Ye.sort,le=Ye.splice,gt="[\\x20\\t\\r\\n\\f]",Jo=new RegExp("^"+gt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+gt+"+$","g");x.contains=function(u,p){var C=p&&p.parentNode;return u===C||!(!C||C.nodeType!==1||!(u.contains?u.contains(C):u.compareDocumentPosition&&16&u.compareDocumentPosition(C)))};var ye=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function qo(u,p){return p?u==="\0"?"\uFFFD":u.slice(0,-1)+"\\"+u.charCodeAt(u.length-1).toString(16)+" ":"\\"+u}x.escapeSelector=function(u){return(u+"").replace(ye,qo)};var po=Ge,gr=Pn;(function(){var u,p,C,w,A,k,B,E,U,V,Z=gr,ie=x.expando,J=0,ue=0,pe=ht(),tt=ht(),ut=ht(),nn=ht(),Me=function(M,q){return M===q&&(A=!0),0},Ao="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ao="(?:\\\\[\\da-fA-F]{1,6}"+gt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",wt="\\["+gt+"*("+ao+")(?:"+gt+"*([*^$|!~]?=)"+gt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+ao+"))|)"+gt+"*\\]",io=":("+ao+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+wt+")*)|.*)\\)|)",ot=new RegExp(gt+"+","g"),St=new RegExp("^"+gt+"*,"+gt+"*"),na=new RegExp("^"+gt+"*([>+~]|"+gt+")"+gt+"*"),dl=new RegExp(gt+"|>"),Sn=new RegExp(io),hs=new RegExp("^"+ao+"$"),Nn={ID:new RegExp("^#("+ao+")"),CLASS:new RegExp("^\\.("+ao+")"),TAG:new RegExp("^("+ao+"|[*])"),ATTR:new RegExp("^"+wt),PSEUDO:new RegExp("^"+io),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+gt+"*(even|odd|(([+-]|)(\\d*)n|)"+gt+"*(?:([+-]|)"+gt+"*(\\d+)|))"+gt+"*\\)|)","i"),bool:new RegExp("^(?:"+Ao+")$","i"),needsContext:new RegExp("^"+gt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+gt+"*((?:-\\d)?\\d*)"+gt+"*\\)|)(?=[^-]|$)","i")},bo=/^(?:input|select|textarea|button)$/i,vn=/^h\d$/i,An=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,on=/[+~]/,an=new RegExp("\\\\[\\da-fA-F]{1,6}"+gt+"?|\\\\([^\\r\\n\\f])","g"),Xt=function(M,q){var X="0x"+M.slice(1)-65536;return q||(X<0?String.fromCharCode(X+65536):String.fromCharCode(X>>10|55296,1023&X|56320))},Qn=function(){kr()},Fn=ei(function(M){return M.disabled===!0&&ke(M,"fieldset")},{dir:"parentNode",next:"legend"});try{Z.apply(Ye=it.call(po.childNodes),po.childNodes),Ye[po.childNodes.length].nodeType}catch{Z={apply:function(q,X){gr.apply(q,it.call(X))},call:function(q){gr.apply(q,it.call(arguments,1))}}}function st(M,q,X,oe){var de,De,He,Te,Ne,ft,at,pt=q&&q.ownerDocument,rt=q?q.nodeType:9;if(X=X||[],typeof M!="string"||!M||rt!==1&&rt!==9&&rt!==11)return X;if(!oe&&(kr(q),q=q||k,E)){if(rt!==11&&(Ne=An.exec(M)))if(de=Ne[1]){if(rt===9){if(!(He=q.getElementById(de)))return X;if(He.id===de)return Z.call(X,He),X}else if(pt&&(He=pt.getElementById(de))&&st.contains(q,He)&&He.id===de)return Z.call(X,He),X}else{if(Ne[2])return Z.apply(X,q.getElementsByTagName(M)),X;if((de=Ne[3])&&q.getElementsByClassName)return Z.apply(X,q.getElementsByClassName(de)),X}if(!(nn[M+" "]||U&&U.test(M))){if(at=M,pt=q,rt===1&&(dl.test(M)||na.test(M))){for((pt=on.test(M)&&oa(q.parentNode)||q)==q&&Ue.scope||((Te=q.getAttribute("id"))?Te=x.escapeSelector(Te):q.setAttribute("id",Te=ie)),De=(ft=ra(M)).length;De--;)ft[De]=(Te?"#"+Te:":scope")+" "+Za(ft[De]);at=ft.join(",")}try{return Z.apply(X,pt.querySelectorAll(at)),X}catch{nn(M,!0)}finally{Te===ie&&q.removeAttribute("id")}}}return un(M.replace(Jo,"$1"),q,X,oe)}function ht(){var M=[];return function q(X,oe){return M.push(X+" ")>p.cacheLength&&delete q[M.shift()],q[X+" "]=oe}}function Vt(M){return M[ie]=!0,M}function Pt(M){var q=k.createElement("fieldset");try{return!!M(q)}catch{return!1}finally{q.parentNode&&q.parentNode.removeChild(q),q=null}}function Vn(M){return function(q){return ke(q,"input")&&q.type===M}}function Er(M){return function(q){return(ke(q,"input")||ke(q,"button"))&&q.type===M}}function bs(M){return function(q){return"form"in q?q.parentNode&&q.disabled===!1?"label"in q?"label"in q.parentNode?q.parentNode.disabled===M:q.disabled===M:q.isDisabled===M||q.isDisabled!==!M&&Fn(q)===M:q.disabled===M:"label"in q&&q.disabled===M}}function Jn(M){return Vt(function(q){return q=+q,Vt(function(X,oe){for(var de,De=M([],X.length,q),He=De.length;He--;)X[de=De[He]]&&(X[de]=!(oe[de]=X[de]))})})}function oa(M){return M&&typeof M.getElementsByTagName<"u"&&M}function kr(M){var q,X=M?M.ownerDocument||M:po;return X!=k&&X.nodeType===9&&X.documentElement&&(B=(k=X).documentElement,E=!x.isXMLDoc(k),V=B.matches||B.webkitMatchesSelector||B.msMatchesSelector,B.msMatchesSelector&&po!=k&&(q=k.defaultView)&&q.top!==q&&q.addEventListener("unload",Qn),Ue.getById=Pt(function(oe){return B.appendChild(oe).id=x.expando,!k.getElementsByName||!k.getElementsByName(x.expando).length}),Ue.disconnectedMatch=Pt(function(oe){return V.call(oe,"*")}),Ue.scope=Pt(function(){return k.querySelectorAll(":scope")}),Ue.cssHas=Pt(function(){try{return k.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),Ue.getById?(p.filter.ID=function(oe){var de=oe.replace(an,Xt);return function(De){return De.getAttribute("id")===de}},p.find.ID=function(oe,de){if(typeof de.getElementById<"u"&&E){var De=de.getElementById(oe);return De?[De]:[]}}):(p.filter.ID=function(oe){var de=oe.replace(an,Xt);return function(De){var He=typeof De.getAttributeNode<"u"&&De.getAttributeNode("id");return He&&He.value===de}},p.find.ID=function(oe,de){if(typeof de.getElementById<"u"&&E){var De,He,Te,Ne=de.getElementById(oe);if(Ne){if((De=Ne.getAttributeNode("id"))&&De.value===oe)return[Ne];for(Te=de.getElementsByName(oe),He=0;Ne=Te[He++];)if((De=Ne.getAttributeNode("id"))&&De.value===oe)return[Ne]}return[]}}),p.find.TAG=function(oe,de){return typeof de.getElementsByTagName<"u"?de.getElementsByTagName(oe):de.querySelectorAll(oe)},p.find.CLASS=function(oe,de){if(typeof de.getElementsByClassName<"u"&&E)return de.getElementsByClassName(oe)},U=[],Pt(function(oe){var de;B.appendChild(oe).innerHTML="<a id='"+ie+"' href='' disabled='disabled'></a><select id='"+ie+"-\r\\' disabled='disabled'><option selected=''></option></select>",oe.querySelectorAll("[selected]").length||U.push("\\["+gt+"*(?:value|"+Ao+")"),oe.querySelectorAll("[id~="+ie+"-]").length||U.push("~="),oe.querySelectorAll("a#"+ie+"+*").length||U.push(".#.+[+~]"),oe.querySelectorAll(":checked").length||U.push(":checked"),(de=k.createElement("input")).setAttribute("type","hidden"),oe.appendChild(de).setAttribute("name","D"),B.appendChild(oe).disabled=!0,oe.querySelectorAll(":disabled").length!==2&&U.push(":enabled",":disabled"),(de=k.createElement("input")).setAttribute("name",""),oe.appendChild(de),oe.querySelectorAll("[name='']").length||U.push("\\["+gt+"*name"+gt+"*="+gt+`*(?:''|"")`)}),Ue.cssHas||U.push(":has"),U=U.length&&new RegExp(U.join("|")),Me=function(oe,de){if(oe===de)return A=!0,0;var De=!oe.compareDocumentPosition-!de.compareDocumentPosition;return De||(1&(De=(oe.ownerDocument||oe)==(de.ownerDocument||de)?oe.compareDocumentPosition(de):1)||!Ue.sortDetached&&de.compareDocumentPosition(oe)===De?oe===k||oe.ownerDocument==po&&st.contains(po,oe)?-1:de===k||de.ownerDocument==po&&st.contains(po,de)?1:w?rn.call(w,oe)-rn.call(w,de):0:4&De?-1:1)}),k}for(u in st.matches=function(M,q){return st(M,null,null,q)},st.matchesSelector=function(M,q){if(kr(M),E&&!nn[q+" "]&&(!U||!U.test(q)))try{var X=V.call(M,q);if(X||Ue.disconnectedMatch||M.document&&M.document.nodeType!==11)return X}catch{nn(q,!0)}return 0<st(q,k,null,[M]).length},st.contains=function(M,q){return(M.ownerDocument||M)!=k&&kr(M),x.contains(M,q)},st.attr=function(M,q){(M.ownerDocument||M)!=k&&kr(M);var X=p.attrHandle[q.toLowerCase()],oe=X&&Ln.call(p.attrHandle,q.toLowerCase())?X(M,q,!E):void 0;return oe!==void 0?oe:M.getAttribute(q)},st.error=function(M){throw new Error("Syntax error, unrecognized expression: "+M)},x.uniqueSort=function(M){var q,X=[],oe=0,de=0;if(A=!Ue.sortStable,w=!Ue.sortStable&&it.call(M,0),$s.call(M,Me),A){for(;q=M[de++];)q===M[de]&&(oe=X.push(de));for(;oe--;)le.call(M,X[oe],1)}return w=null,M},x.fn.uniqueSort=function(){return this.pushStack(x.uniqueSort(it.apply(this)))},(p=x.expr={cacheLength:50,createPseudo:Vt,match:Nn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(M){return M[1]=M[1].replace(an,Xt),M[3]=(M[3]||M[4]||M[5]||"").replace(an,Xt),M[2]==="~="&&(M[3]=" "+M[3]+" "),M.slice(0,4)},CHILD:function(M){return M[1]=M[1].toLowerCase(),M[1].slice(0,3)==="nth"?(M[3]||st.error(M[0]),M[4]=+(M[4]?M[5]+(M[6]||1):2*(M[3]==="even"||M[3]==="odd")),M[5]=+(M[7]+M[8]||M[3]==="odd")):M[3]&&st.error(M[0]),M},PSEUDO:function(M){var q,X=!M[6]&&M[2];return Nn.CHILD.test(M[0])?null:(M[3]?M[2]=M[4]||M[5]||"":X&&Sn.test(X)&&(q=ra(X,!0))&&(q=X.indexOf(")",X.length-q)-X.length)&&(M[0]=M[0].slice(0,q),M[2]=X.slice(0,q)),M.slice(0,3))}},filter:{TAG:function(M){var q=M.replace(an,Xt).toLowerCase();return M==="*"?function(){return!0}:function(X){return ke(X,q)}},CLASS:function(M){var q=pe[M+" "];return q||(q=new RegExp("(^|"+gt+")"+M+"("+gt+"|$)"))&&pe(M,function(X){return q.test(typeof X.className=="string"&&X.className||typeof X.getAttribute<"u"&&X.getAttribute("class")||"")})},ATTR:function(M,q,X){return function(oe){var de=st.attr(oe,M);return de==null?q==="!=":!q||(de+="",q==="="?de===X:q==="!="?de!==X:q==="^="?X&&de.indexOf(X)===0:q==="*="?X&&-1<de.indexOf(X):q==="$="?X&&de.slice(-X.length)===X:q==="~="?-1<(" "+de.replace(ot," ")+" ").indexOf(X):q==="|="&&(de===X||de.slice(0,X.length+1)===X+"-"))}},CHILD:function(M,q,X,oe,de){var De=M.slice(0,3)!=="nth",He=M.slice(-4)!=="last",Te=q==="of-type";return oe===1&&de===0?function(Ne){return!!Ne.parentNode}:function(Ne,ft,at){var pt,rt,mt,Zt,en,ct=De!==He?"nextSibling":"previousSibling",Yt=Ne.parentNode,Zn=Te&&Ne.nodeName.toLowerCase(),yn=!at&&!Te,Ht=!1;if(Yt){if(De){for(;ct;){for(mt=Ne;mt=mt[ct];)if(Te?ke(mt,Zn):mt.nodeType===1)return!1;en=ct=M==="only"&&!en&&"nextSibling"}return!0}if(en=[He?Yt.firstChild:Yt.lastChild],He&&yn){for(Ht=(Zt=(pt=(rt=Yt[ie]||(Yt[ie]={}))[M]||[])[0]===J&&pt[1])&&pt[2],mt=Zt&&Yt.childNodes[Zt];mt=++Zt&&mt&&mt[ct]||(Ht=Zt=0)||en.pop();)if(mt.nodeType===1&&++Ht&&mt===Ne){rt[M]=[J,Zt,Ht];break}}else if(yn&&(Ht=Zt=(pt=(rt=Ne[ie]||(Ne[ie]={}))[M]||[])[0]===J&&pt[1]),Ht===!1)for(;(mt=++Zt&&mt&&mt[ct]||(Ht=Zt=0)||en.pop())&&!((Te?ke(mt,Zn):mt.nodeType===1)&&++Ht&&(yn&&((rt=mt[ie]||(mt[ie]={}))[M]=[J,Ht]),mt===Ne)););return(Ht-=de)===oe||Ht%oe==0&&0<=Ht/oe}}},PSEUDO:function(M,q){var X,oe=p.pseudos[M]||p.setFilters[M.toLowerCase()]||st.error("unsupported pseudo: "+M);return oe[ie]?oe(q):1<oe.length?(X=[M,M,"",q],p.setFilters.hasOwnProperty(M.toLowerCase())?Vt(function(de,De){for(var He,Te=oe(de,q),Ne=Te.length;Ne--;)de[He=rn.call(de,Te[Ne])]=!(De[He]=Te[Ne])}):function(de){return oe(de,0,X)}):oe}},pseudos:{not:Vt(function(M){var q=[],X=[],oe=_r(M.replace(Jo,"$1"));return oe[ie]?Vt(function(de,De,He,Te){for(var Ne,ft=oe(de,null,Te,[]),at=de.length;at--;)(Ne=ft[at])&&(de[at]=!(De[at]=Ne))}):function(de,De,He){return q[0]=de,oe(q,null,He,X),q[0]=null,!X.pop()}}),has:Vt(function(M){return function(q){return 0<st(M,q).length}}),contains:Vt(function(M){return M=M.replace(an,Xt),function(q){return-1<(q.textContent||x.text(q)).indexOf(M)}}),lang:Vt(function(M){return hs.test(M||"")||st.error("unsupported lang: "+M),M=M.replace(an,Xt).toLowerCase(),function(q){var X;do if(X=E?q.lang:q.getAttribute("xml:lang")||q.getAttribute("lang"))return(X=X.toLowerCase())===M||X.indexOf(M+"-")===0;while((q=q.parentNode)&&q.nodeType===1);return!1}}),target:function(M){var q=ve.location&&ve.location.hash;return q&&q.slice(1)===M.id},root:function(M){return M===B},focus:function(M){return M===(function(){try{return k.activeElement}catch{}})()&&k.hasFocus()&&!!(M.type||M.href||~M.tabIndex)},enabled:bs(!1),disabled:bs(!0),checked:function(M){return ke(M,"input")&&!!M.checked||ke(M,"option")&&!!M.selected},selected:function(M){return M.parentNode&&M.parentNode.selectedIndex,M.selected===!0},empty:function(M){for(M=M.firstChild;M;M=M.nextSibling)if(M.nodeType<6)return!1;return!0},parent:function(M){return!p.pseudos.empty(M)},header:function(M){return vn.test(M.nodeName)},input:function(M){return bo.test(M.nodeName)},button:function(M){return ke(M,"input")&&M.type==="button"||ke(M,"button")},text:function(M){var q;return ke(M,"input")&&M.type==="text"&&((q=M.getAttribute("type"))==null||q.toLowerCase()==="text")},first:Jn(function(){return[0]}),last:Jn(function(M,q){return[q-1]}),eq:Jn(function(M,q,X){return[X<0?X+q:X]}),even:Jn(function(M,q){for(var X=0;X<q;X+=2)M.push(X);return M}),odd:Jn(function(M,q){for(var X=1;X<q;X+=2)M.push(X);return M}),lt:Jn(function(M,q,X){var oe;for(oe=X<0?X+q:q<X?q:X;0<=--oe;)M.push(oe);return M}),gt:Jn(function(M,q,X){for(var oe=X<0?X+q:X;++oe<q;)M.push(oe);return M})}}).pseudos.nth=p.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})p.pseudos[u]=Vn(u);for(u in{submit:!0,reset:!0})p.pseudos[u]=Er(u);function ul(){}function ra(M,q){var X,oe,de,De,He,Te,Ne,ft=tt[M+" "];if(ft)return q?0:ft.slice(0);for(He=M,Te=[],Ne=p.preFilter;He;){for(De in X&&!(oe=St.exec(He))||(oe&&(He=He.slice(oe[0].length)||He),Te.push(de=[])),X=!1,(oe=na.exec(He))&&(X=oe.shift(),de.push({value:X,type:oe[0].replace(Jo," ")}),He=He.slice(X.length)),p.filter)!(oe=Nn[De].exec(He))||Ne[De]&&!(oe=Ne[De](oe))||(X=oe.shift(),de.push({value:X,type:De,matches:oe}),He=He.slice(X.length));if(!X)break}return q?He.length:He?st.error(M):tt(M,Te).slice(0)}function Za(M){for(var q=0,X=M.length,oe="";q<X;q++)oe+=M[q].value;return oe}function ei(M,q,X){var oe=q.dir,de=q.next,De=de||oe,He=X&&De==="parentNode",Te=ue++;return q.first?function(Ne,ft,at){for(;Ne=Ne[oe];)if(Ne.nodeType===1||He)return M(Ne,ft,at);return!1}:function(Ne,ft,at){var pt,rt,mt=[J,Te];if(at){for(;Ne=Ne[oe];)if((Ne.nodeType===1||He)&&M(Ne,ft,at))return!0}else for(;Ne=Ne[oe];)if(Ne.nodeType===1||He)if(rt=Ne[ie]||(Ne[ie]={}),de&&ke(Ne,de))Ne=Ne[oe]||Ne;else{if((pt=rt[De])&&pt[0]===J&&pt[1]===Te)return mt[2]=pt[2];if((rt[De]=mt)[2]=M(Ne,ft,at))return!0}return!1}}function ml(M){return 1<M.length?function(q,X,oe){for(var de=M.length;de--;)if(!M[de](q,X,oe))return!1;return!0}:M[0]}function sa(M,q,X,oe,de){for(var De,He=[],Te=0,Ne=M.length,ft=q!=null;Te<Ne;Te++)(De=M[Te])&&(X&&!X(De,oe,de)||(He.push(De),ft&&q.push(Te)));return He}function vs(M,q,X,oe,de,De){return oe&&!oe[ie]&&(oe=vs(oe)),de&&!de[ie]&&(de=vs(de,De)),Vt(function(He,Te,Ne,ft){var at,pt,rt,mt,Zt=[],en=[],ct=Te.length,Yt=He||(function(yn,Ht,Xo){for(var Tn=0,aa=Ht.length;Tn<aa;Tn++)st(yn,Ht[Tn],Xo);return Xo})(q||"*",Ne.nodeType?[Ne]:Ne,[]),Zn=!M||!He&&q?Yt:sa(Yt,Zt,M,Ne,ft);if(X?X(Zn,mt=de||(He?M:ct||oe)?[]:Te,Ne,ft):mt=Zn,oe)for(at=sa(mt,en),oe(at,[],Ne,ft),pt=at.length;pt--;)(rt=at[pt])&&(mt[en[pt]]=!(Zn[en[pt]]=rt));if(He){if(de||M){if(de){for(at=[],pt=mt.length;pt--;)(rt=mt[pt])&&at.push(Zn[pt]=rt);de(null,mt=[],at,ft)}for(pt=mt.length;pt--;)(rt=mt[pt])&&-1<(at=de?rn.call(He,rt):Zt[pt])&&(He[at]=!(Te[at]=rt))}}else mt=sa(mt===Te?mt.splice(ct,mt.length):mt),de?de(null,Te,mt,ft):Z.apply(Te,mt)})}function ti(M){for(var q,X,oe,de=M.length,De=p.relative[M[0].type],He=De||p.relative[" "],Te=De?1:0,Ne=ei(function(pt){return pt===q},He,!0),ft=ei(function(pt){return-1<rn.call(q,pt)},He,!0),at=[function(pt,rt,mt){var Zt=!De&&(mt||rt!=C)||((q=rt).nodeType?Ne(pt,rt,mt):ft(pt,rt,mt));return q=null,Zt}];Te<de;Te++)if(X=p.relative[M[Te].type])at=[ei(ml(at),X)];else{if((X=p.filter[M[Te].type].apply(null,M[Te].matches))[ie]){for(oe=++Te;oe<de&&!p.relative[M[oe].type];oe++);return vs(1<Te&&ml(at),1<Te&&Za(M.slice(0,Te-1).concat({value:M[Te-2].type===" "?"*":""})).replace(Jo,"$1"),X,Te<oe&&ti(M.slice(Te,oe)),oe<de&&ti(M=M.slice(oe)),oe<de&&Za(M))}at.push(X)}return ml(at)}function _r(M,q){var X,oe,de,De,He,Te,Ne=[],ft=[],at=ut[M+" "];if(!at){for(q||(q=ra(M)),X=q.length;X--;)(at=ti(q[X]))[ie]?Ne.push(at):ft.push(at);(at=ut(M,(oe=ft,De=0<(de=Ne).length,He=0<oe.length,Te=function(pt,rt,mt,Zt,en){var ct,Yt,Zn,yn=0,Ht="0",Xo=pt&&[],Tn=[],aa=C,ia=pt||He&&p.find.TAG("*",en),ys=J+=aa==null?1:Math.random()||.1,Gr=ia.length;for(en&&(C=rt==k||rt||en);Ht!==Gr&&(ct=ia[Ht])!=null;Ht++){if(He&&ct){for(Yt=0,rt||ct.ownerDocument==k||(kr(ct),mt=!E);Zn=oe[Yt++];)if(Zn(ct,rt||k,mt)){Z.call(Zt,ct);break}en&&(J=ys)}De&&((ct=!Zn&&ct)&&yn--,pt&&Xo.push(ct))}if(yn+=Ht,De&&Ht!==yn){for(Yt=0;Zn=de[Yt++];)Zn(Xo,Tn,rt,mt);if(pt){if(0<yn)for(;Ht--;)Xo[Ht]||Tn[Ht]||(Tn[Ht]=In.call(Zt));Tn=sa(Tn)}Z.apply(Zt,Tn),en&&!pt&&0<Tn.length&&1<yn+de.length&&x.uniqueSort(Zt)}return en&&(J=ys,C=aa),Xo},De?Vt(Te):Te))).selector=M}return at}function un(M,q,X,oe){var de,De,He,Te,Ne,ft=typeof M=="function"&&M,at=!oe&&ra(M=ft.selector||M);if(X=X||[],at.length===1){if(2<(De=at[0]=at[0].slice(0)).length&&(He=De[0]).type==="ID"&&q.nodeType===9&&E&&p.relative[De[1].type]){if(!(q=(p.find.ID(He.matches[0].replace(an,Xt),q)||[])[0]))return X;ft&&(q=q.parentNode),M=M.slice(De.shift().value.length)}for(de=Nn.needsContext.test(M)?0:De.length;de--&&(He=De[de],!p.relative[Te=He.type]);)if((Ne=p.find[Te])&&(oe=Ne(He.matches[0].replace(an,Xt),on.test(De[0].type)&&oa(q.parentNode)||q))){if(De.splice(de,1),!(M=oe.length&&Za(De)))return Z.apply(X,oe),X;break}}return(ft||_r(M,at))(oe,q,!E,X,!q||on.test(M)&&oa(q.parentNode)||q),X}ul.prototype=p.filters=p.pseudos,p.setFilters=new ul,Ue.sortStable=ie.split("").sort(Me).join("")===ie,kr(),Ue.sortDetached=Pt(function(M){return 1&M.compareDocumentPosition(k.createElement("fieldset"))}),x.find=st,x.expr[":"]=x.expr.pseudos,x.unique=x.uniqueSort,st.compile=_r,st.select=un,st.setDocument=kr,st.tokenize=ra,st.escape=x.escapeSelector,st.getText=x.text,st.isXML=x.isXMLDoc,st.selectors=x.expr,st.support=x.support,st.uniqueSort=x.uniqueSort})();var Yn=function(u,p,C){for(var w=[],A=C!==void 0;(u=u[p])&&u.nodeType!==9;)if(u.nodeType===1){if(A&&x(u).is(C))break;w.push(u)}return w},_t=function(u,p){for(var C=[];u;u=u.nextSibling)u.nodeType===1&&u!==p&&C.push(u);return C},zt=x.expr.match.needsContext,_=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function hr(u,p,C){return Re(p)?x.grep(u,function(w,A){return!!p.call(w,A,w)!==C}):p.nodeType?x.grep(u,function(w){return w===p!==C}):typeof p!="string"?x.grep(u,function(w){return-1<rn.call(p,w)!==C}):x.filter(p,u,C)}x.filter=function(u,p,C){var w=p[0];return C&&(u=":not("+u+")"),p.length===1&&w.nodeType===1?x.find.matchesSelector(w,u)?[w]:[]:x.find.matches(u,x.grep(p,function(A){return A.nodeType===1}))},x.fn.extend({find:function(u){var p,C,w=this.length,A=this;if(typeof u!="string")return this.pushStack(x(u).filter(function(){for(p=0;p<w;p++)if(x.contains(A[p],this))return!0}));for(C=this.pushStack([]),p=0;p<w;p++)x.find(u,A[p],C);return 1<w?x.uniqueSort(C):C},filter:function(u){return this.pushStack(hr(this,u||[],!1))},not:function(u){return this.pushStack(hr(this,u||[],!0))},is:function(u){return!!hr(this,typeof u=="string"&&zt.test(u)?x(u):u||[],!1).length}});var _e,nt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(u,p,C){var w,A;if(!u)return this;if(C=C||_e,typeof u=="string"){if(!(w=u[0]==="<"&&u[u.length-1]===">"&&3<=u.length?[null,u,null]:nt.exec(u))||!w[1]&&p)return!p||p.jquery?(p||C).find(u):this.constructor(p).find(u);if(w[1]){if(p=p instanceof x?p[0]:p,x.merge(this,x.parseHTML(w[1],p&&p.nodeType?p.ownerDocument||p:Ge,!0)),_.test(w[1])&&x.isPlainObject(p))for(w in p)Re(this[w])?this[w](p[w]):this.attr(w,p[w]);return this}return(A=Ge.getElementById(w[2]))&&(this[0]=A,this.length=1),this}return u.nodeType?(this[0]=u,this.length=1,this):Re(u)?C.ready!==void 0?C.ready(u):u(x):x.makeArray(u,this)}).prototype=x.fn,_e=x(Ge);var dt=/^(?:parents|prev(?:Until|All))/,Se={children:!0,contents:!0,next:!0,prev:!0};function Ct(u,p){for(;(u=u[p])&&u.nodeType!==1;);return u}x.fn.extend({has:function(u){var p=x(u,this),C=p.length;return this.filter(function(){for(var w=0;w<C;w++)if(x.contains(this,p[w]))return!0})},closest:function(u,p){var C,w=0,A=this.length,k=[],B=typeof u!="string"&&x(u);if(!zt.test(u)){for(;w<A;w++)for(C=this[w];C&&C!==p;C=C.parentNode)if(C.nodeType<11&&(B?-1<B.index(C):C.nodeType===1&&x.find.matchesSelector(C,u))){k.push(C);break}}return this.pushStack(1<k.length?x.uniqueSort(k):k)},index:function(u){return u?typeof u=="string"?rn.call(x(u),this[0]):rn.call(this,u.jquery?u[0]:u):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(u,p){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(u,p))))},addBack:function(u){return this.add(u==null?this.prevObject:this.prevObject.filter(u))}}),x.each({parent:function(u){var p=u.parentNode;return p&&p.nodeType!==11?p:null},parents:function(u){return Yn(u,"parentNode")},parentsUntil:function(u,p,C){return Yn(u,"parentNode",C)},next:function(u){return Ct(u,"nextSibling")},prev:function(u){return Ct(u,"previousSibling")},nextAll:function(u){return Yn(u,"nextSibling")},prevAll:function(u){return Yn(u,"previousSibling")},nextUntil:function(u,p,C){return Yn(u,"nextSibling",C)},prevUntil:function(u,p,C){return Yn(u,"previousSibling",C)},siblings:function(u){return _t((u.parentNode||{}).firstChild,u)},children:function(u){return _t(u.firstChild)},contents:function(u){return u.contentDocument!=null&&qe(u.contentDocument)?u.contentDocument:(ke(u,"template")&&(u=u.content||u),x.merge([],u.childNodes))}},function(u,p){x.fn[u]=function(C,w){var A=x.map(this,p,C);return u.slice(-5)!=="Until"&&(w=C),w&&typeof w=="string"&&(A=x.filter(w,A)),1<this.length&&(Se[u]||x.uniqueSort(A),dt.test(u)&&A.reverse()),this.pushStack(A)}});var We=/[^\x20\t\r\n\f]+/g;function K(u){return u}function br(u){throw u}function Zo(u,p,C,w){var A;try{u&&Re(A=u.promise)?A.call(u).done(p).fail(C):u&&Re(A=u.then)?A.call(u,p,C):p.apply(void 0,[u].slice(w))}catch(k){C.apply(void 0,[k])}}x.Callbacks=function(u){var p,C;u=typeof u=="string"?(p=u,C={},x.each(p.match(We)||[],function(J,ue){C[ue]=!0}),C):x.extend({},u);var w,A,k,B,E=[],U=[],V=-1,Z=function(){for(B=B||u.once,k=w=!0;U.length;V=-1)for(A=U.shift();++V<E.length;)E[V].apply(A[0],A[1])===!1&&u.stopOnFalse&&(V=E.length,A=!1);u.memory||(A=!1),w=!1,B&&(E=A?[]:"")},ie={add:function(){return E&&(A&&!w&&(V=E.length-1,U.push(A)),(function J(ue){x.each(ue,function(pe,tt){Re(tt)?u.unique&&ie.has(tt)||E.push(tt):tt&&tt.length&&kt(tt)!=="string"&&J(tt)})})(arguments),A&&!w&&Z()),this},remove:function(){return x.each(arguments,function(J,ue){for(var pe;-1<(pe=x.inArray(ue,E,pe));)E.splice(pe,1),pe<=V&&V--}),this},has:function(J){return J?-1<x.inArray(J,E):0<E.length},empty:function(){return E&&(E=[]),this},disable:function(){return B=U=[],E=A="",this},disabled:function(){return!E},lock:function(){return B=U=[],A||w||(E=A=""),this},locked:function(){return!!B},fireWith:function(J,ue){return B||(ue=[J,(ue=ue||[]).slice?ue.slice():ue],U.push(ue),w||Z()),this},fire:function(){return ie.fireWith(this,arguments),this},fired:function(){return!!k}};return ie},x.extend({Deferred:function(u){var p=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],C="pending",w={state:function(){return C},always:function(){return A.done(arguments).fail(arguments),this},catch:function(k){return w.then(null,k)},pipe:function(){var k=arguments;return x.Deferred(function(B){x.each(p,function(E,U){var V=Re(k[U[4]])&&k[U[4]];A[U[1]](function(){var Z=V&&V.apply(this,arguments);Z&&Re(Z.promise)?Z.promise().progress(B.notify).done(B.resolve).fail(B.reject):B[U[0]+"With"](this,V?[Z]:arguments)})}),k=null}).promise()},then:function(k,B,E){var U=0;function V(Z,ie,J,ue){return function(){var pe=this,tt=arguments,ut=function(){var Me,Ao;if(!(Z<U)){if((Me=J.apply(pe,tt))===ie.promise())throw new TypeError("Thenable self-resolution");Ao=Me&&(typeof Me=="object"||typeof Me=="function")&&Me.then,Re(Ao)?ue?Ao.call(Me,V(U,ie,K,ue),V(U,ie,br,ue)):(U++,Ao.call(Me,V(U,ie,K,ue),V(U,ie,br,ue),V(U,ie,K,ie.notifyWith))):(J!==K&&(pe=void 0,tt=[Me]),(ue||ie.resolveWith)(pe,tt))}},nn=ue?ut:function(){try{ut()}catch(Me){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(Me,nn.error),U<=Z+1&&(J!==br&&(pe=void 0,tt=[Me]),ie.rejectWith(pe,tt))}};Z?nn():(x.Deferred.getErrorHook?nn.error=x.Deferred.getErrorHook():x.Deferred.getStackHook&&(nn.error=x.Deferred.getStackHook()),ve.setTimeout(nn))}}return x.Deferred(function(Z){p[0][3].add(V(0,Z,Re(E)?E:K,Z.notifyWith)),p[1][3].add(V(0,Z,Re(k)?k:K)),p[2][3].add(V(0,Z,Re(B)?B:br))}).promise()},promise:function(k){return k!=null?x.extend(k,w):w}},A={};return x.each(p,function(k,B){var E=B[2],U=B[5];w[B[1]]=E.add,U&&E.add(function(){C=U},p[3-k][2].disable,p[3-k][3].disable,p[0][2].lock,p[0][3].lock),E.add(B[3].fire),A[B[0]]=function(){return A[B[0]+"With"](this===A?void 0:this,arguments),this},A[B[0]+"With"]=E.fireWith}),w.promise(A),u&&u.call(A,A),A},when:function(u){var p=arguments.length,C=p,w=Array(C),A=it.call(arguments),k=x.Deferred(),B=function(E){return function(U){w[E]=this,A[E]=1<arguments.length?it.call(arguments):U,--p||k.resolveWith(w,A)}};if(p<=1&&(Zo(u,k.done(B(C)).resolve,k.reject,!p),k.state()==="pending"||Re(A[C]&&A[C].then)))return k.then();for(;C--;)Zo(A[C],B(C),k.reject);return k.promise()}});var Oe=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(u,p){ve.console&&ve.console.warn&&u&&Oe.test(u.name)&&ve.console.warn("jQuery.Deferred exception: "+u.message,u.stack,p)},x.readyException=function(u){ve.setTimeout(function(){throw u})};var Wr=x.Deferred();function Qt(){Ge.removeEventListener("DOMContentLoaded",Qt),ve.removeEventListener("load",Qt),x.ready()}x.fn.ready=function(u){return Wr.then(u).catch(function(p){x.readyException(p)}),this},x.extend({isReady:!1,readyWait:1,ready:function(u){(u===!0?--x.readyWait:x.isReady)||(x.isReady=!0)!==u&&0<--x.readyWait||Wr.resolveWith(Ge,[x])}}),x.ready.then=Wr.then,Ge.readyState==="complete"||Ge.readyState!=="loading"&&!Ge.documentElement.doScroll?ve.setTimeout(x.ready):(Ge.addEventListener("DOMContentLoaded",Qt),ve.addEventListener("load",Qt));var go=function(u,p,C,w,A,k,B){var E=0,U=u.length,V=C==null;if(kt(C)==="object")for(E in A=!0,C)go(u,p,E,C[E],!0,k,B);else if(w!==void 0&&(A=!0,Re(w)||(B=!0),V&&(B?(p.call(u,w),p=null):(V=p,p=function(Z,ie,J){return V.call(x(Z),J)})),p))for(;E<U;E++)p(u[E],C,B?w:w.call(u[E],E,p(u[E],C)));return A?u:V?p.call(u):U?p(u[0],C):k},qt=/^-ms-/,qs=/-([a-z])/g;function wc(u,p){return p.toUpperCase()}function Wt(u){return u.replace(qt,"ms-").replace(qs,wc)}var oo=function(u){return u.nodeType===1||u.nodeType===9||!+u.nodeType};function wo(){this.expando=x.expando+wo.uid++}wo.uid=1,wo.prototype={cache:function(u){var p=u[this.expando];return p||(p={},oo(u)&&(u.nodeType?u[this.expando]=p:Object.defineProperty(u,this.expando,{value:p,configurable:!0}))),p},set:function(u,p,C){var w,A=this.cache(u);if(typeof p=="string")A[Wt(p)]=C;else for(w in p)A[Wt(w)]=p[w];return A},get:function(u,p){return p===void 0?this.cache(u):u[this.expando]&&u[this.expando][Wt(p)]},access:function(u,p,C){return p===void 0||p&&typeof p=="string"&&C===void 0?this.get(u,p):(this.set(u,p,C),C!==void 0?C:p)},remove:function(u,p){var C,w=u[this.expando];if(w!==void 0){if(p!==void 0)for(C=(p=Array.isArray(p)?p.map(Wt):(p=Wt(p))in w?[p]:p.match(We)||[]).length;C--;)delete w[p[C]];(p===void 0||x.isEmptyObject(w))&&(u.nodeType?u[this.expando]=void 0:delete u[this.expando])}},hasData:function(u){var p=u[this.expando];return p!==void 0&&!x.isEmptyObject(p)}};var Qe=new wo,_n=new wo,Vr=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ws=/[A-Z]/g;function sn(u,p,C){var w,A;if(C===void 0&&u.nodeType===1)if(w="data-"+p.replace(Ws,"-$&").toLowerCase(),typeof(C=u.getAttribute(w))=="string"){try{C=(A=C)==="true"||A!=="false"&&(A==="null"?null:A===+A+""?+A:Vr.test(A)?JSON.parse(A):A)}catch{}_n.set(u,p,C)}else C=void 0;return C}x.extend({hasData:function(u){return _n.hasData(u)||Qe.hasData(u)},data:function(u,p,C){return _n.access(u,p,C)},removeData:function(u,p){_n.remove(u,p)},_data:function(u,p,C){return Qe.access(u,p,C)},_removeData:function(u,p){Qe.remove(u,p)}}),x.fn.extend({data:function(u,p){var C,w,A,k=this[0],B=k&&k.attributes;if(u===void 0){if(this.length&&(A=_n.get(k),k.nodeType===1&&!Qe.get(k,"hasDataAttrs"))){for(C=B.length;C--;)B[C]&&(w=B[C].name).indexOf("data-")===0&&(w=Wt(w.slice(5)),sn(k,w,A[w]));Qe.set(k,"hasDataAttrs",!0)}return A}return typeof u=="object"?this.each(function(){_n.set(this,u)}):go(this,function(E){var U;if(k&&E===void 0)return(U=_n.get(k,u))!==void 0||(U=sn(k,u))!==void 0?U:void 0;this.each(function(){_n.set(this,u,E)})},null,p,1<arguments.length,null,!0)},removeData:function(u){return this.each(function(){_n.remove(this,u)})}}),x.extend({queue:function(u,p,C){var w;if(u)return p=(p||"fx")+"queue",w=Qe.get(u,p),C&&(!w||Array.isArray(C)?w=Qe.access(u,p,x.makeArray(C)):w.push(C)),w||[]},dequeue:function(u,p){p=p||"fx";var C=x.queue(u,p),w=C.length,A=C.shift(),k=x._queueHooks(u,p);A==="inprogress"&&(A=C.shift(),w--),A&&(p==="fx"&&C.unshift("inprogress"),delete k.stop,A.call(u,function(){x.dequeue(u,p)},k)),!w&&k&&k.empty.fire()},_queueHooks:function(u,p){var C=p+"queueHooks";return Qe.get(u,C)||Qe.access(u,C,{empty:x.Callbacks("once memory").add(function(){Qe.remove(u,[p+"queue",C])})})}}),x.fn.extend({queue:function(u,p){var C=2;return typeof u!="string"&&(p=u,u="fx",C--),arguments.length<C?x.queue(this[0],u):p===void 0?this:this.each(function(){var w=x.queue(this,u,p);x._queueHooks(this,u),u==="fx"&&w[0]!=="inprogress"&&x.dequeue(this,u)})},dequeue:function(u){return this.each(function(){x.dequeue(this,u)})},clearQueue:function(u){return this.queue(u||"fx",[])},promise:function(u,p){var C,w=1,A=x.Deferred(),k=this,B=this.length,E=function(){--w||A.resolveWith(k,[k])};for(typeof u!="string"&&(p=u,u=void 0),u=u||"fx";B--;)(C=Qe.get(k[B],u+"queueHooks"))&&C.empty&&(w++,C.empty.add(E));return E(),A.promise(p)}});var ro=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wn=new RegExp("^(?:([+-])=|)("+ro+")([a-z%]*)$","i"),qn=["Top","Right","Bottom","Left"],So=Ge.documentElement,pn=function(u){return x.contains(u.ownerDocument,u)},Gu={composed:!0};So.getRootNode&&(pn=function(u){return x.contains(u.ownerDocument,u)||u.getRootNode(Gu)===u.ownerDocument});var xt=function(u,p){return(u=p||u).style.display==="none"||u.style.display===""&&pn(u)&&x.css(u,"display")==="none"};function Vs(u,p,C,w){var A,k,B=20,E=w?function(){return w.cur()}:function(){return x.css(u,p,"")},U=E(),V=C&&C[3]||(x.cssNumber[p]?"":"px"),Z=u.nodeType&&(x.cssNumber[p]||V!=="px"&&+U)&&wn.exec(x.css(u,p));if(Z&&Z[3]!==V){for(U/=2,V=V||Z[3],Z=+U||1;B--;)x.style(u,p,Z+V),(1-k)*(1-(k=E()/U||.5))<=0&&(B=0),Z/=k;Z*=2,x.style(u,p,Z+V),C=C||[]}return C&&(Z=+Z||+U||0,A=C[1]?Z+(C[1]+1)*C[2]:+C[2],w&&(w.unit=V,w.start=Z,w.end=A)),A}var Sc={};function vr(u,p){for(var C,w,A,k,B,E,U,V=[],Z=0,ie=u.length;Z<ie;Z++)(w=u[Z]).style&&(C=w.style.display,p?(C==="none"&&(V[Z]=Qe.get(w,"display")||null,V[Z]||(w.style.display="")),w.style.display===""&&xt(w)&&(V[Z]=(U=B=k=void 0,B=(A=w).ownerDocument,E=A.nodeName,(U=Sc[E])||(k=B.body.appendChild(B.createElement(E)),U=x.css(k,"display"),k.parentNode.removeChild(k),U==="none"&&(U="block"),Sc[E]=U)))):C!=="none"&&(V[Z]="none",Qe.set(w,"display",C)));for(Z=0;Z<ie;Z++)V[Z]!=null&&(u[Z].style.display=V[Z]);return u}x.fn.extend({show:function(){return vr(this,!0)},hide:function(){return vr(this)},toggle:function(u){return typeof u=="boolean"?u?this.show():this.hide():this.each(function(){xt(this)?x(this).show():x(this).hide()})}});var yr,er,Cr=/^(?:checkbox|radio)$/i,Ha=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Bt=/^$|^module$|\/(?:java|ecma)script/i;yr=Ge.createDocumentFragment().appendChild(Ge.createElement("div")),(er=Ge.createElement("input")).setAttribute("type","radio"),er.setAttribute("checked","checked"),er.setAttribute("name","t"),yr.appendChild(er),Ue.checkClone=yr.cloneNode(!0).cloneNode(!0).lastChild.checked,yr.innerHTML="<textarea>x</textarea>",Ue.noCloneChecked=!!yr.cloneNode(!0).lastChild.defaultValue,yr.innerHTML="<option></option>",Ue.option=!!yr.lastChild;var Fe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function gn(u,p){var C;return C=typeof u.getElementsByTagName<"u"?u.getElementsByTagName(p||"*"):typeof u.querySelectorAll<"u"?u.querySelectorAll(p||"*"):[],p===void 0||p&&ke(u,p)?x.merge([u],C):C}function ho(u,p){for(var C=0,w=u.length;C<w;C++)Qe.set(u[C],"globalEval",!p||Qe.get(p[C],"globalEval"))}Fe.tbody=Fe.tfoot=Fe.colgroup=Fe.caption=Fe.thead,Fe.th=Fe.td,Ue.option||(Fe.optgroup=Fe.option=[1,"<select multiple='multiple'>","</select>"]);var tn=/<|&#?\w+;/;function Ji(u,p,C,w,A){for(var k,B,E,U,V,Z,ie=p.createDocumentFragment(),J=[],ue=0,pe=u.length;ue<pe;ue++)if((k=u[ue])||k===0)if(kt(k)==="object")x.merge(J,k.nodeType?[k]:k);else if(tn.test(k)){for(B=B||ie.appendChild(p.createElement("div")),E=(Ha.exec(k)||["",""])[1].toLowerCase(),U=Fe[E]||Fe._default,B.innerHTML=U[1]+x.htmlPrefilter(k)+U[2],Z=U[0];Z--;)B=B.lastChild;x.merge(J,B.childNodes),(B=ie.firstChild).textContent=""}else J.push(p.createTextNode(k));for(ie.textContent="",ue=0;k=J[ue++];)if(w&&-1<x.inArray(k,w))A&&A.push(k);else if(V=pn(k),B=gn(ie.appendChild(k),"script"),V&&ho(B),C)for(Z=0;k=B[Z++];)Bt.test(k.type||"")&&C.push(k);return ie}var Zi=/^([^.]*)(?:\.(.+)|)/;function hn(){return!0}function cs(){return!1}function $a(u,p,C,w,A,k){var B,E;if(typeof p=="object"){for(E in typeof C!="string"&&(w=w||C,C=void 0),p)$a(u,E,C,w,p[E],k);return u}if(w==null&&A==null?(A=C,w=C=void 0):A==null&&(typeof C=="string"?(A=w,w=void 0):(A=w,w=C,C=void 0)),A===!1)A=cs;else if(!A)return u;return k===1&&(B=A,(A=function(U){return x().off(U),B.apply(this,arguments)}).guid=B.guid||(B.guid=x.guid++)),u.each(function(){x.event.add(this,p,A,w,C)})}function Ks(u,p,C){C?(Qe.set(u,p,!1),x.event.add(u,p,{namespace:!1,handler:function(w){var A,k=Qe.get(this,p);if(1&w.isTrigger&&this[p]){if(k)(x.event.special[p]||{}).delegateType&&w.stopPropagation();else if(k=it.call(arguments),Qe.set(this,p,k),this[p](),A=Qe.get(this,p),Qe.set(this,p,!1),k!==A)return w.stopImmediatePropagation(),w.preventDefault(),A}else k&&(Qe.set(this,p,x.event.trigger(k[0],k.slice(1),this)),w.stopPropagation(),w.isImmediatePropagationStopped=hn)}})):Qe.get(u,p)===void 0&&x.event.add(u,p,hn)}x.event={global:{},add:function(u,p,C,w,A){var k,B,E,U,V,Z,ie,J,ue,pe,tt,ut=Qe.get(u);if(oo(u))for(C.handler&&(C=(k=C).handler,A=k.selector),A&&x.find.matchesSelector(So,A),C.guid||(C.guid=x.guid++),(U=ut.events)||(U=ut.events=Object.create(null)),(B=ut.handle)||(B=ut.handle=function(nn){return typeof x<"u"&&x.event.triggered!==nn.type?x.event.dispatch.apply(u,arguments):void 0}),V=(p=(p||"").match(We)||[""]).length;V--;)ue=tt=(E=Zi.exec(p[V])||[])[1],pe=(E[2]||"").split(".").sort(),ue&&(ie=x.event.special[ue]||{},ue=(A?ie.delegateType:ie.bindType)||ue,ie=x.event.special[ue]||{},Z=x.extend({type:ue,origType:tt,data:w,handler:C,guid:C.guid,selector:A,needsContext:A&&x.expr.match.needsContext.test(A),namespace:pe.join(".")},k),(J=U[ue])||((J=U[ue]=[]).delegateCount=0,ie.setup&&ie.setup.call(u,w,pe,B)!==!1||u.addEventListener&&u.addEventListener(ue,B)),ie.add&&(ie.add.call(u,Z),Z.handler.guid||(Z.handler.guid=C.guid)),A?J.splice(J.delegateCount++,0,Z):J.push(Z),x.event.global[ue]=!0)},remove:function(u,p,C,w,A){var k,B,E,U,V,Z,ie,J,ue,pe,tt,ut=Qe.hasData(u)&&Qe.get(u);if(ut&&(U=ut.events)){for(V=(p=(p||"").match(We)||[""]).length;V--;)if(ue=tt=(E=Zi.exec(p[V])||[])[1],pe=(E[2]||"").split(".").sort(),ue){for(ie=x.event.special[ue]||{},J=U[ue=(w?ie.delegateType:ie.bindType)||ue]||[],E=E[2]&&new RegExp("(^|\\.)"+pe.join("\\.(?:.*\\.|)")+"(\\.|$)"),B=k=J.length;k--;)Z=J[k],!A&&tt!==Z.origType||C&&C.guid!==Z.guid||E&&!E.test(Z.namespace)||w&&w!==Z.selector&&(w!=="**"||!Z.selector)||(J.splice(k,1),Z.selector&&J.delegateCount--,ie.remove&&ie.remove.call(u,Z));B&&!J.length&&(ie.teardown&&ie.teardown.call(u,pe,ut.handle)!==!1||x.removeEvent(u,ue,ut.handle),delete U[ue])}else for(ue in U)x.event.remove(u,ue+p[V],C,w,!0);x.isEmptyObject(U)&&Qe.remove(u,"handle events")}},dispatch:function(u){var p,C,w,A,k,B,E=new Array(arguments.length),U=x.event.fix(u),V=(Qe.get(this,"events")||Object.create(null))[U.type]||[],Z=x.event.special[U.type]||{};for(E[0]=U,p=1;p<arguments.length;p++)E[p]=arguments[p];if(U.delegateTarget=this,!Z.preDispatch||Z.preDispatch.call(this,U)!==!1){for(B=x.event.handlers.call(this,U,V),p=0;(A=B[p++])&&!U.isPropagationStopped();)for(U.currentTarget=A.elem,C=0;(k=A.handlers[C++])&&!U.isImmediatePropagationStopped();)U.rnamespace&&k.namespace!==!1&&!U.rnamespace.test(k.namespace)||(U.handleObj=k,U.data=k.data,(w=((x.event.special[k.origType]||{}).handle||k.handler).apply(A.elem,E))!==void 0&&(U.result=w)===!1&&(U.preventDefault(),U.stopPropagation()));return Z.postDispatch&&Z.postDispatch.call(this,U),U.result}},handlers:function(u,p){var C,w,A,k,B,E=[],U=p.delegateCount,V=u.target;if(U&&V.nodeType&&!(u.type==="click"&&1<=u.button)){for(;V!==this;V=V.parentNode||this)if(V.nodeType===1&&(u.type!=="click"||V.disabled!==!0)){for(k=[],B={},C=0;C<U;C++)B[A=(w=p[C]).selector+" "]===void 0&&(B[A]=w.needsContext?-1<x(A,this).index(V):x.find(A,this,null,[V]).length),B[A]&&k.push(w);k.length&&E.push({elem:V,handlers:k})}}return V=this,U<p.length&&E.push({elem:V,handlers:p.slice(U)}),E},addProp:function(u,p){Object.defineProperty(x.Event.prototype,u,{enumerable:!0,configurable:!0,get:Re(p)?function(){if(this.originalEvent)return p(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[u]},set:function(C){Object.defineProperty(this,u,{enumerable:!0,configurable:!0,writable:!0,value:C})}})},fix:function(u){return u[x.expando]?u:new x.Event(u)},special:{load:{noBubble:!0},click:{setup:function(u){var p=this||u;return Cr.test(p.type)&&p.click&&ke(p,"input")&&Ks(p,"click",!0),!1},trigger:function(u){var p=this||u;return Cr.test(p.type)&&p.click&&ke(p,"input")&&Ks(p,"click"),!0},_default:function(u){var p=u.target;return Cr.test(p.type)&&p.click&&ke(p,"input")&&Qe.get(p,"click")||ke(p,"a")}},beforeunload:{postDispatch:function(u){u.result!==void 0&&u.originalEvent&&(u.originalEvent.returnValue=u.result)}}}},x.removeEvent=function(u,p,C){u.removeEventListener&&u.removeEventListener(p,C)},x.Event=function(u,p){if(!(this instanceof x.Event))return new x.Event(u,p);u&&u.type?(this.originalEvent=u,this.type=u.type,this.isDefaultPrevented=u.defaultPrevented||u.defaultPrevented===void 0&&u.returnValue===!1?hn:cs,this.target=u.target&&u.target.nodeType===3?u.target.parentNode:u.target,this.currentTarget=u.currentTarget,this.relatedTarget=u.relatedTarget):this.type=u,p&&x.extend(this,p),this.timeStamp=u&&u.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:cs,isPropagationStopped:cs,isImmediatePropagationStopped:cs,isSimulated:!1,preventDefault:function(){var u=this.originalEvent;this.isDefaultPrevented=hn,u&&!this.isSimulated&&u.preventDefault()},stopPropagation:function(){var u=this.originalEvent;this.isPropagationStopped=hn,u&&!this.isSimulated&&u.stopPropagation()},stopImmediatePropagation:function(){var u=this.originalEvent;this.isImmediatePropagationStopped=hn,u&&!this.isSimulated&&u.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(u,p){function C(w){if(Ge.documentMode){var A=Qe.get(this,"handle"),k=x.event.fix(w);k.type=w.type==="focusin"?"focus":"blur",k.isSimulated=!0,A(w),k.target===k.currentTarget&&A(k)}else x.event.simulate(p,w.target,x.event.fix(w))}x.event.special[u]={setup:function(){var w;if(Ks(this,u,!0),!Ge.documentMode)return!1;(w=Qe.get(this,p))||this.addEventListener(p,C),Qe.set(this,p,(w||0)+1)},trigger:function(){return Ks(this,u),!0},teardown:function(){var w;if(!Ge.documentMode)return!1;(w=Qe.get(this,p)-1)?Qe.set(this,p,w):(this.removeEventListener(p,C),Qe.remove(this,p))},_default:function(w){return Qe.get(w.target,u)},delegateType:p},x.event.special[p]={setup:function(){var w=this.ownerDocument||this.document||this,A=Ge.documentMode?this:w,k=Qe.get(A,p);k||(Ge.documentMode?this.addEventListener(p,C):w.addEventListener(u,C,!0)),Qe.set(A,p,(k||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,A=Ge.documentMode?this:w,k=Qe.get(A,p)-1;k?Qe.set(A,p,k):(Ge.documentMode?this.removeEventListener(p,C):w.removeEventListener(u,C,!0),Qe.remove(A,p))}}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(u,p){x.event.special[u]={delegateType:p,bindType:p,handle:function(C){var w,A=C.relatedTarget,k=C.handleObj;return A&&(A===this||x.contains(this,A))||(C.type=k.origType,w=k.handler.apply(this,arguments),C.type=p),w}}}),x.fn.extend({on:function(u,p,C,w){return $a(this,u,p,C,w)},one:function(u,p,C,w){return $a(this,u,p,C,w,1)},off:function(u,p,C){var w,A;if(u&&u.preventDefault&&u.handleObj)return w=u.handleObj,x(u.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if(typeof u=="object"){for(A in u)this.off(A,p,u[A]);return this}return p!==!1&&typeof p!="function"||(C=p,p=void 0),C===!1&&(C=cs),this.each(function(){x.event.remove(this,u,C,p)})}});var Xs=/<script|<style|<link/i,Ec=/checked\s*(?:[^=]|=\s*.checked.)/i,kc=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function qa(u,p){return ke(u,"table")&&ke(p.nodeType!==11?p:p.firstChild,"tr")&&x(u).children("tbody")[0]||u}function Qu(u){return u.type=(u.getAttribute("type")!==null)+"/"+u.type,u}function ds(u){return(u.type||"").slice(0,5)==="true/"?u.type=u.type.slice(5):u.removeAttribute("type"),u}function Wa(u,p){var C,w,A,k,B,E;if(p.nodeType===1){if(Qe.hasData(u)&&(E=Qe.get(u).events))for(A in Qe.remove(p,"handle events"),E)for(C=0,w=E[A].length;C<w;C++)x.event.add(p,A,E[A][C]);_n.hasData(u)&&(k=_n.access(u),B=x.extend({},k),_n.set(p,B))}}function Ut(u,p,C,w){p=Gt(p);var A,k,B,E,U,V,Z=0,ie=u.length,J=ie-1,ue=p[0],pe=Re(ue);if(pe||1<ie&&typeof ue=="string"&&!Ue.checkClone&&Ec.test(ue))return u.each(function(tt){var ut=u.eq(tt);pe&&(p[0]=ue.call(this,tt,ut.html())),Ut(ut,p,C,w)});if(ie&&(k=(A=Ji(p,u[0].ownerDocument,!1,u,w)).firstChild,A.childNodes.length===1&&(A=k),k||w)){for(E=(B=x.map(gn(A,"script"),Qu)).length;Z<ie;Z++)U=A,Z!==J&&(U=x.clone(U,!0,!0),E&&x.merge(B,gn(U,"script"))),C.call(u[Z],U,Z);if(E)for(V=B[B.length-1].ownerDocument,x.map(B,ds),Z=0;Z<E;Z++)U=B[Z],Bt.test(U.type||"")&&!Qe.access(U,"globalEval")&&x.contains(V,U)&&(U.src&&(U.type||"").toLowerCase()!=="module"?x._evalUrl&&!U.noModule&&x._evalUrl(U.src,{nonce:U.nonce||U.getAttribute("nonce")},V):Mt(U.textContent.replace(kc,""),U,V))}return u}function Kr(u,p,C){for(var w,A=p?x.filter(p,u):u,k=0;(w=A[k])!=null;k++)C||w.nodeType!==1||x.cleanData(gn(w)),w.parentNode&&(C&&pn(w)&&ho(gn(w,"script")),w.parentNode.removeChild(w));return u}x.extend({htmlPrefilter:function(u){return u},clone:function(u,p,C){var w,A,k,B,E,U,V,Z=u.cloneNode(!0),ie=pn(u);if(!(Ue.noCloneChecked||u.nodeType!==1&&u.nodeType!==11||x.isXMLDoc(u)))for(B=gn(Z),w=0,A=(k=gn(u)).length;w<A;w++)E=k[w],U=B[w],(V=U.nodeName.toLowerCase())==="input"&&Cr.test(E.type)?U.checked=E.checked:V!=="input"&&V!=="textarea"||(U.defaultValue=E.defaultValue);if(p)if(C)for(k=k||gn(u),B=B||gn(Z),w=0,A=k.length;w<A;w++)Wa(k[w],B[w]);else Wa(u,Z);return 0<(B=gn(Z,"script")).length&&ho(B,!ie&&gn(u,"script")),Z},cleanData:function(u){for(var p,C,w,A=x.event.special,k=0;(C=u[k])!==void 0;k++)if(oo(C)){if(p=C[Qe.expando]){if(p.events)for(w in p.events)A[w]?x.event.remove(C,w):x.removeEvent(C,w,p.handle);C[Qe.expando]=void 0}C[_n.expando]&&(C[_n.expando]=void 0)}}}),x.fn.extend({detach:function(u){return Kr(this,u,!0)},remove:function(u){return Kr(this,u)},text:function(u){return go(this,function(p){return p===void 0?x.text(this):this.empty().each(function(){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||(this.textContent=p)})},null,u,arguments.length)},append:function(){return Ut(this,arguments,function(u){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||qa(this,u).appendChild(u)})},prepend:function(){return Ut(this,arguments,function(u){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var p=qa(this,u);p.insertBefore(u,p.firstChild)}})},before:function(){return Ut(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this)})},after:function(){return Ut(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this.nextSibling)})},empty:function(){for(var u,p=0;(u=this[p])!=null;p++)u.nodeType===1&&(x.cleanData(gn(u,!1)),u.textContent="");return this},clone:function(u,p){return u=u!=null&&u,p=p??u,this.map(function(){return x.clone(this,u,p)})},html:function(u){return go(this,function(p){var C=this[0]||{},w=0,A=this.length;if(p===void 0&&C.nodeType===1)return C.innerHTML;if(typeof p=="string"&&!Xs.test(p)&&!Fe[(Ha.exec(p)||["",""])[1].toLowerCase()]){p=x.htmlPrefilter(p);try{for(;w<A;w++)(C=this[w]||{}).nodeType===1&&(x.cleanData(gn(C,!1)),C.innerHTML=p);C=0}catch{}}C&&this.empty().append(p)},null,u,arguments.length)},replaceWith:function(){var u=[];return Ut(this,arguments,function(p){var C=this.parentNode;x.inArray(this,u)<0&&(x.cleanData(gn(this)),C&&C.replaceChild(p,this))},u)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(u,p){x.fn[u]=function(C){for(var w,A=[],k=x(C),B=k.length-1,E=0;E<=B;E++)w=E===B?this:this.clone(!0),x(k[E])[p](w),Pn.apply(A,w.get());return this.pushStack(A)}});var Va=new RegExp("^("+ro+")(?!px)[a-z%]+$","i"),Ka=/^--/,Xa=function(u){var p=u.ownerDocument.defaultView;return p&&p.opener||(p=ve),p.getComputedStyle(u)},Wo=function(u,p,C){var w,A,k={};for(A in p)k[A]=u.style[A],u.style[A]=p[A];for(A in w=C.call(u),p)u.style[A]=k[A];return w},_c=new RegExp(qn.join("|"),"i");function us(u,p,C){var w,A,k,B,E=Ka.test(p),U=u.style;return(C=C||Xa(u))&&(B=C.getPropertyValue(p)||C[p],E&&B&&(B=B.replace(Jo,"$1")||void 0),B!==""||pn(u)||(B=x.style(u,p)),!Ue.pixelBoxStyles()&&Va.test(B)&&_c.test(p)&&(w=U.width,A=U.minWidth,k=U.maxWidth,U.minWidth=U.maxWidth=U.width=B,B=C.width,U.width=w,U.minWidth=A,U.maxWidth=k)),B!==void 0?B+"":B}function bn(u,p){return{get:function(){if(!u())return(this.get=p).apply(this,arguments);delete this.get}}}(function(){function u(){if(V){U.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",V.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",So.appendChild(U).appendChild(V);var Z=ve.getComputedStyle(V);C=Z.top!=="1%",E=p(Z.marginLeft)===12,V.style.right="60%",k=p(Z.right)===36,w=p(Z.width)===36,V.style.position="absolute",A=p(V.offsetWidth/3)===12,So.removeChild(U),V=null}}function p(Z){return Math.round(parseFloat(Z))}var C,w,A,k,B,E,U=Ge.createElement("div"),V=Ge.createElement("div");V.style&&(V.style.backgroundClip="content-box",V.cloneNode(!0).style.backgroundClip="",Ue.clearCloneStyle=V.style.backgroundClip==="content-box",x.extend(Ue,{boxSizingReliable:function(){return u(),w},pixelBoxStyles:function(){return u(),k},pixelPosition:function(){return u(),C},reliableMarginLeft:function(){return u(),E},scrollboxSize:function(){return u(),A},reliableTrDimensions:function(){var Z,ie,J,ue;return B==null&&(Z=Ge.createElement("table"),ie=Ge.createElement("tr"),J=Ge.createElement("div"),Z.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ie.style.cssText="box-sizing:content-box;border:1px solid",ie.style.height="1px",J.style.height="9px",J.style.display="block",So.appendChild(Z).appendChild(ie).appendChild(J),ue=ve.getComputedStyle(ie),B=parseInt(ue.height,10)+parseInt(ue.borderTopWidth,10)+parseInt(ue.borderBottomWidth,10)===ie.offsetHeight,So.removeChild(Z)),B}}))})();var Jt=["Webkit","Moz","ms"],Ya=Ge.createElement("div").style,Ga={};function xr(u){var p=x.cssProps[u]||Ga[u];return p||(u in Ya?u:Ga[u]=(function(C){for(var w=C[0].toUpperCase()+C.slice(1),A=Jt.length;A--;)if((C=Jt[A]+w)in Ya)return C})(u)||u)}var Ju=/^(none|table(?!-c[ea]).+)/,Nc={position:"absolute",visibility:"hidden",display:"block"},Eo={letterSpacing:"0",fontWeight:"400"};function ms(u,p,C){var w=wn.exec(p);return w?Math.max(0,w[2]-(C||0))+(w[3]||"px"):p}function fs(u,p,C,w,A,k){var B=p==="width"?1:0,E=0,U=0,V=0;if(C===(w?"border":"content"))return 0;for(;B<4;B+=2)C==="margin"&&(V+=x.css(u,C+qn[B],!0,A)),w?(C==="content"&&(U-=x.css(u,"padding"+qn[B],!0,A)),C!=="margin"&&(U-=x.css(u,"border"+qn[B]+"Width",!0,A))):(U+=x.css(u,"padding"+qn[B],!0,A),C!=="padding"?U+=x.css(u,"border"+qn[B]+"Width",!0,A):E+=x.css(u,"border"+qn[B]+"Width",!0,A));return!w&&0<=k&&(U+=Math.max(0,Math.ceil(u["offset"+p[0].toUpperCase()+p.slice(1)]-k-U-E-.5))||0),U+V}function Ys(u,p,C){var w=Xa(u),A=(!Ue.boxSizingReliable()||C)&&x.css(u,"boxSizing",!1,w)==="border-box",k=A,B=us(u,p,w),E="offset"+p[0].toUpperCase()+p.slice(1);if(Va.test(B)){if(!C)return B;B="auto"}return(!Ue.boxSizingReliable()&&A||!Ue.reliableTrDimensions()&&ke(u,"tr")||B==="auto"||!parseFloat(B)&&x.css(u,"display",!1,w)==="inline")&&u.getClientRects().length&&(A=x.css(u,"boxSizing",!1,w)==="border-box",(k=E in u)&&(B=u[E])),(B=parseFloat(B)||0)+fs(u,p,C||(A?"border":"content"),k,w,B)+"px"}function so(u,p,C,w,A){return new so.prototype.init(u,p,C,w,A)}x.extend({cssHooks:{opacity:{get:function(u,p){if(p){var C=us(u,"opacity");return C===""?"1":C}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(u,p,C,w){if(u&&u.nodeType!==3&&u.nodeType!==8&&u.style){var A,k,B,E=Wt(p),U=Ka.test(p),V=u.style;if(U||(p=xr(E)),B=x.cssHooks[p]||x.cssHooks[E],C===void 0)return B&&"get"in B&&(A=B.get(u,!1,w))!==void 0?A:V[p];(k=typeof C)=="string"&&(A=wn.exec(C))&&A[1]&&(C=Vs(u,p,A),k="number"),C!=null&&C==C&&(k!=="number"||U||(C+=A&&A[3]||(x.cssNumber[E]?"":"px")),Ue.clearCloneStyle||C!==""||p.indexOf("background")!==0||(V[p]="inherit"),B&&"set"in B&&(C=B.set(u,C,w))===void 0||(U?V.setProperty(p,C):V[p]=C))}},css:function(u,p,C,w){var A,k,B,E=Wt(p);return Ka.test(p)||(p=xr(E)),(B=x.cssHooks[p]||x.cssHooks[E])&&"get"in B&&(A=B.get(u,!0,C)),A===void 0&&(A=us(u,p,w)),A==="normal"&&p in Eo&&(A=Eo[p]),C===""||C?(k=parseFloat(A),C===!0||isFinite(k)?k||0:A):A}}),x.each(["height","width"],function(u,p){x.cssHooks[p]={get:function(C,w,A){if(w)return!Ju.test(x.css(C,"display"))||C.getClientRects().length&&C.getBoundingClientRect().width?Ys(C,p,A):Wo(C,Nc,function(){return Ys(C,p,A)})},set:function(C,w,A){var k,B=Xa(C),E=!Ue.scrollboxSize()&&B.position==="absolute",U=(E||A)&&x.css(C,"boxSizing",!1,B)==="border-box",V=A?fs(C,p,A,U,B):0;return U&&E&&(V-=Math.ceil(C["offset"+p[0].toUpperCase()+p.slice(1)]-parseFloat(B[p])-fs(C,p,"border",!1,B)-.5)),V&&(k=wn.exec(w))&&(k[3]||"px")!=="px"&&(C.style[p]=w,w=x.css(C,p)),ms(0,w,V)}}}),x.cssHooks.marginLeft=bn(Ue.reliableMarginLeft,function(u,p){if(p)return(parseFloat(us(u,"marginLeft"))||u.getBoundingClientRect().left-Wo(u,{marginLeft:0},function(){return u.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(u,p){x.cssHooks[u+p]={expand:function(C){for(var w=0,A={},k=typeof C=="string"?C.split(" "):[C];w<4;w++)A[u+qn[w]+p]=k[w]||k[w-2]||k[0];return A}},u!=="margin"&&(x.cssHooks[u+p].set=ms)}),x.fn.extend({css:function(u,p){return go(this,function(C,w,A){var k,B,E={},U=0;if(Array.isArray(w)){for(k=Xa(C),B=w.length;U<B;U++)E[w[U]]=x.css(C,w[U],!1,k);return E}return A!==void 0?x.style(C,w,A):x.css(C,w)},u,p,1<arguments.length)}}),((x.Tween=so).prototype={constructor:so,init:function(u,p,C,w,A,k){this.elem=u,this.prop=C,this.easing=A||x.easing._default,this.options=p,this.start=this.now=this.cur(),this.end=w,this.unit=k||(x.cssNumber[C]?"":"px")},cur:function(){var u=so.propHooks[this.prop];return u&&u.get?u.get(this):so.propHooks._default.get(this)},run:function(u){var p,C=so.propHooks[this.prop];return this.options.duration?this.pos=p=x.easing[this.easing](u,this.options.duration*u,0,1,this.options.duration):this.pos=p=u,this.now=(this.end-this.start)*p+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),C&&C.set?C.set(this):so.propHooks._default.set(this),this}}).init.prototype=so.prototype,(so.propHooks={_default:{get:function(u){var p;return u.elem.nodeType!==1||u.elem[u.prop]!=null&&u.elem.style[u.prop]==null?u.elem[u.prop]:(p=x.css(u.elem,u.prop,""))&&p!=="auto"?p:0},set:function(u){x.fx.step[u.prop]?x.fx.step[u.prop](u):u.elem.nodeType!==1||!x.cssHooks[u.prop]&&u.elem.style[xr(u.prop)]==null?u.elem[u.prop]=u.now:x.style(u.elem,u.prop,u.now+u.unit)}}}).scrollTop=so.propHooks.scrollLeft={set:function(u){u.elem.nodeType&&u.elem.parentNode&&(u.elem[u.prop]=u.now)}},x.easing={linear:function(u){return u},swing:function(u){return .5-Math.cos(u*Math.PI)/2},_default:"swing"},x.fx=so.prototype.init,x.fx.step={};var Wn,wr,Ft,Xr,Ac=/^(?:toggle|show|hide)$/,Tc=/queueHooks$/;function Gs(){wr&&(Ge.hidden===!1&&ve.requestAnimationFrame?ve.requestAnimationFrame(Gs):ve.setTimeout(Gs,x.fx.interval),x.fx.tick())}function Qs(){return ve.setTimeout(function(){Wn=void 0}),Wn=Date.now()}function ps(u,p){var C,w=0,A={height:u};for(p=p?1:0;w<4;w+=2-p)A["margin"+(C=qn[w])]=A["padding"+C]=u;return p&&(A.opacity=A.width=u),A}function gs(u,p,C){for(var w,A=(Gn.tweeners[p]||[]).concat(Gn.tweeners["*"]),k=0,B=A.length;k<B;k++)if(w=A[k].call(C,p,u))return w}function Gn(u,p,C){var w,A,k=0,B=Gn.prefilters.length,E=x.Deferred().always(function(){delete U.elem}),U=function(){if(A)return!1;for(var ie=Wn||Qs(),J=Math.max(0,V.startTime+V.duration-ie),ue=1-(J/V.duration||0),pe=0,tt=V.tweens.length;pe<tt;pe++)V.tweens[pe].run(ue);return E.notifyWith(u,[V,ue,J]),ue<1&&tt?J:(tt||E.notifyWith(u,[V,1,0]),E.resolveWith(u,[V]),!1)},V=E.promise({elem:u,props:x.extend({},p),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},C),originalProperties:p,originalOptions:C,startTime:Wn||Qs(),duration:C.duration,tweens:[],createTween:function(ie,J){var ue=x.Tween(u,V.opts,ie,J,V.opts.specialEasing[ie]||V.opts.easing);return V.tweens.push(ue),ue},stop:function(ie){var J=0,ue=ie?V.tweens.length:0;if(A)return this;for(A=!0;J<ue;J++)V.tweens[J].run(1);return ie?(E.notifyWith(u,[V,1,0]),E.resolveWith(u,[V,ie])):E.rejectWith(u,[V,ie]),this}}),Z=V.props;for(!(function(ie,J){var ue,pe,tt,ut,nn;for(ue in ie)if(tt=J[pe=Wt(ue)],ut=ie[ue],Array.isArray(ut)&&(tt=ut[1],ut=ie[ue]=ut[0]),ue!==pe&&(ie[pe]=ut,delete ie[ue]),(nn=x.cssHooks[pe])&&"expand"in nn)for(ue in ut=nn.expand(ut),delete ie[pe],ut)ue in ie||(ie[ue]=ut[ue],J[ue]=tt);else J[pe]=tt})(Z,V.opts.specialEasing);k<B;k++)if(w=Gn.prefilters[k].call(V,u,Z,V.opts))return Re(w.stop)&&(x._queueHooks(V.elem,V.opts.queue).stop=w.stop.bind(w)),w;return x.map(Z,gs,V),Re(V.opts.start)&&V.opts.start.call(u,V),V.progress(V.opts.progress).done(V.opts.done,V.opts.complete).fail(V.opts.fail).always(V.opts.always),x.fx.timer(x.extend(U,{elem:u,anim:V,queue:V.opts.queue})),V}x.Animation=x.extend(Gn,{tweeners:{"*":[function(u,p){var C=this.createTween(u,p);return Vs(C.elem,u,wn.exec(p),C),C}]},tweener:function(u,p){Re(u)?(p=u,u=["*"]):u=u.match(We);for(var C,w=0,A=u.length;w<A;w++)C=u[w],Gn.tweeners[C]=Gn.tweeners[C]||[],Gn.tweeners[C].unshift(p)},prefilters:[function(u,p,C){var w,A,k,B,E,U,V,Z,ie="width"in p||"height"in p,J=this,ue={},pe=u.style,tt=u.nodeType&&xt(u),ut=Qe.get(u,"fxshow");for(w in C.queue||((B=x._queueHooks(u,"fx")).unqueued==null&&(B.unqueued=0,E=B.empty.fire,B.empty.fire=function(){B.unqueued||E()}),B.unqueued++,J.always(function(){J.always(function(){B.unqueued--,x.queue(u,"fx").length||B.empty.fire()})})),p)if(A=p[w],Ac.test(A)){if(delete p[w],k=k||A==="toggle",A===(tt?"hide":"show")){if(A!=="show"||!ut||ut[w]===void 0)continue;tt=!0}ue[w]=ut&&ut[w]||x.style(u,w)}if((U=!x.isEmptyObject(p))||!x.isEmptyObject(ue))for(w in ie&&u.nodeType===1&&(C.overflow=[pe.overflow,pe.overflowX,pe.overflowY],(V=ut&&ut.display)==null&&(V=Qe.get(u,"display")),(Z=x.css(u,"display"))==="none"&&(V?Z=V:(vr([u],!0),V=u.style.display||V,Z=x.css(u,"display"),vr([u]))),(Z==="inline"||Z==="inline-block"&&V!=null)&&x.css(u,"float")==="none"&&(U||(J.done(function(){pe.display=V}),V==null&&(Z=pe.display,V=Z==="none"?"":Z)),pe.display="inline-block")),C.overflow&&(pe.overflow="hidden",J.always(function(){pe.overflow=C.overflow[0],pe.overflowX=C.overflow[1],pe.overflowY=C.overflow[2]})),U=!1,ue)U||(ut?"hidden"in ut&&(tt=ut.hidden):ut=Qe.access(u,"fxshow",{display:V}),k&&(ut.hidden=!tt),tt&&vr([u],!0),J.done(function(){for(w in tt||vr([u]),Qe.remove(u,"fxshow"),ue)x.style(u,w,ue[w])})),U=gs(tt?ut[w]:0,w,J),w in ut||(ut[w]=U.start,tt&&(U.end=U.start,U.start=0))}],prefilter:function(u,p){p?Gn.prefilters.unshift(u):Gn.prefilters.push(u)}}),x.speed=function(u,p,C){var w=u&&typeof u=="object"?x.extend({},u):{complete:C||!C&&p||Re(u)&&u,duration:u,easing:C&&p||p&&!Re(p)&&p};return x.fx.off?w.duration=0:typeof w.duration!="number"&&(w.duration in x.fx.speeds?w.duration=x.fx.speeds[w.duration]:w.duration=x.fx.speeds._default),w.queue!=null&&w.queue!==!0||(w.queue="fx"),w.old=w.complete,w.complete=function(){Re(w.old)&&w.old.call(this),w.queue&&x.dequeue(this,w.queue)},w},x.fn.extend({fadeTo:function(u,p,C,w){return this.filter(xt).css("opacity",0).show().end().animate({opacity:p},u,C,w)},animate:function(u,p,C,w){var A=x.isEmptyObject(u),k=x.speed(p,C,w),B=function(){var E=Gn(this,x.extend({},u),k);(A||Qe.get(this,"finish"))&&E.stop(!0)};return B.finish=B,A||k.queue===!1?this.each(B):this.queue(k.queue,B)},stop:function(u,p,C){var w=function(A){var k=A.stop;delete A.stop,k(C)};return typeof u!="string"&&(C=p,p=u,u=void 0),p&&this.queue(u||"fx",[]),this.each(function(){var A=!0,k=u!=null&&u+"queueHooks",B=x.timers,E=Qe.get(this);if(k)E[k]&&E[k].stop&&w(E[k]);else for(k in E)E[k]&&E[k].stop&&Tc.test(k)&&w(E[k]);for(k=B.length;k--;)B[k].elem!==this||u!=null&&B[k].queue!==u||(B[k].anim.stop(C),A=!1,B.splice(k,1));!A&&C||x.dequeue(this,u)})},finish:function(u){return u!==!1&&(u=u||"fx"),this.each(function(){var p,C=Qe.get(this),w=C[u+"queue"],A=C[u+"queueHooks"],k=x.timers,B=w?w.length:0;for(C.finish=!0,x.queue(this,u,[]),A&&A.stop&&A.stop.call(this,!0),p=k.length;p--;)k[p].elem===this&&k[p].queue===u&&(k[p].anim.stop(!0),k.splice(p,1));for(p=0;p<B;p++)w[p]&&w[p].finish&&w[p].finish.call(this);delete C.finish})}}),x.each(["toggle","show","hide"],function(u,p){var C=x.fn[p];x.fn[p]=function(w,A,k){return w==null||typeof w=="boolean"?C.apply(this,arguments):this.animate(ps(p,!0),w,A,k)}}),x.each({slideDown:ps("show"),slideUp:ps("hide"),slideToggle:ps("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(u,p){x.fn[u]=function(C,w,A){return this.animate(p,C,w,A)}}),x.timers=[],x.fx.tick=function(){var u,p=0,C=x.timers;for(Wn=Date.now();p<C.length;p++)(u=C[p])()||C[p]!==u||C.splice(p--,1);C.length||x.fx.stop(),Wn=void 0},x.fx.timer=function(u){x.timers.push(u),x.fx.start()},x.fx.interval=13,x.fx.start=function(){wr||(wr=!0,Gs())},x.fx.stop=function(){wr=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(u,p){return u=x.fx&&x.fx.speeds[u]||u,p=p||"fx",this.queue(p,function(C,w){var A=ve.setTimeout(C,u);w.stop=function(){ve.clearTimeout(A)}})},Ft=Ge.createElement("input"),Xr=Ge.createElement("select").appendChild(Ge.createElement("option")),Ft.type="checkbox",Ue.checkOn=Ft.value!=="",Ue.optSelected=Xr.selected,(Ft=Ge.createElement("input")).value="t",Ft.type="radio",Ue.radioValue=Ft.value==="t";var el,ko=x.expr.attrHandle;x.fn.extend({attr:function(u,p){return go(this,x.attr,u,p,1<arguments.length)},removeAttr:function(u){return this.each(function(){x.removeAttr(this,u)})}}),x.extend({attr:function(u,p,C){var w,A,k=u.nodeType;if(k!==3&&k!==8&&k!==2)return typeof u.getAttribute>"u"?x.prop(u,p,C):(k===1&&x.isXMLDoc(u)||(A=x.attrHooks[p.toLowerCase()]||(x.expr.match.bool.test(p)?el:void 0)),C!==void 0?C===null?void x.removeAttr(u,p):A&&"set"in A&&(w=A.set(u,C,p))!==void 0?w:(u.setAttribute(p,C+""),C):A&&"get"in A&&(w=A.get(u,p))!==null?w:(w=x.find.attr(u,p))==null?void 0:w)},attrHooks:{type:{set:function(u,p){if(!Ue.radioValue&&p==="radio"&&ke(u,"input")){var C=u.value;return u.setAttribute("type",p),C&&(u.value=C),p}}}},removeAttr:function(u,p){var C,w=0,A=p&&p.match(We);if(A&&u.nodeType===1)for(;C=A[w++];)u.removeAttribute(C)}}),el={set:function(u,p,C){return p===!1?x.removeAttr(u,C):u.setAttribute(C,C),C}},x.each(x.expr.match.bool.source.match(/\w+/g),function(u,p){var C=ko[p]||x.find.attr;ko[p]=function(w,A,k){var B,E,U=A.toLowerCase();return k||(E=ko[U],ko[U]=B,B=C(w,A,k)!=null?U:null,ko[U]=E),B}});var Dc=/^(?:input|select|textarea|button)$/i,tl=/^(?:a|area)$/i;function _o(u){return(u.match(We)||[]).join(" ")}function Sr(u){return u.getAttribute&&u.getAttribute("class")||""}function Js(u){return Array.isArray(u)?u:typeof u=="string"&&u.match(We)||[]}x.fn.extend({prop:function(u,p){return go(this,x.prop,u,p,1<arguments.length)},removeProp:function(u){return this.each(function(){delete this[x.propFix[u]||u]})}}),x.extend({prop:function(u,p,C){var w,A,k=u.nodeType;if(k!==3&&k!==8&&k!==2)return k===1&&x.isXMLDoc(u)||(p=x.propFix[p]||p,A=x.propHooks[p]),C!==void 0?A&&"set"in A&&(w=A.set(u,C,p))!==void 0?w:u[p]=C:A&&"get"in A&&(w=A.get(u,p))!==null?w:u[p]},propHooks:{tabIndex:{get:function(u){var p=x.find.attr(u,"tabindex");return p?parseInt(p,10):Dc.test(u.nodeName)||tl.test(u.nodeName)&&u.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Ue.optSelected||(x.propHooks.selected={get:function(u){var p=u.parentNode;return p&&p.parentNode&&p.parentNode.selectedIndex,null},set:function(u){var p=u.parentNode;p&&(p.selectedIndex,p.parentNode&&p.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(u){var p,C,w,A,k,B;return Re(u)?this.each(function(E){x(this).addClass(u.call(this,E,Sr(this)))}):(p=Js(u)).length?this.each(function(){if(w=Sr(this),C=this.nodeType===1&&" "+_o(w)+" "){for(k=0;k<p.length;k++)A=p[k],C.indexOf(" "+A+" ")<0&&(C+=A+" ");B=_o(C),w!==B&&this.setAttribute("class",B)}}):this},removeClass:function(u){var p,C,w,A,k,B;return Re(u)?this.each(function(E){x(this).removeClass(u.call(this,E,Sr(this)))}):arguments.length?(p=Js(u)).length?this.each(function(){if(w=Sr(this),C=this.nodeType===1&&" "+_o(w)+" "){for(k=0;k<p.length;k++)for(A=p[k];-1<C.indexOf(" "+A+" ");)C=C.replace(" "+A+" "," ");B=_o(C),w!==B&&this.setAttribute("class",B)}}):this:this.attr("class","")},toggleClass:function(u,p){var C,w,A,k,B=typeof u,E=B==="string"||Array.isArray(u);return Re(u)?this.each(function(U){x(this).toggleClass(u.call(this,U,Sr(this),p),p)}):typeof p=="boolean"&&E?p?this.addClass(u):this.removeClass(u):(C=Js(u),this.each(function(){if(E)for(k=x(this),A=0;A<C.length;A++)w=C[A],k.hasClass(w)?k.removeClass(w):k.addClass(w);else u!==void 0&&B!=="boolean"||((w=Sr(this))&&Qe.set(this,"__className__",w),this.setAttribute&&this.setAttribute("class",w||u===!1?"":Qe.get(this,"__className__")||""))}))},hasClass:function(u){var p,C,w=0;for(p=" "+u+" ";C=this[w++];)if(C.nodeType===1&&-1<(" "+_o(Sr(C))+" ").indexOf(p))return!0;return!1}});var tr=/\r/g;x.fn.extend({val:function(u){var p,C,w,A=this[0];return arguments.length?(w=Re(u),this.each(function(k){var B;this.nodeType===1&&((B=w?u.call(this,k,x(this).val()):u)==null?B="":typeof B=="number"?B+="":Array.isArray(B)&&(B=x.map(B,function(E){return E==null?"":E+""})),(p=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in p&&p.set(this,B,"value")!==void 0||(this.value=B))})):A?(p=x.valHooks[A.type]||x.valHooks[A.nodeName.toLowerCase()])&&"get"in p&&(C=p.get(A,"value"))!==void 0?C:typeof(C=A.value)=="string"?C.replace(tr,""):C??"":void 0}}),x.extend({valHooks:{option:{get:function(u){var p=x.find.attr(u,"value");return p??_o(x.text(u))}},select:{get:function(u){var p,C,w,A=u.options,k=u.selectedIndex,B=u.type==="select-one",E=B?null:[],U=B?k+1:A.length;for(w=k<0?U:B?k:0;w<U;w++)if(((C=A[w]).selected||w===k)&&!C.disabled&&(!C.parentNode.disabled||!ke(C.parentNode,"optgroup"))){if(p=x(C).val(),B)return p;E.push(p)}return E},set:function(u,p){for(var C,w,A=u.options,k=x.makeArray(p),B=A.length;B--;)((w=A[B]).selected=-1<x.inArray(x.valHooks.option.get(w),k))&&(C=!0);return C||(u.selectedIndex=-1),k}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(u,p){if(Array.isArray(p))return u.checked=-1<x.inArray(x(u).val(),p)}},Ue.checkOn||(x.valHooks[this].get=function(u){return u.getAttribute("value")===null?"on":u.value})});var Zs=ve.location,Rc={guid:Date.now()},Qa=/\?/;x.parseXML=function(u){var p,C;if(!u||typeof u!="string")return null;try{p=new ve.DOMParser().parseFromString(u,"text/xml")}catch{}return C=p&&p.getElementsByTagName("parsererror")[0],p&&!C||x.error("Invalid XML: "+(C?x.map(C.childNodes,function(w){return w.textContent}).join(`
`):u)),p};var nl=/^(?:focusinfocus|focusoutblur)$/,ol=function(u){u.stopPropagation()};x.extend(x.event,{trigger:function(u,p,C,w){var A,k,B,E,U,V,Z,ie,J=[C||Ge],ue=Ln.call(u,"type")?u.type:u,pe=Ln.call(u,"namespace")?u.namespace.split("."):[];if(k=ie=B=C=C||Ge,C.nodeType!==3&&C.nodeType!==8&&!nl.test(ue+x.event.triggered)&&(-1<ue.indexOf(".")&&(ue=(pe=ue.split(".")).shift(),pe.sort()),U=ue.indexOf(":")<0&&"on"+ue,(u=u[x.expando]?u:new x.Event(ue,typeof u=="object"&&u)).isTrigger=w?2:3,u.namespace=pe.join("."),u.rnamespace=u.namespace?new RegExp("(^|\\.)"+pe.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u.result=void 0,u.target||(u.target=C),p=p==null?[u]:x.makeArray(p,[u]),Z=x.event.special[ue]||{},w||!Z.trigger||Z.trigger.apply(C,p)!==!1)){if(!w&&!Z.noBubble&&!re(C)){for(E=Z.delegateType||ue,nl.test(E+ue)||(k=k.parentNode);k;k=k.parentNode)J.push(k),B=k;B===(C.ownerDocument||Ge)&&J.push(B.defaultView||B.parentWindow||ve)}for(A=0;(k=J[A++])&&!u.isPropagationStopped();)ie=k,u.type=1<A?E:Z.bindType||ue,(V=(Qe.get(k,"events")||Object.create(null))[u.type]&&Qe.get(k,"handle"))&&V.apply(k,p),(V=U&&k[U])&&V.apply&&oo(k)&&(u.result=V.apply(k,p),u.result===!1&&u.preventDefault());return u.type=ue,w||u.isDefaultPrevented()||Z._default&&Z._default.apply(J.pop(),p)!==!1||!oo(C)||U&&Re(C[ue])&&!re(C)&&((B=C[U])&&(C[U]=null),x.event.triggered=ue,u.isPropagationStopped()&&ie.addEventListener(ue,ol),C[ue](),u.isPropagationStopped()&&ie.removeEventListener(ue,ol),x.event.triggered=void 0,B&&(C[U]=B)),u.result}},simulate:function(u,p,C){var w=x.extend(new x.Event,C,{type:u,isSimulated:!0});x.event.trigger(w,null,p)}}),x.fn.extend({trigger:function(u,p){return this.each(function(){x.event.trigger(u,p,this)})},triggerHandler:function(u,p){var C=this[0];if(C)return x.event.trigger(u,p,C,!0)}});var Oc=/\[\]$/,rl=/\r?\n/g,Bc=/^(?:submit|button|image|reset|file)$/i,Pc=/^(?:input|select|textarea|keygen)/i;function sl(u,p,C,w){var A;if(Array.isArray(p))x.each(p,function(k,B){C||Oc.test(u)?w(u,B):sl(u+"["+(typeof B=="object"&&B!=null?k:"")+"]",B,C,w)});else if(C||kt(p)!=="object")w(u,p);else for(A in p)sl(u+"["+A+"]",p[A],C,w)}x.param=function(u,p){var C,w=[],A=function(k,B){var E=Re(B)?B():B;w[w.length]=encodeURIComponent(k)+"="+encodeURIComponent(E??"")};if(u==null)return"";if(Array.isArray(u)||u.jquery&&!x.isPlainObject(u))x.each(u,function(){A(this.name,this.value)});else for(C in u)sl(C,u[C],p,A);return w.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var u=x.prop(this,"elements");return u?x.makeArray(u):this}).filter(function(){var u=this.type;return this.name&&!x(this).is(":disabled")&&Pc.test(this.nodeName)&&!Bc.test(u)&&(this.checked||!Cr.test(u))}).map(function(u,p){var C=x(this).val();return C==null?null:Array.isArray(C)?x.map(C,function(w){return{name:p.name,value:w.replace(rl,`\r
`)}}):{name:p.name,value:C.replace(rl,`\r
`)}}).get()}});var Zu=/%20/g,Lc=/#.*$/,Mc=/([?&])_=[^&]*/,Ic=/^(.*?):[ \t]*([^\r\n]*)$/gm,Fc=/^(?:GET|HEAD)$/,jc=/^\/\//,al={},Ja={},il="*/".concat("*"),ll=Ge.createElement("a");function zc(u){return function(p,C){typeof p!="string"&&(C=p,p="*");var w,A=0,k=p.toLowerCase().match(We)||[];if(Re(C))for(;w=k[A++];)w[0]==="+"?(w=w.slice(1)||"*",(u[w]=u[w]||[]).unshift(C)):(u[w]=u[w]||[]).push(C)}}function Uc(u,p,C,w){var A={},k=u===Ja;function B(E){var U;return A[E]=!0,x.each(u[E]||[],function(V,Z){var ie=Z(p,C,w);return typeof ie!="string"||k||A[ie]?k?!(U=ie):void 0:(p.dataTypes.unshift(ie),B(ie),!1)}),U}return B(p.dataTypes[0])||!A["*"]&&B("*")}function cl(u,p){var C,w,A=x.ajaxSettings.flatOptions||{};for(C in p)p[C]!==void 0&&((A[C]?u:w||(w={}))[C]=p[C]);return w&&x.extend(!0,u,w),u}ll.href=Zs.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Zs.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Zs.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":il,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(u,p){return p?cl(cl(u,x.ajaxSettings),p):cl(x.ajaxSettings,u)},ajaxPrefilter:zc(al),ajaxTransport:zc(Ja),ajax:function(u,p){typeof u=="object"&&(p=u,u=void 0),p=p||{};var C,w,A,k,B,E,U,V,Z,ie,J=x.ajaxSetup({},p),ue=J.context||J,pe=J.context&&(ue.nodeType||ue.jquery)?x(ue):x.event,tt=x.Deferred(),ut=x.Callbacks("once memory"),nn=J.statusCode||{},Me={},Ao={},ao="canceled",wt={readyState:0,getResponseHeader:function(ot){var St;if(U){if(!k)for(k={};St=Ic.exec(A);)k[St[1].toLowerCase()+" "]=(k[St[1].toLowerCase()+" "]||[]).concat(St[2]);St=k[ot.toLowerCase()+" "]}return St==null?null:St.join(", ")},getAllResponseHeaders:function(){return U?A:null},setRequestHeader:function(ot,St){return U==null&&(ot=Ao[ot.toLowerCase()]=Ao[ot.toLowerCase()]||ot,Me[ot]=St),this},overrideMimeType:function(ot){return U==null&&(J.mimeType=ot),this},statusCode:function(ot){var St;if(ot)if(U)wt.always(ot[wt.status]);else for(St in ot)nn[St]=[nn[St],ot[St]];return this},abort:function(ot){var St=ot||ao;return C&&C.abort(St),io(0,St),this}};if(tt.promise(wt),J.url=((u||J.url||Zs.href)+"").replace(jc,Zs.protocol+"//"),J.type=p.method||p.type||J.method||J.type,J.dataTypes=(J.dataType||"*").toLowerCase().match(We)||[""],J.crossDomain==null){E=Ge.createElement("a");try{E.href=J.url,E.href=E.href,J.crossDomain=ll.protocol+"//"+ll.host!=E.protocol+"//"+E.host}catch{J.crossDomain=!0}}if(J.data&&J.processData&&typeof J.data!="string"&&(J.data=x.param(J.data,J.traditional)),Uc(al,J,p,wt),U)return wt;for(Z in(V=x.event&&J.global)&&x.active++==0&&x.event.trigger("ajaxStart"),J.type=J.type.toUpperCase(),J.hasContent=!Fc.test(J.type),w=J.url.replace(Lc,""),J.hasContent?J.data&&J.processData&&(J.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(J.data=J.data.replace(Zu,"+")):(ie=J.url.slice(w.length),J.data&&(J.processData||typeof J.data=="string")&&(w+=(Qa.test(w)?"&":"?")+J.data,delete J.data),J.cache===!1&&(w=w.replace(Mc,"$1"),ie=(Qa.test(w)?"&":"?")+"_="+Rc.guid+++ie),J.url=w+ie),J.ifModified&&(x.lastModified[w]&&wt.setRequestHeader("If-Modified-Since",x.lastModified[w]),x.etag[w]&&wt.setRequestHeader("If-None-Match",x.etag[w])),(J.data&&J.hasContent&&J.contentType!==!1||p.contentType)&&wt.setRequestHeader("Content-Type",J.contentType),wt.setRequestHeader("Accept",J.dataTypes[0]&&J.accepts[J.dataTypes[0]]?J.accepts[J.dataTypes[0]]+(J.dataTypes[0]!=="*"?", "+il+"; q=0.01":""):J.accepts["*"]),J.headers)wt.setRequestHeader(Z,J.headers[Z]);if(J.beforeSend&&(J.beforeSend.call(ue,wt,J)===!1||U))return wt.abort();if(ao="abort",ut.add(J.complete),wt.done(J.success),wt.fail(J.error),C=Uc(Ja,J,p,wt)){if(wt.readyState=1,V&&pe.trigger("ajaxSend",[wt,J]),U)return wt;J.async&&0<J.timeout&&(B=ve.setTimeout(function(){wt.abort("timeout")},J.timeout));try{U=!1,C.send(Me,io)}catch(ot){if(U)throw ot;io(-1,ot)}}else io(-1,"No Transport");function io(ot,St,na,dl){var Sn,hs,Nn,bo,vn,An=St;U||(U=!0,B&&ve.clearTimeout(B),C=void 0,A=dl||"",wt.readyState=0<ot?4:0,Sn=200<=ot&&ot<300||ot===304,na&&(bo=(function(on,an,Xt){for(var Qn,Fn,st,ht,Vt=on.contents,Pt=on.dataTypes;Pt[0]==="*";)Pt.shift(),Qn===void 0&&(Qn=on.mimeType||an.getResponseHeader("Content-Type"));if(Qn){for(Fn in Vt)if(Vt[Fn]&&Vt[Fn].test(Qn)){Pt.unshift(Fn);break}}if(Pt[0]in Xt)st=Pt[0];else{for(Fn in Xt){if(!Pt[0]||on.converters[Fn+" "+Pt[0]]){st=Fn;break}ht||(ht=Fn)}st=st||ht}if(st)return st!==Pt[0]&&Pt.unshift(st),Xt[st]})(J,wt,na)),!Sn&&-1<x.inArray("script",J.dataTypes)&&x.inArray("json",J.dataTypes)<0&&(J.converters["text script"]=function(){}),bo=(function(on,an,Xt,Qn){var Fn,st,ht,Vt,Pt,Vn={},Er=on.dataTypes.slice();if(Er[1])for(ht in on.converters)Vn[ht.toLowerCase()]=on.converters[ht];for(st=Er.shift();st;)if(on.responseFields[st]&&(Xt[on.responseFields[st]]=an),!Pt&&Qn&&on.dataFilter&&(an=on.dataFilter(an,on.dataType)),Pt=st,st=Er.shift()){if(st==="*")st=Pt;else if(Pt!=="*"&&Pt!==st){if(!(ht=Vn[Pt+" "+st]||Vn["* "+st])){for(Fn in Vn)if((Vt=Fn.split(" "))[1]===st&&(ht=Vn[Pt+" "+Vt[0]]||Vn["* "+Vt[0]])){ht===!0?ht=Vn[Fn]:Vn[Fn]!==!0&&(st=Vt[0],Er.unshift(Vt[1]));break}}if(ht!==!0)if(ht&&on.throws)an=ht(an);else try{an=ht(an)}catch(bs){return{state:"parsererror",error:ht?bs:"No conversion from "+Pt+" to "+st}}}}return{state:"success",data:an}})(J,bo,wt,Sn),Sn?(J.ifModified&&((vn=wt.getResponseHeader("Last-Modified"))&&(x.lastModified[w]=vn),(vn=wt.getResponseHeader("etag"))&&(x.etag[w]=vn)),ot===204||J.type==="HEAD"?An="nocontent":ot===304?An="notmodified":(An=bo.state,hs=bo.data,Sn=!(Nn=bo.error))):(Nn=An,!ot&&An||(An="error",ot<0&&(ot=0))),wt.status=ot,wt.statusText=(St||An)+"",Sn?tt.resolveWith(ue,[hs,An,wt]):tt.rejectWith(ue,[wt,An,Nn]),wt.statusCode(nn),nn=void 0,V&&pe.trigger(Sn?"ajaxSuccess":"ajaxError",[wt,J,Sn?hs:Nn]),ut.fireWith(ue,[wt,An]),V&&(pe.trigger("ajaxComplete",[wt,J]),--x.active||x.event.trigger("ajaxStop")))}return wt},getJSON:function(u,p,C){return x.get(u,p,C,"json")},getScript:function(u,p){return x.get(u,void 0,p,"script")}}),x.each(["get","post"],function(u,p){x[p]=function(C,w,A,k){return Re(w)&&(k=k||A,A=w,w=void 0),x.ajax(x.extend({url:C,type:p,dataType:k,data:w,success:A},x.isPlainObject(C)&&C))}}),x.ajaxPrefilter(function(u){var p;for(p in u.headers)p.toLowerCase()==="content-type"&&(u.contentType=u.headers[p]||"")}),x._evalUrl=function(u,p,C){return x.ajax({url:u,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){x.globalEval(w,p,C)}})},x.fn.extend({wrapAll:function(u){var p;return this[0]&&(Re(u)&&(u=u.call(this[0])),p=x(u,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&p.insertBefore(this[0]),p.map(function(){for(var C=this;C.firstElementChild;)C=C.firstElementChild;return C}).append(this)),this},wrapInner:function(u){return Re(u)?this.each(function(p){x(this).wrapInner(u.call(this,p))}):this.each(function(){var p=x(this),C=p.contents();C.length?C.wrapAll(u):p.append(u)})},wrap:function(u){var p=Re(u);return this.each(function(C){x(this).wrapAll(p?u.call(this,C):u)})},unwrap:function(u){return this.parent(u).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(u){return!x.expr.pseudos.visible(u)},x.expr.pseudos.visible=function(u){return!!(u.offsetWidth||u.offsetHeight||u.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new ve.XMLHttpRequest}catch{}};var No={0:200,1223:204},ea=x.ajaxSettings.xhr();Ue.cors=!!ea&&"withCredentials"in ea,Ue.ajax=ea=!!ea,x.ajaxTransport(function(u){var p,C;if(Ue.cors||ea&&!u.crossDomain)return{send:function(w,A){var k,B=u.xhr();if(B.open(u.type,u.url,u.async,u.username,u.password),u.xhrFields)for(k in u.xhrFields)B[k]=u.xhrFields[k];for(k in u.mimeType&&B.overrideMimeType&&B.overrideMimeType(u.mimeType),u.crossDomain||w["X-Requested-With"]||(w["X-Requested-With"]="XMLHttpRequest"),w)B.setRequestHeader(k,w[k]);p=function(E){return function(){p&&(p=C=B.onload=B.onerror=B.onabort=B.ontimeout=B.onreadystatechange=null,E==="abort"?B.abort():E==="error"?typeof B.status!="number"?A(0,"error"):A(B.status,B.statusText):A(No[B.status]||B.status,B.statusText,(B.responseType||"text")!=="text"||typeof B.responseText!="string"?{binary:B.response}:{text:B.responseText},B.getAllResponseHeaders()))}},B.onload=p(),C=B.onerror=B.ontimeout=p("error"),B.onabort!==void 0?B.onabort=C:B.onreadystatechange=function(){B.readyState===4&&ve.setTimeout(function(){p&&C()})},p=p("abort");try{B.send(u.hasContent&&u.data||null)}catch(E){if(p)throw E}},abort:function(){p&&p()}}}),x.ajaxPrefilter(function(u){u.crossDomain&&(u.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(u){return x.globalEval(u),u}}}),x.ajaxPrefilter("script",function(u){u.cache===void 0&&(u.cache=!1),u.crossDomain&&(u.type="GET")}),x.ajaxTransport("script",function(u){var p,C;if(u.crossDomain||u.scriptAttrs)return{send:function(w,A){p=x("<script>").attr(u.scriptAttrs||{}).prop({charset:u.scriptCharset,src:u.url}).on("load error",C=function(k){p.remove(),C=null,k&&A(k.type==="error"?404:200,k.type)}),Ge.head.appendChild(p[0])},abort:function(){C&&C()}}});var Hc,$c=[],ta=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var u=$c.pop()||x.expando+"_"+Rc.guid++;return this[u]=!0,u}}),x.ajaxPrefilter("json jsonp",function(u,p,C){var w,A,k,B=u.jsonp!==!1&&(ta.test(u.url)?"url":typeof u.data=="string"&&(u.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&ta.test(u.data)&&"data");if(B||u.dataTypes[0]==="jsonp")return w=u.jsonpCallback=Re(u.jsonpCallback)?u.jsonpCallback():u.jsonpCallback,B?u[B]=u[B].replace(ta,"$1"+w):u.jsonp!==!1&&(u.url+=(Qa.test(u.url)?"&":"?")+u.jsonp+"="+w),u.converters["script json"]=function(){return k||x.error(w+" was not called"),k[0]},u.dataTypes[0]="json",A=ve[w],ve[w]=function(){k=arguments},C.always(function(){A===void 0?x(ve).removeProp(w):ve[w]=A,u[w]&&(u.jsonpCallback=p.jsonpCallback,$c.push(w)),k&&Re(A)&&A(k[0]),k=A=void 0}),"script"}),Ue.createHTMLDocument=((Hc=Ge.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",Hc.childNodes.length===2),x.parseHTML=function(u,p,C){return typeof u!="string"?[]:(typeof p=="boolean"&&(C=p,p=!1),p||(Ue.createHTMLDocument?((w=(p=Ge.implementation.createHTMLDocument("")).createElement("base")).href=Ge.location.href,p.head.appendChild(w)):p=Ge),k=!C&&[],(A=_.exec(u))?[p.createElement(A[1])]:(A=Ji([u],p,k),k&&k.length&&x(k).remove(),x.merge([],A.childNodes)));var w,A,k},x.fn.load=function(u,p,C){var w,A,k,B=this,E=u.indexOf(" ");return-1<E&&(w=_o(u.slice(E)),u=u.slice(0,E)),Re(p)?(C=p,p=void 0):p&&typeof p=="object"&&(A="POST"),0<B.length&&x.ajax({url:u,type:A||"GET",dataType:"html",data:p}).done(function(U){k=arguments,B.html(w?x("<div>").append(x.parseHTML(U)).find(w):U)}).always(C&&function(U,V){B.each(function(){C.apply(this,k||[U.responseText,V,U])})}),this},x.expr.pseudos.animated=function(u){return x.grep(x.timers,function(p){return u===p.elem}).length},x.offset={setOffset:function(u,p,C){var w,A,k,B,E,U,V=x.css(u,"position"),Z=x(u),ie={};V==="static"&&(u.style.position="relative"),E=Z.offset(),k=x.css(u,"top"),U=x.css(u,"left"),(V==="absolute"||V==="fixed")&&-1<(k+U).indexOf("auto")?(B=(w=Z.position()).top,A=w.left):(B=parseFloat(k)||0,A=parseFloat(U)||0),Re(p)&&(p=p.call(u,C,x.extend({},E))),p.top!=null&&(ie.top=p.top-E.top+B),p.left!=null&&(ie.left=p.left-E.left+A),"using"in p?p.using.call(u,ie):Z.css(ie)}},x.fn.extend({offset:function(u){if(arguments.length)return u===void 0?this:this.each(function(A){x.offset.setOffset(this,u,A)});var p,C,w=this[0];return w?w.getClientRects().length?(p=w.getBoundingClientRect(),C=w.ownerDocument.defaultView,{top:p.top+C.pageYOffset,left:p.left+C.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var u,p,C,w=this[0],A={top:0,left:0};if(x.css(w,"position")==="fixed")p=w.getBoundingClientRect();else{for(p=this.offset(),C=w.ownerDocument,u=w.offsetParent||C.documentElement;u&&(u===C.body||u===C.documentElement)&&x.css(u,"position")==="static";)u=u.parentNode;u&&u!==w&&u.nodeType===1&&((A=x(u).offset()).top+=x.css(u,"borderTopWidth",!0),A.left+=x.css(u,"borderLeftWidth",!0))}return{top:p.top-A.top-x.css(w,"marginTop",!0),left:p.left-A.left-x.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var u=this.offsetParent;u&&x.css(u,"position")==="static";)u=u.offsetParent;return u||So})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(u,p){var C=p==="pageYOffset";x.fn[u]=function(w){return go(this,function(A,k,B){var E;if(re(A)?E=A:A.nodeType===9&&(E=A.defaultView),B===void 0)return E?E[p]:A[k];E?E.scrollTo(C?E.pageXOffset:B,C?B:E.pageYOffset):A[k]=B},u,w,arguments.length)}}),x.each(["top","left"],function(u,p){x.cssHooks[p]=bn(Ue.pixelPosition,function(C,w){if(w)return w=us(C,p),Va.test(w)?x(C).position()[p]+"px":w})}),x.each({Height:"height",Width:"width"},function(u,p){x.each({padding:"inner"+u,content:p,"":"outer"+u},function(C,w){x.fn[w]=function(A,k){var B=arguments.length&&(C||typeof A!="boolean"),E=C||(A===!0||k===!0?"margin":"border");return go(this,function(U,V,Z){var ie;return re(U)?w.indexOf("outer")===0?U["inner"+u]:U.document.documentElement["client"+u]:U.nodeType===9?(ie=U.documentElement,Math.max(U.body["scroll"+u],ie["scroll"+u],U.body["offset"+u],ie["offset"+u],ie["client"+u])):Z===void 0?x.css(U,V,E):x.style(U,V,Z,E)},p,B?A:void 0,B)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(u,p){x.fn[p]=function(C){return this.on(p,C)}}),x.fn.extend({bind:function(u,p,C){return this.on(u,null,p,C)},unbind:function(u,p){return this.off(u,null,p)},delegate:function(u,p,C,w){return this.on(p,u,C,w)},undelegate:function(u,p,C){return arguments.length===1?this.off(u,"**"):this.off(p,u||"**",C)},hover:function(u,p){return this.on("mouseenter",u).on("mouseleave",p||u)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(u,p){x.fn[p]=function(C,w){return 0<arguments.length?this.on(p,null,C,w):this.trigger(p)}});var Vo=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;x.proxy=function(u,p){var C,w,A;if(typeof p=="string"&&(C=u[p],p=u,u=C),Re(u))return w=it.call(arguments,2),(A=function(){return u.apply(p||this,w.concat(it.call(arguments)))}).guid=u.guid=u.guid||x.guid++,A},x.holdReady=function(u){u?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=ke,x.isFunction=Re,x.isWindow=re,x.camelCase=Wt,x.type=kt,x.now=Date.now,x.isNumeric=function(u){var p=x.type(u);return(p==="number"||p==="string")&&!isNaN(u-parseFloat(u))},x.trim=function(u){return u==null?"":(u+"").replace(Vo,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return x});var Ko=ve.jQuery,Yr=ve.$;return x.noConflict=function(u){return ve.$===x&&(ve.$=Yr),u&&ve.jQuery===x&&(ve.jQuery=Ko),x},typeof Ke>"u"&&(ve.jQuery=ve.$=x),x}),(function(ve){ve.imageArea=function(Ke,Ye){var qe=Ke.options,it=Ke.$image,Gt=Ke.$trigger,Pn,rn,Xn,Co={},Ln,xo=!0,we=!0,Ue=[0,0],Re=[0,0],re={id:Ye,x:0,y:0,z:0,height:0,width:0},Ge=function(){re.z=0,le("blur")},xn=function(){Ke.blurAll(),re.z=100,le()},Mt=function(){return re},kt=function(_e){it.trigger(_e,[re.id,Ke.areas()])},ee=function(_e){var nt=_e||window.event||{};nt.cancelBubble=!0,nt.returnValue=!1,nt.stopPropagation&&nt.stopPropagation(),nt.preventDefault&&nt.preventDefault()},bt=function(){ve.each(arguments,function(_e,nt){x(nt)})},x=function(_e,nt){var dt,Se;switch(_e){case"start":dt="mousedown",Se="touchstart";break;case"move":dt="mousemove",Se="touchmove";break;case"stop":dt="mouseup",Se="touchend";break;default:return}nt&&jQuery.isFunction(nt)?ve(window.document).on(dt,nt).on(Se,nt):ve(window.document).off(dt).off(Se)},Mn=function(){Pn.css({cursor:"default",width:re.width,height:re.height,left:re.x,top:re.y}),rn.css({backgroundPosition:-re.x-1+"px "+(-re.y-1)+"px",cursor:qe.allowMove?"move":"default",width:re.width-2>0?re.width-2:0,height:re.height-2>0?re.height-2:0,left:re.x+1,top:re.y+1}),Xn.css({width:re.width-2>0?re.width-2:0,left:re.x+2,top:re.y+1})},ke=function(_e){qe.allowResize&&(_e?ve.each(Co,function(nt,dt){var Se,Ct,We=Math.round(dt.width()/2),K=Math.round(dt.height()/2),br=nt[0],Zo=nt[nt.length-1];br==="n"?Se=-K:br==="s"?Se=re.height-K-1:Se=Math.round(re.height/2)-K-1,Zo==="e"?Ct=re.width-We-1:Zo==="w"?Ct=-We:Ct=Math.round(re.width/2)-We-1,dt.css({display:"block",left:re.x+Ct,top:re.y+Se})}):ve(".select-areas-resize-handler").each(function(){ve(this).css({display:"none"})}))},In=function(_e){Ln&&Ln.css({display:_e?"block":"none",left:re.x+re.width+1,top:re.y-Ln.outerHeight()-1})},$s=function(_e){Pn.css({cursor:_e}),rn.css({cursor:_e})},le=function(_e){switch(_e){case"startSelection":Ke._refresh(),Mn(),ke(),In(!0);break;case"pickSelection":case"pickResizeHandler":ke();break;case"resizeSelection":Mn(),ke(),$s("crosshair"),In(!0);break;case"moveSelection":Mn(),ke(),$s("move"),In(!0);break;case"blur":Mn(),ke(),In();break;default:Mn(),ke(!0),In(!0)}},gt=function(_e){ee(_e),re.width=qe.minSize[0],re.height=qe.minSize[1],xn(),x("move",qo),x("stop",Yn),Re=_(_e),Re[0]+re.width>it.width()&&(Re[0]=it.width()-re.width),Re[1]+re.height>it.height()&&(Re[1]=it.height()-re.height),re.x=Re[0],re.y=Re[1],le("startSelection")},Jo=function(_e){ee(_e),xn(),x("move",po),x("stop",Yn);var nt=_(_e);Ue[0]=nt[0]-re.x,Ue[1]=nt[1]-re.y,le("pickSelection")},ye=function(_e){ee(_e),xn();var nt=_e.target.className.split(" ")[1];nt[nt.length-1]==="w"&&(Re[0]+=re.width,re.x=Re[0]-re.width),nt[0]==="n"&&(Re[1]+=re.height,re.y=Re[1]-re.height),nt==="n"||nt==="s"?xo=!1:(nt==="e"||nt==="w")&&(we=!1),x("move",qo),x("stop",Yn),le("pickResizeHandler")},qo=function(_e){ee(_e),xn();var nt=_(_e),dt=nt[1]-Re[1],Se=nt[0]-Re[0];Math.abs(Se)<qe.minSize[0]&&(Se=Se>=0?qe.minSize[0]:-qe.minSize[0]),Math.abs(dt)<qe.minSize[1]&&(dt=dt>=0?qe.minSize[1]:-qe.minSize[1]),(Re[0]+Se<0||Re[0]+Se>it.width())&&(Se=-Se),(Re[1]+dt<0||Re[1]+dt>it.height())&&(dt=-dt),qe.maxSize[0]>qe.minSize[0]&&qe.maxSize[1]>qe.minSize[1]&&(Math.abs(Se)>qe.maxSize[0]&&(Se=Se>=0?qe.maxSize[0]:-qe.maxSize[0]),Math.abs(dt)>qe.maxSize[1]&&(dt=dt>=0?qe.maxSize[1]:-qe.maxSize[1])),xo&&(re.width=Se),we&&(re.height=dt),qe.aspectRatio&&(Se>0&&dt>0||Se<0&&dt<0?xo?dt=Math.round(Se/qe.aspectRatio):Se=Math.round(dt*qe.aspectRatio):xo?dt=-Math.round(Se/qe.aspectRatio):Se=-Math.round(dt*qe.aspectRatio),Re[0]+Se>it.width()&&(Se=it.width()-Re[0],dt=dt>0?Math.round(Se/qe.aspectRatio):-Math.round(Se/qe.aspectRatio)),Re[1]+dt<0&&(dt=-Re[1],Se=Se>0?-Math.round(dt*qe.aspectRatio):Math.round(dt*qe.aspectRatio)),Re[1]+dt>it.height()&&(dt=it.height()-Re[1],Se=Se>0?Math.round(dt*qe.aspectRatio):-Math.round(dt*qe.aspectRatio)),re.width=Se,re.height=dt),re.width<0?(re.width=Math.abs(re.width),re.x=Re[0]-re.width):re.x=Re[0],re.height<0?(re.height=Math.abs(re.height),re.y=Re[1]-re.height):re.y=Re[1],kt("changing"),le("resizeSelection")},po=function(_e){if(ee(_e),!!qe.allowMove){xn();var nt=_(_e);gr({x:nt[0]-Ue[0],y:nt[1]-Ue[1]}),kt("changing")}},gr=function(_e){_e.x>0?_e.x+re.width<it.width()?re.x=_e.x:re.x=it.width()-re.width:re.x=0,_e.y>0?_e.y+re.height<it.height()?re.y=_e.y:re.y=it.height()-re.height:re.y=0,le("moveSelection")},Yn=function(_e,nt){ee(_e),bt("move","stop"),nt&&(re.x=nt.x,re.y=nt.y,re.z=nt.z,re.width=nt.width,re.height=nt.height,Mn()),Re[0]=re.x,Re[1]=re.y,xo=!0,we=!0,kt("changed"),le("releaseSelection")},_t=function(_e){kt("deleted"),ee(_e),rn.remove(),Pn.remove(),Xn.remove(),ve.each(Co,function(nt,dt){dt.remove()}),Ln&&Ln.remove(),Ke._remove(Ye)},zt=function(_e){var nt=ve(_e).offset();return[nt.left,nt.top]},_=function(_e){var nt=zt(it);_e.pageX||(_e.originalEvent&&(_e=_e.originalEvent),_e.changedTouches&&(_e=_e.changedTouches[0]),_e.touches&&(_e=_e.touches[0]));var dt=_e.pageX-nt[0],Se=_e.pageY-nt[1];return dt=dt<0?0:dt>it.width()?it.width():dt,Se=Se<0?0:Se>it.height()?it.height():Se,[dt,Se]};if(Pn=ve("<div id='select-areas-outline_"+Mt().id+`'  class="select-areas-outline"/>`).css({opacity:qe.outlineOpacity,position:"absolute"}).insertAfter(Gt),rn=ve("<div />").addClass("select-areas-background-area").attr("id","select-areas-background-area_"+Mt().id).css({position:"absolute"}).insertAfter(Pn),Xn=ve("<div id='select-areas-label-container_"+Mt().id+`'  class="select-areas-label-container"/>`).css({position:"absolute"}).insertAfter(Gt),qe.allowResize&&ve.each(["nw","n","ne","e","se","s","sw","w"],function(_e,nt){Co[nt]=ve('<div class="select-areas-resize-handler '+nt+" select-areas-resize-handler_"+Mt().id+'"/>').css({opacity:.5,position:"absolute",cursor:nt+"-resize"}).insertAfter(rn).mousedown(ye).bind("touchstart",ye)}),qe.allowDelete){var hr=function(_e){return _e.click(_t).bind("touchstart",_t).bind("tap",_t),_e};Ln=hr(ve("<div id='select-areas-delete_"+Mt().id+`'  class="delete-area" />`)).append(hr(ve('<div class="select-areas-delete-area" ><i class="fa fa-trash text-red-500 " aria-hidden="true"></i></div>'))).insertAfter(rn)}return qe.allowMove&&rn.mousedown(Jo).bind("touchstart",Jo),xn(),{getData:Mt,startSelection:gt,deleteSelection:_t,options:qe,blur:Ge,focus:xn,nudge:function(_e){_e.x=re.x,_e.y=re.y,_e.d&&(_e.y=re.y+_e.d),_e.u&&(_e.y=re.y-_e.u),_e.l&&(_e.x=re.x-_e.l),_e.r&&(_e.x=re.x+_e.r),gr(_e),kt("changed")},set:function(_e,nt){re=ve.extend(re,_e),Re[0]=re.x,Re[1]=re.y,nt||kt("changed")},contains:function(_e){return _e.x>=re.x&&_e.x<=re.x+re.width&&_e.y>=re.y&&_e.y<=re.y+re.height}}},ve.imageSelectAreas=function(){},ve.imageSelectAreas.prototype.init=function(Ke,Ye){var qe=this,it={allowEdit:!0,allowMove:!0,allowResize:!0,allowSelect:!0,allowDelete:!0,allowNudge:!0,aspectRatio:0,minSize:[0,0],maxSize:[0,0],width:0,maxAreas:0,outlineOpacity:.5,overlayOpacity:.5,areas:[],onChanging:null,onChanged:null,onDeleted:null};this.options=ve.extend(it,Ye),this.options.allowEdit||(this.options.allowSelect=this.options.allowMove=this.options.allowResize=this.options.allowDelete=!1),this._areas={},this.$image=ve(Ke),this.ratio=1,this.options.width&&this.$image.width()&&this.options.width!==this.$image.width()&&(this.ratio=this.options.width/this.$image.width(),this.$image.width(this.options.width)),this.options.onChanging&&this.$image.on("changing",this.options.onChanging),this.options.onChanged&&this.$image.on("changed",this.options.onChanged),this.options.onDeleted&&this.$image.on("deleted",this.options.onDeleted),this.options.onLoaded&&this.$image.on("loaded",this.options.onLoaded),this.$holder=ve("<div />").css({position:"relative",width:this.$image.width(),height:this.$image.height()}),this.$image.wrap(this.$holder).css({position:"absolute"}),this.$overlay=ve('<div class="select-areas-overlay" />').css({opacity:this.options.overlayOpacity,position:"absolute",width:this.$image.width(),height:this.$image.height()}).insertAfter(this.$image),this.$trigger=ve("<div />").css({backgroundColor:"#000000",opacity:0,position:"absolute",width:this.$image.width(),height:this.$image.height(),top:"1px"}).addClass("trigger").insertAfter(this.$overlay),ve.each(this.options.areas,function(Gt,Pn){qe._add(Pn,!0)}),this.blurAll(),this._refresh(),this.options.allowSelect&&this.$trigger.mousedown(ve.proxy(this.newArea,this)).on("touchstart",ve.proxy(this.newArea,this)),this.options.allowNudge&&ve("html").keydown(function(Gt){var Pn={37:"l",38:"u",39:"r",40:"d"},rn=Pn[Gt.which],Xn;if(rn&&(qe._eachArea(function(Ln){if(Ln.getData().z===100)return Xn=Ln,!1}),Xn)){var Co={};Co[rn]=1,Xn.nudge(Co)}})},ve.imageSelectAreas.prototype._refresh=function(){var Ke=this.areas().length;this.$overlay.css({display:Ke?"block":"none"}),this.$trigger.css({cursor:this.options.allowSelect?"crosshair":"default"})},ve.imageSelectAreas.prototype._eachArea=function(Ke){ve.each(this._areas,function(Ye,qe){if(qe)return Ke(qe,Ye)})},ve.imageSelectAreas.prototype._remove=function(Ke){delete this._areas[Ke],this._refresh()},ve.imageSelectAreas.prototype.remove=function(Ke){this._areas[Ke]&&this._areas[Ke].deleteSelection()},ve.imageSelectAreas.prototype.newArea=function(Ke){var Ye=-1;return this.blurAll(),this.options.maxAreas&&this.options.maxAreas<=this.areas().length||(this._eachArea(function(qe,it){Ye=Math.max(Ye,parseInt(it,10))}),Ye+=1,this._areas[Ye]=ve.imageArea(this,Ye),Ke&&this._areas[Ye].startSelection(Ke)),Ye},ve.imageSelectAreas.prototype.set=function(Ke,Ye,qe){this._areas[Ke]&&(Ye.id=Ke,this._areas[Ke].set(Ye,qe),this._areas[Ke].focus())},ve.imageSelectAreas.prototype._add=function(Ke,Ye){var qe=this.newArea();this.set(qe,Ke,Ye)},ve.imageSelectAreas.prototype.add=function(Ke){var Ye=this;this.blurAll(),ve.isArray(Ke)?ve.each(Ke,function(qe,it){Ye._add(it)}):this._add(Ke),this._refresh(),!this.options.allowSelect&&!this.options.allowMove&&!this.options.allowResize&&!this.options.allowDelete&&this.blurAll()},ve.imageSelectAreas.prototype.reset=function(){var Ke=this;this._eachArea(function(Ye,qe){Ke.remove(qe)}),this._refresh()},ve.imageSelectAreas.prototype.destroy=function(){this.reset(),this.$holder.remove(),this.$overlay.remove(),this.$trigger.remove(),this.$image.css("width","").css("position","").unwrap(),this.$image.removeData("mainImageSelectAreas"),this.$image.off("changing changed loaded deleted")},ve.imageSelectAreas.prototype.areas=function(){var Ke=[];return this._eachArea(function(Ye){Ke.push(Ye.getData())}),Ke},ve.imageSelectAreas.prototype.relativeAreas=function(){for(var Ke=this.areas(),Ye=[],qe=this.ratio,it=function(Pn){return Math.floor(Pn/qe)},Gt=0;Gt<Ke.length;Gt++)Ye[Gt]=ve.extend({},Ke[Gt]),Ye[Gt].x=it(Ye[Gt].x),Ye[Gt].y=it(Ye[Gt].y),Ye[Gt].width=it(Ye[Gt].width),Ye[Gt].height=it(Ye[Gt].height);return Ye},ve.imageSelectAreas.prototype.blurAll=function(){this._eachArea(function(Ke){Ke.blur()})},ve.imageSelectAreas.prototype.contains=function(Ke){var Ye=!1;return this._eachArea(function(qe){if(qe.contains(Ke))return Ye=!0,!1}),Ye},ve.selectAreas=function(Ke,Ye){var qe=ve(Ke);if(!qe.data("mainImageSelectAreas")){var it=new ve.imageSelectAreas;it.init(Ke,Ye),qe.data("mainImageSelectAreas",it),qe.trigger("loaded")}return qe.data("mainImageSelectAreas")},ve.fn.selectAreas=function(Ke){if(ve.imageSelectAreas.prototype[Ke]){var Ye=ve.imageSelectAreas.prototype[Ke].apply(ve.selectAreas(this),Array.prototype.slice.call(arguments,1));return typeof Ye>"u"?this:Ye}else{if(typeof Ke=="object"||!Ke)return this.each(function(){var qe=this,it=new Image;it.onload=function(){ve.selectAreas(qe,Ke)},it.src=qe.src}),this;ve.error("Method "+Ke+" does not exist on jQuery.selectAreas")}}})(jQuery);
