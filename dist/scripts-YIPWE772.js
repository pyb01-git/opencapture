(function(){"use strict";var ge=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},Ve=function(e){return{eq:e}},Ke=Ve((function(e,t){return e===t})),We=function(e){return Ve((function(t,n){if(t.length!==n.length)return!1;for(var o=t.length,r=0;r<o;r++)if(!e.eq(t[r],n[r]))return!1;return!0}))},it=function(e){return Ve((function(t,n){var o=Object.keys(t),r=Object.keys(n);if(!(function(l,c){return(function(d,m){return Ve((function(f,h){return d.eq(m(f),m(h))}))})(We(l),(function(d){return(function(m,f){return Array.prototype.slice.call(m).sort(f)})(d,c)}))})(Ke).eq(o,r))return!1;for(var s=o.length,a=0;a<s;a++){var i=o[a];if(!e.eq(t[i],n[i]))return!1}return!0}))},Xt=Ve((function(e,t){if(e===t)return!0;var n=ge(e);return n===ge(t)&&((function(o){return["undefined","boolean","number","string","function","xml","null"].indexOf(o)!==-1})(n)?e===t:n==="array"?We(Xt).eq(e,t):n==="object"&&it(Xt).eq(e,t))}));const Dn=Object.getPrototypeOf,tn=(e,t,n)=>!!n(e,t.prototype)||e.constructor?.name===t.name,Kn=e=>t=>(n=>{const o=typeof n;return n===null?"null":o==="object"&&Array.isArray(n)?"array":o==="object"&&tn(n,String,((r,s)=>s.isPrototypeOf(r)))?"string":o})(t)===e,wo=e=>t=>typeof t===e,Rn=e=>t=>e===t,So=(e,t)=>He(e)&&tn(e,t,((n,o)=>Dn(n)===o)),xe=Kn("string"),He=Kn("object"),Re=e=>So(e,Object),re=Kn("array"),Xe=Rn(null),yn=wo("boolean"),Lt=Rn(void 0),kt=e=>e==null,te=e=>!kt(e),pt=wo("function"),x=wo("number"),On=(e,t)=>{if(re(e)){for(let n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1},Ee=()=>{},Bn=(e,t)=>(...n)=>e(t.apply(null,n)),Hs=(e,t)=>n=>e(t(n)),ie=e=>()=>e,gt=e=>e,Zo=(e,t)=>e===t;function be(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const Ho=e=>t=>!e(t),po=e=>()=>{throw new Error(e)},vr=e=>e(),Xn=e=>{e()},Nt=ie(!1),jt=ie(!0);class k{tag;value;static singletonNone=new k(!1);constructor(t,n){this.tag=t,this.value=n}static some(t){return new k(!0,t)}static none(){return k.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?k.some(t(this.value)):k.none()}bind(t){return this.tag?t(this.value):k.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:k.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return te(t)?k.some(t):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}const Cr=Array.prototype.slice,ke=Array.prototype.indexOf,nt=Array.prototype.push,ut=(e,t)=>ke.call(e,t),we=(e,t)=>ut(e,t)>-1,xt=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return!0;return!1},qe=(e,t)=>{const n=e.length,o=new Array(n);for(let r=0;r<n;r++){const s=e[r];o[r]=t(s,r)}return o},K=(e,t)=>{for(let n=0,o=e.length;n<o;n++)t(e[n],n)},xr=(e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)},er=(e,t)=>{const n=[],o=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];(t(a,r)?n:o).push(a)}return{pass:n,fail:o}},De=(e,t)=>{const n=[];for(let o=0,r=e.length;o<r;o++){const s=e[o];t(s,o)&&n.push(s)}return n},Vr=(e,t,n)=>(xr(e,((o,r)=>{n=t(n,o,r)})),n),Yt=(e,t,n)=>(K(e,((o,r)=>{n=t(n,o,r)})),n),go=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++){const s=e[o];if(t(s,o))return k.some(s);if(n(s,o))break}return k.none()},Ht=(e,t)=>go(e,t,Nt),$s=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return k.some(n);return k.none()},Ec=e=>{const t=[];for(let n=0,o=e.length;n<o;++n){if(!re(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);nt.apply(t,e[n])}return t},$t=(e,t)=>Ec(qe(e,t)),eo=(e,t)=>{for(let n=0,o=e.length;n<o;++n)if(t(e[n],n)!==!0)return!1;return!0},Eo=e=>{const t=Cr.call(e,0);return t.reverse(),t},Ye=(e,t)=>De(e,(n=>!we(t,n))),wn=(e,t)=>{const n={};for(let o=0,r=e.length;o<r;o++){const s=e[o];n[String(s)]=t(s,o)}return n},Kr=(e,t)=>{const n=Cr.call(e,0);return n.sort(t),n},qs=(e,t)=>t>=0&&t<e.length?k.some(e[t]):k.none(),nn=e=>qs(e,0),to=e=>qs(e,e.length-1),vn=pt(Array.from)?Array.from:e=>Cr.call(e),zn=(e,t)=>{for(let n=0;n<e.length;n++){const o=t(e[n],n);if(o.isSome())return o}return k.none()},ho=(e,t)=>{const n=[],o=pt(t)?r=>xt(n,(s=>t(s,r))):r=>we(n,r);for(let r=0,s=e.length;r<s;r++){const a=e[r];o(a)||n.push(a)}return n},un=Object.keys,em=Object.hasOwnProperty,wt=(e,t)=>{const n=un(e);for(let o=0,r=n.length;o<r;o++){const s=n[o];t(e[s],s)}},Ws=(e,t)=>kc(e,((n,o)=>({k:o,v:t(n,o)}))),kc=(e,t)=>{const n={};return wt(e,((o,r)=>{const s=t(o,r);n[s.k]=s.v})),n},wr=e=>(t,n)=>{e[n]=t},Sr=(e,t,n,o)=>{wt(e,((r,s)=>{(t(r,s)?n:o)(r,s)}))},tr=(e,t)=>{const n={};return Sr(e,t,wr(n),Ee),n},nr=(e,t)=>{const n=[];return wt(e,((o,r)=>{n.push(t(o,r))})),n},Vs=e=>nr(e,gt),Ot=(e,t)=>Oe(e,t)?k.from(e[t]):k.none(),Oe=(e,t)=>em.call(e,t),mn=(e,t)=>Oe(e,t)&&e[t]!==void 0&&e[t]!==null,bo=e=>{if(!re(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return K(e,((o,r)=>{const s=un(o);if(s.length!==1)throw new Error("one and only one name per case");const a=s[0],i=o[a];if(n[a]!==void 0)throw new Error("duplicate key detected:"+a);if(a==="cata")throw new Error("cannot have a case named cata (sorry)");if(!re(i))throw new Error("case arguments must be an array");t.push(a),n[a]=(...l)=>{const c=l.length;if(c!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+c);return{fold:(...d)=>{if(d.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+d.length);return d[r].apply(null,l)},match:d=>{const m=un(d);if(t.length!==m.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+m.join(","));if(!eo(t,(f=>we(m,f))))throw new Error("Not all branches were specified when using match. Specified: "+m.join(", ")+`
Required: `+t.join(", "));return d[a].apply(null,l)},log:d=>{console.log(d,{constructors:t,constructor:a,params:l})}}}})),n},Qt=e=>{let t=e;return{get:()=>t,set:n=>{t=n}}},Ji=e=>{const t=s=>s(e),n=ie(e),o=()=>r,r={tag:!0,inner:e,fold:(s,a)=>a(e),isValue:jt,isError:Nt,map:s=>fn.value(s(e)),mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:s=>{s(e)},toOptional:()=>k.some(e)};return r},Zi=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(o,r)=>o(e),isValue:Nt,isError:jt,map:t,mapError:o=>fn.error(o(e)),bind:t,exists:Nt,forall:jt,getOr:gt,or:gt,getOrThunk:vr,orThunk:vr,getOrDie:po(String(e)),each:Ee,toOptional:k.none};return n},fn={value:Ji,error:Zi,fromOption:(e,t)=>e.fold((()=>Zi(t)),Ji)},ds=typeof window<"u"?window:Function("return this;")(),Ha=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Ks=0;const Xs=e=>{const t=new Date().getTime(),n=Math.floor(1e9*Ha());return Ks++,e+"_"+n+Ks+String(t)},_c=()=>window.isSecureContext?window.crypto.randomUUID():(()=>{const e=(()=>{const n=window.crypto.getRandomValues(new Uint8Array(16));return n[6]=15&n[6]|64,n[8]=63&n[8]|128,n})(),t=(n,o)=>{let r="";for(let s=n;s<=o;++s)r+=e[s].toString(16).padStart(2,"0");return r};return`${t(0,3)}-${t(4,5)}-${t(6,7)}-${t(8,9)}-${t(10,15)}`})(),Nc=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<t.length;o++){const r=t[o];for(const s in r)Oe(r,s)&&(n[s]=e(n[s],r[s]))}return n},$a=Nc(((e,t)=>Re(e)&&Re(t)?$a(e,t):t)),tm=Nc(((e,t)=>t)),us=(e,t,n=Zo)=>e.exists((o=>n(o,t))),qa=(e,t,n=Zo)=>zt(e,t,n).getOr(e.isNone()&&t.isNone()),zt=(e,t,n)=>e.isSome()&&t.isSome()?k.some(n(e.getOrDie(),t.getOrDie())):k.none(),Xr=(e,t)=>e?k.some(t):k.none(),Wa=(e,t)=>((n,o)=>{let r=o??ds;for(let s=0;s<n.length&&r!=null;++s)r=r[n[s]];return r})(e.split("."),t);bo([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Va=e=>{const t=[],n=[];return K(e,(o=>{o.fold((r=>{t.push(r)}),(r=>{n.push(r)}))})),{errors:t,values:n}},Ka=e=>{const t=Qt(k.none()),n=()=>t.get().each((o=>clearInterval(o)));return{clear:()=>{n(),t.set(k.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:o=>{n(),t.set(k.some(setInterval(o,e)))}}},$o=()=>{const e=(t=>{const n=Qt(k.none()),o=()=>n.get().each(t);return{clear:()=>{o(),n.set(k.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(k.some(r))}}})(Ee);return{...e,on:t=>e.get().each(t)}},Ac=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,ms=(e,t)=>Gt(e,t)?((n,o)=>n.substring(o))(e,t.length):e,pn=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return r!==-1&&(!!Lt(o)||r+t.length<=o)},Gt=(e,t)=>Ac(e,t,0),Xa=(e,t)=>Ac(e,t,e.length-t.length),Ya=e=>t=>t.replace(e,""),Er=Ya(/^\s+|\s+$/g),nm=Ya(/^\s+/g),Tc=Ya(/\s+$/g),ko=e=>e.length>0,fs=e=>!ko(e),ps=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?k.none():k.some(n)},Ys=(e,t)=>{let n=null;return{cancel:()=>{Xe(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{Xe(n)&&(n=setTimeout((()=>{n=null,e.apply(null,o)}),t))}}},no=(e,t)=>{let n=null;const o=()=>{Xe(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout((()=>{n=null,e.apply(null,r)}),t)}}},Un=e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)},kr="\uFEFF",It="\xA0",Yr=e=>e===kr,Dc=e=>{const t={};return K(e,(n=>{t[n]={}})),un(t)},Rc=e=>e.length!==void 0,Gs=Array.isArray,Qs=(e,t,n)=>{if(!e)return!1;if(n=n||e,Rc(e)){for(let o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e)===!1)return!1}else for(const o in e)if(Oe(e,o)&&t.call(n,e[o],o,e)===!1)return!1;return!0},gs=(e,t)=>{const n=[];return Qs(e,((o,r)=>{n.push(t(o,r,e))})),n},hs=(e,t)=>{const n=[];return Qs(e,((o,r)=>{t&&!t(o,r,e)||n.push(o)})),n},Yn=(e,t,n,o)=>{let r=Lt(n)?e[0]:n;for(let s=0;s<e.length;s++)r=t.call(o,r,e[s],s);return r},el=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e))return o;return-1},_o=e=>e[e.length-1],Oc=()=>tl(0,0),tl=(e,t)=>({major:e,minor:t}),No={nu:tl,detect:(e,t)=>{const n=String(t).toLowerCase();return e.length===0?Oc():((o,r)=>{const s=((i,l)=>{for(let c=0;c<i.length;c++){const d=i[c];if(d.test(l))return d}})(o,r);if(!s)return{major:0,minor:0};const a=i=>Number(r.replace(s,"$"+i));return tl(a(1),a(2))})(e,n)},unknown:Oc},_r=(e,t)=>{const n=String(t).toLowerCase();return Ht(e,(o=>o.search(n)))},Js=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,or=e=>t=>pn(t,e),Zs=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>pn(e,"edge/")&&pn(e,"chrome")&&pn(e,"safari")&&pn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Js],search:e=>pn(e,"chrome")&&!pn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>pn(e,"msie")||pn(e,"trident")},{name:"Opera",versionRegexes:[Js,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:or("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:or("firefox")},{name:"Safari",versionRegexes:[Js,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(pn(e,"safari")||pn(e,"mobile/"))&&pn(e,"applewebkit")}],Bc=[{name:"Windows",search:or("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>pn(e,"iphone")||pn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:or("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:or("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:or("linux"),versionRegexes:[]},{name:"Solaris",search:or("sunos"),versionRegexes:[]},{name:"FreeBSD",search:or("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:or("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ga={browsers:ie(Zs),oses:ie(Bc)},nl="Edge",ol="Chromium",Pc="Opera",rl="Firefox",Lc="Safari",Mc=e=>{const t=e.current,n=e.version,o=r=>()=>t===r;return{current:t,version:n,isEdge:o(nl),isChromium:o(ol),isIE:o("IE"),isOpera:o(Pc),isFirefox:o(rl),isSafari:o(Lc)}},sl=()=>Mc({current:void 0,version:No.unknown()}),om=Mc,Ic=(ie(nl),ie(ol),ie("IE"),ie(Pc),ie(rl),ie(Lc),"Windows"),Fc="Android",jc="Linux",zc="macOS",Uc="Solaris",al="FreeBSD",Qa="ChromeOS",il=e=>{const t=e.current,n=e.version,o=r=>()=>t===r;return{current:t,version:n,isWindows:o(Ic),isiOS:o("iOS"),isAndroid:o(Fc),isMacOS:o(zc),isLinux:o(jc),isSolaris:o(Uc),isFreeBSD:o(al),isChromeOS:o(Qa)}},ll=()=>il({current:void 0,version:No.unknown()}),Hc=il,$c=(ie(Ic),ie("iOS"),ie(Fc),ie(jc),ie(zc),ie(Uc),ie(al),ie(Qa),e=>window.matchMedia(e).matches);let cl=Un((()=>((e,t,n)=>{const o=Ga.browsers(),r=Ga.oses(),s=t.bind((l=>((c,d)=>zn(d.brands,(m=>{const f=m.brand.toLowerCase();return Ht(c,(h=>f===h.brand?.toLowerCase())).map((h=>({current:h.name,version:No.nu(parseInt(m.version,10),0)})))})))(o,l))).orThunk((()=>((l,c)=>_r(l,c).map((d=>{const m=No.detect(d.versionRegexes,c);return{current:d.name,version:m}})))(o,e))).fold(sl,om),a=((l,c)=>_r(l,c).map((d=>{const m=No.detect(d.versionRegexes,c);return{current:d.name,version:m}})))(r,e).fold(ll,Hc),i=((l,c,d,m)=>{const f=l.isiOS()&&/ipad/i.test(d)===!0,h=l.isiOS()&&!f,g=l.isiOS()||l.isAndroid(),b=g||m("(pointer:coarse)"),y=f||!h&&g&&m("(min-device-width:768px)"),v=h||g&&!y,_=c.isSafari()&&l.isiOS()&&/safari/i.test(d)===!1,N=!v&&!y&&!_;return{isiPad:ie(f),isiPhone:ie(h),isTablet:ie(y),isPhone:ie(v),isTouch:ie(b),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ie(_),isDesktop:ie(N)}})(a,s,e,n);return{browser:s,os:a,deviceType:i}})(window.navigator.userAgent,k.from(window.navigator.userAgentData),$c)));const qo=()=>cl(),ea=Object.getPrototypeOf,qc=e=>{const t=Wa("ownerDocument.defaultView",e);return He(e)&&((n=>((o,r)=>{const s=((a,i)=>Wa(a,i))(o,r);if(s==null)throw new Error(o+" not available on this browser");return s})("HTMLElement",n))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(ea(e).constructor.name))},Wc=window.navigator.userAgent,ta=qo(),Wo=ta.browser,Vo=ta.os,Gr=ta.deviceType,u=Wc.indexOf("Windows Phone")!==-1,p={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Wo.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Wo.isIE(),windowsPhone:u,browser:{current:Wo.current,version:Wo.version,isChromium:Wo.isChromium,isEdge:Wo.isEdge,isFirefox:Wo.isFirefox,isIE:Wo.isIE,isOpera:Wo.isOpera,isSafari:Wo.isSafari},os:{current:Vo.current,version:Vo.version,isAndroid:Vo.isAndroid,isChromeOS:Vo.isChromeOS,isFreeBSD:Vo.isFreeBSD,isiOS:Vo.isiOS,isLinux:Vo.isLinux,isMacOS:Vo.isMacOS,isSolaris:Vo.isSolaris,isWindows:Vo.isWindows},deviceType:{isDesktop:Gr.isDesktop,isiPad:Gr.isiPad,isiPhone:Gr.isiPhone,isPhone:Gr.isPhone,isTablet:Gr.isTablet,isTouch:Gr.isTouch,isWebView:Gr.isWebView}},C=/^\s*|\s*$/g,w=e=>kt(e)?"":(""+e).replace(C,""),T=function(e,t,n,o){o=o||this,e&&(n&&(e=e[n]),Qs(e,((r,s)=>t.call(o,r,s,n)!==!1&&(T(r,t,n,o),!0))))},E={trim:w,isArray:Gs,is:(e,t)=>t?!(t!=="array"||!Gs(e))||typeof e===t:e!==void 0,toArray:e=>{if(Gs(e))return e;{const t=[];for(let n=0,o=e.length;n<o;n++)t[n]=e[n];return t}},makeMap:(e,t,n={})=>{const o=xe(e)?e.split(t||","):e||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:Qs,map:gs,grep:hs,inArray:(e,t)=>{if(e){for(let n=0,o=e.length;n<o;n++)if(e[n]===t)return n}return-1},hasOwn:Oe,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const o=t[n];for(const r in o)if(Oe(o,r)){const s=o[r];s!==void 0&&(e[r]=s)}}return e},walk:T,resolve:(e,t=window)=>{const n=e.split(".");for(let o=0,r=n.length;o<r&&(t=t[n[o]]);o++);return t},explode:(e,t)=>re(e)?e:e===""?[]:gs(e.split(t||","),w),_addCacheSuffix:e=>{const t=p.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},O=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},S={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return O(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return O(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return O(n)},fromDom:O,fromPoint:(e,t,n)=>k.from(e.dom.elementFromPoint(t,n)).map(O)},U=(e,t,n)=>{const o=e.document.createRange();var r;return r=o,t.fold((s=>{r.setStartBefore(s.dom)}),((s,a)=>{r.setStart(s.dom,a)}),(s=>{r.setStartAfter(s.dom)})),((s,a)=>{a.fold((i=>{s.setEndBefore(i.dom)}),((i,l)=>{s.setEnd(i.dom,l)}),(i=>{s.setEndAfter(i.dom)}))})(o,n),o},V=(e,t,n,o,r)=>{const s=e.document.createRange();return s.setStart(t.dom,n),s.setEnd(o.dom,r),s},ee=bo([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ae=(e,t,n)=>t(S.fromDom(n.startContainer),n.startOffset,S.fromDom(n.endContainer),n.endOffset);ee.ltr,ee.rtl;const Q=(e,t)=>{const n=e.dom;if(n.nodeType!==1)return!1;{const o=n;if(o.matches!==void 0)return o.matches(t);if(o.msMatchesSelector!==void 0)return o.msMatchesSelector(t);if(o.webkitMatchesSelector!==void 0)return o.webkitMatchesSelector(t);if(o.mozMatchesSelector!==void 0)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},ce=e=>e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11||e.childElementCount===0,me=(e,t)=>e.dom===t.dom,Ze=(e,t)=>{const n=e.dom,o=t.dom;return n!==o&&n.contains(o)},mt=Q,Jt=(e,t)=>{const n=[],o=s=>(n.push(s),t(s));let r=t(e);do r=r.bind(o);while(r.isSome());return n},Be=e=>e.dom.nodeName.toLowerCase(),Ao=e=>e.dom.nodeType,oo=e=>t=>Ao(t)===e,St=e=>Ao(e)===8||Be(e)==="#comment",ro=e=>ot(e)&&qc(e.dom),ot=oo(1),Et=oo(3),na=oo(9),dl=oo(11),Cn=e=>t=>ot(t)&&Be(t)===e,bs=e=>S.fromDom(e.dom.ownerDocument),Sn=e=>na(e)?e:bs(e),yo=e=>S.fromDom(Sn(e).dom.defaultView),gn=e=>k.from(e.dom.parentNode).map(S.fromDom),En=e=>k.from(e.dom.parentElement).map(S.fromDom),Zt=(e,t)=>{const n=pt(t)?t:Nt;let o=e.dom;const r=[];for(;o.parentNode!==null&&o.parentNode!==void 0;){const s=o.parentNode,a=S.fromDom(s);if(r.push(a),n(a)===!0)break;o=s}return r},on=e=>gn(e).map(ht).map((t=>De(t,(n=>!me(e,n))))).getOr([]),Vt=e=>k.from(e.dom.previousSibling).map(S.fromDom),Gn=e=>k.from(e.dom.nextSibling).map(S.fromDom),Pn=e=>Eo(Jt(e,Vt)),at=e=>Jt(e,Gn),ht=e=>qe(e.dom.childNodes,S.fromDom),qt=(e,t)=>{const n=e.dom.childNodes;return k.from(n[t]).map(S.fromDom)},Bt=e=>qt(e,0),Hn=e=>qt(e,e.dom.childNodes.length-1),Nr=e=>e.dom.childNodes.length,oa=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return S.fromDom(t)},rr=e=>dl(e)&&te(e.dom.host),Ko=e=>S.fromDom(e.dom.getRootNode()),Xo=e=>rr(e)?e:oa(Sn(e)),Vc=e=>S.fromDom(e.dom.host),ys=e=>{if(te(e.target)){const t=S.fromDom(e.target);if(ot(t)&&Ja(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return nn(n)}}return k.from(e.target)},Ja=e=>te(e.dom.shadowRoot),Za=(e,t,n,o)=>((r,s,a,i,l)=>{const c=((d,m)=>f=>{d(f)&&m((h=>{const g=S.fromDom(ys(h).getOr(h.target)),b=()=>h.stopPropagation(),y=()=>h.preventDefault(),v=Bn(y,b);return((_,N,D,A,R,P,I)=>({target:_,x:N,y:D,stop:A,prevent:R,kill:P,raw:I}))(g,h.clientX,h.clientY,b,y,v,h)})(f))})(a,i);return r.dom.addEventListener(s,c,l),{unbind:be(ul,r,s,c,l)}})(e,t,n,o,!1),ul=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)},ei=jt,ra=(e,t,n)=>Za(e,t,ei,n),sa=()=>S.fromDom(document),vs=(e,t=!1)=>e.dom.focus({preventScroll:t}),ml=e=>{const t=Ko(e).dom;return e.dom===t.activeElement},L=(e=sa())=>k.from(e.dom.activeElement).map(S.fromDom),$=(e,t)=>{gn(e).each((n=>{n.dom.insertBefore(t.dom,e.dom)}))},J=(e,t)=>{Gn(e).fold((()=>{gn(e).each((n=>{ne(n,t)}))}),(n=>{$(n,t)}))},oe=(e,t)=>{Bt(e).fold((()=>{ne(e,t)}),(n=>{e.dom.insertBefore(t.dom,n.dom)}))},ne=(e,t)=>{e.dom.appendChild(t.dom)},je=(e,t)=>{$(e,t),ne(t,e)},$e=(e,t)=>{K(t,((n,o)=>{const r=o===0?e:t[o-1];J(r,n)}))},ze=(e,t)=>{K(t,(n=>{ne(e,n)}))},Ue=(e,t,n)=>{if(!(xe(n)||yn(n)||x(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},lt=(e,t,n)=>{Ue(e.dom,t,n)},Qe=(e,t)=>{const n=e.dom;wt(t,((o,r)=>{Ue(n,r,o)}))},et=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},bt=(e,t)=>k.from(et(e,t)),ct=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},vt=(e,t)=>{e.dom.removeAttribute(t)},kn=e=>{const t=e.dom.attributes;return t==null||t.length===0},en=e=>Yt(e.dom.attributes,((t,n)=>(t[n.name]=n.value,t)),{}),rn=e=>{e.dom.textContent="",K(ht(e),(t=>{ft(t)}))},ft=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},sn=e=>{const t=ht(e);t.length>0&&$e(e,t),ft(e)},Wt=(e,t)=>S.fromDom(e.dom.cloneNode(t)),$n=e=>Wt(e,!1),so=e=>Wt(e,!0),Qr=(e,t)=>{const n=((r,s)=>{const a=S.fromTag(s),i=en(r);return Qe(a,i),a})(e,t);J(e,n);const o=ht(e);return ze(n,o),ft(e),n},Ar=e=>qe(e,S.fromDom),fl=e=>e.dom.innerHTML,ti=(e,t)=>{const n=bs(e).dom,o=S.fromDom(n.createDocumentFragment()),r=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,ht(S.fromDom(i))})(t,n);ze(o,r),rn(e),ne(e,o)},pl=e=>e.style!==void 0&&pt(e.style.getPropertyValue),aa=e=>{const t=Et(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return(o=>{const r=Ko(o);return rr(r)?k.some(r):k.none()})(S.fromDom(t)).fold((()=>n.body.contains(t)),Hs(aa,Vc))},Hh=(e,t,n)=>{if(!xe(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);pl(e)&&e.style.setProperty(t,n)},Kc=(e,t,n)=>{const o=e.dom;Hh(o,t,n)},Xc=(e,t)=>{const n=e.dom;wt(t,((o,r)=>{Hh(n,r,o)}))},Yo=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o!==""||aa(e)?o:$h(n,t)},$h=(e,t)=>pl(e)?e.style.getPropertyValue(t):"",ni=(e,t)=>{const n=e.dom,o=$h(n,t);return k.from(o).filter((r=>r.length>0))},rm=e=>{const t={},n=e.dom;if(pl(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);t[r]=n.style[r]}return t},Yc=(e,t)=>{((n,o)=>{pl(n)&&n.style.removeProperty(o)})(e.dom,t),us(bt(e,"style").map(Er),"")&&vt(e,"style")},rN=(e=>{const t=o=>{const r=(s=>{const a=s.dom;return aa(s)?a.getBoundingClientRect().height:a.offsetHeight})(o);if(r<=0||r===null){const s=Yo(o,e);return parseFloat(s)||0}return r},n=(o,r)=>Yt(r,((s,a)=>{const i=Yo(o,a),l=i===void 0?0:parseInt(i,10);return isNaN(l)?s:s+l}),0);return{set:(o,r)=>{if(!x(r)&&!r.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+r);const s=o.dom;pl(s)&&(s.style[e]=r+"px")},get:t,getOuter:t,aggregate:n,max:(o,r,s)=>{const a=n(o,s);return r>a?r-a:0}}})("height"),qh=(e,t)=>({left:e,top:t,translate:(n,o)=>qh(e+n,t+o)}),oi=qh,Gc=(e,t)=>e!==void 0?e:t!==void 0?t:0,sm=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?oi(n.offsetLeft,n.offsetTop):aa(e)?(o=>{const r=o.getBoundingClientRect();return oi(r.left,r.top)})(t):oi(0,0)},am=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return oi(n,o)},Wh=(e,t,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(e,t)},Vh=(e,t)=>{qo().browser.isSafari()&&pt(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},gl=(e,t)=>{const n=(t||document).createDocumentFragment();return K(e,(o=>{n.appendChild(o.dom)})),S.fromDom(n)},im=(e=>{const t=n=>e(n)?k.from(n.dom.nodeValue):k.none();return{get:n=>{if(!e(n))throw new Error("Can only get text value of a text node");return t(n).getOr("")},getOption:t,set:(n,o)=>{if(!e(n))throw new Error("Can only set raw text value of a text node");n.dom.nodeValue=o}}})(Et),ri=e=>im.get(e),lm=(e,t)=>im.set(e,t),cm=(e,t)=>{const n=et(e,t);return n===void 0||n===""?[]:n.split(" ")};var Kh=(e,t,n,o,r)=>e(n,o)?k.some(n):pt(r)&&r(n)?k.none():t(n,o,r);const Tr=(e,t,n)=>{let o=e.dom;const r=pt(n)?n:Nt;for(;o.parentNode;){o=o.parentNode;const s=S.fromDom(o);if(t(s))return k.some(s);if(r(s))break}return k.none()},sr=(e,t,n)=>Kh(((o,r)=>r(o)),Tr,e,t,n),Qc=(e,t)=>{const n=o=>{for(let r=0;r<o.childNodes.length;r++){const s=S.fromDom(o.childNodes[r]);if(t(s))return k.some(s);const a=n(o.childNodes[r]);if(a.isSome())return a}return k.none()};return n(e.dom)},si=(e,t,n)=>Tr(e,(o=>Q(o,t)),n),Jc=(e,t)=>((n,o)=>{const r=o===void 0?document:o.dom;return ce(r)?k.none():k.from(r.querySelector(n)).map(S.fromDom)})(t,e),Cs=(e,t,n)=>Kh(((o,r)=>Q(o,r)),si,e,t,n),hl=e=>e.dom.classList!==void 0,Xh=e=>cm(e,"class"),Yh=(e,t)=>((n,o,r)=>{const s=cm(n,o).concat([r]);return lt(n,o,s.join(" ")),!0})(e,"class",t),Gh=(e,t)=>((n,o,r)=>{const s=De(cm(n,o),(a=>a!==r));return s.length>0?lt(n,o,s.join(" ")):vt(n,o),!1})(e,"class",t),ai=(e,t)=>{hl(e)?e.dom.classList.add(t):Yh(e,t)},Qh=e=>{(hl(e)?e.dom.classList:Xh(e)).length===0&&vt(e,"class")},bl=(e,t)=>{hl(e)?e.dom.classList.remove(t):Gh(e,t),Qh(e)},dm=(e,t)=>hl(e)&&e.dom.classList.contains(t),Jr=(e,t=!1)=>{return aa(e)?e.dom.isContentEditable:(n=e,Cs(n,"[contenteditable]")).fold(ie(t),(o=>sN(o)==="true"));var n},sN=e=>e.dom.contentEditable,Zc=(e,t)=>{e.dom.contentEditable=t?"true":"false"},Jh=(e,t,n)=>De(Zt(e,n),t),ed=(e,t)=>{let n=[];return K(ht(e),(o=>{t(o)&&(n=n.concat([o])),n=n.concat(ed(o,t))})),n},_n=(e,t)=>((n,o)=>{const r=o===void 0?document:o.dom;return ce(r)?[]:qe(r.querySelectorAll(n),S.fromDom)})(t,e),um=(e,t,n)=>Tr(e,t,n).isSome(),aN=(e,t)=>((n,o)=>{const r=n.dom;return r.parentNode?((s,a)=>Ht(s.dom.childNodes,(i=>a(S.fromDom(i)))).map(S.fromDom))(S.fromDom(r.parentNode),(s=>!me(n,s)&&o(s))):k.none()})(e,t).isSome(),mm=(e,t)=>Qc(e,t).isSome(),Zh=e=>pt(e)?e:Nt,fm=(e,t,n)=>{const o=t(e),r=Zh(n);return o.orThunk((()=>r(e)?k.none():((s,a,i)=>{let l=s.dom;const c=Zh(i);for(;l.parentNode;){l=l.parentNode;const d=S.fromDom(l),m=a(d);if(m.isSome())return m;if(c(d))break}return k.none()})(e,t,r)))},iN=["img","br"],lN=e=>{return(t=e,im.getOption(t)).filter((n=>n.trim().length!==0||n.indexOf(It)>-1)).isSome()||we(iN,Be(e))||(n=>ro(n)&&et(n,"contenteditable")==="false")(e);var t},eb=(e,t,n,o)=>({start:e,soffset:t,finish:n,foffset:o}),pm=bo([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Zr={before:pm.before,on:pm.on,after:pm.after,cata:(e,t,n,o)=>e.fold(t,n,o),getStart:e=>e.fold(gt,gt,gt)},td=bo([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ii={domRange:td.domRange,relative:td.relative,exact:td.exact,exactFromRange:e=>td.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(n=>n.match({domRange:o=>S.fromDom(o.startContainer),relative:(o,r)=>Zr.getStart(o),exact:(o,r,s,a)=>o}))(e);return yo(t)},range:eb},nd=(e,t)=>{const n=Be(e);return n==="input"?Zr.after(e):we(["br","img"],n)?t===0?Zr.before(e):Zr.after(e):Zr.on(e,t)},cN=(e,t)=>{const n=e.fold(Zr.before,nd,Zr.after),o=t.fold(Zr.before,nd,Zr.after);return ii.relative(n,o)},tb=(e,t,n,o)=>{const r=nd(e,t),s=nd(n,o);return ii.relative(r,s)},dN=e=>{const t=ii.getWin(e).dom,n=(r,s,a,i)=>V(t,r,s,a,i),o=(r=>r.match({domRange:s=>{const a=S.fromDom(s.startContainer),i=S.fromDom(s.endContainer);return tb(a,s.startOffset,i,s.endOffset)},relative:cN,exact:tb}))(e);return((r,s)=>{const a=((i,l)=>l.match({domRange:c=>({ltr:ie(c),rtl:k.none}),relative:(c,d)=>({ltr:Un((()=>U(i,c,d))),rtl:Un((()=>k.some(U(i,d,c))))}),exact:(c,d,m,f)=>({ltr:Un((()=>V(i,c,d,m,f))),rtl:Un((()=>k.some(V(i,m,f,c,d))))})}))(r,s);return((i,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter((d=>d.collapsed===!1)).map((d=>ee.rtl(S.fromDom(d.endContainer),d.endOffset,S.fromDom(d.startContainer),d.startOffset))).getOrThunk((()=>ae(0,ee.ltr,c))):ae(0,ee.ltr,c)})(0,a)})(t,o).match({ltr:n,rtl:n})},uN=(e,t,n)=>((o,r,s)=>((a,i,l)=>a.caretPositionFromPoint?((c,d,m)=>k.from(c.caretPositionFromPoint?.(d,m)).bind((f=>{if(f.offsetNode===null)return k.none();const h=c.createRange();return h.setStart(f.offsetNode,f.offset),h.collapse(),k.some(h)})))(a,i,l):a.caretRangeFromPoint?((c,d,m)=>k.from(c.caretRangeFromPoint?.(d,m)))(a,i,l):k.none())(o.document,r,s).map((a=>eb(S.fromDom(a.startContainer),a.startOffset,S.fromDom(a.endContainer),a.endOffset))))(e,t,n),nb=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),ob=e=>{const t=e===void 0?window:e,n=t.document,o=am(S.fromDom(n));return(r=>{const s=r===void 0?window:r;return qo().browser.isFirefox()?k.none():k.from(s.visualViewport)})(t).fold((()=>{const r=t.document.documentElement,s=r.clientWidth,a=r.clientHeight;return nb(o.left,o.top,s,a)}),(r=>nb(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height)))};class an{rootNode;node;constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,o,r){if(t){if(!r&&t[n])return t[n];if(t!==this.rootNode){let s=t[o];if(s)return s;for(let a=t.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[o],s)return s}}}findPreviousNode(t,n){if(t){const o=t.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n){for(let s=o.lastChild;s;s=s.lastChild)if(!s.lastChild)return s}return o}const r=t.parentNode;if(r&&r!==this.rootNode)return r}}}const mN=/^[ \t\r\n]*$/,li=e=>mN.test(e),rb=e=>e===`
`||e==="\r",sb=(e,t=4,n=!0,o=!0)=>{const r=((i,l)=>l<=0?"":new Array(l+1).join(" "))(0,t),s=e.replace(/\t/g,r);return Yt(s,((i,l)=>(c=>" \f	\v".indexOf(c)!==-1)(l)||l===It?i.pcIsSpace||i.str===""&&n||i.str.length===s.length-1&&o||((c,d)=>d<c.length&&d>=0&&rb(c[d]))(s,i.str.length+1)?{pcIsSpace:!1,str:i.str+It}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:rb(l),str:i.str+l}),{pcIsSpace:!1,str:""}).str},ia=e=>t=>!!t&&t.nodeType===e,od=e=>!!e&&!Object.getPrototypeOf(e),ve=ia(1),ar=e=>ve(e)&&ro(S.fromDom(e)),la=e=>{const t=e.toLowerCase();return n=>te(n)&&n.nodeName.toLowerCase()===t},ir=e=>{const t=e.map((n=>n.toLowerCase()));return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return we(t,o)}return!1}},rd=(e,t)=>{const n=t.toLowerCase().split(" ");return o=>{if(ve(o)){const r=o.ownerDocument.defaultView;if(r)for(let s=0;s<n.length;s++){const a=r.getComputedStyle(o,null);if((a?a.getPropertyValue(e):null)===n[s])return!0}}return!1}},ca=e=>ve(e)&&e.hasAttribute("data-mce-bogus"),Dr=e=>ve(e)&&e.tagName==="TABLE",ab=e=>t=>!!(ar(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),gm=ir(["textarea","input"]),se=ia(3),fN=ia(4),pN=ia(7),xs=ia(8),yl=ia(9),hm=ia(11),Ut=la("br"),ib=la("img"),gN=la("a"),To=ab("true"),Pt=ab("false"),bm=e=>ar(e)&&e.isContentEditable&&te(e.parentElement)&&!e.parentElement.isContentEditable,sd=ir(["td","th"]),hN=ir(["td","th","caption"]),lb=la("template"),lr=ir(["video","audio","object","embed"]),bN=la("li"),ym=la("details"),yN=la("summary"),cb={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},vN=e=>ve(e)&&e.hasAttribute("data-mce-bookmark"),CN=(e,t,n,o)=>se(e)&&!((r,s,a)=>li(r.data)&&!((i,l,c)=>{const d=S.fromDom(l),m=S.fromDom(i),f=c.getWhitespaceElements();return um(m,(h=>Oe(f,Be(h))),be(me,d))})(r,s,a))(e,t,n)&&(!o.includeZwsp||!(r=>{for(const s of r)if(!Yr(s))return!1;return!0})(e.data)),vm=(e,t,n,o)=>pt(o.isContent)&&o.isContent(t)||((r,s)=>ve(r)&&Oe(s.getNonEmptyElements(),r.nodeName))(t,e)||vN(t)||(r=>ve(r)&&r.nodeName==="A"&&!r.hasAttribute("href")&&(r.hasAttribute("name")||r.hasAttribute("id")))(t)||CN(t,n,e,o)||Pt(t)||To(t)&&(r=>En(S.fromDom(r)).exists((s=>!Jr(s))))(t),es=(e,t,n)=>{const o={...cb,...n};if(o.checkRootAsContent&&vm(e,t,t,o))return!1;let r=t.firstChild,s=0;if(!r)return!0;const a=new an(r,t);do{if(o.skipBogus&&ve(r)){const i=r.getAttribute("data-mce-bogus");if(i){r=a.next(i==="all");continue}}if(xs(r))r=a.next(!0);else if(Ut(r))s++,r=a.next();else{if(vm(e,r,t,o))return!1;r=a.next()}}while(r);return s<=1},Ln=(e,t,n)=>es(e,t.dom,{checkRootAsContent:!0,...n}),db=(e,t,n)=>vm(e,t,t,{includeZwsp:cb.includeZwsp,...n}),ub=e=>{const t=e.toLowerCase();return t==="svg"?"svg":t==="math"?"math":"html"},da=e=>ub(e)!=="html",Cm=e=>da(e.nodeName),mb=e=>ub(e.nodeName),xN=["svg","math"],ad="data-mce-block",xm=e=>qe((t=>De(un(t),(n=>!/[A-Z]/.test(n))))(e),(t=>{const n=CSS.escape(t);return`${n}:`+qe(xN,(o=>`not(${o} ${n})`)).join(":")})).join(","),fb=(e,t)=>te(t.querySelector(e))?(t.setAttribute(ad,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(ad),!1),pb=(e,t)=>{const n=xm(e.getTransparentElements()),o=xm(e.getBlockElements());return De(t.querySelectorAll(n),(r=>fb(o,r)))},gb=(e,t,n)=>{const o=n?"lastChild":"firstChild";for(let r=t[o];r;r=r[o])if(es(e,r,{checkRootAsContent:!0}))return void r.parentNode?.removeChild(r)},wN=(e,t,n)=>{const o=e.getBlockElements(),r=S.fromDom(t),s=i=>Be(i)in o,a=i=>me(i,r);K(Ar(n),(i=>{Tr(i,s,a).each((l=>{const c=(d=>De(ht(d),(m=>s(m)&&!e.isValidChild(Be(l),Be(m)))))(i);if(c.length>0){const d=En(l);K(c,(m=>{Tr(m,s,a).each((f=>{((h,g,b)=>{const y=document.createRange(),v=g.parentNode;if(v){y.setStartBefore(g),y.setEndBefore(b);const _=y.extractContents();gb(h,_,!0),y.setStartAfter(b),y.setEndAfter(g);const N=y.extractContents();gb(h,N,!1),es(h,_,{checkRootAsContent:!0})||v.insertBefore(_,g),es(h,b,{checkRootAsContent:!0})||v.insertBefore(b,g),es(h,N,{checkRootAsContent:!0})||v.insertBefore(N,g),v.removeChild(g)}})(e,f.dom,m.dom)}))})),d.each((m=>pb(e,m.dom)))}}))}))},wm=(e,t)=>{const n=pb(e,t);wN(e,t,n),((o,r,s)=>{K([...s,...ua(o,r)?[r]:[]],(a=>K(_n(S.fromDom(a),a.nodeName.toLowerCase()),(i=>{EN(o,i.dom)&&sn(i)}))))})(e,t,n)},SN=(e,t)=>{if(km(e,t)){const n=xm(e.getBlockElements());fb(n,t)}},Sm=e=>e.hasAttribute(ad),Em=(e,t)=>Oe(e.getTransparentElements(),t),km=(e,t)=>ve(t)&&Em(e,t.nodeName),ua=(e,t)=>km(e,t)&&Sm(t),EN=(e,t)=>km(e,t)&&!Sm(t),_m=(e,t)=>t.type===1&&Em(e,t.name)&&xe(t.attr(ad)),kN=qo().browser,hb=e=>Ht(e,ot),bb=(e,t)=>e.children&&we(e.children,t),yb=(e,t={})=>{let n=0;const o={},r=S.fromDom(e),s=Sn(r),a=m=>{ne(Xo(r),m)},i=m=>{const f=Xo(r);Jc(f,"#"+m).each(ft)},l=m=>Ot(o,m).getOrThunk((()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}))),c=m=>new Promise(((f,h)=>{let g;const b=E._addCacheSuffix(m),y=l(b);o[b]=y,y.count++;const v=(R,P)=>{K(R,Xn),y.status=P,y.passed=[],y.failed=[],g&&(g.onload=null,g.onerror=null,g=null)},_=()=>v(y.passed,2),N=()=>v(y.failed,3);if(f&&y.passed.push(f),h&&y.failed.push(h),y.status===1)return;if(y.status===2)return void _();if(y.status===3)return void N();y.status=1;const D=S.fromTag("link",s.dom);Qe(D,{rel:"stylesheet",type:"text/css",id:y.id});const A=((R,P)=>{const I=P.crossOrigin;return P.contentCssCors?"anonymous":pt(I)?I(R):void 0})(m,t);A!==void 0&&lt(D,"crossOrigin",A),t.referrerPolicy&&lt(D,"referrerpolicy",t.referrerPolicy),g=D.dom,g.onload=_,g.onerror=N,a(D),lt(D,"href",b)})),d=m=>{const f=E._addCacheSuffix(m);Ot(o,f).each((h=>{--h.count==0&&(delete o[f],i(h.id))}))};return{load:c,loadRawCss:(m,f)=>{const h=l(m);o[m]=h,h.count++;const g=S.fromTag("style",s.dom);Qe(g,{rel:"stylesheet",type:"text/css",id:h.id,"data-mce-key":m}),g.dom.innerHTML=f,a(g)},loadAll:m=>Promise.allSettled(qe(m,(f=>c(f).then(ie(f))))).then((f=>{const h=er(f,(g=>g.status==="fulfilled"));return h.fail.length>0?Promise.reject(qe(h.fail,(g=>g.reason))):qe(h.pass,(g=>g.value))})),unload:d,unloadRawCss:m=>{Ot(o,m).each((f=>{--f.count==0&&(delete o[m],i(f.id))}))},unloadAll:m=>{K(m,(f=>{d(f)}))},_setReferrerPolicy:m=>{t.referrerPolicy=m},_setContentCssCors:m=>{t.contentCssCors=m},_setCrossOrigin:m=>{t.crossOrigin=m}}},vb=(()=>{const e=new WeakMap;return{forElement:(t,n)=>{const o=Ko(t).dom;return k.from(e.get(o)).getOrThunk((()=>{const r=yb(o,n);return e.set(o,r),r}))}}})(),Cb=(e,t)=>te(e)&&(db(t,e)||t.isInline(e.nodeName.toLowerCase())),xb=e=>(t=>t.nodeName.toLowerCase()==="span")(e)&&e.getAttribute("data-mce-type")==="bookmark",Nm=(e,t,n,o)=>{const r=o||t;if(ve(t)&&xb(t))return t;const s=t.childNodes;for(let a=s.length-1;a>=0;a--)Nm(e,s[a],n,r);if(ve(t)){const a=t.childNodes;a.length===1&&xb(a[0])&&t.parentNode?.insertBefore(a[0],t)}return(a=>hm(a)||yl(a))(t)||db(n,t)||(a=>!!ve(a)&&a.childNodes.length>0)(t)||((a,i,l)=>se(a)&&a.data.length>0&&((c,d,m)=>{const f=new an(c,d).prev(!1),h=new an(c,d).next(!1),g=Lt(f)||Cb(f,m),b=Lt(h)||Cb(h,m);return g&&b})(a,i,l))(t,r,n)||e.remove(t),t},_N=E.makeMap,id=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ld=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NN=/[<>&\"\']/g,AN=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,TN={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},ma={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},DN={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},wb=(e,t)=>{const n={};if(e){const o=e.split(",");t=t||10;for(let r=0;r<o.length;r+=2){const s=String.fromCharCode(parseInt(o[r],t));if(!ma[s]){const a="&"+o[r+1]+";";n[s]=a,n[a]=s}}return n}},Am=wb("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Sb=(e,t)=>e.replace(t?id:ld,(n=>ma[n]||n)),Eb=(e,t)=>e.replace(t?id:ld,(n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":ma[n]||"&#"+n.charCodeAt(0)+";")),Tm=(e,t,n)=>{const o=n||Am;return e.replace(t?id:ld,(r=>ma[r]||o[r]||r))},fa={encodeRaw:Sb,encodeAllRaw:e=>(""+e).replace(NN,(t=>ma[t]||t)),encodeNumeric:Eb,encodeNamed:Tm,getEncodeFunc:(e,t)=>{const n=wb(t)||Am,o=_N(e.replace(/\+/g,","));return o.named&&o.numeric?(r,s)=>r.replace(s?id:ld,(a=>ma[a]!==void 0?ma[a]:n[a]!==void 0?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";")):o.named?t?(r,s)=>Tm(r,s,n):Tm:o.numeric?Eb:Sb},decode:e=>e.replace(AN,((t,n)=>n?(n=n.charAt(0).toLowerCase()==="x"?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):TN[n]||String.fromCharCode(n):DN[t]||Am[t]||(o=>{const r=S.fromTag("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(t)))},Nn=(e,t)=>(e=E.trim(e))?e.split(t||" "):[],kb=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),_b=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),Nb=e=>{let t,n;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(t+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress template time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));const o=[t,n].join(" ");return{blockContent:t,phrasingContent:n,flowContent:o}},Dm=e=>{const{blockContent:t,phrasingContent:n,flowContent:o}=Nb(e),r=s=>Object.freeze(s.split(" "));return Object.freeze({blockContent:r(t),phrasingContent:r(n),flowContent:r(o)})},RN={html4:Un((()=>Dm("html4"))),html5:Un((()=>Dm("html5"))),"html5-strict":Un((()=>Dm("html5-strict")))},Ab=(e,t)=>{const{blockContent:n,phrasingContent:o,flowContent:r}=RN[e]();return t==="blocks"?k.some(n):t==="phrasing"?k.some(o):t==="flow"?k.some(r):k.none()},Rm=e=>k.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(e)).map((t=>({preset:t[1]==="@",name:t[2]}))),cd={},vl=E.makeMap,cr=E.each,Tb=E.extend,Db=E.explode,Rb=(e,t={})=>{const n=vl(e," ",vl(e.toUpperCase()," "));return Tb(n,t)},Ob=e=>Rb("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Om=(e,t)=>{if(e){const n={};return xe(e)&&(e={"*":e}),cr(e,((o,r)=>{n[r]=n[r.toUpperCase()]=t==="map"?vl(o,/[, ]/):Db(o,/[, ]/)})),n}},ws=(e={})=>{const t={},n={};let o=[];const r={},s={},a={},i=(Ce,tt,dt)=>{const Ie=e[Ce];if(Ie)return vl(Ie,/[, ]/,vl(Ie.toUpperCase(),/[, ]/));{let Je=cd[Ce];return Je||(Je=Rb(tt,dt),cd[Ce]=Je),Je}},l=e.schema??"html5",c=(Ce=>{const tt=_b(Ce),{phrasingContent:dt,flowContent:Ie}=Nb(Ce),Je={},Ct=(Dt,Kt,Vn)=>{Je[Dt]={attributes:wn(Kt,ie({})),attributesOrder:Kt,children:wn(Vn,ie({}))}},ye=(Dt,Kt="",Vn="")=>{const Hr=Nn(Vn),br=Nn(Dt);let Fn=br.length;const xo=[...tt,...Nn(Kt)];for(;Fn--;)Ct(br[Fn],xo.slice(),Hr)},Fe=(Dt,Kt)=>{const Vn=Nn(Dt),Hr=Nn(Kt);let br=Vn.length;for(;br--;){const Fn=Je[Vn[br]];for(let xo=0,bn=Hr.length;xo<bn;xo++)Fn.attributes[Hr[xo]]={},Fn.attributesOrder.push(Hr[xo])}};return Ce!=="html5-strict"&&(K(Nn("acronym applet basefont big font strike tt"),(Dt=>{ye(Dt,"",dt)})),K(Nn("center dir isindex noframes"),(Dt=>{ye(Dt,"",Ie)}))),ye("html","manifest","head body"),ye("head","","base command link meta noscript script style title"),ye("title hr noscript br"),ye("base","href target"),ye("link","href rel media hreflang type sizes hreflang"),ye("meta","name http-equiv content charset property"),ye("style","media type scoped"),ye("script","src async defer type charset"),ye("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",Ie),ye("dd div","",Ie),ye("address dt caption","",Ce==="html4"?dt:Ie),ye("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",dt),ye("blockquote","cite",Ie),ye("ol","reversed start type","li"),ye("ul","","li"),ye("li","value",Ie),ye("dl","","dt dd"),ye("a","href target rel media hreflang type",Ce==="html4"?dt:Ie),ye("q","cite",dt),ye("ins del","cite datetime",Ie),ye("img","src sizes srcset alt usemap ismap width height"),ye("iframe","src name width height",Ie),ye("embed","src type width height"),ye("object","data type typemustmatch name usemap form width height",[Ie,"param"].join(" ")),ye("param","name value"),ye("map","name",[Ie,"area"].join(" ")),ye("area","alt coords shape href target rel media hreflang type"),ye("table","border","caption colgroup thead tfoot tbody tr"+(Ce==="html4"?" col":"")),ye("colgroup","span","col"),ye("col","span"),ye("tbody thead tfoot","","tr"),ye("tr","","td th"),ye("td","colspan rowspan headers",Ie),ye("th","colspan rowspan headers scope abbr",Ie),ye("form","accept-charset action autocomplete enctype method name novalidate target",Ie),ye("fieldset","disabled form name",[Ie,"legend"].join(" ")),ye("label","form for",dt),ye("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),ye("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",Ce==="html4"?Ie:dt),ye("select","disabled form multiple name required size","option optgroup"),ye("optgroup","disabled label","option"),ye("option","disabled label selected value"),ye("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),ye("menu","type label",[Ie,"li"].join(" ")),ye("noscript","",Ie),Ce!=="html4"&&(ye("wbr"),ye("ruby","",[dt,"rt rp"].join(" ")),ye("figcaption","",Ie),ye("mark rt rp bdi","",dt),ye("summary","",[dt,"h1 h2 h3 h4 h5 h6"].join(" ")),ye("canvas","width height",Ie),ye("data","value",dt),ye("video","src crossorigin poster preload autoplay mediagroup loop controlslist disablepictureinpicture disableremoteplayback playsinline muted controls width height buffered",[Ie,"track source"].join(" ")),ye("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[Ie,"track source"].join(" ")),ye("picture","","img source"),ye("source","src srcset type media sizes"),ye("track","kind src srclang label default"),ye("datalist","",[dt,"option"].join(" ")),ye("article section nav aside main header footer","",Ie),ye("hgroup","","h1 h2 h3 h4 h5 h6"),ye("figure","",[Ie,"figcaption"].join(" ")),ye("time","datetime",dt),ye("dialog","open",Ie),ye("command","type label icon disabled checked radiogroup command"),ye("output","for form name",dt),ye("progress","value max",dt),ye("meter","value min max low high optimum",dt),ye("details","open",[Ie,"summary"].join(" ")),ye("keygen","autofocus challenge disabled form keytype name"),Ct("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),Ce!=="html5-strict"&&(Fe("script","language xml:space"),Fe("style","xml:space"),Fe("object","declare classid code codebase codetype archive standby align border hspace vspace"),Fe("embed","align name hspace vspace"),Fe("param","valuetype type"),Fe("a","charset name rev shape coords"),Fe("br","clear"),Fe("applet","codebase archive code object alt name width height align hspace vspace"),Fe("img","name longdesc align border hspace vspace"),Fe("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Fe("font basefont","size color face"),Fe("input","usemap align"),Fe("select"),Fe("textarea"),Fe("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Fe("ul","type compact"),Fe("li","type"),Fe("ol dl menu dir","compact"),Fe("pre","width xml:space"),Fe("hr","align noshade size width"),Fe("isindex","prompt"),Fe("table","summary width frame rules cellspacing cellpadding align bgcolor"),Fe("col","width align char charoff valign"),Fe("colgroup","width align char charoff valign"),Fe("thead","align char charoff valign"),Fe("tr","align char charoff valign bgcolor"),Fe("th","axis align char charoff valign nowrap bgcolor width height"),Fe("form","accept"),Fe("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Fe("tfoot","align char charoff valign"),Fe("tbody","align char charoff valign"),Fe("area","nohref"),Fe("body","background bgcolor text link vlink alink")),Ce!=="html4"&&(Fe("input button select textarea","autofocus"),Fe("input textarea","placeholder"),Fe("a","download"),Fe("link script img","crossorigin"),Fe("img","loading"),Fe("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),Ce!=="html4"&&K([Je.video,Je.audio],(Dt=>{delete Dt.children.audio,delete Dt.children.video})),K(Nn("a form meter progress dfn"),(Dt=>{Je[Dt]&&delete Je[Dt].children[Dt]})),delete Je.caption.children.table,delete Je.script,Je})(l);e.verify_html===!1&&(e.valid_elements="*[*]");const d=Om(e.valid_styles),m=Om(e.invalid_styles,"map"),f=Om(e.valid_classes,"map"),h=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),b=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),y=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),v="td th iframe video audio object script code",_=i("non_empty_elements",v+" pre svg textarea summary",b),N=i("move_caret_before_on_enter_elements",v+" table",b),D="h1 h2 h3 h4 h5 h6",A=i("text_block_elements",D+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),R=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing colgroup col",A),P=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),I=i("transparent_elements","a ins del canvas map"),M=i("wrap_block_elements","pre "+D);cr("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),(Ce=>{s[Ce]=new RegExp("</"+Ce+"[^>]*>","gi")}));const W=Ce=>{const tt=k.from(t["@"]),dt=/[*?+]/;K(((Ie,Je)=>{const Ct=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return $t(Nn(Je,","),(ye=>{const Fe=Ct.exec(ye);if(Fe){const Dt=Fe[1],Kt=Fe[2],Vn=Fe[3],Hr=Fe[4],br=Fe[5],Fn={attributes:{},attributesOrder:[]};if(Ie.each((xo=>((bn,is)=>{wt(bn.attributes,((js,mo)=>{is.attributes[mo]=js})),is.attributesOrder.push(...bn.attributesOrder)})(xo,Fn))),Dt==="#"?Fn.paddEmpty=!0:Dt==="-"&&(Fn.removeEmpty=!0),Hr==="!"&&(Fn.removeEmptyAttrs=!0),br&&((xo,bn)=>{const is=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,js=/[*?+]/,{attributes:mo,attributesOrder:$r}=bn;K(Nn(xo,"|"),(Sc=>{const ls=is.exec(Sc);if(ls){const zs={},Ua=ls[1],fo=ls[2].replace(/[\\:]:/g,":"),Yi=ls[3],yr=ls[4];if(Ua==="!"&&(bn.attributesRequired=bn.attributesRequired||[],bn.attributesRequired.push(fo),zs.required=!0),Ua==="-")return delete mo[fo],void $r.splice(E.inArray($r,fo),1);if(Yi&&(Yi==="="?(bn.attributesDefault=bn.attributesDefault||[],bn.attributesDefault.push({name:fo,value:yr}),zs.defaultValue=yr):Yi==="~"?(bn.attributesForced=bn.attributesForced||[],bn.attributesForced.push({name:fo,value:yr}),zs.forcedValue=yr):Yi==="<"&&(zs.validValues=E.makeMap(yr,"?"))),js.test(fo)){const Zu=zs;bn.attributePatterns=bn.attributePatterns||[],Zu.pattern=kb(fo),bn.attributePatterns.push(Zu)}else mo[fo]||$r.push(fo),mo[fo]=zs}}))})(br,Fn),Vn&&(Fn.outputName=Kt),Kt==="@"){if(!Ie.isNone())return[];Ie=k.some(Fn)}return[Vn?{name:Kt,element:Fn,aliasName:Vn}:{name:Kt,element:Fn}]}return[]}))})(tt,Ce??""),(({name:Ie,element:Je,aliasName:Ct})=>{if(Ct&&(t[Ct]=Je),dt.test(Ie)){const ye=Je;ye.pattern=kb(Ie),o.push(ye)}else t[Ie]=Je}))},B=Ce=>{o=[],K(un(t),(tt=>{delete t[tt]})),W(Ce)},F=(Ce,tt)=>{delete cd.text_block_elements,delete cd.block_elements;const dt=!!tt.extends&&!Ft(tt.extends),Ie=tt.extends;if(n[Ce]=Ie?n[Ie]:{},r[Ce]=Ie??Ce,_[Ce.toUpperCase()]={},_[Ce]={},dt||(R[Ce.toUpperCase()]={},R[Ce]={}),Ie&&!t[Ce]&&t[Ie]){const Je=(Ct=>{const ye=Fe=>re(Fe)?qe(Fe,ye):(Dt=>He(Dt)&&Dt.source&&Object.prototype.toString.call(Dt)==="[object RegExp]")(Fe)?new RegExp(Fe.source,Fe.flags):He(Fe)?Ws(Fe,ye):Fe;return ye(Ct)})(t[Ie]);delete Je.removeEmptyAttrs,delete Je.removeEmpty,t[Ce]=Je}else t[Ce]={attributesOrder:[],attributes:{}};if(re(tt.attributes)){const Je=ye=>{Ct.attributesOrder.push(ye),Ct.attributes[ye]={}},Ct=t[Ce]??{};delete Ct.attributesDefault,delete Ct.attributesForced,delete Ct.attributePatterns,delete Ct.attributesRequired,Ct.attributesOrder=[],Ct.attributes={},K(tt.attributes,(ye=>{const Fe=_b(l);Rm(ye).each((({preset:Dt,name:Kt})=>{Dt?Kt==="global"&&K(Fe,Je):Je(Kt)}))})),t[Ce]=Ct}if(yn(tt.padEmpty)){const Je=t[Ce]??{};Je.paddEmpty=tt.padEmpty,t[Ce]=Je}if(re(tt.children)){const Je={},Ct=Fe=>{Je[Fe]={}},ye=Fe=>{Ab(l,Fe).each((Dt=>{K(Dt,Ct)}))};K(tt.children,(Fe=>{Rm(Fe).each((({preset:Dt,name:Kt})=>{Dt?ye(Kt):Ct(Kt)}))})),n[Ce]=Je}Ie&&wt(n,((Je,Ct)=>{Je[Ie]&&(n[Ct]=Je=Tb({},n[Ct]),Je[Ce]=Je[Ie])}))},H=Ce=>{He(Ce)?wt(Ce,((tt,dt)=>{const Ie=tt.componentUrl;xe(Ie)&&((Je,Ct)=>{a[Je]=Ct})(dt,Ie),F(dt,tt)})):xe(Ce)&&(tt=>{K((dt=>{const Ie=/^(~)?(.+)$/;return $t(Nn(dt,","),(Je=>{const Ct=Ie.exec(Je);return Ct?[{cloneName:Ct[1]==="~"?"span":"div",name:Ct[2]}]:[]}))})(tt??""),(({name:dt,cloneName:Ie})=>{F(dt,{extends:Ie})}))})(Ce)},Z=Ce=>{K((tt=>{const dt=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return $t(Nn(tt,","),(Ie=>{const Je=dt.exec(Ie);if(Je){const Ct=Je[1];return[{operation:Ct?(Fe=>Fe==="-"?"remove":"add")(Ct):"replace",name:Je[2],validChildren:$t(Nn(Je[3],"|"),(Fe=>Rm(Fe).toArray()))}]}return[]}))})(Ce??""),(({operation:tt,name:dt,validChildren:Ie})=>{const Je=tt==="replace"?{"#comment":{}}:n[dt],Ct=ye=>{tt==="remove"?delete Je[ye]:Je[ye]={}};K(Ie,(({preset:ye,name:Fe})=>{ye?(Dt=>{Ab(l,Dt).each((Kt=>{K(Kt,Ct)}))})(Fe):Ct(Fe)})),n[dt]=Je}))},le=Ce=>{const tt=t[Ce];if(tt)return tt;let dt=o.length;for(;dt--;){const Ie=o[dt];if(Ie.pattern.test(Ce))return Ie}},_e=ie(d),Te=ie(m),Se=ie(f),Me=ie(y),yt=ie(R),he=ie(A),Ne=ie(P),j=ie(Object.seal(b)),z=ie(g),G=ie(_),X=ie(N),fe=ie(h),ue=ie(I),Ae=ie(M),rt=ie(Object.seal(s)),st=(Ce,tt)=>{const dt=le(Ce);if(dt){if(!tt)return!0;{if(dt.attributes[tt])return!0;const Ie=dt.attributePatterns;if(Ie){let Je=Ie.length;for(;Je--;)if(Ie[Je].pattern.test(tt))return!0}}}return!1},Ft=Ce=>Oe(yt(),Ce),dn=Ce=>!Gt(Ce,"#")&&st(Ce)&&!Ft(Ce),uo=ie(r),Wn=ie(a);return e.valid_elements?(B(e.valid_elements),cr(c,((Ce,tt)=>{n[tt]=Ce.children}))):(cr(c,((Ce,tt)=>{t[tt]={attributes:Ce.attributes,attributesOrder:Ce.attributesOrder},n[tt]=Ce.children})),cr(Nn("strong/b em/i"),(Ce=>{const tt=Nn(Ce,"/");t[tt[1]].outputName=tt[0]})),cr(P,((Ce,tt)=>{t[tt]&&(e.padd_empty_block_inline_children&&(t[tt].paddInEmptyBlock=!0),t[tt].removeEmpty=!0)})),cr(Nn("ol ul blockquote a table tbody"),(Ce=>{t[Ce]&&(t[Ce].removeEmpty=!0)})),cr(Nn("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),(Ce=>{t[Ce]&&(t[Ce].paddEmpty=!0)})),cr(Nn("span"),(Ce=>{t[Ce].removeEmptyAttrs=!0}))),delete t.svg,H(e.custom_elements),Z(e.valid_children),W(e.extended_valid_elements),Z("+ol[ul|ol],+ul[ul|ol]"),cr({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},((Ce,tt)=>{t[tt]&&(t[tt].parentsRequired=Nn(Ce))})),e.invalid_elements&&cr(Db(e.invalid_elements),(Ce=>{t[Ce]&&delete t[Ce]})),le("span")||W("span[!data-mce-type|*]"),{type:l,children:n,elements:t,getValidStyles:_e,getValidClasses:Se,getBlockElements:yt,getInvalidStyles:Te,getVoidElements:j,getTextBlockElements:he,getTextInlineElements:Ne,getBoolAttrs:Me,getElementRule:le,getSelfClosingElements:z,getNonEmptyElements:G,getMoveCaretBeforeOnEnterElements:X,getWhitespaceElements:fe,getTransparentElements:ue,getSpecialElements:rt,getComponentUrls:Wn,isValidChild:(Ce,tt)=>{const dt=n[Ce.toLowerCase()];return!(!dt||!dt[tt.toLowerCase()])},isValid:st,isBlock:Ft,isInline:dn,isWrapper:Ce=>Oe(Ae(),Ce)||dn(Ce),getCustomElements:uo,addValidElements:W,setValidElements:B,addCustomElements:H,addValidChildren:Z}},Bm=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},ON=e=>(t=>{return{value:(n=t,ms(n,"#").toUpperCase())};var n})(Bm(e.red)+Bm(e.green)+Bm(e.blue)),Bb=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Pb=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Lb=(e,t,n,o)=>((r,s,a,i)=>({red:r,green:s,blue:a,alpha:i}))(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseFloat(o)),Mb=e=>{const t=Bb.exec(e);if(t!==null)return k.some(Lb(t[1],t[2],t[3],"1"));const n=Pb.exec(e);return n!==null?k.some(Lb(n[1],n[2],n[3],n[4])):k.none()},BN=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Cl=e=>Mb(e).map(ON).map((t=>"#"+t.value)).getOr(e),Pm=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,s={};let a,i;const l=kr;t&&(a=t.getValidStyles(),i=t.getInvalidStyles());const c=`\\" \\' \\; \\: ; : \uFEFF`.split(" ");for(let m=0;m<c.length;m++)s[c[m]]=l+m,s[l+m]=c[m];const d={parse:m=>{const f={};let h=!1;const g=e.url_converter,b=e.url_converter_scope||d,y=(B,F,H)=>{const Z=f[B+"-top"+F];if(!Z)return;const le=f[B+"-right"+F];if(!le)return;const _e=f[B+"-bottom"+F];if(!_e)return;const Te=f[B+"-left"+F];if(!Te)return;const Se=[Z,le,_e,Te];let Me=Se.length-1;for(;Me--&&Se[Me]===Se[Me+1];);Me>-1&&H||(f[B+F]=Me===-1?Se[0]:Se.join(" "),delete f[B+"-top"+F],delete f[B+"-right"+F],delete f[B+"-bottom"+F],delete f[B+"-left"+F])},v=B=>{const F=f[B];if(!F)return;const H=F.indexOf(",")>-1?[F]:F.split(" ");let Z=H.length;for(;Z--;)if(H[Z]!==H[0])return!1;return f[B]=H[0],!0},_=B=>(h=!0,s[B]),N=(B,F)=>(h&&(B=B.replace(/\uFEFF[0-9]/g,(H=>s[H]))),F||(B=B.replace(/\\([\'\";:])/g,"$1")),B),D=B=>String.fromCharCode(parseInt(B.slice(1),16)),A=B=>B.replace(/\\[0-9a-f]+/gi,D),R=(B,F,H,Z,le,_e)=>{if(le=le||_e)return"'"+(le=N(le)).replace(/\'/g,"\\'")+"'";if(F=N(F||H||Z||""),!e.allow_script_urls){const Te=F.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Te)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Te))return""}return g&&(F=g.call(b,F,"style")),"url('"+F.replace(/\'/g,"\\'")+"')"};if(m){let B;for(m=(m=m.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,_).replace(/\"[^\"]+\"|\'[^\']+\'/g,(F=>F.replace(/[;:]/g,_)));B=o.exec(m);){o.lastIndex=B.index+B[0].length;let F=B[1].replace(r,"").toLowerCase(),H=B[2].replace(r,"");if(F&&H){if(F=A(F),H=A(H),F.indexOf(l)!==-1||F.indexOf('"')!==-1||!e.allow_script_urls&&(F==="behavior"||/expression\s*\(|\/\*|\*\//.test(H)))continue;F==="font-weight"&&H==="700"?H="bold":F!=="color"&&F!=="background-color"||(H=H.toLowerCase()),W=H,(Bb.test(W)?"rgb":Pb.test(W)?"rgba":"other")=="rgb"&&Mb(H).each((Z=>{H=Cl(BN(Z)).toLowerCase()})),H=H.replace(n,R),f[F]=h?N(H,!0):H}}y("border","",!0),y("border","-width"),y("border","-color"),y("border","-style"),y("padding",""),y("margin",""),I="border-style",M="border-color",v(P="border-width")&&v(I)&&v(M)&&(f.border=f[P]+" "+f[I]+" "+f[M],delete f[P],delete f[I],delete f[M]),f.border==="medium none"&&delete f.border,f["border-image"]==="none"&&delete f["border-image"]}var P,I,M,W;return f},serialize:(m,f)=>{let h="";const g=(b,y)=>{const v=y[b];if(v)for(let _=0,N=v.length;_<N;_++){const D=v[_],A=m[D];A&&(h+=(h.length>0?" ":"")+D+": "+A+";")}};return f&&a?(g("*",a),g(f,a)):wt(m,((b,y)=>{b&&((v,_)=>{if(!i||!_)return!0;let N=i["*"];return!(N&&N[v]||(N=i[_],N&&N[v]))})(y,f)&&(h+=(h.length>0?" ":"")+y+": "+b+";")})),h}};return d},PN={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Ib=(e,t)=>{const n=t??{};for(const o in e)Oe(PN,o)||(n[o]=e[o]);return te(e.composedPath)&&(n.composedPath=()=>e.composedPath()),te(e.getModifierState)&&(n.getModifierState=o=>e.getModifierState(o)),te(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},Lm=(e,t,n,o)=>{const r=Ib(t,o);return r.type=e,kt(r.target)&&(r.target=r.srcElement??n),(s=>kt(s.preventDefault)||(a=>a instanceof Event||pt(a.initEvent))(s))(t)&&(r.preventDefault=()=>{r.defaultPrevented=!0,r.isDefaultPrevented=jt,pt(t.preventDefault)&&t.preventDefault()},r.stopPropagation=()=>{r.cancelBubble=!0,r.isPropagationStopped=jt,pt(t.stopPropagation)&&t.stopPropagation()},r.stopImmediatePropagation=()=>{r.isImmediatePropagationStopped=jt,r.stopPropagation()},(s=>s.isDefaultPrevented===jt||s.isDefaultPrevented===Nt)(r)||(r.isDefaultPrevented=r.defaultPrevented===!0?jt:Nt,r.isPropagationStopped=r.cancelBubble===!0?jt:Nt,r.isImmediatePropagationStopped=Nt)),r},LN=/^(?:mouse|contextmenu)|click/,Mm=(e,t,n,o)=>{e.addEventListener(t,n,o||!1)},dd=(e,t,n,o)=>{e.removeEventListener(t,n,o||!1)},xl=(e,t)=>{const n=Lm(e.type,e,document,t);if((o=>te(o)&&LN.test(o.type))(e)&&Lt(e.pageX)&&!Lt(e.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,s=o.body,a=n;a.pageX=e.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),a.pageY=e.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}return n},MN=(e,t,n)=>{const o=e.document,r={type:"ready"};if(n.domLoaded)return void t(r);const s=()=>{dd(e,"DOMContentLoaded",s),dd(e,"load",s),n.domLoaded||(n.domLoaded=!0,t(r)),e=null};o.readyState==="complete"||o.readyState==="interactive"&&o.body?s():Mm(e,"DOMContentLoaded",s),n.domLoaded||Mm(e,"load",s)};class pa{static Event=new pa;domLoaded=!1;events={};expando;hasFocusIn;count=1;constructor(){this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,o,r){const s=this;let a;const i=window,l=f=>{s.executeHandlers(xl(f||i.event),c)};if(!t||se(t)||xs(t))return o;let c;t[s.expando]?c=t[s.expando]:(c=s.count++,t[s.expando]=c,s.events[c]={}),r=r||t;const d=n.split(" ");let m=d.length;for(;m--;){let f=d[m],h=l,g=!1,b=!1;f==="DOMContentLoaded"&&(f="ready"),s.domLoaded&&f==="ready"&&t.readyState==="complete"?o.call(r,xl({type:f})):(s.hasFocusIn||f!=="focusin"&&f!=="focusout"||(g=!0,b=f==="focusin"?"focus":"blur",h=y=>{const v=xl(y||i.event);v.type=v.type==="focus"?"focusin":"focusout",s.executeHandlers(v,c)}),a=s.events[c][f],a?f==="ready"&&s.domLoaded?o(xl({type:f})):a.push({func:o,scope:r}):(s.events[c][f]=a=[{func:o,scope:r}],a.fakeName=b,a.capture=g,a.nativeHandler=h,f==="ready"?MN(t,h,s):Mm(t,b||f,h,g)))}return t=a=null,o}unbind(t,n,o){if(!t||se(t)||xs(t))return this;const r=t[this.expando];if(r){let s=this.events[r];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],c=s[l];if(c){if(o){let d=c.length;for(;d--;)if(c[d].func===o){const m=c.nativeHandler,f=c.fakeName,h=c.capture,g=c.slice(0,d).concat(c.slice(d+1));g.nativeHandler=m,g.fakeName=f,g.capture=h,s[l]=g}}o&&c.length!==0||(delete s[l],dd(t,c.fakeName||l,c.nativeHandler,c.capture))}}}else wt(s,((a,i)=>{dd(t,a.fakeName||i,a.nativeHandler,a.capture)})),s={};for(const a in s)if(Oe(s,a))return this;delete this.events[r];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,o){return this.dispatch(t,n,o)}dispatch(t,n,o){if(!t||se(t)||xs(t))return this;const r=xl({type:n,target:t},o);do{const s=t[this.expando];s&&this.executeHandlers(r,s),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!r.isPropagationStopped());return this}clean(t){if(!t||se(t)||xs(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let o=n.length;for(;o--;)(t=n[o])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const o=this.events[n],r=o&&o[t.type];if(r)for(let s=0,a=r.length;s<a;s++){const i=r[s];if(i&&i.func.call(i.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}const Im=E.each,IN=E.grep,Fm="data-mce-style",FN=E.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),wl=(e,t,n)=>{kt(n)||n===""?vt(e,t):lt(e,t,n)},Fb=e=>e.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase())),ci=(e,t)=>{let n=0;if(e)for(let o=e.nodeType,r=e.previousSibling;r;r=r.previousSibling){const s=r.nodeType;(!t||!se(r)||s!==o&&r.data.length)&&(n++,o=s)}return n},jb=(e,t)=>{const n=et(t,"style"),o=e.serialize(e.parse(n),Be(t));wl(t,Fm,o)},zb=(e,t,n)=>{const o=Fb(t);kt(n)||n===""?Yc(e,o):Kc(e,o,((r,s)=>x(r)?Oe(FN,s)?r+"":r+"px":r)(n,o))},At=(e,t={})=>{const n={},o=window,r={};let s=0;const a=vb.forElement(S.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy,crossOrigin:j=>{const z=t.crossOrigin;return pt(z)?z(j,"stylesheet"):void 0}}),i=[],l=t.schema?t.schema:ws({}),c=Pm({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),d=t.ownEvents?new pa:pa.Event,m=l.getBlockElements(),f=j=>j&&e&&xe(j)?e.getElementById(j):j,h=j=>{const z=f(j);return te(z)?S.fromDom(z):null},g=(j,z,G="")=>{let X;const fe=h(j);if(te(fe)&&ot(fe)){const ue=Ne[z];X=ue&&ue.get?ue.get(fe.dom,z):et(fe,z)}return te(X)?X:G},b=j=>{const z=f(j);return kt(z)?[]:z.attributes},y=(j,z,G)=>{I(j,(X=>{if(ve(X)){const fe=S.fromDom(X),ue=G===""?null:G,Ae=et(fe,z),rt=Ne[z];rt&&rt.set?rt.set(fe.dom,ue,z):wl(fe,z,ue),Ae!==ue&&t.onSetAttrib&&t.onSetAttrib({attrElm:fe.dom,attrName:z,attrValue:ue})}}))},v=()=>t.root_element||e.body,_=(j,z)=>((G,X,fe)=>{let ue=0,Ae=0;const rt=G.ownerDocument;if(fe=fe||G,X){if(fe===G&&X.getBoundingClientRect&&Yo(S.fromDom(G),"position")==="static"){const Ft=X.getBoundingClientRect();return ue=Ft.left+(rt.documentElement.scrollLeft||G.scrollLeft)-rt.documentElement.clientLeft,Ae=Ft.top+(rt.documentElement.scrollTop||G.scrollTop)-rt.documentElement.clientTop,{x:ue,y:Ae}}let st=X;for(;st&&st!==fe&&st.nodeType&&!bb(st,fe);){const Ft=st;ue+=Ft.offsetLeft||0,Ae+=Ft.offsetTop||0,st=Ft.offsetParent}for(st=X.parentNode;st&&st!==fe&&st.nodeType&&!bb(st,fe);)ue-=st.scrollLeft||0,Ae-=st.scrollTop||0,st=st.parentNode;Ae+=(Ft=>kN.isFirefox()&&Be(Ft)==="table"?hb(ht(Ft)).filter((dn=>Be(dn)==="caption")).bind((dn=>hb(at(dn)).map((uo=>{const Wn=uo.dom.offsetTop,Ce=dn.dom.offsetTop,tt=dn.dom.offsetHeight;return Wn<=Ce?-tt:0})))).getOr(0):0)(S.fromDom(X))}return{x:ue,y:Ae}})(e.body,f(j),z),N=(j,z,G)=>{const X=f(j);var fe;if(!kt(X)&&(ar(X)||ve(fe=X)&&fe.namespaceURI==="http://www.w3.org/2000/svg"))return G?Yo(S.fromDom(X),Fb(z)):((z=z.replace(/-(\D)/g,((ue,Ae)=>Ae.toUpperCase())))==="float"&&(z="cssFloat"),X.style?X.style[z]:void 0)},D=j=>{const z=f(j);if(!z)return{w:0,h:0};let G=N(z,"width"),X=N(z,"height");return G&&G.indexOf("px")!==-1||(G="0"),X&&X.indexOf("px")!==-1||(X="0"),{w:parseInt(G,10)||z.offsetWidth||z.clientWidth,h:parseInt(X,10)||z.offsetHeight||z.clientHeight}},A=(j,z)=>{if(!j)return!1;const G=re(j)?j:[j];return xt(G,(X=>Q(S.fromDom(X),z)))},R=(j,z,G,X)=>{const fe=[];let ue=f(j);X=X===void 0;const Ae=G||(v().nodeName!=="BODY"?v().parentNode:null);if(xe(z))if(z==="*")z=ve;else{const rt=z;z=st=>A(st,rt)}for(;ue&&!(ue===Ae||kt(ue.nodeType)||yl(ue)||hm(ue));){if(!z||z(ue)){if(!X)return[ue];fe.push(ue)}ue=ue.parentNode}return X?fe:null},P=(j,z,G)=>{let X=z;if(j){xe(z)&&(X=fe=>A(fe,z));for(let fe=j[G];fe;fe=fe[G])if(pt(X)&&X(fe))return fe}return null},I=function(j,z,G){const X=G??this;if(re(j)){const fe=[];return Im(j,((ue,Ae)=>{const rt=f(ue);rt&&fe.push(z.call(X,rt,Ae))})),fe}{const fe=f(j);return!!fe&&z.call(X,fe)}},M=(j,z)=>{I(j,(G=>{wt(z,((X,fe)=>{y(G,fe,X)}))}))},W=(j,z)=>{I(j,(G=>{const X=S.fromDom(G);ti(X,z)}))},B=(j,z,G,X,fe)=>I(j,(ue=>{const Ae=xe(z)?e.createElement(z):z;return te(G)&&M(Ae,G),X&&(!xe(X)&&X.nodeType?Ae.appendChild(X):xe(X)&&W(Ae,X)),fe?Ae:ue.appendChild(Ae)})),F=(j,z,G)=>B(e.createElement(j),j,z,G,!0),H=fa.encodeAllRaw,Z=(j,z)=>I(j,(G=>{const X=S.fromDom(G);return z&&K(ht(X),(fe=>{Et(fe)&&fe.dom.length===0?ft(fe):$(X,fe)})),ft(X),X.dom})),le=(j,z,G)=>{I(j,(X=>{if(ve(X)){const fe=S.fromDom(X),ue=z.split(" ");K(ue,(Ae=>{te(G)?(G?ai:bl)(fe,Ae):((rt,st)=>{const Ft=hl(rt)?rt.dom.classList.toggle(st):((dn,uo)=>we(Xh(dn),uo)?Gh(dn,uo):Yh(dn,uo))(rt,st);Qh(rt)})(fe,Ae)}))}}))},_e=(j,z,G)=>I(z,(X=>{const fe=re(z)?j.cloneNode(!0):j;return G&&Im(IN(X.childNodes),(ue=>{fe.appendChild(ue)})),X.parentNode?.replaceChild(fe,X),X})),Te=()=>e.createRange(),Se=(j,z,G,X)=>{if(re(j)){let fe=j.length;const ue=[];for(;fe--;)ue[fe]=Se(j[fe],z,G,X);return ue}return!t.collect||j!==e&&j!==o||i.push([j,z,G,X]),d.bind(j,z,G,X||he)},Me=(j,z,G)=>{if(re(j)){let X=j.length;const fe=[];for(;X--;)fe[X]=Me(j[X],z,G);return fe}if(i.length>0&&(j===e||j===o)){let X=i.length;for(;X--;){const[fe,ue,Ae]=i[X];j!==fe||z&&z!==ue||G&&G!==Ae||d.unbind(fe,ue,Ae)}}return d.unbind(j,z,G)},yt=j=>{if(j&&ar(j)){const z=j.getAttribute("data-mce-contenteditable");return z&&z!=="inherit"?z:j.contentEditable!=="inherit"?j.contentEditable:null}return null},he={doc:e,settings:t,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:c,schema:l,events:d,isBlock:j=>xe(j)?Oe(m,j):ve(j)&&(Oe(m,j.nodeName)||ua(l,j)),root:null,clone:(j,z)=>j.cloneNode(z),getRoot:v,getViewPort:j=>{const z=ob(j);return{x:z.x,y:z.y,w:z.width,h:z.height}},getRect:j=>{const z=f(j),G=_(z),X=D(z);return{x:G.x,y:G.y,w:X.w,h:X.h}},getSize:D,getParent:(j,z,G)=>{const X=R(j,z,G,!1);return X&&X.length>0?X[0]:null},getParents:R,get:f,getNext:(j,z)=>P(j,z,"nextSibling"),getPrev:(j,z)=>P(j,z,"previousSibling"),select:(j,z)=>{const G=f(z)??t.root_element??e;return pt(G.querySelectorAll)?vn(G.querySelectorAll(j)):[]},is:A,add:B,create:F,createHTML:(j,z,G="")=>{let X="<"+j;for(const fe in z)mn(z,fe)&&(X+=" "+fe+'="'+H(z[fe])+'"');return fs(G)&&Oe(l.getVoidElements(),j)?X+" />":X+">"+G+"</"+j+">"},createFragment:j=>{const z=e.createElement("div"),G=e.createDocumentFragment();let X;for(G.appendChild(z),j&&(z.innerHTML=j);X=z.firstChild;)G.appendChild(X);return G.removeChild(z),G},remove:Z,setStyle:(j,z,G)=>{I(j,(X=>{const fe=S.fromDom(X);zb(fe,z,G),t.update_styles&&jb(c,fe)}))},getStyle:N,setStyles:(j,z)=>{I(j,(G=>{const X=S.fromDom(G);wt(z,((fe,ue)=>{zb(X,ue,fe)})),t.update_styles&&jb(c,X)}))},removeAllAttribs:j=>I(j,(z=>{const G=z.attributes;for(let X=G.length-1;X>=0;X--)z.removeAttributeNode(G.item(X))})),setAttrib:y,setAttribs:M,getAttrib:g,getPos:_,parseStyle:j=>c.parse(j),serializeStyle:(j,z)=>c.serialize(j,z),addStyle:j=>{if(he!==At.DOM&&e===document){if(n[j])return;n[j]=!0}let z=e.getElementById("mceDefaultStyles");if(!z){z=e.createElement("style"),z.id="mceDefaultStyles",z.type="text/css";const G=e.head;G.firstChild?G.insertBefore(z,G.firstChild):G.appendChild(z)}z.styleSheet?z.styleSheet.cssText+=j:z.appendChild(e.createTextNode(j))},loadCSS:j=>{j||(j=""),K(j.split(","),(z=>{r[z]=!0,a.load(z).catch(Ee)}))},addClass:(j,z)=>{le(j,z,!0)},removeClass:(j,z)=>{le(j,z,!1)},hasClass:(j,z)=>{const G=h(j),X=z.split(" ");return te(G)&&eo(X,(fe=>dm(G,fe)))},toggleClass:le,show:j=>{I(j,(z=>Yc(S.fromDom(z),"display")))},hide:j=>{I(j,(z=>Kc(S.fromDom(z),"display","none")))},isHidden:j=>{const z=h(j);return te(z)&&us(ni(z,"display"),"none")},uniqueId:j=>(j||"mce_")+s++,setHTML:W,getOuterHTML:j=>{const z=h(j);return te(z)?ve(z.dom)?z.dom.outerHTML:(G=>{const X=S.fromTag("div"),fe=S.fromDom(G.dom.cloneNode(!0));return ne(X,fe),fl(X)})(z):""},setOuterHTML:(j,z)=>{I(j,(G=>{ve(G)&&(G.outerHTML=z)}))},decode:fa.decode,encode:H,insertAfter:(j,z)=>{const G=f(z);return I(j,(X=>{const fe=G?.parentNode,ue=G?.nextSibling;return fe&&(ue?fe.insertBefore(X,ue):fe.appendChild(X)),X}))},replace:_e,rename:(j,z)=>{if(j.nodeName!==z.toUpperCase()){const G=F(z);return Im(b(j),(X=>{y(G,X.nodeName,g(j,X.nodeName))})),_e(G,j,!0),G}return j},findCommonAncestor:(j,z)=>{let G=j;for(;G;){let X=z;for(;X&&G!==X;)X=X.parentNode;if(G===X)break;G=G.parentNode}return!G&&j.ownerDocument?j.ownerDocument.documentElement:G},run:I,getAttribs:b,isEmpty:(j,z,G)=>Re(z)?es(l,j,{...G,isContent:fe=>{const ue=fe.nodeName.toLowerCase();return!!z[ue]}}):es(l,j,G),createRng:Te,nodeIndex:ci,split:(j,z,G)=>{let X,fe,ue=Te();if(j&&z&&j.parentNode&&z.parentNode){const Ae=j.parentNode;return ue.setStart(Ae,ci(j)),ue.setEnd(z.parentNode,ci(z)),X=ue.extractContents(),ue=Te(),ue.setStart(z.parentNode,ci(z)+1),ue.setEnd(Ae,ci(j)+1),fe=ue.extractContents(),Ae.insertBefore(Nm(he,X,l),j),G?Ae.insertBefore(G,j):Ae.insertBefore(z,j),Ae.insertBefore(Nm(he,fe,l),j),Z(j),G||z}},bind:Se,unbind:Me,fire:(j,z,G)=>d.dispatch(j,z,G),dispatch:(j,z,G)=>d.dispatch(j,z,G),getContentEditable:yt,getContentEditableParent:j=>{const z=v();let G=null;for(let X=j;X&&X!==z&&(G=yt(X),G===null);X=X.parentNode);return G},isEditable:j=>{if(te(j)){const z=ve(j)?j:j.parentElement;return te(z)&&ar(z)&&Jr(S.fromDom(z))}return!1},destroy:()=>{if(i.length>0){let j=i.length;for(;j--;){const[z,G,X]=i[j];d.unbind(z,G,X)}}wt(r,((j,z)=>{a.unload(z),delete r[z]}))},isChildOf:(j,z)=>j===z||z.contains(j),dumpRng:j=>"startContainer: "+j.startContainer.nodeName+", startOffset: "+j.startOffset+", endContainer: "+j.endContainer.nodeName+", endOffset: "+j.endOffset},Ne=((j,z,G)=>{const X=z.keep_values,fe={set:(Ae,rt,st)=>{const Ft=S.fromDom(Ae);pt(z.url_converter)&&te(rt)&&(rt=z.url_converter.call(z.url_converter_scope||G(),String(rt),st,Ae)),wl(Ft,"data-mce-"+st,rt),wl(Ft,st,rt)},get:(Ae,rt)=>{const st=S.fromDom(Ae);return et(st,"data-mce-"+rt)||et(st,rt)}},ue={style:{set:(Ae,rt)=>{const st=S.fromDom(Ae);X&&wl(st,Fm,rt),vt(st,"style"),xe(rt)&&Xc(st,j.parse(rt))},get:Ae=>{const rt=S.fromDom(Ae),st=et(rt,Fm)||et(rt,"style");return j.serialize(j.parse(st),Be(rt))}}};return X&&(ue.href=ue.src=fe),ue})(c,t,ie(he));return he};At.DOM=At(document),At.nodeIndex=ci;const jN=At.DOM;class dr{static ScriptLoader=new dr;settings;states={};queue=[];scriptLoadedCallbacks={};queueLoadedCallbacks=[];loading=!1;constructor(t={}){this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}_setCrossOrigin(t){this.settings.crossOrigin=t}loadScript(t){return new Promise(((n,o)=>{const r=jN,s=document;let a;const i=()=>{r.remove(l),a&&(a.onerror=a.onload=a=null)},l=r.uniqueId();a=s.createElement("script"),a.id=l,a.type="text/javascript",a.src=E._addCacheSuffix(t),this.settings.referrerPolicy&&r.setAttrib(a,"referrerpolicy",this.settings.referrerPolicy);const c=this.settings.crossOrigin;if(pt(c)){const d=c(t);d!==void 0&&r.setAttrib(a,"crossorigin",d)}a.onload=()=>{i(),n()},a.onerror=()=>{i(),o("Failed to load script: "+t)},(s.head||s.body).appendChild(a)}))}isDone(t){return this.states[t]===2}markDone(t){this.states[t]=2}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=0),new Promise(((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})}))}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,o=(l,c)=>{Ot(n.scriptLoadedCallbacks,c).each((d=>{K(d,(m=>m[l](c)))})),delete n.scriptLoadedCallbacks[c]},r=l=>{const c=De(l,(d=>d.status==="rejected"));return c.length>0?Promise.reject($t(c,(({reason:d})=>re(d)?d:[d]))):Promise.resolve()},s=l=>Promise.allSettled(qe(l,(c=>n.states[c]===2?(o("resolve",c),Promise.resolve()):n.states[c]===3?(o("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then((()=>{n.states[c]=2,o("resolve",c);const d=n.queue;return d.length>0?(n.queue=[],s(d).then(r)):Promise.resolve()}),(()=>(n.states[c]=3,o("reject",c),Promise.reject(c)))))))),a=l=>(n.loading=!0,s(l).then((c=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return k.from(d).each(Xn),r(c)}))),i=Dc(t);return n.loading?new Promise(((l,c)=>{n.queueLoadedCallbacks.push((()=>{a(i).then(l,c)}))})):a(i)}getScriptAttributes(t){const n={};this.settings.referrerPolicy&&(n.referrerpolicy=this.settings.referrerPolicy);const o=this.settings.crossOrigin;if(pt(o)){const r=o(t);xe(r)&&(n.crossorigin=r)}return n}}const Sl={},jm=Qt("en"),Ub=()=>Ot(Sl,jm.get()),ur={getData:()=>Ws(Sl,(e=>({...e}))),setCode:e=>{e&&jm.set(e)},getCode:()=>jm.get(),add:(e,t)=>{let n=Sl[e];n||(Sl[e]=n={});const o=qe(un(t),(r=>r.toLowerCase()));wt(t,((r,s)=>{const a=s.toLowerCase();a!==s&&((i,l)=>{const c=i.indexOf(l);return c!==-1&&i.indexOf(l,c+1)>c})(o,a)?(Oe(t,a)||(n[a]=r),n[s]=r):n[a]=r}))},translate:e=>{const t=Ub().getOr({}),n=l=>pt(l)?Object.prototype.toString.call(l):o(l)?"":""+l,o=l=>l===""||l==null,r=l=>{const c=n(l);return Oe(t,c)?n(t[c]):Ot(t,c.toLowerCase()).map(n).getOr(c)},s=l=>l.replace(/{context:\w+}$/,""),a=l=>l.replaceAll("...","\u2026");if(o(e))return"";if(He(i=e)&&Oe(i,"raw"))return a(n(e.raw));var i;if((l=>re(l)&&l.length>1)(e)){const l=e.slice(1);return a(s(r(e[0]).replace(/\{([0-9]+)\}/g,((c,d)=>Oe(l,d)?n(l[d]):c))))}return a(s(r(e)))},isRtl:()=>Ub().bind((e=>Ot(e,"_dir"))).exists((e=>e==="rtl")),hasCode:e=>Oe(Sl,e)},Mn=()=>{const e=[],t={},n={},o=[],r=(l,c)=>{const d=De(o,(m=>m.name===l&&m.state===c));K(d,(m=>m.resolve()))},s=l=>Oe(t,l),a=(l,c)=>{const d=ur.getCode();!d||c&&(","+(c||"")+",").indexOf(","+d+",")===-1||dr.ScriptLoader.add(t[l]+"/langs/"+d+".js")},i=(l,c="added")=>c==="added"&&(d=>Oe(n,d))(l)||c==="loaded"&&s(l)?Promise.resolve():new Promise((d=>{o.push({name:l,state:c,resolve:d})}));return{items:e,urls:t,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{Mn.languageLoad!==!1&&(s(l)?a(l,c):i(l,"loaded").then((()=>a(l,c))))},add:(l,c)=>(e.push(c),n[l]={instance:c},r(l,"added"),c),remove:l=>{delete t[l],delete n[l]},createUrl:(l,c)=>xe(c)?xe(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(t[l])return Promise.resolve();let d=xe(c)?c:c.prefix+c.resource+c.suffix;d.indexOf("/")!==0&&d.indexOf("://")===-1&&(d=Mn.baseURL+"/"+d),t[l]=d.substring(0,d.lastIndexOf("/"));const m=()=>(r(l,"loaded"),Promise.resolve());return n[l]?m():dr.ScriptLoader.add(d).then(m)},waitFor:i}};Mn.languageLoad=!0,Mn.baseURL="",Mn.PluginManager=Mn(),Mn.ThemeManager=Mn(),Mn.ModelManager=Mn();const El=ie("mce-annotation"),ga=ie("data-mce-annotation"),di=ie("data-mce-annotation-uid"),kl=ie("data-mce-annotation-active"),_l=ie("data-mce-annotation-classes"),Nl=ie("data-mce-annotation-attrs"),Hb=e=>t=>me(t,e),$b=(e,t)=>{const n=e.selection.getRng(),o=S.fromDom(n.startContainer),r=S.fromDom(e.getBody()),s=t.fold((()=>"."+El()),(i=>`[${ga()}="${i}"]`)),a=qt(o,n.startOffset).getOr(o);return Cs(a,s,Hb(r)).bind((i=>bt(i,`${di()}`).bind((l=>bt(i,`${ga()}`).map((c=>{const d=Wb(e,l);return{uid:l,name:c,elements:d}}))))))},qb=(e,t)=>ct(e,"data-mce-bogus")||((n,o,r)=>si(n,'[data-mce-bogus="all"]',r).isSome())(e,0,Hb(t)),Wb=(e,t)=>{const n=S.fromDom(e.getBody()),o=_n(n,`[${di()}="${t}"]`);return De(o,(r=>!qb(r,n)))},Vb=(e,t)=>{const n=S.fromDom(e.getBody()),o=_n(n,`[${ga()}="${t}"]`),r={};return K(o,(s=>{if(!qb(s,n)){const a=et(s,di()),i=Ot(r,a).getOr([]);r[a]=i.concat([s])}})),r},Kb=(e,t,n=Nt)=>{const o=new an(e,t),r=s=>{let a;do a=o[s]();while(a&&!se(a)&&!n(a));return k.from(a).filter(se)};return{current:()=>k.from(o.current()).filter(se),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},ha=(e,t)=>{const n=t||(r=>e.isBlock(r)||Ut(r)||Pt(r)),o=(r,s,a,i)=>{if(se(r)){const l=i(r,s,r.data);if(l!==-1)return k.some({container:r,offset:l})}return a().bind((l=>o(l.container,l.offset,a,i)))};return{backwards:(r,s,a,i)=>{const l=Kb(r,i??e.getRoot(),n);return o(r,s,(()=>l.prev().map((c=>({container:c,offset:c.length})))),a).getOrNull()},forwards:(r,s,a,i)=>{const l=Kb(r,i??e.getRoot(),n);return o(r,s,(()=>l.next().map((c=>({container:c,offset:0})))),a).getOrNull()}}},ui=e=>{let t;return n=>(t=t||wn(e,jt),Oe(t,Be(n)))},Ss=e=>ot(e)&&Be(e)==="br",Xb=ui(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),zm=ui(["ul","ol","dl"]),mi=ui(["li","dd","dt"]),zN=ui(["thead","tbody","tfoot"]),Al=ui(["td","th"]),ud=ui(["pre","script","textarea","style"]),fi=()=>{const e=S.fromTag("br");return lt(e,"data-mce-bogus","1"),e},Es=e=>{rn(e),ne(e,fi())},hn=kr,md=Yr,vo=e=>e.replace(/\uFEFF/g,""),UN=ve,pi=se,gi=e=>(pi(e)&&(e=e.parentNode),UN(e)&&e.hasAttribute("data-mce-caret")),ks=e=>pi(e)&&md(e.data),Do=e=>gi(e)||ks(e),Yb=e=>e.firstChild!==e.lastChild||!Ut(e.firstChild),Um=e=>{const t=e.container();return!!se(t)&&(t.data.charAt(e.offset())===hn||e.isAtStart()&&ks(t.previousSibling))},Hm=e=>{const t=e.container();return!!se(t)&&(t.data.charAt(e.offset()-1)===hn||e.isAtEnd()&&ks(t.nextSibling))},fd=e=>pi(e)&&e.data[0]===hn,pd=e=>pi(e)&&e.data[e.data.length-1]===hn,$m=e=>e&&e.hasAttribute("data-mce-caret")?((t=>{const n=t.getElementsByTagName("br"),o=n[n.length-1];ca(o)&&o.parentNode?.removeChild(o)})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Gb=e=>gi(e.startContainer),hi=Math.round,ba=e=>e?{left:hi(e.left),top:hi(e.top),bottom:hi(e.bottom),right:hi(e.right),width:hi(e.width),height:hi(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Qb=(e,t)=>(e=ba(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Jb=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,Tl=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&Jb(t.top-e.bottom,e,t)},Dl=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&Jb(t.bottom-e.top,e,t),Zb=(e,t,n)=>{const o=Math.max(Math.min(t,e.left+e.width),e.left),r=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-o)*(t-o)+(n-r)*(n-r))},gd=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},_s=(e,t)=>{if(ve(e)&&e.hasChildNodes()){const n=e.childNodes,o=((r,s,a)=>Math.min(Math.max(r,0),a))(t,0,n.length-1);return n[o]}return e},HN=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),e0=e=>xe(e)&&e.charCodeAt(0)>=768&&HN.test(e),t0=To,$N=Pt,qN=Ut,WN=se,VN=ir(["script","style","textarea"]),n0=ir(["img","input","textarea","hr","iframe","video","audio","object","embed"]),KN=ir(["table"]),XN=Do,mr=e=>!XN(e)&&(WN(e)?!VN(e.parentNode):n0(e)||qN(e)||KN(e)||qm(e)),qm=e=>!(t=>ve(t)&&t.getAttribute("unselectable")==="true")(e)&&$N(e),o0=(e,t)=>mr(e)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(qm(r))return!1;if(t0(r))return!0}return!0})(e,t),r0=ve,YN=mr,s0=rd("display","block table"),GN=rd("float","left right"),Rl=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(r0,YN,Ho(GN)),QN=Ho(rd("white-space","pre pre-line pre-wrap")),Ol=se,Wm=Ut,a0=At.nodeIndex,hd=(e,t)=>t<0&&ve(e)&&e.hasChildNodes()?void 0:_s(e,t),Vm=e=>e?e.createRange():At.DOM.createRng(),Km=e=>xe(e)&&/[\r\n\t ]/.test(e),i0=e=>!!e.setStart&&!!e.setEnd,Xm=e=>{const t=e.startContainer,n=e.startOffset;if(Km(e.toString())&&QN(t.parentNode)&&se(t)){const o=t.data;if(Km(o[n-1])||Km(o[n+1]))return!0}return!1},l0=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Ns=e=>{let t;const n=e.getClientRects();return t=n.length>0?ba(n[0]):ba(e.getBoundingClientRect()),!i0(e)&&Wm(e)&&l0(t)?(o=>{const r=o.ownerDocument,s=Vm(r),a=r.createTextNode(It),i=o.parentNode;i.insertBefore(a,o),s.setStart(a,0),s.setEnd(a,1);const l=ba(s.getBoundingClientRect());return i.removeChild(a),l})(e):l0(t)&&i0(e)?(o=>{const r=o.startContainer,s=o.endContainer,a=o.startOffset,i=o.endOffset;if(r===s&&se(s)&&a===0&&i===1){const l=o.cloneRange();return l.setEndAfter(s),Ns(l)}return null})(e)??t:t},ya=(e,t)=>{const n=Qb(e,t);return n.width=1,n.right=n.left+1,n},Y=(e,t,n)=>{const o=()=>(n||(n=(r=>{const s=[],a=d=>{var m,f;d.height!==0&&(s.length>0&&(m=d,f=s[s.length-1],m.left===f.left&&m.top===f.top&&m.bottom===f.bottom&&m.right===f.right)||s.push(d))},i=(d,m)=>{const f=Vm(d.ownerDocument);if(m<d.data.length){if(e0(d.data[m]))return;if(e0(d.data[m-1])&&(f.setStart(d,m),f.setEnd(d,m+1),!Xm(f)))return void a(ya(Ns(f),!1))}m>0&&(f.setStart(d,m-1),f.setEnd(d,m),Xm(f)||a(ya(Ns(f),!1))),m<d.data.length&&(f.setStart(d,m),f.setEnd(d,m+1),Xm(f)||a(ya(Ns(f),!0)))},l=r.container(),c=r.offset();if(Ol(l))return i(l,c),s;if(r0(l))if(r.isAtEnd()){const d=hd(l,c);Ol(d)&&i(d,d.data.length),Rl(d)&&!Wm(d)&&a(ya(Ns(d),!1))}else{const d=hd(l,c);if(Ol(d)&&i(d,0),Rl(d)&&r.isAtEnd())return a(ya(Ns(d),!1)),s;const m=hd(r.container(),r.offset()-1);Rl(m)&&!Wm(m)&&(s0(m)||s0(d)||!Rl(d))&&a(ya(Ns(m),!1)),Rl(d)&&a(ya(Ns(d),!0))}return s})(Y(e,t))),n);return{container:ie(e),offset:ie(t),toRange:()=>{const r=Vm(e.ownerDocument);return r.setStart(e,t),r.setEnd(e,t),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(Ol(e),t===0),isAtEnd:()=>Ol(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:r=>r&&e===r.container()&&t===r.offset(),getNode:r=>hd(e,r?t-1:t)}};Y.fromRangeStart=e=>Y(e.startContainer,e.startOffset),Y.fromRangeEnd=e=>Y(e.endContainer,e.endOffset),Y.after=e=>Y(e.parentNode,a0(e)+1),Y.before=e=>Y(e.parentNode,a0(e)),Y.isAbove=(e,t)=>zt(nn(t.getClientRects()),to(e.getClientRects()),Tl).getOr(!1),Y.isBelow=(e,t)=>zt(to(t.getClientRects()),nn(e.getClientRects()),Dl).getOr(!1),Y.isAtStart=e=>!!e&&e.isAtStart(),Y.isAtEnd=e=>!!e&&e.isAtEnd(),Y.isTextPosition=e=>!!e&&se(e.container()),Y.isElementPosition=e=>!Y.isTextPosition(e);const bd=(e,t)=>{se(t)&&t.data.length===0&&e.remove(t)},Ym=(e,t,n)=>{hm(n)?((o,r,s)=>{const a=k.from(s.firstChild),i=k.from(s.lastChild);r.insertNode(s),a.each((l=>bd(o,l.previousSibling))),i.each((l=>bd(o,l.nextSibling)))})(e,t,n):((o,r,s)=>{r.insertNode(s),bd(o,s.previousSibling),bd(o,s.nextSibling)})(e,t,n)},fr=se,c0=ca,d0=At.nodeIndex,u0=e=>{const t=e.parentNode;return c0(t)?u0(t):t},Gm=e=>e?Yn(e.childNodes,((t,n)=>(c0(n)&&n.nodeName!=="BR"?t=t.concat(Gm(n)):t.push(n),t)),[]):[],m0=e=>t=>e===t,f0=e=>(fr(e)?"text()":e.nodeName.toLowerCase())+"["+(t=>{let n,o;n=Gm(u0(t)),o=el(n,m0(t),t),n=n.slice(0,o+1);const r=Yn(n,((s,a,i)=>(fr(a)&&fr(n[i-1])&&s++,s)),0);return n=hs(n,ir([t.nodeName])),o=el(n,m0(t),t),o-r})(e)+"]",p0=(e,t)=>{let n,o=[],r=t.container(),s=t.offset();if(fr(r))n=((i,l)=>{let c=i;for(;(c=c.previousSibling)&&fr(c);)l+=c.data.length;return l})(r,s);else{const i=r.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",r=i[s]}o.push(f0(r));let a=((i,l)=>{const c=[];for(let d=l.parentNode;d&&d!==i;d=d.parentNode)c.push(d);return c})(e,r);return a=hs(a,Ho(ca)),o=o.concat(gs(a,(i=>f0(i)))),o.reverse().join("/")+","+n},g0=(e,t)=>{if(!t)return null;const n=t.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",s=Yn(o,((a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?(l[1]==="text()"&&(l[1]="#text"),((c,d,m)=>{let f=Gm(c);return f=hs(f,((h,g)=>!fr(h)||!fr(f[g-1]))),f=hs(f,ir([d])),f[m]})(a,l[1],parseInt(l[2],10))):null}),e);if(!s)return null;if(!fr(s)&&s.parentNode){let a;return a=r==="after"?d0(s)+1:d0(s),Y(s.parentNode,a)}return((a,i)=>{let l=a,c=0;for(;fr(l);){const d=l.data.length;if(i>=c&&i<=c+d){a=l,i-=c;break}if(!fr(l.nextSibling)){a=l,i=d;break}c+=d,l=l.nextSibling}return fr(a)&&i>a.data.length&&(i=a.data.length),Y(a,i)})(s,parseInt(r,10))},yd=Pt,h0=(e,t,n,o,r)=>{const s=r?o.startContainer:o.endContainer;let a=r?o.startOffset:o.endOffset;const i=[],l=e.getRoot();if(se(s))i.push(n?((c,d,m)=>{let f=c(d.data.slice(0,m)).length;for(let h=d.previousSibling;h&&se(h);h=h.previousSibling)f+=c(h.data).length;return f})(t,s,a):a);else{let c=0;const d=s.childNodes;a>=d.length&&d.length&&(c=1,a=Math.max(0,d.length-1)),i.push(e.nodeIndex(d[a],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)i.push(e.nodeIndex(c,n));return i},Qm=(e,t,n)=>{let o=0;return E.each(e.select(t),(r=>r.getAttribute("data-mce-bogus")==="all"?void 0:r!==n&&void o++)),o},b0=(e,t)=>{let n=t?e.startContainer:e.endContainer,o=t?e.startOffset:e.endOffset;if(ve(n)&&n.nodeName==="TR"){const r=n.childNodes;n=r[Math.min(t?o:o-1,r.length-1)],n&&(o=t?0:n.childNodes.length,t?e.setStart(n,o):e.setEnd(n,o))}},y0=e=>(b0(e,!0),b0(e,!1),e),v0=(e,t)=>{if(ve(e)&&(e=_s(e,t),yd(e)))return e;if(Do(e)){se(e)&&gi(e)&&(e=e.parentNode);let n=e.previousSibling;if(yd(n)||(n=e.nextSibling,yd(n)))return n}},C0=(e,t,n)=>{const o=n.getNode(),r=n.getRng();if(o.nodeName==="IMG"||yd(o)){const a=o.nodeName;return{name:a,index:Qm(n.dom,a,o)}}const s=(a=>v0(a.startContainer,a.startOffset)||v0(a.endContainer,a.endOffset))(r);if(s){const a=s.tagName;return{name:a,index:Qm(n.dom,a,s)}}return((a,i,l,c)=>{const d=i.dom,m=h0(d,a,l,c,!0),f=i.isForward(),h=Gb(c)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:m,forward:f,...h}:{start:m,end:h0(d,a,l,c,!1),forward:f,...h}})(e,n,t,r)},x0=(e,t,n)=>{const o={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",o,"&#xFEFF;"):e.create("span",o)},w0=(e,t)=>{const n=e.dom;let o=e.getRng();const r=n.uniqueId(),s=e.isCollapsed(),a=e.getNode(),i=a.nodeName,l=e.isForward();if(i==="IMG")return{name:i,index:Qm(n,i,a)};const c=y0(o.cloneRange());if(!s){c.collapse(!1);const m=x0(n,r+"_end",t);Ym(n,c,m)}o=y0(o),o.collapse(!0);const d=x0(n,r+"_start",t);return Ym(n,o,d),e.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},Jm=be(C0,gt,!0),bi=e=>e===1,va=e=>e===-1,JN=e=>e.type==="inline-command"||e.type==="inline-format",ZN=e=>e.type==="block-command"||e.type==="block-format",eA=e=>{const t=o=>fn.error({message:o,pattern:e}),n=(o,r,s)=>{if(e.format!==void 0){let a;if(re(e.format)){if(!eo(e.format,xe))return t(o+" pattern has non-string items in the `format` array");a=e.format}else{if(!xe(e.format))return t(o+" pattern has non-string `format` parameter");a=[e.format]}return fn.value(r(a))}return e.cmd!==void 0?xe(e.cmd)?fn.value(s(e.cmd,e.value)):t(o+" pattern has non-string `cmd` parameter"):t(o+" pattern is missing both `format` and `cmd` parameters")};if(!He(e))return t("Raw pattern is not an object");if(!xe(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!xe(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let o=e.start,r=e.end;return r.length===0&&(r=o,o=""),n("Inline",(s=>({type:"inline-format",start:o,end:r,format:s})),((s,a)=>({type:"inline-command",start:o,end:r,cmd:s,value:a})))}if(e.replacement!==void 0)return xe(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):fn.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter");{const o=e.trigger??"space";return e.start.length===0?t("Block pattern has empty `start` parameter"):n("Block",(r=>({type:"block-format",start:e.start,format:r[0],trigger:o})),((r,s)=>({type:"block-command",start:e.start,cmd:r,value:s,trigger:o})))}},S0=e=>De(e,ZN),E0=e=>De(e,JN),Zm=(e,t)=>({...e,blockPatterns:De(e.blockPatterns,(n=>((o,r)=>(o.type==="block-command"||o.type==="block-format")&&o.trigger===r)(n,t)))}),k0=e=>{const t=Va(qe(e,eA));return K(t.errors,(n=>console.error(n.message,n.pattern))),t.values},_0=(e,t,n)=>{e.dispatch(t,n)},N0=(e,t,n,o)=>{e.dispatch("FormatApply",{format:t,node:n,vars:o})},A0=(e,t,n,o)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:o})},T0=(e,t)=>e.dispatch("SetContent",t),D0=(e,t)=>e.dispatch("GetContent",t),ef=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},R0=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),tf=qo().deviceType,tA=tf.isTouch(),nA=At.DOM,O0=e=>So(e,RegExp),pe=e=>t=>t.options.get(e),vd=e=>xe(e)||He(e),B0=(e,t="")=>n=>{const o=xe(n);if(o){if(n.indexOf("=")!==-1){const r=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return Yt(a,((i,l)=>{const c=l.split("="),d=c[0],m=c.length>1?c[1]:d;return i[Er(d)]=Er(m),i}),{})})(n);return{value:Ot(r,e.id).getOr(t),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},oA=pe("iframe_attrs"),rA=pe("doctype"),P0=pe("document_base_url"),sA=pe("body_id"),aA=pe("body_class"),L0=pe("content_security_policy"),iA=pe("br_in_pre"),xn=pe("forced_root_block"),yi=pe("forced_root_block_attrs"),lA=pe("newline_behavior"),cA=pe("br_newline_selector"),dA=pe("no_newline_selector"),uA=pe("keep_styles"),mA=pe("end_container_on_empty_block"),M0=pe("automatic_uploads"),I0=pe("images_reuse_filename"),fA=pe("images_replace_blob_uris"),F0=pe("icons"),pA=pe("icons_url"),gA=pe("images_upload_url"),hA=pe("images_upload_base_path"),bA=pe("images_upload_credentials"),yA=pe("images_upload_handler"),vA=pe("content_css_cors"),nf=pe("referrer_policy"),of=pe("crossorigin"),j0=pe("language"),CA=pe("language_url"),z0=pe("indent_use_margin"),xA=pe("indentation"),wA=pe("content_css"),SA=pe("content_style"),U0=pe("font_css"),EA=pe("directionality"),kA=pe("inline_boundaries_selector"),H0=pe("object_resizing"),_A=pe("resize_img_proportional"),NA=pe("placeholder"),$0=pe("event_root"),AA=pe("service_message"),vi=pe("theme"),TA=pe("theme_url"),rf=pe("model"),DA=pe("model_url"),Bl=pe("inline_boundaries"),RA=pe("formats"),OA=pe("preview_styles"),BA=pe("format_empty_lines"),PA=pe("format_noneditable_selector"),LA=pe("custom_ui_selector"),sf=pe("inline"),MA=pe("hidden_input"),IA=pe("submit_patch"),FA=pe("add_form_submit_trigger"),jA=pe("add_unload_trigger"),zA=pe("custom_undo_redo_levels"),UA=pe("disable_nodechange"),q0=pe("readonly"),HA=pe("editable_root"),W0=pe("content_css_cors"),Pl=pe("plugins"),$A=pe("external_plugins"),qA=pe("block_unsupported_drop"),WA=pe("visual"),VA=pe("visual_table_class"),V0=pe("visual_anchor_class"),K0=pe("iframe_aria_text"),KA=pe("setup"),XA=pe("init_instance_callback"),YA=pe("urlconverter_callback"),GA=pe("auto_focus"),QA=pe("browser_spellcheck"),JA=pe("protect"),ZA=pe("paste_block_drop"),Cd=pe("paste_data_images"),eT=pe("paste_preprocess"),tT=pe("paste_postprocess"),nT=pe("newdocument_content"),oT=pe("paste_webkit_styles"),rT=pe("paste_remove_styles_if_webkit"),sT=pe("paste_merge_formats"),aT=pe("smart_paste"),iT=pe("paste_as_text"),lT=pe("paste_tab_spaces"),cT=pe("allow_html_data_urls"),dT=pe("text_patterns"),uT=pe("text_patterns_lookup"),X0=pe("noneditable_class"),mT=pe("editable_class"),fT=pe("noneditable_regexp"),pT=pe("preserve_cdata"),gT=pe("highlight_on_focus"),Y0=pe("xss_sanitization"),hT=pe("init_content_sync"),G0=e=>E.explode(e.options.get("images_file_types")),bT=pe("table_tab_navigation"),yT=pe("details_initial_state"),vT=pe("details_serialized_state"),Q0=pe("sandbox_iframes"),af=e=>e.options.get("sandbox_iframes_exclusions"),CT=pe("convert_unsafe_embeds"),xT=pe("license_key"),wT=pe("api_key"),xd=pe("disabled"),ST=pe("user_id"),ET=pe("fetch_users"),kT=pe("lists_indent_on_tab"),J0=e=>k.from(e.options.get("list_max_depth")),_T=ve,Z0=se,ey=e=>{const t=e.parentNode;t&&t.removeChild(e)},ty=e=>{const t=vo(e);return{count:e.length-t.length,text:t}},ny=e=>{let t;for(;(t=e.data.lastIndexOf(hn))!==-1;)e.deleteData(t,1)},oy=(e,t)=>(Ca(e),t),NT=(e,t)=>Y.isTextPosition(t)?((n,o)=>Z0(n)&&o.container()===n?((r,s)=>{const a=ty(r.data.substr(0,s.offset())),i=ty(r.data.substr(s.offset()));return(a.text+i.text).length>0?(ny(r),Y(r,s.offset()-a.count)):s})(n,o):oy(n,o))(e,t):((n,o)=>o.container()===n.parentNode?((r,s)=>{const a=s.container(),i=((l,c)=>{const d=ut(l,c);return d===-1?k.none():k.some(d)})(vn(a.childNodes),r).map((l=>l<s.offset()?Y(a,s.offset()-1):s)).getOr(s);return Ca(r),i})(n,o):oy(n,o))(e,t),Ca=e=>{_T(e)&&Do(e)&&(Yb(e)?e.removeAttribute("data-mce-caret"):ey(e)),Z0(e)&&(ny(e),e.data.length===0&&ey(e))},AT=Pt,TT=lr,DT=sd,ry=(e,t,n)=>{const o=Qb(t.getBoundingClientRect(),n);let r,s;if(e.tagName==="BODY"){const i=e.ownerDocument.documentElement;r=e.scrollLeft||i.scrollLeft,s=e.scrollTop||i.scrollTop}else{const i=e.getBoundingClientRect();r=e.scrollLeft-i.left,s=e.scrollTop-i.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let a=t.offsetWidth-t.clientWidth;return a>0&&(n&&(a*=-1),o.left+=a,o.right+=a),o},RT=(e,t,n,o)=>{const r=$o();let s,a;const i=xn(e),l=e.dom,c=()=>{(d=>{const m=_n(S.fromDom(d),"*[contentEditable=false],video,audio,embed,object");for(let f=0;f<m.length;f++){const h=m[f].dom;let g=h.previousSibling;if(pd(g)){const b=g.data;b.length===1?g.parentNode?.removeChild(g):g.deleteData(b.length-1,1)}g=h.nextSibling,fd(g)&&(g.data.length===1?g.parentNode?.removeChild(g):g.deleteData(0,1))}})(t),a&&(Ca(a),a=null),r.on((d=>{l.remove(d.caret),r.clear()})),s&&(clearInterval(s),s=void 0)};return{isShowing:r.isSet,show:(d,m)=>{let f;if(c(),DT(m))return null;if(!n(m))return a=((h,g)=>{const b=(h.ownerDocument??document).createTextNode(hn),y=h.parentNode;if(g){const v=h.previousSibling;if(pi(v)){if(Do(v))return v;if(pd(v))return v.splitText(v.data.length-1)}y?.insertBefore(b,h)}else{const v=h.nextSibling;if(pi(v)){if(Do(v))return v;if(fd(v))return v.splitText(1),v}h.nextSibling?y?.insertBefore(b,h.nextSibling):y?.appendChild(b)}return b})(m,d),f=m.ownerDocument.createRange(),Ll(a.nextSibling)?(f.setStart(a,0),f.setEnd(a,0)):(f.setStart(a,1),f.setEnd(a,1)),f;{const h=((y,v,_)=>{const N=(v.ownerDocument??document).createElement(y);N.setAttribute("data-mce-caret",_?"before":"after"),N.setAttribute("data-mce-bogus","all"),N.appendChild(fi().dom);const D=v.parentNode;return _?D?.insertBefore(N,v):v.nextSibling?D?.insertBefore(N,v.nextSibling):D?.appendChild(N),N})(i,m,d),g=ry(t,m,d);l.setStyle(h,"top",g.top),l.setStyle(h,"caret-color","transparent"),a=h;const b=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(b,{...g}),l.add(t,b),r.set({caret:b,element:m,before:d}),d&&l.addClass(b,"mce-visual-caret-before"),s=window.setInterval((()=>{r.on((y=>{o()?l.toggleClass(y.caret,"mce-visual-caret-hidden"):l.addClass(y.caret,"mce-visual-caret-hidden")}))}),500),f=m.ownerDocument.createRange(),f.setStart(h,0),f.setEnd(h,0)}return f},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on((d=>{const m=ry(t,d.element,d.before);l.setStyles(d.caret,{...m})}))},destroy:()=>clearInterval(s)}},sy=()=>p.browser.isFirefox(),Ll=e=>AT(e)||TT(e),Ml=e=>(Ll(e)||Dr(e)&&sy())&&En(S.fromDom(e)).exists(Jr),OT=To,wd=Pt,BT=lr,ay=rd("display","block table table-cell table-row table-caption list-item"),iy=Do,ly=gi,PT=ve,LT=se,MT=mr,Sd=(e,t)=>{let n;for(;n=e(t);)if(!ly(n))return n;return null},Il=(e,t,n,o,r)=>{const s=new an(e,o),a=wd(e)||ly(e);let i;if(va(t)){if(a&&(i=Sd(s.prev.bind(s),!0),n(i)))return i;for(;i=Sd(s.prev.bind(s),r);)if(n(i))return i}if(bi(t)){if(a&&(i=Sd(s.next.bind(s),!0),n(i)))return i;for(;i=Sd(s.next.bind(s),r);)if(n(i))return i}return null},lf=e=>ve(e)&&Yo(S.fromDom(e),"position")==="absolute",IT=(e,t)=>wd(e)&&lf(e)&&((n,o)=>n.parentNode!==o)(e,t),As=(e,t)=>{for(;e&&e!==t;){if(ay(e)&&!IT(e,t))return e;e=e.parentNode}return null},Rr=(e,t,n)=>As(e.container(),n)===As(t.container(),n),cf=(e,t)=>{if(!t)return k.none();const n=t.container(),o=t.offset();return PT(n)?k.from(n.childNodes[o+e]):k.none()},cy=(e,t)=>{const n=(t.ownerDocument??document).createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},FT=(e,t,n)=>As(t,e)===As(n,e),dy=(e,t,n)=>{const o=e?"previousSibling":"nextSibling";let r=n;for(;r&&r!==t;){let s=r[o];if(s&&iy(s)&&(s=s[o]),wd(s)||BT(s)){if(FT(t,s,r))return s;break}if(MT(s))break;r=r.parentNode}return null},Fl=be(cy,!0),jl=be(cy,!1),df=(e,t,n)=>{let o;const r=be(dy,!0,t),s=be(dy,!1,t),a=n.startContainer,i=n.startOffset;if(gi(a)){const l=LT(a)?a.parentNode:a,c=l.getAttribute("data-mce-caret");if(c==="before"&&(o=l.nextSibling,Ml(o)))return Fl(o);if(c==="after"&&(o=l.previousSibling,Ml(o)))return jl(o)}if(!n.collapsed)return n;if(se(a)){if(iy(a)){if(e===1){if(o=s(a),o)return Fl(o);if(o=r(a),o)return jl(o)}if(e===-1){if(o=r(a),o)return jl(o);if(o=s(a),o)return Fl(o)}return n}if(pd(a)&&i>=a.data.length-1)return e===1&&(o=s(a),o)?Fl(o):n;if(fd(a)&&i<=1)return e===-1&&(o=r(a),o)?jl(o):n;if(i===a.data.length)return o=s(a),o?Fl(o):n;if(i===0)return o=r(a),o?jl(o):n}return n},uy=(e,t)=>cf(e?0:-1,t).filter(wd),Ci=(e,t,n)=>{const o=df(e,t,n);return e===-1?Y.fromRangeStart(o):Y.fromRangeEnd(o)},Ed=e=>k.from(e.getNode()).map(S.fromDom),uf=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},kd=(e,t)=>{const n=Rr(e,t);return!(n||!Ut(e.getNode()))||n},jT=Pt,Or=se,my=ve,mf=Ut,xi=mr,fy=e=>n0(e)||(t=>!!qm(t)&&!Yt(vn(t.getElementsByTagName("*")),((n,o)=>n||t0(o)),!1))(e),_d=o0,py=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,gy=(e,t)=>{if(bi(e)){if(xi(t.previousSibling)&&!Or(t.previousSibling))return Y.before(t);if(Or(t))return Y(t,0)}if(va(e)){if(xi(t.nextSibling)&&!Or(t.nextSibling))return Y.after(t);if(Or(t))return Y(t,t.data.length)}return va(e)?mf(t)?Y.before(t):Y.after(t):Y.before(t)},ff=(e,t,n)=>{let o,r,s,a;if(!my(n)||!t)return null;if(t.isEqual(Y.after(n))&&n.lastChild){if(a=Y.after(n.lastChild),va(e)&&xi(n.lastChild)&&my(n.lastChild))return mf(n.lastChild)?Y.before(n.lastChild):a}else a=t;const i=a.container();let l=a.offset();if(Or(i)){if(va(e)&&l>0)return Y(i,--l);if(bi(e)&&l<i.length)return Y(i,++l);o=i}else{if(va(e)&&l>0&&(r=py(i,l-1),xi(r)))return!fy(r)&&(s=Il(r,e,_d,r),s)?Or(s)?Y(s,s.data.length):Y.after(s):Or(r)?Y(r,r.data.length):Y.before(r);if(bi(e)&&l<i.childNodes.length&&(r=py(i,l),xi(r)))return mf(r)?((d,m)=>{const f=m.nextSibling;return f&&xi(f)?Or(f)?Y(f,0):Y.before(f):ff(1,Y.after(m),d)})(n,r):!fy(r)&&(s=Il(r,e,_d,r),s)?Or(s)?Y(s,0):Y.before(s):Or(r)?Y(r,0):Y.after(r);o=r||a.getNode()}if(o&&(bi(e)&&a.isAtEnd()||va(e)&&a.isAtStart())&&(o=Il(o,e,jt,n,!0),_d(o,n)))return gy(e,o);r=o&&Il(o,e,_d,n);const c=_o(De(((d,m)=>{const f=[];let h=d;for(;h&&h!==m;)f.push(h),h=h.parentNode;return f})(i,n),jT));return!c||r&&c.contains(r)?r?gy(e,r):null:(a=bi(e)?Y.after(c):Y.before(c),a)},Br=e=>({next:t=>ff(1,t,e),prev:t=>ff(-1,t,e)}),hy=e=>Y.isTextPosition(e)?e.offset()===0:mr(e.getNode()),by=e=>{if(Y.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return mr(e.getNode(!0))},yy=(e,t)=>!Y.isTextPosition(e)&&!Y.isTextPosition(t)&&e.getNode()===t.getNode(!0),Ro=(e,t,n)=>{const o=Br(t);return k.from(e?o.next(n):o.prev(n))},wi=(e,t,n)=>Ro(e,t,n).bind((o=>Rr(n,o,t)&&((r,s,a)=>{return r?!yy(s,a)&&(i=s,!(!Y.isTextPosition(i)&&Ut(i.getNode())))&&by(s)&&hy(a):!yy(a,s)&&hy(s)&&by(a);var i})(e,n,o)?Ro(e,t,o):k.some(o))),vy=(e,t,n,o)=>wi(e,t,n).bind((r=>o(r)?vy(e,t,r,o):k.some(r))),Si=(e,t)=>{const n=e?t.firstChild:t.lastChild;return se(n)?k.some(Y(n,e?0:n.data.length)):n?mr(n)?k.some(e?Y.before(n):Ut(o=n)?Y.before(o):Y.after(o)):((r,s,a)=>{const i=r?Y.before(a):Y.after(a);return Ro(r,s,i)})(e,t,n):k.none();var o},Qn=be(Ro,!0),ao=be(Ro,!1),In=be(Si,!0),Go=be(Si,!1),pf="_mce_caret",Oo=e=>ve(e)&&e.id===pf,xa=(e,t)=>{let n=t;for(;n&&n!==e;){if(Oo(n))return n;n=n.parentNode}return null},Cy=e=>Oe(e,"name"),xy=e=>E.isArray(e.start),Nd=e=>!(!Cy(e)&&yn(e.forward))||e.forward,wy=(e,t)=>(ve(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),zT=(e,t)=>Go(e).fold(Nt,(n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0))),Sy=(e,t,n)=>!(!(o=>!o.hasChildNodes())(t)||!xa(e,t)||(((o,r)=>{const s=(o.ownerDocument??document).createTextNode(hn);o.appendChild(s),r.setStart(s,0),r.setEnd(s,0)})(t,n),0)),Ey=(e,t,n,o)=>{const r=n[t?"start":"end"],s=e.getRoot();if(r){let a=s,i=r[0];for(let l=r.length-1;a&&l>=1;l--){const c=a.childNodes;if(Sy(s,a,o))return!0;if(r[l]>c.length-1)return!!Sy(s,a,o)||zT(a,o);a=c[r[l]]}se(a)&&(i=Math.min(r[0],a.data.length)),ve(a)&&(i=Math.min(r[0],a.childNodes.length)),t?o.setStart(a,i):o.setEnd(a,i)}return!0},gf=e=>se(e)&&e.data.length>0,ky=(e,t,n)=>{const o=e.get(n.id+"_"+t),r=o?.parentNode,s=n.keep;if(o&&r){let a,i;if(t==="start"?s?o.hasChildNodes()?(a=o.firstChild,i=1):gf(o.nextSibling)?(a=o.nextSibling,i=0):gf(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=e.nodeIndex(o)+1):(a=r,i=e.nodeIndex(o)):s?o.hasChildNodes()?(a=o.firstChild,i=1):gf(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=e.nodeIndex(o)):(a=r,i=e.nodeIndex(o)),!s){const l=o.previousSibling,c=o.nextSibling;let d;for(E.each(E.grep(o.childNodes),(m=>{se(m)&&(m.data=m.data.replace(/\uFEFF/g,""))}));d=e.get(n.id+"_"+t);)e.remove(d,!0);if(se(c)&&se(l)&&!p.browser.isOpera()){const m=l.data.length;l.appendData(c.data),e.remove(c),a=l,i=m}}return k.some(Y(a,i))}return k.none()},UT=(e,t,n)=>((o,r,s=!1)=>r===2?C0(vo,s,o):r===3?(a=>{const i=a.getRng();return{start:p0(a.dom.getRoot(),Y.fromRangeStart(i)),end:p0(a.dom.getRoot(),Y.fromRangeEnd(i)),forward:a.isForward()}})(o):r?(a=>({rng:a.getRng(),forward:a.isForward()}))(o):w0(o,!1))(e,t,n),HT=(e,t)=>{((n,o)=>{const r=n.dom;if(o){if(xy(o))return((s,a)=>{const i=s.createRng();return Ey(s,!0,a,i)&&Ey(s,!1,a,i)?k.some({range:i,forward:Nd(a)}):k.none()})(r,o);if((s=>xe(s.start))(o))return((s,a)=>{const i=k.from(g0(s.getRoot(),a.start)),l=k.from(g0(s.getRoot(),a.end));return zt(i,l,((c,d)=>{const m=s.createRng();return m.setStart(c.container(),c.offset()),m.setEnd(d.container(),d.offset()),{range:m,forward:Nd(a)}}))})(r,o);if((s=>Oe(s,"id"))(o))return((s,a)=>{const i=ky(s,"start",a),l=ky(s,"end",a);return zt(i,l.or(i),((c,d)=>{const m=s.createRng();return m.setStart(wy(s,c.container()),c.offset()),m.setEnd(wy(s,d.container()),d.offset()),{range:m,forward:Nd(a)}}))})(r,o);if(Cy(o))return((s,a)=>k.from(s.select(a.name)[a.index]).map((i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}})))(r,o);if((s=>Oe(s,"rng"))(o))return k.some({range:o.rng,forward:Nd(o)})}return k.none()})(e,t).each((({range:n,forward:o})=>{e.setRng(n,o)}))},Bo=e=>ve(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Ad=(_y=It,e=>_y===e);var _y;const wa=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,hf=e=>!wa(e)&&!Ad(e)&&!Yr(e),bf=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Ny=(e,t)=>{const n=_n(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:(o=>De((r=>$t(r,(s=>{const a=gd(s);return a?[S.fromDom(a)]:[]})))(o),Al))(e)},Ei=e=>Ny(bf(e.selection.getSel()),S.fromDom(e.getBody())),zl=(e,t)=>si(e,"table",t),Ay=e=>Bt(e).fold(ie([e]),(t=>[e].concat(Ay(t)))),yf=e=>Hn(e).fold(ie([e]),(t=>Be(t)==="br"?Vt(t).map((n=>[e].concat(yf(n)))).getOr([]):[e].concat(yf(t)))),vf=(e,t)=>zt((n=>{const o=n.startContainer,r=n.startOffset;return se(o)?r===0?k.some(S.fromDom(o)):k.none():k.from(o.childNodes[r]).map(S.fromDom)})(t),(n=>{const o=n.endContainer,r=n.endOffset;return se(o)?r===o.data.length?k.some(S.fromDom(o)):k.none():k.from(o.childNodes[r-1]).map(S.fromDom)})(t),((n,o)=>{const r=Ht(Ay(e),be(me,n)),s=Ht(yf(e),be(me,o));return r.isSome()&&s.isSome()})).getOr(!1),Cf=(e,t,n,o)=>{const r=n,s=new an(n,r),a=tr(e.schema.getMoveCaretBeforeOnEnterElements(),((l,c)=>!we(["td","th","table"],c.toLowerCase())));let i=n;do{if(se(i)&&E.trim(i.data).length!==0)return void(o?t.setStart(i,0):t.setEnd(i,i.data.length));if(a[i.nodeName])return void(o?t.setStartBefore(i):i.nodeName==="BR"?t.setEndBefore(i):t.setEndAfter(i))}while(i=o?s.next():s.prev());r.nodeName==="BODY"&&(o?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},Td=e=>{const t=e.selection.getSel();return te(t)&&t.rangeCount>0},xf=(e,t)=>{const n=Ei(e);n.length>0?K(n,(o=>{const r=o.dom,s=e.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),t(s,!0)})):t(e.selection.getRng(),!1)},Ty=(e,t,n)=>{const o=w0(e,t);n(o),e.moveToBookmark(o)},wf=(e,t)=>e.startContainer===e.endContainer&&e.endOffset-e.startOffset==1&&t(e.startContainer.childNodes[e.startOffset]),Ul=e=>x(e?.nodeType),Sf=e=>ve(e)&&!Bo(e)&&!Oo(e)&&!ca(e),Dy=(e,t,n)=>{const{selection:o,dom:r}=e,s=o.getNode(),a=Pt(s);Ty(o,!0,(()=>{t()})),a&&Pt(s)&&r.isChildOf(s,e.getBody())?e.selection.select(s):n(o.getStart())&&$T(r,o)},$T=(e,t)=>{const n=t.getRng(),{startContainer:o,startOffset:r}=n;if(!((s,a)=>{if(Sf(a)&&!/^(TD|TH)$/.test(a.nodeName)){const i=s.getAttrib(a,"data-mce-selected"),l=parseInt(i,10);return!isNaN(l)&&l>0}return!1})(e,t.getNode())&&ve(o)){const s=o.childNodes,a=e.getRoot();let i;if(r<s.length){const l=s[r];i=new an(l,e.getParent(l,e.isBlock)??a)}else{const l=s[s.length-1];i=new an(l,e.getParent(l,e.isBlock)??a),i.next(!0)}for(let l=i.current();l;l=i.next()){if(e.getContentEditable(l)==="false")return;if(se(l)&&!kf(l))return n.setStart(l,0),void t.setRng(n)}}},Ry=(e,t,n)=>{if(e){const o=t?"nextSibling":"previousSibling";for(e=n?e:e[o];e;e=e[o])if(ve(e)||!kf(e))return e}},Ef=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||ua(e,t),ki=(e,t,n)=>e.schema.isValidChild(t,n),kf=(e,t=!1)=>{if(te(e)&&se(e)){const n=t?e.data.replace(/ /g,"\xA0"):e.data;return li(n)}return!1},Oy=(e,t)=>{const n=e.dom;return Sf(t)&&n.getContentEditable(t)==="false"&&((o,r)=>{const s="[data-mce-cef-wrappable]",a=PA(o),i=fs(a)?s:`${s},${a}`;return Q(S.fromDom(r),i)})(e,t)&&n.select('[contenteditable="true"]',t).length===0},Ts=(e,t)=>pt(e)?e(t):(te(t)&&(e=e.replace(/%(\w+)/g,((n,o)=>t[o]||n))),e),_f=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),Nf=(e,t)=>{if(kt(e))return null;{let n=String(e);return t!=="color"&&t!=="backgroundColor"||(n=Cl(n)),t==="fontWeight"&&e===700&&(n="bold"),t==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Dd=(e,t,n)=>{const o=e.getStyle(t,n);return Nf(o,n)},By=(e,t)=>{let n;return e.getParent(t,(o=>!!ve(o)&&(n=e.getStyle(o,"text-decoration"),!!n&&n!=="none"))),n},Rd=(e,t,n)=>e.getParents(t,n,e.getRoot()),Af=(e,t,n)=>{const o=e.formatter.get(t);return te(o)&&xt(o,n)},Pr=e=>mn(e,"block"),Po=e=>mn(e,"selector"),cn=e=>mn(e,"inline"),Tf=e=>Po(e)&&e.expand!==!1&&!cn(e),Py=e=>(t=>{const n=[];let o=t;for(;o;){if(se(o)&&o.data!==hn||o.childNodes.length>1)return[];ve(o)&&n.push(o),o=o.firstChild}return n})(e).length>0,Df=e=>Oo(e.dom)&&Py(e.dom),_i=Bo,Ly=Rd,My=kf,qT=Ef,Iy=(e,t)=>{let n=t;for(;n;){if(ve(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},Fy=(e,t,n,o)=>{const r=t.data;if(e){for(let s=n;s>0;s--)if(o(r.charAt(s-1)))return s}else for(let s=n;s<r.length;s++)if(o(r.charAt(s)))return s;return-1},WT=(e,t,n)=>Fy(e,t,n,(o=>Ad(o)||wa(o))),VT=(e,t,n)=>Fy(e,t,n,hf),jy=(e,t,n,o,r,s)=>{let a;const i=e.getParent(n,(d=>bm(d)||e.isBlock(d))),l=te(i)?i:t,c=(d,m,f)=>{const h=ha(e),g=r?h.backwards:h.forwards;return k.from(g(d,m,((b,y)=>_i(b.parentNode)?-1:(a=b,f(r,b,y))),l))};return c(n,o,WT).bind((d=>s?c(d.container,d.offset+(r?-1:0),VT):k.some(d))).orThunk((()=>a?k.some({container:a,offset:r?0:a.length}):k.none()))},zy=(e,t,n,o,r)=>{const s=o[r];se(o)&&fs(o.data)&&s&&(o=s);const a=Ly(e,o);for(let i=0;i<a.length;i++)for(let l=0;l<t.length;l++){const c=t[l];if((!te(c.collapsed)||c.collapsed===n.collapsed)&&Po(c)&&e.is(a[i],c.selector))return a[i]}return o},Uy=(e,t,n,o)=>{let r=n;const s=e.getRoot(),a=t[0];if(Pr(a)&&(r=a.wrapper?null:e.getParent(n,a.block,s)),!r){const i=e.getParent(n,"LI,TD,TH,SUMMARY")??s;r=e.getParent(se(n)?n.parentNode:n,(l=>l!==s&&qT(e.schema,l)),i)}if(r&&Pr(a)&&a.wrapper&&(r=Ly(e,r,"ul,ol").reverse()[0]||r),!r)for(r=n;r&&r[o]&&!e.isBlock(r[o])&&(r=r[o],!_f(r,"br")););return r||n},Hy=(e,t,n,o)=>{const r=n.parentNode;return!te(n[o])&&(!(r!==t&&!kt(r)&&!e.isBlock(r))||Hy(e,t,r,o))},Od=(e,t,n,o,r,s)=>{let a=n;const i=r?"previousSibling":"nextSibling",l=e.getRoot();if(se(n)&&!My(n)&&(r?o>0:o<n.data.length))return n;for(;a;){if(bm(a))return n;if(!t[0].block_expand&&e.isBlock(a))return s?a:n;for(let d=a[i];d;d=d[i]){const m=se(d)&&!Hy(e,l,d,i);if(!_i(d)&&(!Ut(c=d)||!c.getAttribute("data-mce-bogus")||c.nextSibling)&&!My(d,m))return a}if(a===l||a.parentNode===l){n=a;break}a=a.parentNode}var c;return n},$y=e=>_i(e.parentNode)||_i(e),Sa=(e,t,n,o={})=>{const{includeTrailingSpace:r=!1,expandToBlock:s=!0}=o,a=e.getParent(t.commonAncestorContainer,(h=>bm(h))),i=te(a)?a:e.getRoot();let{startContainer:l,startOffset:c,endContainer:d,endOffset:m}=t;const f=n[0];return ve(l)&&l.hasChildNodes()&&(l=_s(l,c),se(l)&&(c=0)),ve(d)&&d.hasChildNodes()&&(d=_s(d,t.collapsed?m:m-1),se(d)&&(m=d.data.length)),l=Iy(e,l),d=Iy(e,d),$y(l)&&(l=_i(l)?l:l.parentNode,l=t.collapsed?l.previousSibling||l:l.nextSibling||l,se(l)&&(c=t.collapsed?l.length:0)),$y(d)&&(d=_i(d)?d:d.parentNode,d=t.collapsed?d.nextSibling||d:d.previousSibling||d,se(d)&&(m=t.collapsed?0:d.length)),t.collapsed&&(jy(e,i,l,c,!0,r).each((({container:h,offset:g})=>{l=h,c=g})),jy(e,i,d,m,!1,r).each((({container:h,offset:g})=>{d=h,m=g}))),(cn(f)||f.block_expand)&&(cn(f)&&se(l)&&c!==0||(l=Od(e,n,l,c,!0,s)),cn(f)&&se(d)&&m!==d.data.length||(d=Od(e,n,d,m,!1,s))),Tf(f)&&(l=zy(e,n,t,l,"previousSibling"),d=zy(e,n,t,d,"nextSibling")),(Pr(f)||Po(f))&&(l=Uy(e,n,l,"previousSibling"),d=Uy(e,n,d,"nextSibling"),Pr(f)&&(e.isBlock(l)||(l=Od(e,n,l,c,!0,s),se(l)&&(c=0)),e.isBlock(d)||(d=Od(e,n,d,m,!1,s),se(d)&&(m=d.data.length)))),ve(l)&&l.parentNode&&(c=e.nodeIndex(l),l=l.parentNode),ve(d)&&d.parentNode&&(m=e.nodeIndex(d)+1,d=d.parentNode),{startContainer:l,startOffset:c,endContainer:d,endOffset:m}},Hl=(e,t,n)=>{const o=t.startOffset,r=_s(t.startContainer,o),s=t.endOffset,a=_s(t.endContainer,s-1),i=b=>{const y=b[0];se(y)&&y===r&&o>=y.data.length&&b.splice(0,1);const v=b[b.length-1];return s===0&&b.length>0&&v===a&&se(v)&&b.splice(b.length-1,1),b},l=(b,y,v)=>{const _=[];for(;b&&b!==v;b=b[y])_.push(b);return _},c=(b,y)=>e.getParent(b,(v=>v.parentNode===y),y),d=(b,y,v)=>{const _=v?"nextSibling":"previousSibling";for(let N=b,D=N.parentNode;N&&N!==y;N=D){D=N.parentNode;const A=l(N===b?N:N[_],_);A.length&&(v||A.reverse(),n(i(A)))}};if(r===a)return n(i([r]));const m=e.findCommonAncestor(r,a)??e.getRoot();if(e.isChildOf(r,a))return d(r,m,!0);if(e.isChildOf(a,r))return d(a,m);const f=c(r,m)||r,h=c(a,m)||a;d(r,f,!0);const g=l(f===r?f:f.nextSibling,"nextSibling",h===a?h.nextSibling:h);g.length&&n(i(g)),d(a,h)},KT=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],qy=(e,t,n,o,r,s)=>{const{uid:a=t,...i}=n;ai(e,El()),lt(e,`${di()}`,a),lt(e,`${ga()}`,o);const{attributes:l={},classes:c=[]}=r(a,i);if(Qe(e,l),((d,m)=>{K(m,(f=>{ai(d,f)}))})(e,c),s){c.length>0&&lt(e,`${_l()}`,c.join(","));const d=un(l);d.length>0&&lt(e,`${Nl()}`,d.join(","))}},Wy=(e,t,n,o,r)=>{const s=S.fromTag("span",e);return qy(s,t,n,o,r,!1),s},XT=(e,t,n,o,r,s)=>{const a=[],i=Wy(e.getDoc(),n,s,o,r),l=$o(),c=()=>{l.clear()},d=f=>{K(f,m)},m=f=>{switch(((h,g,b,y)=>En(g).fold((()=>"skipping"),(v=>y==="br"||(_=>Et(_)&&ri(_)===hn)(g)?"valid":(_=>ot(_)&&dm(_,El()))(g)?"existing":Oo(g.dom)?"caret":xt(KT,(_=>Q(g,_)))?"valid-block":ki(h,b,y)&&ki(h,Be(v),b)?"valid":"invalid-child")))(e,f,"span",Be(f))){case"invalid-child":{c();const h=ht(f);d(h),c();break}case"valid-block":c(),qy(f,n,s,o,r,!0);break;case"valid":{const h=l.get().getOrThunk((()=>{const g=$n(i);return a.push(g),l.set(g),g}));je(f,h);break}}};return Hl(e.dom,t,(f=>{c(),(h=>{const g=qe(h,S.fromDom);d(g)})(f)})),a},Vy=e=>{const t=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>Ot(s,a).map((i=>i.settings)),getNames:()=>un(s)}})();((s,a)=>{const i=ga(),l=d=>k.from(d.attr(i)).bind(a.lookup),c=d=>{d.attr(di(),null),d.attr(ga(),null),d.attr(kl(),null);const m=k.from(d.attr(Nl())).map((b=>b.split(","))).getOr([]),f=k.from(d.attr(_l())).map((b=>b.split(","))).getOr([]);K(m,(b=>d.attr(b,null)));const h=d.attr("class")?.split(" ")??[],g=Ye(h,[El()].concat(f));d.attr("class",g.length>0?g.join(" "):null),d.attr(_l(),null),d.attr(Nl(),null)};s.serializer.addTempAttr(kl()),s.serializer.addAttributeFilter(i,(d=>{for(const m of d)l(m).each((f=>{f.persistent===!1&&(m.name==="span"?m.unwrap():c(m))}))}))})(e,t);const n=((s,a)=>{const i=Qt({}),l=()=>({listeners:[],previous:$o()}),c=(h,g)=>{d(h,(b=>(g(b),b)))},d=(h,g)=>{const b=i.get(),y=g(Ot(b,h).getOrThunk(l));b[h]=y,i.set(b)},m=(h,g)=>{K(Wb(s,h),(b=>{g?lt(b,kl(),"true"):vt(b,kl())}))},f=no((()=>{const h=Kr(a.getNames());K(h,(g=>{d(g,(b=>{const y=b.previous.get();return $b(s,k.some(g)).fold((()=>{y.each((v=>{(_=>{c(_,(N=>{K(N.listeners,(D=>D(!1,_)))}))})(g),b.previous.clear(),m(v,!1)}))}),(({uid:v,name:_,elements:N})=>{us(y,v)||(y.each((D=>m(D,!1))),((D,A,R)=>{c(D,(P=>{K(P.listeners,(I=>I(!0,D,{uid:A,nodes:qe(R,(M=>M.dom))})))}))})(_,v,N),b.previous.set(v),m(v,!0))})),{previous:b.previous,listeners:b.listeners}}))}))}),30);return s.on("remove",(()=>{f.cancel()})),s.on("NodeChange",(()=>{f.throttle()})),{addListener:(h,g)=>{d(h,(b=>({previous:b.previous,listeners:b.listeners.concat([g])})))}}})(e,t),o=Cn("span"),r=s=>{K(s,(a=>{o(a)?sn(a):(i=>{bl(i,El()),vt(i,`${di()}`),vt(i,`${ga()}`),vt(i,`${kl()}`);const l=bt(i,`${Nl()}`).map((m=>m.split(","))).getOr([]),c=bt(i,`${_l()}`).map((m=>m.split(","))).getOr([]);var d;K(l,(m=>vt(i,m))),d=i,K(c,(m=>{bl(d,m)})),vt(i,`${_l()}`),vt(i,`${Nl()}`)})(a)}))};return{register:(s,a)=>{t.register(s,a)},annotate:(s,a)=>{t.lookup(s).each((i=>{((l,c,d,m)=>{l.undoManager.transact((()=>{const f=l.selection,h=f.getRng(),g=Ei(l).length>0,b=Xs("mce-annotation");if(h.collapsed&&!g&&((y,v)=>{const _=Sa(y.dom,v,[{inline:"span"}]);v.setStart(_.startContainer,_.startOffset),v.setEnd(_.endContainer,_.endOffset),y.selection.setRng(v)})(l,h),f.getRng().collapsed&&!g){const y=Wy(l.getDoc(),b,m,c,d.decorate);ti(y,It),f.getRng().insertNode(y.dom),f.select(y.dom)}else Ty(f,!1,(()=>{xf(l,(y=>{XT(l,y,b,c,d.decorate,m)}))}))}))})(e,s,i,a)}))},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{$b(e,k.some(s)).each((({elements:a})=>{const i=e.selection.getBookmark();r(a),e.selection.moveToBookmark(i)}))},removeAll:s=>{const a=e.selection.getBookmark();wt(Vb(e,s),((i,l)=>{r(i)})),e.selection.moveToBookmark(a)},getAll:s=>{const a=Vb(e,s);return Ws(a,(i=>qe(i,(l=>l.dom))))}}},Ni=e=>({getBookmark:be(UT,e),moveToBookmark:be(HT,e)});Ni.isBookmarkNode=Bo;const Ky=(e,t,n)=>!n.collapsed&&xt(n.getClientRects(),(o=>((r,s,a)=>s>=r.left&&s<=r.right&&a>=r.top&&a<=r.bottom)(o,e,t))),Xy=(e,t)=>{const n=Et(t)?ri(t).length:ht(t).length+1;return e>n?n:e<0?0:e},YT=e=>ii.range(e.start,Xy(e.soffset,e.start),e.finish,Xy(e.foffset,e.finish)),Yy=(e,t)=>!od(t.dom)&&(Ze(e,t)||me(e,t)),Gy=e=>t=>Yy(e,t.start)&&Yy(e,t.finish),GT=e=>ii.range(S.fromDom(e.startContainer),e.startOffset,S.fromDom(e.endContainer),e.endOffset),QT=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),k.some(t)}catch{return k.none()}},Bd=e=>{const t=(o=>o.inline||p.browser.isFirefox())(e)?(n=S.fromDom(e.getBody()),(o=>{const r=o.getSelection();return(r&&r.rangeCount!==0?k.from(r.getRangeAt(0)):k.none()).map(GT)})(yo(n).dom).filter(Gy(n))):k.none();var n;e.bookmark=t.isSome()?t:e.bookmark},Rf=e=>(e.bookmark?e.bookmark:k.none()).bind((t=>{return n=S.fromDom(e.getBody()),o=t,k.from(o).filter(Gy(n)).map(YT);var n,o})).bind(QT),Qy={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},Lo={setEditorTimeout:(e,t,n)=>((o,r)=>(x(r)||(r=0),window.setTimeout(o,r)))((()=>{e.removed||t()}),n),setEditorInterval:(e,t,n)=>{const o=((r,s)=>(x(s)||(s=0),window.setInterval(r,s)))((()=>{e.removed?window.clearInterval(o):t()}),n);return o}};let Ai;const Of=At.DOM,Bf=e=>{const t=e.classList;return t!==void 0&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},Pd=(e,t)=>{const n=LA(e);return Of.getParent(t,(r=>(s=>ve(s)&&Qy.isEditorUIElement(s))(r)||!!n&&e.dom.is(r,n)))!==null},Pf=e=>{try{const t=Ko(S.fromDom(e.getElement()));return L(t).fold((()=>document.body),(n=>n.dom))}catch{return document.body}},JT=(e,t)=>{const n=t.editor;(r=>{const s=Ys((()=>{Bd(r)}),0);r.on("init",(()=>{r.inline&&((a,i)=>{const l=()=>{i.throttle()};At.DOM.bind(document,"mouseup",l),a.on("remove",(()=>{At.DOM.unbind(document,"mouseup",l)}))})(r,s),((a,i)=>{((l,c)=>{l.on("mouseup touchend",(d=>{c.throttle()}))})(a,i),a.on("keyup NodeChange AfterSetSelectionRange",(l=>{(c=>c.type==="nodechange"&&c.selectionChange)(l)||Bd(a)}))})(r,s)})),r.on("remove",(()=>{s.cancel()}))})(n);const o=(r,s)=>{gT(r)&&r.inline!==!0&&s(S.fromDom(r.getContainer()),"tox-edit-focus")};n.on("focusin",(()=>{const r=e.focusedEditor;Bf(Pf(n))&&o(n,ai),r!==n&&(r&&r.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:r}),n.focus(!0))})),n.on("focusout",(()=>{Lo.setEditorTimeout(n,(()=>{const r=e.focusedEditor;Bf(Pf(n))&&r===n||o(n,bl),Pd(n,Pf(n))||r!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)}))})),Ai||(Ai=r=>{const s=e.activeEditor;s&&ys(r).each((a=>{const i=a;i.ownerDocument===document&&(i===document.body||Pd(s,i)||e.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))}))},Of.bind(document,"focusin",Ai))},ZT=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Ai&&(Of.unbind(document,"focusin",Ai),Ai=null)},Jy=(e,t)=>{((n,o)=>(r=>r.collapsed?k.from(_s(r.startContainer,r.startOffset)).map(S.fromDom):k.none())(o).bind((r=>zN(r)?k.some(r):Ze(n,r)?k.none():k.some(n))))(S.fromDom(e.getBody()),t).bind((n=>In(n.dom))).fold((()=>{e.selection.normalize()}),(n=>e.selection.setRng(n.toRange())))},Ld=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},Ti=e=>e.inline?(t=>{const n=t.getBody();return n&&(o=S.fromDom(n),ml(o)||(r=o,L(Ko(r)).filter((s=>r.dom.contains(s.dom)))).isSome());var o,r})(e):(t=>te(t.iframeElement)&&ml(S.fromDom(t.iframeElement)))(e),Lf=e=>Ti(e)||(t=>{const n=Ko(S.fromDom(t.getElement()));return L(n).filter((o=>!Bf(o.dom)&&Pd(t,o.dom))).isSome()})(e),Mf=e=>e.editorManager.setActive(e),de={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||de.metaKeyPressed(e),metaKeyPressed:e=>p.os.isMacOS()||p.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Zy="uc-video",ev=e=>e.nodeName.toLowerCase()===Zy,Ea="data-mce-selected",eD=`table,img,figure.image,hr,video,span.mce-preview-object,details,${Zy}`,tv=Math.abs,Md=Math.round,If={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},nv=(e,t)=>{const n=t.dom,o=t.getDoc(),r=document,s=t.getBody();let a,i,l,c,d,m,f,h,g,b,y,v,_,N,D;const A=he=>te(he)&&(ib(he)||n.is(he,"figure.image")),R=he=>lr(he)||n.hasClass(he,"mce-preview-object"),P=he=>{const Ne=he.target;((j,z)=>{if((G=>G.type==="longpress"||G.type.indexOf("touch")===0)(j)){const G=j.touches[0];return A(j.target)&&!Ky(G.clientX,G.clientY,z)}return A(j.target)&&!Ky(j.clientX,j.clientY,z)})(he,t.selection.getRng())&&!he.isDefaultPrevented()&&t.selection.select(Ne)},I=he=>n.hasClass(he,"mce-preview-object")&&te(he.firstElementChild)?[he,he.firstElementChild]:n.is(he,"figure.image")?[he.querySelector("img")]:[he],M=he=>{const Ne=H0(t);return!(!Ne||t.mode.isReadOnly())&&he.getAttribute("data-mce-resize")!=="false"&&he!==t.getBody()&&(n.hasClass(he,"mce-preview-object")&&te(he.firstElementChild)?Q(S.fromDom(he.firstElementChild),Ne):Q(S.fromDom(he),Ne))},W=(he,Ne,j)=>{if(te(j)){const z=I(he);K(z,(G=>{if(G.style[Ne]||!t.schema.isValid(G.nodeName.toLowerCase(),Ne))n.setStyle(G,Ne,j);else if(ev(G)){G[Ne]=j;const X=400;if(G.width>X&&!(Ne==="width"&&j<X))G[Ne]=j,n.setAttrib(G,Ne,""+j);else{const fe=Ne==="height"?X*b:X;G[Ne]=fe,n.setAttrib(G,Ne,""+fe)}}else n.setAttrib(G,Ne,""+j)}))}},B=(he,Ne,j)=>{W(he,"width",Ne),W(he,"height",j)},F=he=>{let Ne,j,z,G,X;Ne=he.screenX-m,j=he.screenY-f,v=Ne*c[2]+h,_=j*c[3]+g,v=v<5?5:v,_=_<5?5:_,z=(A(a)||R(a)||ev(a))&&_A(t)!==!1?!de.modifierPressed(he):de.modifierPressed(he),z&&(tv(Ne)>tv(j)?(_=Md(v*b),v=Md(_/b)):(v=Md(_/b),_=Md(v*b))),B(i,v,_),G=c.startPos.x+Ne,X=c.startPos.y+j,G=G>0?G:0,X=X>0?X:0,n.setStyles(l,{left:G,top:X,display:"block"}),l.innerHTML=v+" &times; "+_,Ne=s.scrollWidth-N,j=s.scrollHeight-D,Ne+j!==0&&n.setStyles(l,{left:G-Ne,top:X-j}),y||(((fe,ue,Ae,rt,st)=>{fe.dispatch("ObjectResizeStart",{target:ue,width:Ae,height:rt,origin:st})})(t,a,h,g,"corner-"+c.name),y=!0)},H=()=>{const he=y;y=!1,he&&(W(a,"width",v),W(a,"height",_)),n.unbind(o,"mousemove",F),n.unbind(o,"mouseup",H),r!==o&&(n.unbind(r,"mousemove",F),n.unbind(r,"mouseup",H)),n.remove(i),n.remove(l),n.remove(d),Z(a),he&&(((Ne,j,z,G,X)=>{Ne.dispatch("ObjectResized",{target:j,width:z,height:G,origin:X})})(t,a,v,_,"corner-"+c.name),n.setAttrib(a,"style",n.getAttrib(a,"style"))),t.nodeChanged()},Z=he=>{Me();const Ne=n.getPos(he,s),j=Ne.x,z=Ne.y,G=he.getBoundingClientRect(),X=G.width||G.right-G.left,fe=G.height||G.bottom-G.top;a!==he&&(_e(),a=he,v=_=0);const ue=t.dispatch("ObjectSelected",{target:he});M(he)&&!ue.isDefaultPrevented()?wt(If,((Ae,rt)=>{let st=n.get("mceResizeHandle"+rt);st&&n.remove(st),st=n.add(s,"div",{id:"mceResizeHandle"+rt,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+rt+"-resize; margin:0; padding:0"}),n.bind(st,"mousedown",(Ft=>{Ft.stopImmediatePropagation(),Ft.preventDefault(),(dn=>{const uo=I(a)[0];m=dn.screenX,f=dn.screenY,h=uo.clientWidth,g=uo.clientHeight,b=g/h,c=Ae,c.name=rt,c.startPos={x:X*Ae[0]+j,y:fe*Ae[1]+z},N=s.scrollWidth,D=s.scrollHeight,d=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=((Wn,Ce)=>{if(R(Ce))return Wn.create("img",{src:p.transparentSrc});if(Dr(Ce)){const tt=Gt(c.name,"n")?nn:to,dt=Ce.cloneNode(!0);return tt(Wn.select("tr",dt)).each((Ie=>{const Je=Wn.select("td,th",Ie);Wn.setStyle(Ie,"height",null),K(Je,(Ct=>Wn.setStyle(Ct,"height",null)))})),dt}return Ce.cloneNode(!0)})(n,a),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:j,top:z,margin:0}),B(i,X,fe),i.removeAttribute(Ea),s.appendChild(i),n.bind(o,"mousemove",F),n.bind(o,"mouseup",H),r!==o&&(n.bind(r,"mousemove",F),n.bind(r,"mouseup",H)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},h+" &times; "+g)})(Ft)})),Ae.elm=st,n.setStyles(st,{left:X*Ae[0]+j-st.offsetWidth/2,top:fe*Ae[1]+z-st.offsetHeight/2})})):_e(!1)},le=Ys(Z,0),_e=(he=!0)=>{le.cancel(),Me(),a&&he&&a.removeAttribute(Ea),wt(If,((Ne,j)=>{const z=n.get("mceResizeHandle"+j);z&&(n.unbind(z),n.remove(z))}))},Te=(he,Ne)=>n.isChildOf(he,Ne),Se=he=>{if(y||t.removed||t.composing)return;const Ne=he.type==="mousedown"?he.target:e.getNode(),j=Cs(S.fromDom(Ne),eD).map((G=>G.dom)).filter((G=>n.isEditable(G.parentElement)||G.nodeName==="IMG"&&n.isEditable(G))).getOrUndefined(),z=te(j)?n.getAttrib(j,Ea,"1"):"1";if(K(n.select(`img[${Ea}],hr[${Ea}]`),(G=>{G.removeAttribute(Ea)})),te(j)&&Te(j,s)&&Lf(t)){yt();const G=e.getStart(!0);if(Te(G,j)&&Te(e.getEnd(!0),j))return n.setAttrib(j,Ea,z),void le.throttle(j)}_e()},Me=()=>{wt(If,(he=>{he.elm&&(n.unbind(he.elm),delete he.elm)}))},yt=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",(()=>{yt(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Se),t.on("keyup compositionend",(he=>{a&&a.nodeName==="TABLE"&&Se(he)})),t.on("hide blur",_e),t.on("contextmenu longpress",P,!0)})),t.on("remove",Me),{isResizable:M,showResizeRect:Z,hideResizeRect:_e,updateResizeRect:Se,destroy:()=>{le.cancel(),a=i=d=null}}},ov=(e,t,n)=>{const o=yo(S.fromDom(n));return uN(o.dom,e,t).map((r=>{const s=n.createRange();return s.setStart(r.start.dom,r.soffset),s.setEnd(r.finish.dom,r.foffset),s})).getOrUndefined()},Ff=(e,t)=>te(e)&&te(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,rv=(e,t,n)=>((o,r,s)=>{let a=o;for(;a&&a!==r;){if(s(a))return a;a=a.parentNode}return null})(e,t,n)!==null,tD=(e,t,n)=>rv(e,t,(o=>o.nodeName===n)),nD=(e,t)=>Do(e)&&!rv(e,t,Oo),sv=(e,t,n)=>{const o=t.parentNode;if(o){const r=new an(t,e.getParent(o,e.isBlock)||e.getRoot());let s;for(;s=r[n?"prev":"next"]();)if(Ut(s))return!0}return!1},jf=(e,t,n,o,r)=>{const s=e.getRoot(),a=e.schema.getNonEmptyElements(),i=r.parentNode;let l,c;if(!i)return k.none();const d=e.getParent(i,e.isBlock)||s;if(o&&Ut(r)&&t&&e.isEmpty(d))return k.some(Y(i,e.nodeIndex(r)));const m=new an(r,d);for(;c=m[o?"prev":"next"]();){if(e.getContentEditableParent(c)==="false"||nD(c,s))return k.none();if(se(c)&&c.data.length>0)return tD(c,s,"A")?k.none():k.some(Y(c,o?c.data.length:0));if(e.isBlock(c)||a[c.nodeName.toLowerCase()])return k.none();l=c}return xs(l)?k.none():n&&l?k.some(Y(l,0)):k.none()},av=(e,t,n,o)=>{const r=e.getRoot();let s,a=!1,i=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const c=ve(i)&&l===i.childNodes.length,d=e.schema.getNonEmptyElements();let m=n;if(Do(i))return k.none();if(ve(i)&&l>i.childNodes.length-1&&(m=!1),yl(i)&&(i=r,l=0),i===r){if(m&&(s=i.childNodes[l>0?l-1:0],s)&&(Do(s)||d[s.nodeName]||Dr(s)))return k.none();if(i.hasChildNodes()){if(l=Math.min(!m&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=se(i)&&c?i.data.length:0,!t&&i===r.lastChild&&Dr(i)||((f,h)=>{let g=h;for(;g&&g!==f;){if(Pt(g))return!0;g=g.parentNode}return!1})(r,i)||Do(i)||ym(i))return k.none();if(i.hasChildNodes()&&!Dr(i)){s=i;const f=new an(i,r);do{if(Pt(s)||Do(s)){a=!1;break}if(se(s)&&s.data.length>0){l=m?0:s.data.length,i=s,a=!0;break}if(d[s.nodeName.toLowerCase()]&&!hN(s)){l=e.nodeIndex(s),i=s.parentNode,m||l++,a=!0;break}}while(s=m?f.next():f.prev())}}}return t&&(se(i)&&l===0&&jf(e,c,t,!0,i).each((f=>{i=f.container(),l=f.offset(),a=!0})),ve(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!Ut(s)||(f=>f.previousSibling?.nodeName==="A")(s)||sv(e,s,!1)||sv(e,s,!0)||jf(e,c,t,!0,s).each((f=>{i=f.container(),l=f.offset(),a=!0})))),m&&!t&&se(i)&&l===i.data.length&&jf(e,c,t,!1,i).each((f=>{i=f.container(),l=f.offset(),a=!0})),a&&i?k.some(Y(i,l)):k.none()},Id=(e,t)=>{const n=t.collapsed,o=t.cloneRange(),r=Y.fromRangeStart(t);return av(e,n,!0,o).each((s=>{n&&Y.isAbove(r,s)||o.setStart(s.container(),s.offset())})),n||av(e,n,!1,o).each((s=>{o.setEnd(s.container(),s.offset())})),n&&o.collapse(!0),Ff(t,o)?k.none():k.some(o)},Fd=(e,t)=>e.splitText(t),jd=e=>{let t=e.startContainer,n=e.startOffset,o=e.endContainer,r=e.endOffset;if(t===o&&se(t)){if(n>0&&n<t.data.length)if(o=Fd(t,n),t=o.previousSibling,r>n){r-=n;const s=Fd(o,r).previousSibling;t=o=s,r=s.data.length,n=0}else r=0}else if(se(t)&&n>0&&n<t.data.length&&(t=Fd(t,n),n=0),se(o)&&r>0&&r<o.data.length){const s=Fd(o,r).previousSibling;o=s,r=s.data.length}return{startContainer:t,startOffset:n,endContainer:o,endOffset:r}},Lr=e=>({walk:(t,n)=>Hl(e,t,n),split:jd,expand:(t,n={type:"word"})=>{if(n.type==="word"){const o=Sa(e,t,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),r=e.createRng();return r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),r}return t},normalize:t=>Id(e,t).fold(Nt,(n=>(t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),!0)))});Lr.compareRanges=Ff,Lr.getCaretRangeFromPoint=ov,Lr.getSelectedNode=gd,Lr.getNode=_s;const iv=(e,t)=>e.view(t).fold(ie([]),(n=>{const o=e.owner(n),r=iv(e,o);return[n].concat(r)}));var oD=Object.freeze({__proto__:null,view:e=>(e.dom===document?k.none():k.from(e.dom.defaultView?.frameElement)).map(S.fromDom),owner:e=>Sn(e)});const zf=e=>Be(e)==="textarea",lv=(e,t)=>{const n=(r=>{const s=r.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===r.dom)return oi(a.offsetLeft,a.offsetTop);const c=Gc(i?.pageYOffset,l.scrollTop),d=Gc(i?.pageXOffset,l.scrollLeft),m=Gc(l.clientTop,a.clientTop),f=Gc(l.clientLeft,a.clientLeft);return sm(r).translate(d-f,c-m)})(e),o=(r=>rN.get(r))(e);return{element:e,bottom:n.top+o,height:o,pos:n,cleanup:t}},cv=(e,t,n,o)=>{sD(e,((r,s)=>rD(e,t,n,o)),n)},dv=(e,t,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};((a,i)=>a.dispatch("ScrollIntoView",i).isDefaultPrevented())(e,s)||(n(e,t,am(t).top,o,r),((a,i)=>{a.dispatch("AfterScrollIntoView",i)})(e,s))},rD=(e,t,n,o)=>{const r=S.fromDom(e.getBody()),s=S.fromDom(e.getDoc());r.dom.offsetWidth;const a=((i,l)=>{const c=((m,f)=>{const h=ht(m);if(h.length===0||zf(m))return{element:m,offset:f};if(f<h.length&&!zf(h[f]))return{element:h[f],offset:0};{const g=h[h.length-1];return zf(g)?{element:m,offset:f}:Be(g)==="img"?{element:g,offset:1}:Et(g)?{element:g,offset:ri(g).length}:{element:g,offset:ht(g).length}}})(i,l),d=S.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\uFEFF</span>');return $(c.element,d),lv(d,(()=>ft(d)))})(S.fromDom(n.startContainer),n.startOffset);dv(e,s,t,a,o),a.cleanup()},uv=(e,t,n,o)=>{const r=S.fromDom(e.getDoc());dv(e,r,n,(s=>lv(S.fromDom(s),Ee))(t),o)},sD=(e,t,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,a=n.endOffset;t(S.fromDom(o),S.fromDom(s));const i=e.dom.createRng();i.setStart(o,r),i.setEnd(s,a),e.selection.setRng(n)},Uf=(e,t,n,o,r)=>{const s=t.pos;if(o)Wh(s.left,Math.max(0,s.top-30),r);else{const a=s.top-n+t.height+30;Wh(-e.getBody().getBoundingClientRect().left,a,r)}},mv=(e,t,n,o,r,s)=>{const a=o+n,i=r.pos.top,l=r.bottom,c=l-i>=o;i<n?Uf(e,r,o,s!==!1,t):i>a?Uf(e,r,o,c?s!==!1:s===!0,t):l>a&&!c&&Uf(e,r,o,s===!0,t)},fv=(e,t,n,o,r)=>{const s=yo(t).dom.innerHeight;mv(e,t,n,s,o,r)},pv=(e,t,n,o,r)=>{const s=yo(t).dom.innerHeight;mv(e,t,n,s,o,r);const a=(l=>{const c=sa(),d=am(c),m=((g,b)=>{const y=b.owner(g);return iv(b,y)})(l,oD),f=sm(l),h=Vr(m,((g,b)=>{const y=sm(b);return{left:g.left+y.left,top:g.top+y.top}}),{left:0,top:0});return oi(h.left+f.left+d.left,h.top+f.top+d.top)})(o.element),i=ob(window);a.top<i.y?Vh(o.element,r!==!1):a.top>i.bottom&&Vh(o.element,r===!0)},aD=(e,t,n)=>cv(e,fv,t,n),iD=(e,t,n)=>uv(e,t,fv,n),lD=(e,t,n)=>cv(e,pv,t,n),cD=(e,t,n)=>uv(e,t,pv,n),$l=(e,t,n)=>{(e.inline?aD:lD)(e,t,n)},gv=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),hv=(e,t,n,o,r)=>{const s=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return k.from(s).map(S.fromDom).map((i=>o&&t.collapsed?i:qt(i,r(i,a)).getOr(i))).bind((i=>ot(i)?k.some(i):gn(i).filter(ot))).map((i=>i.dom)).getOr(e)},bv=(e,t,n=!1)=>hv(e,t,!0,n,((o,r)=>Math.min(Nr(o),r))),yv=(e,t,n=!1)=>hv(e,t,!1,n,((o,r)=>r>0?r-1:r)),vv=(e,t)=>{const n=e;for(;e&&se(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},Hf=(e,t)=>qe(t,(n=>{const o=e.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n})),dD={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},zd=(e,t,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(e[o])return e[o];if(e!==t){let s=e[r];if(s)return s;for(let a=e.parent;a&&a!==t;a=a.parent)if(s=a[r],s)return s}},uD=e=>{const t=e.value??"";if(!li(t))return!1;const n=e.parent;return!n||n.name==="span"&&!n.attr("style")||!/^[ ]+$/.test(t)},Cv=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class An{static create(t,n){const o=new An(t,dD[t]||1);return n&&wt(n,((r,s)=>{o.attr(s,r)})),o}name;type;attributes;value;parent;firstChild;lastChild;next;prev;raw;constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const o=this;if(!xe(t))return te(t)&&wt(t,((s,a)=>{o.attr(a,s)})),o;const r=o.attributes;if(r){if(n!==void 0){if(n===null){if(t in r.map){delete r.map[t];let s=r.length;for(;s--;)if(r[s].name===t)return r.splice(s,1),o}return o}if(t in r.map){let s=r.length;for(;s--;)if(r[s].name===t){r[s].value=n;break}}else r.push({name:t,value:n});return r.map[t]=n,o}return r.map[t]}}clone(){const t=this,n=new An(t.name,t.type),o=t.attributes;if(o){const r=[];r.map={};for(let s=0,a=o.length;s<a;s++){const i=o[s];i.name!=="id"&&(r[r.length]={name:i.name,value:i.value},r.map[i.name]=i.value)}n.attributes=r}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const o=n.next;t.insert(n,t,!0),n=o}t.remove()}remove(){const t=this,n=t.parent,o=t.next,r=t.prev;return n&&(n.firstChild===t?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===t?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const o=n.lastChild;return o?(o.next=t,t.prev=o,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,o){t.parent&&t.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===r.lastChild?r.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=r,t}getAll(t){const n=this,o=[];for(let r=n.firstChild;r;r=zd(r,n))r.name===t&&o.push(r);return o}children(){const t=[];for(let n=this.firstChild;n;n=n.next)t.push(n);return t}empty(){const t=this;if(t.firstChild){const n=[];for(let r=t.firstChild;r;r=zd(r,t))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},o){const r=this;let s=r.firstChild;if(Cv(r))return!1;if(s)do{if(s.type===1){if(s.attr("data-mce-bogus"))continue;if(t[s.name]||Cv(s))return!1}if(s.type===8||s.type===3&&!uD(s)||s.type===3&&s.parent&&n[s.parent.name]&&li(s.value??"")||o&&o(s))return!1}while(s=zd(s,r));return!0}walk(t){return zd(this,null,t)}}const mD=E.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),xv=e=>xe(e.nodeValue)&&e.nodeValue.includes(hn),wv=e=>(e.length===0?"":`${qe(e,(t=>`[${t}]`)).join(",")},`)+'[data-mce-bogus="all"]',Sv=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,(t=>xv(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP)),Ev=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,(t=>{if(xv(t)){const n=t.parentNode;return n&&Oe(mD,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP})),fD=e=>Sv(e).nextNode()!==null,pD=e=>Ev(e).nextNode()!==null,gD=(e,t)=>t.querySelector(wv(e))!==null,hD=(e,t)=>{K(((n,o)=>o.querySelectorAll(wv(n)))(e,t),(n=>{const o=S.fromDom(n);et(o,"data-mce-bogus")==="all"?ft(o):K(e,(r=>{ct(o,r)&&vt(o,r)}))}))},kv=e=>{let t=e.nextNode();for(;t!==null;)t.nodeValue=null,t=e.nextNode()},bD=Bn(kv,Sv),yD=Bn(kv,Ev),_v=(e,t)=>{const n=[{condition:be(gD,t),action:be(hD,t)},{condition:fD,action:bD},{condition:pD,action:yD}];let o=e,r=!1;return K(n,(({condition:s,action:a})=>{s(o)&&(r||(o=e.cloneNode(!0),r=!0),a(o))})),o},Nv=e=>{const t=_n(e,"[data-mce-bogus]");K(t,(n=>{et(n,"data-mce-bogus")==="all"?ft(n):Ss(n)?($(n,S.fromText(kr)),ft(n)):sn(n)}))},Av=e=>{const t=_n(e,"input");K(t,(n=>{vt(n,"name")}))},vD=(e,t,n)=>{let o;return o=t.format==="raw"?E.trim(vo(_v(n,e.serializer.getTempAttrs()).innerHTML)):t.format==="text"?((r,s)=>{const a=r.getDoc(),i=Ko(S.fromDom(r.getBody())),l=S.fromTag("div",a);lt(l,"data-mce-bogus","all"),Xc(l,{position:"fixed",left:"-9999999px",top:"0"}),ti(l,s.innerHTML),Nv(l),Av(l);const c=(m=>rr(m)?m:S.fromDom(Sn(m).dom.body))(i);ne(c,l);const d=vo(l.dom.innerText);return ft(l),d})(e,n):t.format==="tree"?e.serializer.serialize(n,t):((r,s)=>{const a=xn(r),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${a}>[\r
]*|<br \\/>[\r
]*)$`);return s.replace(i,"")})(e,e.serializer.serialize(n,t)),t.format!=="text"&&!ud(S.fromDom(n))&&xe(o)?E.trim(o):o},Tv=E.makeMap,Dv=e=>{const t=[],n=(e=e||{}).indent,o=Tv(e.indent_before||""),r=Tv(e.indent_after||""),s=fa.getEncodeFunc(e.entity_encoding||"raw",e.entities),a=e.element_format!=="xhtml";return{start:(i,l,c)=>{if(n&&o[i]&&t.length>0){const d=t[t.length-1];d.length>0&&d!==`
`&&t.push(`
`)}if(t.push("<",i),l)for(let d=0,m=l.length;d<m;d++){const f=l[d];t.push(" ",f.name,'="',s(f.value,!0),'"')}if(t[t.length]=!c||a?">":" />",c&&n&&r[i]&&t.length>0){const d=t[t.length-1];d.length>0&&d!==`
`&&t.push(`
`)}},end:i=>{let l;t.push("</",i,">"),n&&r[i]&&t.length>0&&(l=t[t.length-1],l.length>0&&l!==`
`&&t.push(`
`))},text:(i,l)=>{i.length>0&&(t[t.length]=l?i:s(i))},cdata:i=>{t.push("<![CDATA[",i,"]]>")},comment:i=>{t.push("<!--",i,"-->")},pi:(i,l)=>{l?t.push("<?",i," ",s(l),"?>"):t.push("<?",i,"?>"),n&&t.push(`
`)},doctype:i=>{t.push("<!DOCTYPE",i,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Ds=(e={},t=ws())=>{const n=Dv(e);return e.validate=!("validate"in e)||e.validate,{serialize:o=>{const r=e.validate,s={3:i=>{n.text(i.value??"",i.raw)},8:i=>{n.comment(i.value??"")},7:i=>{n.pi(i.name,i.value)},10:i=>{n.doctype(i.value??"")},4:i=>{n.cdata(i.value??"")},11:i=>{let l=i;if(l=l.firstChild)do a(l);while(l=l.next)}};n.reset();const a=i=>{const l=s[i.type];if(l)l(i);else{const c=i.name,d=c in t.getVoidElements();let m=i.attributes;if(r&&m&&m.length>1){const f=[];f.map={};const h=t.getElementRule(i.name);if(h){for(let g=0,b=h.attributesOrder.length;g<b;g++){const y=h.attributesOrder[g];if(y in m.map){const v=m.map[y];f.map[y]=v,f.push({name:y,value:v})}}for(let g=0,b=m.length;g<b;g++){const y=m[g].name;if(!(y in f.map)){const v=m.map[y];f.map[y]=v,f.push({name:y,value:v})}}m=f}}if(n.start(c,m,d),da(c))xe(i.value)&&n.text(i.value,!0),n.end(c);else if(!d){let f=i.firstChild;if(f){c!=="pre"&&c!=="textarea"||f.type!==3||f.value?.[0]!==`
`||n.text(`
`,!0);do a(f);while(f=f.next)}n.end(c)}}};return o.type!==1||e.inner?o.type===3?s[3](o):s[11](o):a(o),n.getContent()}}},Rv=new Set;K(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],(e=>{Rv.add(e)}));const Ov=new Set;K(["background-color"],(e=>{Ov.add(e)}));const Bv=["font","text-decoration","text-emphasis"],Di=(e,t)=>un(((n,o)=>n.parseStyle(n.getAttrib(o,"style")))(e,t)),Pv=(e,t)=>xt(Di(e,t),(n=>(o=>Rv.has(o))(n))),Lv=(e,t,n)=>k.from(n.container()).filter(se).exists((o=>{const r=e?0:-1;return t(o.data.charAt(n.offset()+r))})),$f=be(Lv,!0,wa),qf=be(Lv,!1,wa),CD=e=>{const t=e.container();return se(t)&&(t.data.length===0||md(t.data)&&Ni.isBookmarkNode(t.parentNode))},Rs=(e,t)=>n=>cf(e?0:-1,n).filter(t).isSome(),Mv=e=>ib(e)&&Yo(S.fromDom(e),"display")==="block",Iv=e=>Pt(e)&&!(t=>ve(t)&&t.getAttribute("data-mce-bogus")==="all")(e),xD=Rs(!0,Mv),wD=Rs(!1,Mv),ql=Rs(!0,lr),Wl=Rs(!1,lr),Fv=Rs(!0,Dr),Wf=Rs(!1,Dr),Os=Rs(!0,Iv),Bs=Rs(!1,Iv),jv=(e,t)=>((n,o,r)=>Ze(o,n)?Zt(n,(s=>r(s)||me(s,o))).slice(0,-1):[])(e,t,Nt),ts=(e,t)=>[e].concat(jv(e,t)),Vf=(e,t,n)=>vy(e,t,n,CD),zv=(e,t,n)=>Ht(ts(S.fromDom(t.container()),e),(o=>r=>o.isBlock(Be(r)))(n)),Uv=(e,t,n,o)=>Vf(e,t.dom,n).forall((r=>zv(t,n,o).fold((()=>!Rr(r,n,t.dom)),(s=>!Rr(r,n,t.dom)&&Ze(s,S.fromDom(r.container())))))),Hv=(e,t,n,o)=>zv(t,n,o).fold((()=>Vf(e,t.dom,n).forall((r=>!Rr(r,n,t.dom)))),(r=>Vf(e,r.dom,n).isNone())),Kf=be(Hv,!1),$v=be(Hv,!0),SD=be(Uv,!1),ED=be(Uv,!0),kD=e=>Ed(e).exists(Ss),Ud=(e,t,n,o)=>{const r=De(ts(S.fromDom(n.container()),t),(a=>o.isBlock(Be(a)))),s=nn(r).getOr(t);return Ro(e,s.dom,n).filter(kD)},Xf=(e,t,n)=>Ed(t).exists(Ss)||Ud(!0,e,t,n).isSome(),Hd=(e,t,n)=>(o=>k.from(o.getNode(!0)).map(S.fromDom))(t).exists(Ss)||Ud(!1,e,t,n).isSome(),qv=be(Ud,!1),_D=be(Ud,!0),Wv=e=>Y.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Vv=(e,t,n)=>{const o=De(ts(S.fromDom(t.container()),e),(r=>n.isBlock(Be(r))));return nn(o).getOr(e)},Kv=(e,t,n)=>Wv(t)?qf(t):qf(t)||ao(Vv(e,t,n).dom,t).exists(qf),Xv=(e,t,n)=>Wv(t)?$f(t):$f(t)||Qn(Vv(e,t,n).dom,t).exists($f),Yf=e=>Ed(e).bind((t=>sr(t,ot))).exists((t=>(n=>we(["pre","pre-wrap"],n))(Yo(t,"white-space")))),Yv=(e,t)=>n=>{return o=new an(n,e)[t](),te(o)&&Pt(o)&&ay(o);var o},Gv=(e,t,n)=>!Yf(t)&&(((o,r,s)=>((a,i)=>ao(a.dom,i).isNone())(o,r)||((a,i)=>Qn(a.dom,i).isNone())(o,r)||Kf(o,r,s)||$v(o,r,s)||Hd(o,r,s)||Xf(o,r,s))(e,t,n)||Kv(e,t,n)||Xv(e,t,n)),Vl=(e,t,n)=>!Yf(t)&&(Kf(e,t,n)||SD(e,t,n)||Hd(e,t,n)||Kv(e,t,n)||((o,r)=>{const s=ao(o.dom,r).getOr(r),a=Yv(o.dom,"prev");return r.isAtStart()&&(a(r.container())||a(s.container()))})(e,t)),Kl=(e,t,n)=>!Yf(t)&&($v(e,t,n)||ED(e,t,n)||Xf(e,t,n)||Xv(e,t,n)||((o,r)=>{const s=Qn(o.dom,r).getOr(r),a=Yv(o.dom,"next");return r.isAtEnd()&&(a(r.container())||a(s.container()))})(e,t)),Gf=(e,t,n)=>Vl(e,t,n)||Kl(e,(o=>{const r=o.container(),s=o.offset();return se(r)&&s<r.data.length?Y(r,s+1):o})(t),n),Qv=(e,t)=>Ad(e.charAt(t)),Jv=(e,t)=>wa(e.charAt(t)),Zv=(e,t,n,o)=>{const r=t.data,s=Y(t,0);return n||!Qv(r,0)||Gf(e,s,o)?!!(n&&Jv(r,0)&&Vl(e,s,o))&&(t.data=It+r.slice(1),!0):(t.data=" "+r.slice(1),!0)},eC=(e,t,n,o)=>{const r=t.data,s=Y(t,r.length-1);return n||!Qv(r,r.length-1)||Gf(e,s,o)?!!(n&&Jv(r,r.length-1)&&Kl(e,s,o))&&(t.data=r.slice(0,-1)+It,!0):(t.data=r.slice(0,-1)+" ",!0)},ND=(e,t,n)=>{const o=t.container();if(!se(o))return k.none();if((r=>{const s=r.container();return se(s)&&pn(s.data,It)})(t)){const r=Zv(e,o,!1,n)||(s=>{const a=s.data,i=(l=>{const c=l.split("");return qe(c,((d,m)=>Ad(d)&&m>0&&m<c.length-1&&hf(c[m-1])&&hf(c[m+1])?" ":d)).join("")})(a);return i!==a&&(s.data=i,!0)})(o)||eC(e,o,!1,n);return Xr(r,t)}if(Gf(e,t,n)){const r=Zv(e,o,!0,n)||eC(e,o,!0,n);return Xr(r,t)}return k.none()},tC=(e,t,n,o)=>{if(n===0)return;const r=S.fromDom(e),s=Tr(r,(c=>o.isBlock(Be(c)))).getOr(r),a=e.data.slice(t,t+n),i=t+n>=e.data.length&&Kl(s,Y(e,e.data.length),o),l=t===0&&Vl(s,Y(e,0),o);e.replaceData(t,n,sb(a,4,l,i))},$d=(e,t,n)=>{const o=e.data.slice(t),r=o.length-nm(o).length;tC(e,t,r,n)},Qf=(e,t,n)=>{const o=e.data.slice(0,t),r=o.length-Tc(o).length;tC(e,t-r,r,n)},Jf=(e,t,n,o,r=!0)=>{const s=Tc(e.data).length,a=r?e:t,i=r?t:e;return r?a.appendData(i.data):a.insertData(0,i.data),ft(S.fromDom(i)),o&&$d(a,s,n),a},AD=(e,t)=>((n,o)=>{const r=n.container(),s=n.offset();return!Y.isTextPosition(n)&&r===o.parentNode&&s>Y.before(o).offset()})(t,e)?Y(t.container(),t.offset()-1):t,nC=e=>{return mr(e.previousSibling)?k.some((t=e.previousSibling,se(t)?Y(t,t.data.length):Y.after(t))):e.previousSibling?Go(e.previousSibling):k.none();var t},oC=e=>{return mr(e.nextSibling)?k.some((t=e.nextSibling,se(t)?Y(t,0):Y.before(t))):e.nextSibling?In(e.nextSibling):k.none();var t},TD=(e,t,n)=>((o,r,s)=>o?((a,i)=>oC(i).orThunk((()=>nC(i))).orThunk((()=>((l,c)=>Qn(l,Y.after(c)).orThunk((()=>ao(l,Y.before(c)))))(a,i))))(r,s):((a,i)=>nC(i).orThunk((()=>oC(i))).orThunk((()=>((l,c)=>k.from(c.previousSibling?c.previousSibling:c.parentNode).bind((d=>ao(l,Y.before(d)))).orThunk((()=>Qn(l,Y.after(c)))))(a,i))))(r,s))(e,t,n).map(be(AD,n)),rC=(e,t,n)=>{n.fold((()=>{e.focus()}),(o=>{e.selection.setRng(o.toRange(),t)}))},DD=(e,t)=>t&&Oe(e.schema.getBlockElements(),Be(t)),Ps=(e,t,n,o=!0,r=!1)=>{const s=TD(t,e.getBody(),n.dom),a=Tr(n,be(DD,e),(i=e.getBody(),c=>c.dom===i));var i;const l=((c,d,m,f)=>{const h=Vt(c).filter(Et),g=Gn(c).filter(Et);return ft(c),(b=h,y=g,v=d,_=(N,D,A)=>{const R=N.dom,P=D.dom,I=R.data.length;return Jf(R,P,m,f),A.container()===P?Y(R,I):A},b.isSome()&&y.isSome()&&v.isSome()?k.some(_(b.getOrDie(),y.getOrDie(),v.getOrDie())):k.none()).orThunk((()=>(f&&(h.each((N=>Qf(N.dom,N.dom.length,m))),g.each((N=>$d(N.dom,0,m)))),d)));var b,y,v,_})(n,s,e.schema,((c,d)=>Oe(c.schema.getTextInlineElements(),Be(d)))(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):a.bind((c=>((d,m,f)=>{if(Ln(d,m)){const h=S.fromHtml('<br data-mce-bogus="1">');return f?K(ht(m),(g=>{Df(g)||ft(g)})):rn(m),ne(m,h),k.some(Y.before(h.dom))}return k.none()})(e.schema,c,r))).fold((()=>{o&&rC(e,t,l)}),(c=>{o&&rC(e,t,k.some(c))}))},RD=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ka=(e,t)=>Q(S.fromDom(t),kA(e))&&!ua(e.schema,t)&&e.dom.isEditable(t),sC=e=>At.DOM.getStyle(e,"direction",!0)==="rtl"||(t=>RD.test(t))(e.textContent??""),Ls=(e,t,n)=>{const o=((r,s,a)=>De(At.DOM.getParents(a.container(),"*",s),r))(e,t,n);return k.from(o[o.length-1])},Mo=(e,t)=>{const n=t.container(),o=t.offset();return e?ks(n)?se(n.nextSibling)?Y(n.nextSibling,0):Y.after(n):Um(t)?Y(n,o+1):t:ks(n)?se(n.previousSibling)?Y(n.previousSibling,n.previousSibling.data.length):Y.before(n):Hm(t)?Y(n,o-1):t},aC=be(Mo,!0),iC=be(Mo,!1),lC=(e,t)=>{const n=o=>o.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},qd=e=>lC(e,"Delete"),cC=e=>lC(e,"ForwardDelete"),OD=e=>Xb(e)||mi(e),Wd=(e,t)=>Ze(e,t)?sr(t,OD,(n=>o=>us(gn(o),n,me))(e)):k.none(),Zf=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},dC=(e,t,n)=>zt(In(n),Go(n),((o,r)=>{const s=Mo(!0,o),a=Mo(!1,r),i=Mo(!1,t);return e?Qn(n,i).exists((l=>l.isEqual(a)&&t.isEqual(s))):ao(n,i).exists((l=>l.isEqual(s)&&t.isEqual(a)))})).getOr(!0),uC=e=>(St(e)?Vt(e):Hn(e)).bind(uC).orThunk((()=>k.some(e))),mC=(e,t,n,o=!0)=>{t.deleteContents();const r=uC(n).getOr(n),s=S.fromDom(e.dom.getParent(r.dom,e.dom.isBlock)??n.dom);if(s.dom===e.getBody()?Zf(e,o):Ln(e.schema,s,{checkRootAsContent:!1})&&(Es(s),o&&e.selection.setCursorLocation(s.dom,0)),!me(n,s)){const a=us(gn(s),n)?[]:on(s);K(a.concat(ht(n)),(i=>{me(i,s)||Ze(i,s)||!Ln(e.schema,i)||ft(i)}))}},ep=e=>_n(e,"td,th"),fC=(e,t)=>zl(S.fromDom(e),t),tp=(e,t)=>({start:e,end:t}),Xl=bo([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Vd=(e,t)=>Cs(S.fromDom(e),"td,th",t),pC=e=>!me(e.start,e.end),gC=(e,t)=>zl(e.start,t).bind((n=>zl(e.end,t).bind((o=>Xr(me(n,o),n))))),np=e=>t=>gC(t,e).map((n=>((o,r,s)=>({rng:o,table:r,cells:s}))(t,n,ep(n)))),hC=(e,t,n,o)=>{if(n.collapsed||!e.forall(pC))return k.none();if(t.isSameTable){const r=e.bind(np(o));return k.some({start:r,end:r})}{const r=Vd(n.startContainer,o),s=Vd(n.endContainer,o),a=r.bind((l=>c=>zl(c,l).bind((d=>to(ep(d)).map((m=>tp(c,m))))))(o)).bind(np(o)),i=s.bind((l=>c=>zl(c,l).bind((d=>nn(ep(d)).map((m=>tp(m,c))))))(o)).bind(np(o));return k.some({start:a,end:i})}},bC=(e,t)=>$s(e,(n=>me(n,t))),op=e=>zt(bC(e.cells,e.rng.start),bC(e.cells,e.rng.end),((t,n)=>e.cells.slice(t,n+1))),yC=(e,t)=>{const{startTable:n,endTable:o}=t,r=e.cloneRange();return n.each((s=>r.setStartAfter(s.dom))),o.each((s=>r.setEndBefore(s.dom))),r},BD=(e,t)=>{const n=(s=>a=>me(s,a))(e),o=((s,a)=>{const i=Vd(s.startContainer,a),l=Vd(s.endContainer,a);return zt(i,l,tp)})(t,n),r=((s,a)=>{const i=fC(s.startContainer,a),l=fC(s.endContainer,a),c=i.isSome(),d=l.isSome(),m=zt(i,l,me).getOr(!1);return(f=>zt(f.startTable,f.endTable,((h,g)=>{const b=mm(h,(v=>me(v,g))),y=mm(g,(v=>me(v,h)));return b||y?{...f,startTable:b?k.none():f.startTable,endTable:y?k.none():f.endTable,isSameTable:!1,isMultiTable:!1}:f})).getOr(f))({startTable:i,endTable:l,isStartInTable:c,isEndInTable:d,isSameTable:m,isMultiTable:!m&&c&&d})})(t,n);return((s,a,i)=>s.exists((l=>((c,d)=>!pC(c)&&gC(c,d).exists((m=>{const f=m.dom.rows;return f.length===1&&f[0].cells.length===1})))(l,i)&&vf(l.start,a))))(o,t,n)?o.map((s=>Xl.singleCellTable(t,s.start))):r.isMultiTable?((s,a,i,l)=>hC(s,a,i,l).bind((({start:c,end:d})=>{const m=c.bind(op).getOr([]),f=d.bind(op).getOr([]);if(m.length>0&&f.length>0){const h=yC(i,a);return k.some(Xl.multiTable(m,f,h))}return k.none()})))(o,r,t,n):((s,a,i,l)=>hC(s,a,i,l).bind((({start:c,end:d})=>c.or(d))).bind((c=>{const{isSameTable:d}=a,m=op(c).getOr([]);if(d&&c.cells.length===m.length)return k.some(Xl.fullTable(c.table));if(m.length>0){if(d)return k.some(Xl.partialTable(m,k.none()));{const f=yC(i,a);return k.some(Xl.partialTable(m,k.some({...a,rng:f})))}}return k.none()})))(o,r,t,n)},vC=e=>K(e,(t=>{vt(t,"contenteditable"),Es(t)})),rp=(e,t,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(t.dom.lastChild)):(r.setStartBefore(t.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),sp(e,r,t,!1).each((s=>s()))},CC=e=>{const t=Ei(e),n=S.fromDom(e.selection.getNode());sd(n.dom)&&Ln(e.schema,n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&xt(t,(o=>me(o,n)))&&lt(n,"data-mce-selected","1")},xC=(e,t,n)=>k.some((()=>{const o=e.selection.getRng(),r=n.bind((({rng:s,isStartInTable:a})=>{const i=((c,d)=>k.from(c.dom.getParent(d,c.dom.isBlock)).map(S.fromDom))(e,a?s.endContainer:s.startContainer);s.deleteContents(),((c,d,m)=>{m.each((f=>{d?ft(f):(Es(f),c.selection.setCursorLocation(f.dom,0))}))})(e,a,i.filter(be(Ln,e.schema)));const l=a?t[0]:t[t.length-1];return rp(e,l,o,a),Ln(e.schema,l)?k.none():k.some(a?t.slice(1):t.slice(0,-1))})).getOr(t);vC(r),CC(e)})),PD=(e,t,n,o)=>k.some((()=>{const r=e.selection.getRng(),s=t[0],a=n[n.length-1];rp(e,s,r,!0),rp(e,a,r,!1);const i=Ln(e.schema,s)?t:t.slice(1),l=Ln(e.schema,a)?n:n.slice(0,-1);vC(i.concat(l)),o.deleteContents(),CC(e)})),sp=(e,t,n,o=!0)=>k.some((()=>{mC(e,t,n,o)})),LD=(e,t)=>k.some((()=>Ps(e,!1,t))),wC=(e,t)=>Ht(ts(t,e),Al),ap=(e,t)=>Ht(ts(t,e),Cn("caption")),Kd=(e,t)=>k.some((()=>{Es(t),e.selection.setCursorLocation(t.dom,0)})),SC=(e,t)=>e?Fv(t):Wf(t),MD=(e,t,n)=>{const o=S.fromDom(e.getBody());return ap(o,n).fold((()=>((r,s,a,i)=>{const l=Y.fromRangeStart(r.selection.getRng());return wC(a,i).bind((c=>Ln(r.schema,c,{checkRootAsContent:!1})?Kd(r,c):((d,m,f,h,g)=>wi(f,d.getBody(),g).bind((b=>wC(m,S.fromDom(b.getNode())).bind((y=>me(y,h)?k.none():k.some(Ee))))))(r,a,s,c,l)))})(e,t,o,n).orThunk((()=>Xr(((r,s)=>{const a=Y.fromRangeStart(r.selection.getRng());return SC(s,a)||Ro(s,r.getBody(),a).exists((i=>SC(s,i)))})(e,t),Ee)))),(r=>((s,a,i,l)=>{const c=Y.fromRangeStart(s.selection.getRng());return Ln(s.schema,l)?Kd(s,l):((d,m,f,h,g)=>wi(f,d.getBody(),g).fold((()=>k.some(Ee)),(b=>((y,v,_,N)=>In(y.dom).bind((D=>Go(y.dom).map((A=>v?_.isEqual(D)&&N.isEqual(A):_.isEqual(A)&&N.isEqual(D))))).getOr(!0))(h,f,g,b)?((y,v)=>Kd(y,v))(d,h):((y,v,_)=>ap(y,S.fromDom(_.getNode())).fold((()=>k.some(Ee)),(N=>Xr(!me(N,v),Ee))))(m,h,b))))(s,i,a,l,c)})(e,t,o,r)))},ip=(e,t)=>{const n=S.fromDom(e.selection.getStart(!0)),o=Ei(e);return e.selection.isCollapsed()&&o.length===0?MD(e,t,n):((r,s,a)=>{const i=S.fromDom(r.getBody()),l=r.selection.getRng();return a.length!==0?xC(r,a,k.none()):((c,d,m,f)=>ap(d,f).fold((()=>((h,g,b)=>BD(g,b).bind((y=>y.fold(be(sp,h),be(LD,h),be(xC,h),be(PD,h)))))(c,d,m)),(h=>((g,b)=>Kd(g,b))(c,h))))(r,i,l,s)})(e,n,o)},_a=(e,t)=>{let n=t;for(;n&&n!==e;){if(To(n)||Pt(n))return n;n=n.parentNode}return null},ID=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],FD=E.each,lp=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),o=r=>xt(ID,(s=>Gt(r,s)))||n.has(r);return{compare:(r,s)=>{if(r.nodeName!==s.nodeName||r.nodeType!==s.nodeType)return!1;const a=l=>{const c={};return FD(t.getAttribs(l),(d=>{const m=d.nodeName.toLowerCase();m==="style"||o(m)||(c[m]=t.getAttrib(l,m))})),c},i=(l,c)=>{for(const d in l)if(Oe(l,d)){const m=c[d];if(Lt(m)||l[d]!==m)return!1;delete c[d]}for(const d in c)if(Oe(c,d))return!1;return!0};return ve(r)&&ve(s)&&(!i(a(r),a(s))||!i(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(s,"style"))))?!1:!Bo(r)&&!Bo(s)},isAttributeInternal:o}},EC=(e,t)=>{if(se(e))return{container:e,offset:t};const n=Lr.getNode(e,t);return se(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&se(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&se(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},Yl=At.DOM,jD=()=>Yl.create("span",{"data-mce-type":"bookmark"}),kC=(e,t,n)=>{if(ve(e)){const o=n();return e.hasChildNodes()?t===e.childNodes.length?e.appendChild(o):e.insertBefore(o,e.childNodes[t]):e.appendChild(o),{container:o,offset:0}}return{container:e,offset:t}},_C=(e,t)=>{if(ve(e)&&te(e.parentNode)){const n=e;t=(o=>{let r=o.parentNode?.firstChild,s=0;for(;r;){if(r===o)return s;ve(r)&&r.getAttribute("data-mce-type")==="bookmark"||s++,r=r.nextSibling}return-1})(e),e=e.parentNode,Yl.remove(n),!e.hasChildNodes()&&Yl.isBlock(e)&&e.appendChild(Yl.create("br"))}return{container:e,offset:t}},NC=(e,t,n,o)=>{const r=Yl.createRng();return r.setStart(e,t),r.setEnd(n,o),(s=>{const a=s.cloneRange(),i=EC(s.startContainer,s.startOffset);a.setStart(i.container,i.offset);const l=EC(s.endContainer,s.endOffset);return a.setEnd(l.container,l.offset),a})(r)},ns=(e,t=jD)=>{const{container:n,offset:o}=kC(e.startContainer,e.startOffset,t);if(e.collapsed)return{startContainer:n,startOffset:o};{const{container:r,offset:s}=kC(e.endContainer,e.endOffset,t);return{startContainer:n,startOffset:o,endContainer:r,endOffset:s}}},os=e=>{const{container:t,offset:n}=_C(e.startContainer,e.startOffset);if(Lt(e.endContainer)||Lt(e.endOffset))return NC(t,n,t,n);{const{container:o,offset:r}=_C(e.endContainer,e.endOffset);return NC(t,n,o,r)}},AC=(e,t,n,o)=>{if(E.each(n.styles,((r,s)=>{e.setStyle(t,s,Ts(r,o))})),n.styles){const r=e.getAttrib(t,"style");r&&e.setAttrib(t,"data-mce-style",r)}},Ri=(e,t,n,o,r)=>{const s=e.dom;pt(n.onformat)&&n.onformat(t,n,o,r),AC(s,t,n,o),E.each(n.attributes,((a,i)=>{s.setAttrib(t,i,Ts(a,o))})),E.each(n.classes,(a=>{const i=Ts(a,o);s.hasClass(t,i)||s.addClass(t,i)}))},cp=_f,TC=(e,t,n)=>{const o=e.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const s=o[r];if(Po(s)&&s.inherit===!1&&e.dom.is(t,s.selector))return!0}return!1},dp=(e,t,n,o,r)=>{const s=e.dom.getRoot();if(t===s)return!1;const a=e.dom.getParent(t,(i=>!!TC(e,i,n)||i.parentNode===s||!!Io(e,i,n,o,!0)));return!!Io(e,a,n,o,r)},Xd=(e,t,n)=>!(!cn(n)||!cp(t,n.inline))||!(!Pr(n)||!cp(t,n.block))||!!Po(n)&&ve(t)&&e.is(t,n.selector),DC=(e,t,n,o,r,s)=>{const a=n[o],i=o==="attributes";if(pt(n.onmatch))return n.onmatch(t,n,o);if(a){if(Rc(a)){for(let l=0;l<a.length;l++)if(i?e.getAttrib(t,a[l]):Dd(e,t,a[l]))return!0}else for(const l in a)if(Oe(a,l)){const c=i?e.getAttrib(t,l):Dd(e,t,l),d=Ts(a[l],s),m=kt(c)||fs(c);if(m&&kt(d))continue;if(r&&m&&!n.exact||(!r||n.exact)&&!cp(c,Nf(d,l)))return!1}}return!0},Io=(e,t,n,o,r)=>{const s=e.formatter.get(n),a=e.dom;if(s&&ve(t))for(let i=0;i<s.length;i++){const l=s[i];if(Xd(e.dom,t,l)&&DC(a,t,l,"attributes",r,o)&&DC(a,t,l,"styles",r,o)){const c=l.classes;if(c){for(let d=0;d<c.length;d++)if(!e.dom.hasClass(t,Ts(c[d],o)))return}return l}}},up=(e,t,n,o,r)=>{if(o)return dp(e,o,t,n,r);if(o=e.selection.getNode(),dp(e,o,t,n,r))return!0;const s=e.selection.getStart();return!(s===o||!dp(e,s,t,n,r))},Gl=hn,RC=e=>{if(e){const t=new an(e,e);for(let n=t.current();n;n=t.next())if(se(n))return n}return null},mp=e=>{const t=S.fromTag("span");return Qe(t,{id:pf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&ne(t,S.fromText(Gl)),t},fp=(e,t,n)=>{const o=e.dom,r=e.selection;if(Py(t))Ps(e,!1,S.fromDom(t),n,!0);else{const s=r.getRng(),a=o.getParent(t,o.isBlock),i=s.startContainer,l=s.startOffset,c=s.endContainer,d=s.endOffset,m=(f=>{const h=RC(f);return h&&h.data.charAt(0)===Gl&&h.deleteData(0,1),h})(t);o.remove(t,!0),i===m&&l>0&&s.setStart(m,l-1),c===m&&d>0&&s.setEnd(m,d-1),a&&o.isEmpty(a)&&Es(S.fromDom(a)),r.setRng(s)}},pp=(e,t,n)=>{const o=e.dom,r=e.selection;if(t)fp(e,t,n);else if(!(t=xa(e.getBody(),r.getStart())))for(;t=o.get(pf);)fp(e,t,n)},OC=(e,t)=>(e.appendChild(t),t),BC=(e,t)=>{const n=Vr(e,((r,s)=>OC(r,s.cloneNode(!1))),t),o=n.ownerDocument??document;return OC(n,o.createTextNode(Gl))},PC=e=>lm(e,ri(e).replace(new RegExp(`${It}$`)," ")),LC=(e,t)=>{const n=()=>{t===null||e.dom.isEmpty(t)||Vt(S.fromDom(t)).each((o=>{Et(o)?PC(o):Qc(o,(r=>Et(r))).each((r=>{Et(r)&&PC(r)}))}))};e.once("input",(o=>{o.data&&!wa(o.data)&&(o.isComposing?e.once("compositionend",(()=>{n()})):n())}))},zD=(e,t,n,o)=>{const r=e.dom,s=e.selection;let a=!1;const i=e.formatter.get(t);if(!i)return;const l=s.getRng(),c=l.startContainer,d=l.startOffset;let m=c;se(c)&&(d!==c.data.length&&(a=!0),m=m.parentNode);const f=[];let h;for(;m;){if(Io(e,m,t,n,o)){h=m;break}m.nextSibling&&(a=!0),f.push(m),m=m.parentNode}if(h)if(a){const g=s.getBookmark();l.collapse(!0);let b=Sa(r,l,i,{includeTrailingSpace:!0});b=jd(b),e.formatter.remove(t,n,b,o),s.moveToBookmark(g)}else{const g=xa(e.getBody(),h),b=te(g)?r.getParents(h.parentNode,jt,g):[],y=mp(!1).dom;((N,D,A)=>{const R=N.dom,P=R.getParent(A,be(Ef,N.schema));P&&R.isEmpty(P)?A.parentNode?.replaceChild(D,A):((I=>{const M=_n(I,"br"),W=De((B=>{const F=[];let H=B.dom;for(;H;)F.push(S.fromDom(H)),H=H.lastChild;return F})(I).slice(-1),Ss);M.length===W.length&&K(W,ft)})(S.fromDom(A)),R.isEmpty(A)?A.parentNode?.replaceChild(D,A):R.insertAfter(D,A))})(e,y,g??h);const v=((N,D,A,R,P,I)=>{const M=N.formatter,W=N.dom,B=De(un(M.get()),(H=>H!==R&&!pn(H,"removeformat"))),F=((H,Z,le)=>Yt(le,((_e,Te)=>{const Se=((Me,yt)=>Af(Me,yt,(he=>{const Ne=j=>pt(j)||j.length>1&&j.charAt(0)==="%";return xt(["styles","attributes"],(j=>Ot(he,j).exists((z=>{const G=re(z)?z:Vs(z);return xt(G,Ne)}))))})))(H,Te);return H.formatter.matchNode(Z,Te,{},Se)?_e.concat([Te]):_e}),[]))(N,A,B);if(De(F,(H=>!((Z,le,_e)=>{const Te=["inline","block","selector","attributes","styles","classes"],Se=Me=>tr(Me,((yt,he)=>xt(Te,(Ne=>Ne===he))));return Af(Z,le,(Me=>{const yt=Se(Me);return Af(Z,_e,(he=>{const Ne=Se(he);return((j,z,G=Xt)=>it(G).eq(j,z))(yt,Ne)}))}))})(N,H,R))).length>0){const H=A.cloneNode(!1);return W.add(D,H),M.remove(R,P,H,I),W.remove(H),k.some(H)}return k.none()})(e,y,h,t,n,o),_=BC([...f,...v.toArray(),...b],y);g&&fp(e,g,te(g)),s.setCursorLocation(_,1),LC(e,y),r.isEmpty(h)&&r.remove(h)}},MC=e=>{const t=mp(!1),n=BC(e,t.dom);return{caretContainer:t,caretPosition:Y(n,0)}},IC=(e,t)=>{const{caretContainer:n,caretPosition:o}=MC(t);return $(S.fromDom(e),n),ft(S.fromDom(e)),o},FC=(e,t)=>{if(Oo(t.dom))return!1;const n=e.schema.getTextInlineElements();return Oe(n,Be(t))&&!Oo(t.dom)&&!ca(t.dom)},jC=["fontWeight","fontStyle","color","fontSize","fontFamily"],zC=(e,t)=>{const n=e.get(t);return re(n)?Ht(n,(o=>cn(o)&&o.inline==="span"&&(r=>He(r.styles)&&xt(un(r.styles),(s=>we(jC,s))))(o))):k.none()},UC=(e,t)=>ao(t,Y.fromRangeStart(e)).isNone(),HC=(e,t)=>Qn(t,Y.fromRangeEnd(e)).exists((n=>!Ut(n.getNode())||Qn(t,n).isSome()))===!1,$C=e=>t=>bN(t)&&e.isEditable(t),qC=e=>De(e.getSelectedBlocks(),$C(e.dom)),gp=E.each,hp=e=>ve(e)&&!Bo(e)&&!Oo(e)&&!ca(e),WC=(e,t)=>{for(let n=e;n;n=n[t]){if(se(n)&&ko(n.data))return e;if(ve(n)&&!Bo(n))return n}return e},VC=(e,t,n)=>{const o=lp(e),r=ar(t)&&e.dom.isEditable(t),s=ar(n)&&e.dom.isEditable(n);if(r&&s){const a=WC(t,"previousSibling"),i=WC(n,"nextSibling");if(o.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const c=l;l=l.nextSibling,a.appendChild(c)}return e.dom.remove(i),E.each(E.grep(i.childNodes),(l=>{a.appendChild(l)})),a}}return n},KC=(e,t,n,o)=>{if(o&&t.merge_siblings!==!1){const r=VC(e,Ry(o),o)??o;VC(e,r,Ry(r,!0))}},bp=(e,t,n)=>{gp(e.childNodes,(o=>{hp(o)&&(t(o)&&n(o),o.hasChildNodes()&&bp(o,t,n))}))},XC=(e,t)=>n=>!(!n||!Dd(e,n,t)),YC=(e,t,n)=>o=>{e.setStyle(o,t,n),o.getAttribute("style")===""&&o.removeAttribute("style"),((r,s)=>{s.nodeName==="SPAN"&&r.getAttribs(s).length===0&&r.remove(s,!0)})(e,o)},Na=bo([{keep:[]},{rename:["name"]},{removed:[]}]),UD=/^(src|href|style)$/,yp=E.each,Yd=_f,GC=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),QC=(e,t,n)=>{let o=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"];if(ve(o)){const s=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>s?s:r]}return se(o)&&n&&r>=o.data.length&&(o=new an(o,e.getBody()).next()||o),se(o)&&!n&&r===0&&(o=new an(o,e.getBody()).prev()||o),o},JC=(e,t)=>{const n=t?"firstChild":"lastChild",o=e[n];return(r=>/^(TR|TH|TD)$/.test(r.nodeName))(e)&&o?e.nodeName==="TR"&&o[n]||o:e},vp=(e,t,n,o)=>{const r=e.create(n,o);return t.parentNode?.insertBefore(r,t),r.appendChild(t),r},ZC=(e,t,n,o,r)=>{const s=S.fromDom(t),a=S.fromDom(e.create(o,r)),i=n?at(s):Pn(s);return ze(a,i),n?($(s,a),oe(a,s)):(J(s,a),ne(a,s)),a.dom},e1=(e,t,n)=>{const o=t.parentNode;let r;const s=e.dom,a=xn(e);Pr(n)&&o===s.getRoot()&&(n.list_block&&Yd(t,n.list_block)||K(vn(t.childNodes),(i=>{ki(e,a,i.nodeName.toLowerCase())?r?r.appendChild(i):(r=vp(s,i,a),s.setAttribs(r,yi(e))):r=null}))),(i=>Po(i)&&cn(i)&&us(Ot(i,"mixed"),!0))(n)&&!Yd(n.inline,t)||s.remove(t,!0)},t1=(e,t,n)=>x(e)?{name:t,value:null}:{name:e,value:Ts(t,n)},n1=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},o1=(e,t,n,o,r)=>{let s=!1;yp(n.styles,((a,i)=>{const{name:l,value:c}=t1(i,a,o),d=Nf(c,l);(n.remove_similar||Xe(c)||!ve(r)||Yd(Dd(e,r,l),d))&&e.setStyle(t,l,""),s=!0})),s&&n1(e,t)},Cp=(e,t,n,o,r)=>{const s=e.dom,a=lp(e),i=e.schema;if(cn(t)&&Em(i,t.inline)&&ua(i,o)&&o.parentElement===e.getBody())return e1(e,o,t),Na.removed();if(!t.ceFalseOverride&&o&&s.getContentEditableParent(o)==="false"||o&&!Xd(s,o,t)&&!((d,m)=>m.links&&d.nodeName==="A")(o,t))return Na.keep();const l=o,c=t.preserve_attributes;if(cn(t)&&t.remove==="all"&&re(c)){const d=De(s.getAttribs(l),(m=>we(c,m.name.toLowerCase())));if(s.removeAllAttribs(l),K(d,(m=>s.setAttrib(l,m.name,m.value))),d.length>0)return Na.rename("span")}if(t.remove!=="all"){o1(s,l,t,n,r),yp(t.attributes,((m,f)=>{const{name:h,value:g}=t1(f,m,n);if(t.remove_similar||Xe(g)||!ve(r)||Yd(s.getAttrib(r,h),g)){if(h==="class"){const b=s.getAttrib(l,h);if(b){let y="";if(K(b.split(/\s+/),(v=>{/mce\-\w+/.test(v)&&(y+=(y?" ":"")+v)})),y)return void s.setAttrib(l,h,y)}}if(UD.test(h)&&l.removeAttribute("data-mce-"+h),h==="style"&&ir(["li"])(l)&&s.getStyle(l,"list-style-type")==="none")return l.removeAttribute(h),void s.setStyle(l,"list-style-type","none");h==="class"&&l.removeAttribute("className"),l.removeAttribute(h)}})),yp(t.classes,(m=>{m=Ts(m,n),ve(r)&&!s.hasClass(r,m)||s.removeClass(l,m)}));const d=s.getAttribs(l);for(let m=0;m<d.length;m++){const f=d[m].nodeName;if(!a.isAttributeInternal(f))return Na.keep()}}return t.remove!=="none"?(e1(e,l,t),Na.removed()):Na.keep()},HD=(e,t,n,o)=>Cp(e,t,n,o,o).fold(ie(o),(r=>(e.dom.createFragment().appendChild(o),e.dom.rename(o,r))),ie(null)),r1=(e,t,n,o,r)=>{(o||e.selection.isEditable())&&((s,a,i,l,c)=>{const d=s.formatter.get(a),m=d[0],f=s.dom,h=s.selection,g=N=>{const D=((A,R,P,I,M)=>{let W;return R.parentNode&&K(Rd(A.dom,R.parentNode).reverse(),(B=>{if(!W&&ve(B)&&B.id!=="_start"&&B.id!=="_end"){const F=Io(A,B,P,I,M);F&&F.split!==!1&&(W=B)}})),W})(s,N,a,i,c);return((A,R,P,I,M,W,B,F)=>{let H,Z;const le=A.dom;if(P){const _e=P.parentNode;for(let Te=I.parentNode;Te&&Te!==_e;Te=Te.parentNode){let Se=le.clone(Te,!1);for(let Me=0;Me<R.length&&(Se=HD(A,R[Me],F,Se),Se!==null);Me++);Se&&(H&&Se.appendChild(H),Z||(Z=Se),H=Se)}B.mixed&&le.isBlock(P)||(I=le.split(P,I)??I),H&&Z&&(M.parentNode?.insertBefore(H,M),Z.appendChild(M),cn(B)&&KC(A,B,0,H))}return I})(s,d,D,N,N,0,m,i)},b=N=>xt(d,(D=>Ql(s,D,i,N,N))),y=N=>{const D=vn(N.childNodes),A=b(N)||xt(d,(P=>Xd(f,N,P))),R=N.parentNode;if(!A&&te(R)&&Tf(m)&&b(R),m.deep&&D.length)for(let P=0;P<D.length;P++)y(D[P]);K(["underline","line-through","overline"],(P=>{ve(N)&&s.dom.getStyle(N,"text-decoration")===P&&N.parentNode&&By(f,N.parentNode)===P&&Ql(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:P}},void 0,N)}))},v=N=>{const D=f.get(N?"_start":"_end");if(D){let A=D[N?"firstChild":"lastChild"];return(R=>Bo(R)&&ve(R)&&(R.id==="_start"||R.id==="_end"))(A)&&(A=A[N?"firstChild":"lastChild"]),se(A)&&A.data.length===0&&(A=N?D.previousSibling||D.nextSibling:D.nextSibling||D.previousSibling),f.remove(D,!0),A}return null},_=N=>{let D,A,R=Sa(f,N,d,{includeTrailingSpace:N.collapsed});if(m.split){if(R=jd(R),D=QC(s,R,!0),A=QC(s,R),D!==A){if(D=JC(D,!0),A=JC(A,!1),GC(f,D,A)){const I=k.from(D.firstChild).getOr(D);return g(ZC(f,I,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void v(!0)}if(GC(f,A,D)){const I=k.from(A.lastChild).getOr(A);return g(ZC(f,I,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void v(!1)}D=vp(f,D,"span",{id:"_start","data-mce-type":"bookmark"}),A=vp(f,A,"span",{id:"_end","data-mce-type":"bookmark"});const P=f.createRng();P.setStartAfter(D),P.setEndBefore(A),Hl(f,P,(I=>{K(I,(M=>{Bo(M)||Bo(M.parentNode)||g(M)}))})),g(D),g(A),D=v(!0),A=v()}else D=A=g(D);R.startContainer=D.parentNode?D.parentNode:D,R.startOffset=f.nodeIndex(D),R.endContainer=A.parentNode?A.parentNode:A,R.endOffset=f.nodeIndex(A)+1}Hl(f,R,(P=>{K(P,y)}))};if(l){if(Ul(l)){const N=f.createRng();N.setStartBefore(l),N.setEndAfter(l),_(N)}else _(l);A0(s,a,l,i)}else h.isCollapsed()&&cn(m)&&!Ei(s).length?zD(s,a,i,c):(Dy(s,(()=>xf(s,_)),(N=>cn(m)&&up(s,a,i,N))),s.nodeChanged()),((N,D,A)=>{D==="removeformat"?K(qC(N.selection),(R=>{K(jC,(P=>N.dom.setStyle(R,P,""))),n1(N.dom,R)})):zC(N.formatter,D).each((R=>{K(qC(N.selection),(P=>o1(N.dom,P,R,A,null)))}))})(s,a,i),A0(s,a,l,i)})(e,t,n,o,r)},Ql=(e,t,n,o,r)=>Cp(e,t,n,o,r).fold(Nt,(s=>(e.dom.rename(o,s),!0)),jt),s1=["fontsize","subscript","superscript"],$D=["strikethrough",...s1],xp=(e,t)=>xt(s1,(n=>((o,r,s)=>te(o.matchNode(r.dom,s,{},s==="fontsize")))(e,t,n))),qD=(e,t,n,o,r)=>{const s=a=>me(S.fromDom(e.getRoot()),a)||e.isBlock(a.dom);K(t,(a=>{((i,l,c,d,m)=>{const f=Zt(l,i).filter(ot);return((h,g)=>{for(let b=h.length-1;b>=0;b--)if(g(h[b],b))return k.some(b);return k.none()})(f,c).map((h=>{const g=f[h];return{container:g,innerWrapper:d(g),outerWrappers:[...m($n(g)).toArray(),...$t(f.slice(0,h),(b=>c(b)?m(b).toArray():[$n(b)]))]}}))})(s,a,n,o,r).each((({container:i,innerWrapper:l,outerWrappers:c})=>{e.split(i.dom,a.dom),((d,m,f,h)=>{K(ht(d),(g=>{ot(g)&&f(g)&&h(g).isNone()&&sn(g)})),K(ht(d),(g=>ne(m,g))),oe(d,m)})(a,l,n,r),((d,m)=>{if(m.length>0){const f=m[m.length-1];$(d,f);const h=Yt(m.slice(0,m.length-1),((g,b)=>(ne(g,b),b)),f);ne(h,d)}})(a,c)}))}))},a1=(e,t,n)=>{const o=ns(e.selection.getRng());qD(e.dom,n,(r=>te(Io(e,r.dom,t))),(r=>{const s=S.fromTag(Be(r)),a=Io(e,r.dom,t,{});return te(a)&&(i=>!re(i.attributes)&&!re(i.styles))(a)&&Ri(e,s.dom,a),s}),(r=>{const s=Io(e,r.dom,t,{});return te(s)?((a,i,l,c)=>Cp(a,i,{},c).fold((()=>k.some(c)),(d=>k.some(a.dom.rename(c,d))),k.none))(e,s,0,r.dom).map(S.fromDom):k.some(r)})),e.selection.setRng(os(o))},i1=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),l1=(e,t,n,o)=>{const r=n.name;for(let s=0,a=e.length;s<a;s++){const i=e[s];if(i.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=t.length;s<a;s++){const i=t[s],l=i.name;if(l in n.attributes.map){const c=o.attributes[l];c?c.nodes.push(n):o.attributes[l]={filter:i,nodes:[n]}}}},c1=(e,t)=>{const n=(o,r)=>{wt(o,(s=>{const a=vn(s.nodes);K(s.filter.callbacks,(i=>{for(let l=a.length-1;l>=0;l--){const c=a[l];(r?c.attr(s.filter.name)!==void 0:c.name===s.filter.name)&&!kt(c.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,t)}))}))};n(e.nodes,!1),n(e.attributes,!0)},d1=(e,t,n,o={})=>{const r=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&(c=>{let d=c;for(;d=d.walk();)l1(s,a,d,l)})(i),l})(e,t,n);c1(r,o)},wp=(e,t,n,o)=>{if((e.pad_empty_with_br||t.insert)&&n(o)){const r=new An("br",1);t.insert&&r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new An("#text",3)).value=It},u1=(e,t)=>{const n=e?.firstChild;return te(n)&&n===e.lastChild&&n.name===t},Jl=(e,t,n,o)=>o.isEmpty(t,n,(r=>((s,a)=>s.getElementRule(a.name)?.paddEmpty===!0)(e,r))),WD=e=>{let t;for(let n=e;n;n=n.parent){const o=n.attr("contenteditable");if(o==="false")break;o==="true"&&(t=n)}return k.from(t)},Sp=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const o=e.children();for(const r of o)n&&!t.isValidChild(n.name,r.name)&&Sp(r,t,n);e.unwrap()}},m1=(e,t,n,o=Ee)=>{const r=t.getTextBlockElements(),s=t.getNonEmptyElements(),a=t.getWhitespaceElements(),i=E.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,c=d=>d!==n&&!i[d.name];for(let d=0;d<e.length;d++){const m=e[d];let f,h,g;if(!m.parent||l.has(m))continue;if(r[m.name]&&m.parent.name==="li"){let y=m.next;for(;y&&r[y.name];)y.name="li",l.add(y),m.parent.insert(y,m.parent),y=y.next;m.unwrap();continue}const b=[m];for(f=m.parent;f&&!t.isValidChild(f.name,m.name)&&c(f);f=f.parent)b.push(f);if(f&&b.length>1)if(Ep(t,m,f))Sp(m,t);else{b.reverse(),h=b[0].clone(),o(h);let y=h;for(let v=0;v<b.length-1;v++){t.isValidChild(y.name,b[v].name)&&v>0?(g=b[v].clone(),o(g),y.append(g)):g=y;for(let _=b[v].firstChild;_&&_!==b[v+1];){const N=_.next;g.append(_),_=N}y=g}Jl(t,s,a,h)?f.insert(m,b[0],!0):(f.insert(h,b[0],!0),f.insert(m,h)),f=b[0],(Jl(t,s,a,f)||u1(f,"br"))&&f.empty().remove()}else if(m.parent){if(m.name==="li"){let y=m.prev;if(y&&(y.name==="ul"||y.name==="ol")){y.append(m);continue}if(y=m.next,y&&(y.name==="ul"||y.name==="ol")&&y.firstChild){y.insert(m,y.firstChild,!0);continue}const v=new An("ul",1);o(v),m.wrap(v);continue}if(t.isValidChild(m.parent.name,"div")&&t.isValidChild("div",m.name)){const y=new An("div",1);o(y),m.wrap(y)}else Sp(m,t)}}},Ep=(e,t,n=t.parent)=>!(!n||(!e.children[t.name]||e.isValidChild(n.name,t.name))&&(t.name!=="a"||!(o=>{let r=o;for(;r;){if(r.name==="a")return!0;r=r.parent}return!1})(n))&&(!(o=>o.name==="summary")(n)||!i1(t)||n?.firstChild===t&&n?.lastChild===t)),Gd=e=>e.collapsed?e:(t=>{const n=Y.fromRangeStart(t),o=Y.fromRangeEnd(t),r=t.commonAncestorContainer;return Ro(!1,r,o).map((s=>!Rr(n,o,r)&&Rr(n,s,r)?((a,i,l,c)=>{const d=document.createRange();return d.setStart(a,i),d.setEnd(l,c),d})(n.container(),n.offset(),s.container(),s.offset()):t)).getOr(t)})(e),f1=E.explode,p1=()=>{const e={};return{addFilter:(t,n)=>{K(f1(t),(o=>{Oe(e,o)||(e[o]={name:o,callbacks:[]}),e[o].callbacks.push(n)}))},getFilters:()=>Vs(e),removeFilter:(t,n)=>{K(f1(t),(o=>{if(Oe(e,o))if(te(n)){const r=e[o],s=De(r.callbacks,(a=>a!==n));s.length>0?r.callbacks=s:delete e[o]}else delete e[o]}))}}},VD=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),KD=(e,t,n)=>{const o=Pm();t.convert_fonts_to_spans&&((r,s,a)=>{r.addNodeFilter("font",(i=>{K(i,(l=>{const c=s.parse(l.attr("style")),d=l.attr("color"),m=l.attr("face"),f=l.attr("size");d&&(c.color=d),m&&(c["font-family"]=m),f&&ps(f).each((h=>{c["font-size"]=a[h-1]})),l.name="span",l.attr("style",s.serialize(c)),(h=>{K(["color","face","size"],(g=>{h.attr(g,null)}))})(l)}))}))})(e,o,E.explode(t.font_size_legacy_values??"")),((r,s,a)=>{r.addNodeFilter("strike",(i=>{const l=s.type!=="html4";K(i,(c=>{if(l)c.name="s";else{const d=a.parse(c.attr("style"));d["text-decoration"]="line-through",c.name="span",c.attr("style",a.serialize(d))}}))}))})(e,n,o)},kp=e=>{const[t,...n]=e.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(r){const s=r[2]===";base64",a=(l=>{try{return decodeURIComponent(l)}catch{return l}})(o),i=s?(l=>{const c=/([a-z0-9+\/=\s]+)/i.exec(l);return c?c[1]:""})(a):a;return k.some({type:r[1],data:i,base64Encoded:s})}return k.none()},g1=(e,t,n=!0)=>{let o=t;if(n)try{o=atob(t)}catch{return k.none()}const r=new Uint8Array(o.length);for(let s=0;s<r.length;s++)r[s]=o.charCodeAt(s);return k.some(new Blob([r],{type:e}))},h1=e=>new Promise(((t,n)=>{const o=new FileReader;o.onloadend=()=>{t(o.result)},o.onerror=()=>{n(o.error?.message)},o.readAsDataURL(e)}));let XD=0;const b1=(e,t,n)=>kp(e).bind((({data:o,type:r,base64Encoded:s})=>{if(t&&!s)return k.none();{const a=s?o:btoa(o);return n(a,r)}})),y1=(e,t,n)=>{const o=e.create("blobid"+XD++,t,n);return e.add(o),o},v1=(e,t,n=!1)=>b1(t,n,((o,r)=>k.from(e.getByData(o,r)).orThunk((()=>g1(r,o).map((s=>y1(e,s,o))))))),YD=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,GD=e=>k.from(e.match(YD)).bind((t=>qs(t,1))).map((t=>Gt(t,"www.")?t.substring(4):t)),C1=(e,t)=>{k.from(e.attr("src")).bind(GD).forall((n=>!we(t,n)))&&e.attr("sandbox","")},_p=(e,t)=>Gt(e,`${t}/`),{entries:x1,setPrototypeOf:w1,isFrozen:QD,getPrototypeOf:JD,getOwnPropertyDescriptor:ZD}=Object;let{freeze:io,seal:Qo,create:S1}=Object,{apply:Np,construct:Ap}=typeof Reflect<"u"&&Reflect;io||(io=function(e){return e}),Qo||(Qo=function(e){return e}),Np||(Np=function(e,t,n){return e.apply(t,n)}),Ap||(Ap=function(e,t){return new e(...t)});const Qd=co(Array.prototype.forEach),eR=co(Array.prototype.lastIndexOf),E1=co(Array.prototype.pop),Zl=co(Array.prototype.push),tR=co(Array.prototype.splice),Jd=co(String.prototype.toLowerCase),Tp=co(String.prototype.toString),k1=co(String.prototype.match),ec=co(String.prototype.replace),nR=co(String.prototype.indexOf),oR=co(String.prototype.trim),pr=co(Object.prototype.hasOwnProperty),lo=co(RegExp.prototype.test),tc=(_1=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ap(_1,t)});var _1;function co(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return Np(e,t,o)}}function Tt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Jd;w1&&w1(e,null);let o=t.length;for(;o--;){let r=t[o];if(typeof r=="string"){const s=n(r);s!==r&&(QD(t)||(t[o]=s),r=s)}e[r]=!0}return e}function rR(e){for(let t=0;t<e.length;t++)pr(e,t)||(e[t]=null);return e}function rs(e){const t=S1(null);for(const[n,o]of x1(e))pr(e,n)&&(Array.isArray(o)?t[n]=rR(o):o&&typeof o=="object"&&o.constructor===Object?t[n]=rs(o):t[n]=o);return t}function nc(e,t){for(;e!==null;){const n=ZD(e,t);if(n){if(n.get)return co(n.get);if(typeof n.value=="function")return co(n.value)}e=JD(e)}return function(){return null}}const N1=io(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Dp=io(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Rp=io(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),sR=io(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Op=io(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),aR=io(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),A1=io(["#text"]),T1=io(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Bp=io(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),D1=io(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Zd=io(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),iR=Qo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),lR=Qo(/<%[\w\W]*|[\w\W]*%>/gm),cR=Qo(/\$\{[\w\W]*/gm),dR=Qo(/^data-[\-\w.\u00B7-\uFFFF]+$/),uR=Qo(/^aria-[\-\w]+$/),R1=Qo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),mR=Qo(/^(?:\w+script|data):/i),fR=Qo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),O1=Qo(/^html$/i),pR=Qo(/^[a-z][.\w]*(-[.\w]+)+$/i);var B1=Object.freeze({__proto__:null,ARIA_ATTR:uR,ATTR_WHITESPACE:fR,CUSTOM_ELEMENT:pR,DATA_ATTR:dR,DOCTYPE_NAME:O1,ERB_EXPR:lR,IS_ALLOWED_URI:R1,IS_SCRIPT_OR_DATA:mR,MUSTACHE_EXPR:iR,TMPLIT_EXPR:cR});const gR=function(){return typeof window>"u"?null:window};var Pp=(function e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gR();const n=q=>e(q);if(n.version="3.2.6",n.removed=[],!t||!t.document||t.document.nodeType!==9||!t.Element)return n.isSupported=!1,n;let{document:o}=t;const r=o,s=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:i,Node:l,Element:c,NodeFilter:d,NamedNodeMap:m=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:h,trustedTypes:g}=t,b=c.prototype,y=nc(b,"cloneNode"),v=nc(b,"remove"),_=nc(b,"nextSibling"),N=nc(b,"childNodes"),D=nc(b,"parentNode");if(typeof i=="function"){const q=o.createElement("template");q.content&&q.content.ownerDocument&&(o=q.content.ownerDocument)}let A,R="";const{implementation:P,createNodeIterator:I,createDocumentFragment:M,getElementsByTagName:W}=o,{importNode:B}=r;let F={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported=typeof x1=="function"&&typeof D=="function"&&P&&P.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:H,ERB_EXPR:Z,TMPLIT_EXPR:le,DATA_ATTR:_e,ARIA_ATTR:Te,IS_SCRIPT_OR_DATA:Se,ATTR_WHITESPACE:Me,CUSTOM_ELEMENT:yt}=B1;let{IS_ALLOWED_URI:he}=B1,Ne=null;const j=Tt({},[...N1,...Dp,...Rp,...Op,...A1]);let z=null;const G=Tt({},[...T1,...Bp,...D1,...Zd]);let X=Object.seal(S1(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),fe=null,ue=null,Ae=!0,rt=!0,st=!1,Ft=!0,dn=!1,uo=!0,Wn=!1,Ce=!1,tt=!1,dt=!1,Ie=!1,Je=!1,Ct=!0,ye=!1,Fe=!0,Dt=!1,Kt={},Vn=null;const Hr=Tt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let br=null;const Fn=Tt({},["audio","video","img","source","image","track"]);let xo=null;const bn=Tt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),is="http://www.w3.org/1998/Math/MathML",js="http://www.w3.org/2000/svg",mo="http://www.w3.org/1999/xhtml";let $r=mo,Sc=!1,ls=null;const zs=Tt({},[is,js,mo],Tp);let Ua=Tt({},["mi","mo","mn","ms","mtext"]),fo=Tt({},["annotation-xml"]);const Yi=Tt({},["title","style","font","a","script"]);let yr=null;const Zu=["application/xhtml+xml","text/html"];let jn=null,Gi=null;const AL=o.createElement("form"),V_=function(q){return q instanceof RegExp||q instanceof Function},jh=function(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!Gi||Gi!==q){if(q&&typeof q=="object"||(q={}),q=rs(q),yr=Zu.indexOf(q.PARSER_MEDIA_TYPE)===-1?"text/html":q.PARSER_MEDIA_TYPE,jn=yr==="application/xhtml+xml"?Tp:Jd,Ne=pr(q,"ALLOWED_TAGS")?Tt({},q.ALLOWED_TAGS,jn):j,z=pr(q,"ALLOWED_ATTR")?Tt({},q.ALLOWED_ATTR,jn):G,ls=pr(q,"ALLOWED_NAMESPACES")?Tt({},q.ALLOWED_NAMESPACES,Tp):zs,xo=pr(q,"ADD_URI_SAFE_ATTR")?Tt(rs(bn),q.ADD_URI_SAFE_ATTR,jn):bn,br=pr(q,"ADD_DATA_URI_TAGS")?Tt(rs(Fn),q.ADD_DATA_URI_TAGS,jn):Fn,Vn=pr(q,"FORBID_CONTENTS")?Tt({},q.FORBID_CONTENTS,jn):Hr,fe=pr(q,"FORBID_TAGS")?Tt({},q.FORBID_TAGS,jn):rs({}),ue=pr(q,"FORBID_ATTR")?Tt({},q.FORBID_ATTR,jn):rs({}),Kt=!!pr(q,"USE_PROFILES")&&q.USE_PROFILES,Ae=q.ALLOW_ARIA_ATTR!==!1,rt=q.ALLOW_DATA_ATTR!==!1,st=q.ALLOW_UNKNOWN_PROTOCOLS||!1,Ft=q.ALLOW_SELF_CLOSE_IN_ATTR!==!1,dn=q.SAFE_FOR_TEMPLATES||!1,uo=q.SAFE_FOR_XML!==!1,Wn=q.WHOLE_DOCUMENT||!1,dt=q.RETURN_DOM||!1,Ie=q.RETURN_DOM_FRAGMENT||!1,Je=q.RETURN_TRUSTED_TYPE||!1,tt=q.FORCE_BODY||!1,Ct=q.SANITIZE_DOM!==!1,ye=q.SANITIZE_NAMED_PROPS||!1,Fe=q.KEEP_CONTENT!==!1,Dt=q.IN_PLACE||!1,he=q.ALLOWED_URI_REGEXP||R1,$r=q.NAMESPACE||mo,Ua=q.MATHML_TEXT_INTEGRATION_POINTS||Ua,fo=q.HTML_INTEGRATION_POINTS||fo,X=q.CUSTOM_ELEMENT_HANDLING||{},q.CUSTOM_ELEMENT_HANDLING&&V_(q.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(X.tagNameCheck=q.CUSTOM_ELEMENT_HANDLING.tagNameCheck),q.CUSTOM_ELEMENT_HANDLING&&V_(q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(X.attributeNameCheck=q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),q.CUSTOM_ELEMENT_HANDLING&&typeof q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(X.allowCustomizedBuiltInElements=q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),dn&&(rt=!1),Ie&&(dt=!0),Kt&&(Ne=Tt({},A1),z=[],Kt.html===!0&&(Tt(Ne,N1),Tt(z,T1)),Kt.svg===!0&&(Tt(Ne,Dp),Tt(z,Bp),Tt(z,Zd)),Kt.svgFilters===!0&&(Tt(Ne,Rp),Tt(z,Bp),Tt(z,Zd)),Kt.mathMl===!0&&(Tt(Ne,Op),Tt(z,D1),Tt(z,Zd))),q.ADD_TAGS&&(Ne===j&&(Ne=rs(Ne)),Tt(Ne,q.ADD_TAGS,jn)),q.ADD_ATTR&&(z===G&&(z=rs(z)),Tt(z,q.ADD_ATTR,jn)),q.ADD_URI_SAFE_ATTR&&Tt(xo,q.ADD_URI_SAFE_ATTR,jn),q.FORBID_CONTENTS&&(Vn===Hr&&(Vn=rs(Vn)),Tt(Vn,q.FORBID_CONTENTS,jn)),Fe&&(Ne["#text"]=!0),Wn&&Tt(Ne,["html","head","body"]),Ne.table&&(Tt(Ne,["tbody"]),delete fe.tbody),q.TRUSTED_TYPES_POLICY){if(typeof q.TRUSTED_TYPES_POLICY.createHTML!="function")throw tc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof q.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw tc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');A=q.TRUSTED_TYPES_POLICY,R=A.createHTML("")}else A===void 0&&(A=(function(Ge,Le){if(typeof Ge!="object"||typeof Ge.createPolicy!="function")return null;let Rt=null;const Mt="data-tt-policy-suffix";Le&&Le.hasAttribute(Mt)&&(Rt=Le.getAttribute(Mt));const _t="dompurify"+(Rt?"#"+Rt:"");try{return Ge.createPolicy(_t,{createHTML:Tn=>Tn,createScriptURL:Tn=>Tn})}catch{return console.warn("TrustedTypes policy "+_t+" could not be created."),null}})(g,s)),A!==null&&typeof R=="string"&&(R=A.createHTML(""));io&&io(q),Gi=q}},K_=Tt({},[...Dp,...Rp,...sR]),X_=Tt({},[...Op,...aR]),qr=function(q){Zl(n.removed,{element:q});try{D(q).removeChild(q)}catch{v(q)}},Qi=function(q,Ge){try{Zl(n.removed,{attribute:Ge.getAttributeNode(q),from:Ge})}catch{Zl(n.removed,{attribute:null,from:Ge})}if(Ge.removeAttribute(q),q==="is")if(dt||Ie)try{qr(Ge)}catch{}else try{Ge.setAttribute(q,"")}catch{}},Y_=function(q){let Ge=null,Le=null;if(tt)q="<remove></remove>"+q;else{const _t=k1(q,/^[\r\n\t ]+/);Le=_t&&_t[0]}yr==="application/xhtml+xml"&&$r===mo&&(q='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+q+"</body></html>");const Rt=A?A.createHTML(q):q;if($r===mo)try{Ge=new h().parseFromString(Rt,yr)}catch{}if(!Ge||!Ge.documentElement){Ge=P.createDocument($r,"template",null);try{Ge.documentElement.innerHTML=Sc?R:Rt}catch{}}const Mt=Ge.body||Ge.documentElement;return q&&Le&&Mt.insertBefore(o.createTextNode(Le),Mt.childNodes[0]||null),$r===mo?W.call(Ge,Wn?"html":"body")[0]:Wn?Ge.documentElement:Mt},G_=function(q){return I.call(q.ownerDocument||q,q,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},zh=function(q){return q instanceof f&&(typeof q.nodeName!="string"||typeof q.textContent!="string"||typeof q.removeChild!="function"||!(q.attributes instanceof m)||typeof q.removeAttribute!="function"||typeof q.setAttribute!="function"||typeof q.namespaceURI!="string"||typeof q.insertBefore!="function"||typeof q.hasChildNodes!="function")},Q_=function(q){return typeof l=="function"&&q instanceof l};function cs(q,Ge,Le){Qd(q,(Rt=>{Rt.call(n,Ge,Le,Gi)}))}const J_=function(q){let Ge=null;if(cs(F.beforeSanitizeElements,q,null),zh(q))return qr(q),!0;const Le=jn(q.nodeName);if(cs(F.uponSanitizeElement,q,{tagName:Le,allowedTags:Ne}),uo&&q.hasChildNodes()&&!Q_(q.firstElementChild)&&lo(/<[/\w!]/g,q.innerHTML)&&lo(/<[/\w!]/g,q.textContent)||q.nodeType===7||uo&&q.nodeType===8&&lo(/<[/\w]/g,q.data))return qr(q),!0;if(!Ne[Le]||fe[Le]){if(!fe[Le]&&eN(Le)&&(X.tagNameCheck instanceof RegExp&&lo(X.tagNameCheck,Le)||X.tagNameCheck instanceof Function&&X.tagNameCheck(Le)))return!1;if(Fe&&!Vn[Le]){const Rt=D(q)||q.parentNode,Mt=N(q)||q.childNodes;if(Mt&&Rt)for(let _t=Mt.length-1;_t>=0;--_t){const Tn=y(Mt[_t],!0);Tn.__removalCount=(q.__removalCount||0)+1,Rt.insertBefore(Tn,_(q))}}return qr(q),!0}return q instanceof c&&!(function(Rt){let Mt=D(Rt);Mt&&Mt.tagName||(Mt={namespaceURI:$r,tagName:"template"});const _t=Jd(Rt.tagName),Tn=Jd(Mt.tagName);return!!ls[Rt.namespaceURI]&&(Rt.namespaceURI===js?Mt.namespaceURI===mo?_t==="svg":Mt.namespaceURI===is?_t==="svg"&&(Tn==="annotation-xml"||Ua[Tn]):!!K_[_t]:Rt.namespaceURI===is?Mt.namespaceURI===mo?_t==="math":Mt.namespaceURI===js?_t==="math"&&fo[Tn]:!!X_[_t]:Rt.namespaceURI===mo?!(Mt.namespaceURI===js&&!fo[Tn])&&!(Mt.namespaceURI===is&&!Ua[Tn])&&!X_[_t]&&(Yi[_t]||!K_[_t]):!(yr!=="application/xhtml+xml"||!ls[Rt.namespaceURI]))})(q)?(qr(q),!0):Le!=="noscript"&&Le!=="noembed"&&Le!=="noframes"||!lo(/<\/no(script|embed|frames)/i,q.innerHTML)?(dn&&q.nodeType===3&&(Ge=q.textContent,Qd([H,Z,le],(Rt=>{Ge=ec(Ge,Rt," ")})),q.textContent!==Ge&&(Zl(n.removed,{element:q.cloneNode()}),q.textContent=Ge)),cs(F.afterSanitizeElements,q,null),!1):(qr(q),!0)},Z_=function(q,Ge,Le){if(Ct&&(Ge==="id"||Ge==="name")&&(Le in o||Le in AL))return!1;if(!(rt&&!ue[Ge]&&lo(_e,Ge))){if(!(Ae&&lo(Te,Ge))){if(!z[Ge]||ue[Ge]){if(!(eN(q)&&(X.tagNameCheck instanceof RegExp&&lo(X.tagNameCheck,q)||X.tagNameCheck instanceof Function&&X.tagNameCheck(q))&&(X.attributeNameCheck instanceof RegExp&&lo(X.attributeNameCheck,Ge)||X.attributeNameCheck instanceof Function&&X.attributeNameCheck(Ge))||Ge==="is"&&X.allowCustomizedBuiltInElements&&(X.tagNameCheck instanceof RegExp&&lo(X.tagNameCheck,Le)||X.tagNameCheck instanceof Function&&X.tagNameCheck(Le))))return!1}else if(!xo[Ge]){if(!lo(he,ec(Le,Me,""))){if((Ge!=="src"&&Ge!=="xlink:href"&&Ge!=="href"||q==="script"||nR(Le,"data:")!==0||!br[q])&&!(st&&!lo(Se,ec(Le,Me,"")))){if(Le)return!1}}}}}return!0},eN=function(q){return q!=="annotation-xml"&&k1(q,yt)},tN=function(q){cs(F.beforeSanitizeAttributes,q,null);const{attributes:Ge}=q;if(!Ge||zh(q))return;const Le={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z,forceKeepAttr:void 0};let Rt=Ge.length;for(;Rt--;){const Mt=Ge[Rt],{name:_t,namespaceURI:Tn,value:Us}=Mt,Wr=jn(_t),Uh=Us;let Zn=_t==="value"?Uh:oR(Uh);if(Le.attrName=Wr,Le.attrValue=Zn,Le.keepAttr=!0,Le.forceKeepAttr=void 0,cs(F.uponSanitizeAttribute,q,Le),Zn=Le.attrValue,!ye||Wr!=="id"&&Wr!=="name"||(Qi(_t,q),Zn="user-content-"+Zn),uo&&lo(/((--!?|])>)|<\/(style|title)/i,Zn)){Qi(_t,q);continue}if(Le.forceKeepAttr)continue;if(!Le.keepAttr){Qi(_t,q);continue}if(!Ft&&lo(/\/>/i,Zn)){Qi(_t,q);continue}dn&&Qd([H,Z,le],(oN=>{Zn=ec(Zn,oN," ")}));const nN=jn(q.nodeName);if(Z_(nN,Wr,Zn)){if(A&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!Tn)switch(g.getAttributeType(nN,Wr)){case"TrustedHTML":Zn=A.createHTML(Zn);break;case"TrustedScriptURL":Zn=A.createScriptURL(Zn)}if(Zn!==Uh)try{Tn?q.setAttributeNS(Tn,_t,Zn):q.setAttribute(_t,Zn),zh(q)?qr(q):E1(n.removed)}catch{Qi(_t,q)}}else Qi(_t,q)}cs(F.afterSanitizeAttributes,q,null)},TL=function q(Ge){let Le=null;const Rt=G_(Ge);for(cs(F.beforeSanitizeShadowDOM,Ge,null);Le=Rt.nextNode();)cs(F.uponSanitizeShadowNode,Le,null),J_(Le),tN(Le),Le.content instanceof a&&q(Le.content);cs(F.afterSanitizeShadowDOM,Ge,null)};return n.sanitize=function(q){let Ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Le=null,Rt=null,Mt=null,_t=null;if(Sc=!q,Sc&&(q="<!-->"),typeof q!="string"&&!Q_(q)){if(typeof q.toString!="function")throw tc("toString is not a function");if(typeof(q=q.toString())!="string")throw tc("dirty is not a string, aborting")}if(!n.isSupported)return q;if(Ce||jh(Ge),n.removed=[],typeof q=="string"&&(Dt=!1),Dt){if(q.nodeName){const Wr=jn(q.nodeName);if(!Ne[Wr]||fe[Wr])throw tc("root node is forbidden and cannot be sanitized in-place")}}else if(q instanceof l)Le=Y_("<!---->"),Rt=Le.ownerDocument.importNode(q,!0),Rt.nodeType===1&&Rt.nodeName==="BODY"||Rt.nodeName==="HTML"?Le=Rt:Le.appendChild(Rt);else{if(!dt&&!dn&&!Wn&&q.indexOf("<")===-1)return A&&Je?A.createHTML(q):q;if(Le=Y_(q),!Le)return dt?null:Je?R:""}Le&&tt&&qr(Le.firstChild);const Tn=G_(Dt?q:Le);for(;Mt=Tn.nextNode();)J_(Mt),tN(Mt),Mt.content instanceof a&&TL(Mt.content);if(Dt)return q;if(dt){if(Ie)for(_t=M.call(Le.ownerDocument);Le.firstChild;)_t.appendChild(Le.firstChild);else _t=Le;return(z.shadowroot||z.shadowrootmode)&&(_t=B.call(r,_t,!0)),_t}let Us=Wn?Le.outerHTML:Le.innerHTML;return Wn&&Ne["!doctype"]&&Le.ownerDocument&&Le.ownerDocument.doctype&&Le.ownerDocument.doctype.name&&lo(O1,Le.ownerDocument.doctype.name)&&(Us="<!DOCTYPE "+Le.ownerDocument.doctype.name+`>
`+Us),dn&&Qd([H,Z,le],(Wr=>{Us=ec(Us,Wr," ")})),A&&Je?A.createHTML(Us):Us},n.setConfig=function(){jh(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),Ce=!0},n.clearConfig=function(){Gi=null,Ce=!1},n.isValidAttribute=function(q,Ge,Le){Gi||jh({});const Rt=jn(q),Mt=jn(Ge);return Z_(Rt,Mt,Le)},n.addHook=function(q,Ge){typeof Ge=="function"&&Zl(F[q],Ge)},n.removeHook=function(q,Ge){if(Ge!==void 0){const Le=eR(F[q],Ge);return Le===-1?void 0:tR(F[q],Le,1)[0]}return E1(F[q])},n.removeHooks=function(q){F[q]=[]},n.removeAllHooks=function(){F={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n})();const P1=E.each,hR=E.trim,bR=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],yR={ftp:21,http:80,https:443,mailto:25},vR=["img","video"],L1=(e,t,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch{return unescape(r)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!e.allow_html_data_urls&&(/^data:image\//i.test(o)?((r,s)=>te(r)?!r:!te(s)||!we(vR,s))(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(o):/^data:/i.test(o)))};class Jo{static parseDataUri(t){let n;const o=decodeURIComponent(t).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(t,n,o={}){if(o.allow_script_urls)return!0;{const r=fa.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!L1(o,r,n)}}static getDocumentBaseUrl(t){let n;return n=t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?t.href??"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),n}source;protocol;authority;userInfo;user;password;host;port;relative;path="";directory="";file;query;anchor;settings;constructor(t,n={}){t=hR(t),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(r.source=t);const s=t.indexOf("//")===0;if(t.indexOf("/")!==0||s||(t=(o&&o.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const i=o?o.path:new Jo(document.location.href).directory;if(o?.protocol==="")t="//mce_host"+r.toAbsPath(i,t);else{const l=/([^#?]*)([#?]?.*)/.exec(t);l&&(t=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(i,l[1])+l[2])}}t=t.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);a&&P1(bR,((i,l)=>{let c=a[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),r[i]=c})),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||r.host!=="mce_host"||(r.port=o.port),r.host&&r.host!=="mce_host"||(r.host=o.host),r.source=""),s&&(r.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const n=new Jo(t,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||o.charAt(o.length-1)==="/"&&o.substr(0,o.length-1)===r)return o;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(t,n){const o=new Jo(t,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?yR[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let o,r,s=0,a="";const i=t.substring(0,t.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length){for(o=0,r=i.length;o<r;o++)if(o>=l.length||i[o]!==l[o]){s=o+1;break}}if(i.length<l.length){for(o=0,r=l.length;o<r;o++)if(o>=i.length||i[o]!==l[o]){s=o+1;break}}if(s===1)return n;for(o=0,r=i.length-(s-1);o<r;o++)a+="../";for(o=s-1,r=l.length;o<r;o++)a+=o!==s-1?"/"+l[o]:l[o];return a}toAbsPath(t,n){let o=0;const r=/\/$/.test(n)?"/":"",s=t.split("/"),a=n.split("/"),i=[];P1(s,(m=>{m&&i.push(m)}));const l=[];for(let m=a.length-1;m>=0;m--)a[m].length!==0&&a[m]!=="."&&(a[m]!==".."?o>0?o--:l.push(a[m]):o++);const c=i.length-o;let d;return d=c<=0?Eo(l).join("/"):i.slice(0,c).join("/")+"/"+Eo(l).join("/"),d.indexOf("/")!==0&&(d="/"+d),r&&d.lastIndexOf("/")!==d.length-1&&(d+=r),d}getURI(t=!1){let n;return this.source&&!t||(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const CR=E.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Lp="data-mce-type";let M1=0;const I1=(e,t,n,o,r)=>{const s=t.validate,a=n.getSpecialElements();e.nodeType===8&&(!t.allow_conditional_comments&&/^\[if/i.test(e.nodeValue??"")&&(e.nodeValue=" "+e.nodeValue),t.sanitize&&t.allow_html_in_comments&&xe(e.nodeValue)&&(e.nodeValue=(f=>f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))(e.nodeValue)));const i=r?.tagName??e.nodeName.toLowerCase();if(o!=="html"&&n.isValid(o))return void(te(r)&&(r.allowedTags[i]=!0));if(e.nodeType!==1||i==="body")return;const l=S.fromDom(e),c=ct(l,Lp),d=et(l,"data-mce-bogus");if(!c&&xe(d))return void(d==="all"?ft(l):sn(l));const m=n.getElementRule(i);if(!s||m){if(te(r)&&(r.allowedTags[i]=!0),s&&m&&!c){if(K(m.attributesForced??[],(f=>{lt(l,f.name,f.value==="{$uid}"?"mce_"+M1++:f.value)})),K(m.attributesDefault??[],(f=>{ct(l,f.name)||lt(l,f.name,f.value==="{$uid}"?"mce_"+M1++:f.value)})),m.attributesRequired&&!xt(m.attributesRequired,(f=>ct(l,f)))||m.removeEmptyAttrs&&kn(l))return void sn(l);m.outputName&&m.outputName!==i&&Qr(l,m.outputName)}}else Oe(a,i)?ft(l):sn(l)},F1=(e,t,n,o,r,s)=>n!=="html"&&!da(o)||!(r in CR&&L1(e,s,o))&&(!e.validate||t.isValid(o,r)||Gt(r,"data-")||Gt(r,"aria-")),j1=(e,t)=>e.hasAttribute(Lp)&&(t==="id"||t==="class"||t==="style"),z1=(e,t,n)=>e in t.getBoolAttrs()&&!Oe(t.getCustomElements(),n.toLowerCase()),xR=(e,t,n,o)=>{const{attributes:r}=e;for(let s=r.length-1;s>=0;s--){const a=r[s],i=a.name,l=a.value;F1(t,n,o,e.tagName.toLowerCase(),i,l)||j1(e,i)?z1(i,n,e.nodeName)&&e.setAttribute(i,i):e.removeAttribute(i)}},wR=(e,t,n)=>{const o=Pp();return o.addHook("uponSanitizeElement",((r,s)=>{I1(r,e,t,n.track(r),s)})),o.addHook("uponSanitizeAttribute",((r,s)=>{((a,i,l,c,d)=>{const m=a.tagName.toLowerCase(),{attrName:f,attrValue:h}=d;d.keepAttr=F1(i,l,c,m,f,h),d.keepAttr?(d.allowedAttributes[f]=!0,z1(f,l,a.nodeName)&&(d.attrValue=f),i.allow_svg_data_urls&&Gt(h,"data:image/svg+xml")&&(d.forceKeepAttr=!0)):j1(a,f)&&(d.forceKeepAttr=!0)})(r,e,t,n.current(),s)})),o},SR=(e,t)=>{const n=Pp(),o=t.allow_mathml_annotation_encodings,r=re(o)&&o.length>0;n.addHook("uponSanitizeElement",((s,a)=>{const i=a.tagName??s.nodeName.toLowerCase();((l,c)=>r&&c==="semantics"?k.some(!0):c==="annotation"?k.some(ve(l)&&(d=>{const m=d.getAttribute("encoding");return r&&xe(m)&&we(o,m)})(l)):re(t.extended_mathml_elements)&&t.extended_mathml_elements.includes(c)?k.from(!0):k.none())(s,i).each((l=>{a.allowedTags[i]=l,!l&&t.sanitize&&ve(s)&&s.remove()}))})),n.addHook("uponSanitizeAttribute",((s,a)=>{re(t.extended_mathml_attributes)&&t.extended_mathml_attributes.includes(a.attrName)&&(a.forceKeepAttr=!0)})),n.sanitize(e,{IN_PLACE:!0,USE_PROFILES:{mathMl:!0}})},ER=e=>t=>{const n=mb(t);if(n==="svg")(o=>{const r=["type","href","role","arcrole","title","show","actuate","label","from","to"].map((a=>`xlink:${a}`)),s={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:r};Pp().sanitize(o,s)})(t);else{if(n!=="math")throw new Error("Not a namespace element");SR(t,e)}},U1=["script","style","template","param","meta","title","link"],H1=E.makeMap,$1=E.extend,q1=(e,t,n,o,r)=>{const s=e.name,a=s in n&&s!=="title"&&s!=="textarea"&&s!=="noscript",i=t.childNodes;for(let l=0,c=i.length;l<c;l++){const d=i[l],m=new An(d.nodeName.toLowerCase(),d.nodeType);if(ve(d)){const f=d.attributes;for(let h=0,g=f.length;h<g;h++){const b=f[h];m.attr(b.name,b.value)}da(m.name)&&(o(d),m.value=d.innerHTML)}else se(d)?(m.value=d.data,a&&(m.raw=!0)):xs(d)?m.value=r?VD(d.data):d.data:(fN(d)||pN(d))&&(m.value=d.data);if(lb(d)){const f=An.create("#text");f.value=d.innerHTML,f.raw=!0,m.append(f)}else da(m.name)||q1(m,d,n,o,r);e.append(m)}},W1=' xmlns="http://www.w3.org/1999/xhtml"',Oi=(e={},t=ws())=>{const n=p1(),o=p1(),r={validate:!0,root_name:"body",sanitize:!0,allow_html_in_comments:!1,...e},s=new DOMParser,a=((b,y)=>{const v=(()=>{const _=$o(),N=()=>_.get().map(mb).getOr("html");return{track:D=>(Cm(D)?_.set(D):_.get().exists((A=>!A.contains(D)))&&_.clear(),N()),current:N,reset:()=>{_.clear()}}})();if(b.sanitize){const _=wR(b,y,v);return{sanitizeHtmlElement:(D,A)=>{_.sanitize(D,((R,P)=>{const I={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body","html"],ALLOWED_ATTR:[]};return I.PARSER_MEDIA_TYPE=P,R.allow_script_urls?I.ALLOWED_URI_REGEXP=/.*/:R.allow_html_data_urls&&(I.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),I})(b,A)),_.removed=[],v.reset()},sanitizeNamespaceElement:ER(b)}}return{sanitizeHtmlElement:(_,N)=>{const D=document.createNodeIterator(_,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let A;for(;A=D.nextNode();){const R=v.track(A);I1(A,b,y,R),ve(A)&&xR(A,b,y,R)}v.reset()},sanitizeNamespaceElement:Ee}})(r,t),i=n.addFilter,l=n.getFilters,c=n.removeFilter,d=o.addFilter,m=o.getFilters,f=o.removeFilter,h=(b,y)=>{const v=xe(y.attr(Lp)),_=y.type===1&&!Oe(b,y.name)&&!_m(t,y)&&!da(y.name);return y.type===3||_&&!v},g={schema:t,addAttributeFilter:d,getAttributeFilters:m,removeAttributeFilter:f,addNodeFilter:i,getNodeFilters:l,removeNodeFilter:c,parse:(b,y={})=>{const v=r.validate,_=(y.context??r.root_name)==="#document",N=y.context??(_?"html":r.root_name),D=((H,Z,le="html",_e=!1)=>{const Te=le==="xhtml",Se=Te?"application/xhtml+xml":"text/html",Me=Oe(t.getSpecialElements(),Z.toLowerCase()),yt=Me?`<${Z}>${H}</${Z}>`:H,he=s.parseFromString(/^[\s]*<head/i.test(H)||/^[\s]*<html/i.test(H)||/^[\s]*<!DOCTYPE/i.test(H)?`<html${Te?W1:""}>${yt}</html>`:Te?`<html${W1}><head></head><body>${yt}</body></html>`:`<body>${yt}</body>`,Se),Ne=_e?he.documentElement:he.body;return a.sanitizeHtmlElement(Ne,Se),Me?Ne.firstChild:Ne})(b,N,y.format,_);wm(t,D);const A=new An(N,11);q1(A,D,t.getSpecialElements(),a.sanitizeNamespaceElement,r.sanitize&&r.allow_html_in_comments),D.innerHTML="";const[R,P]=((H,Z,le,_e)=>{const Te=le.validate,Se=Z.getNonEmptyElements(),Me=Z.getWhitespaceElements(),yt=$1(H1(U1),Z.getBlockElements()),he=Ob(Z),Ne=/[ \t\r\n]+/g,j=/^[ \t\r\n]+/,z=/[ \t\r\n]+$/,G=ue=>{let Ae=ue.parent;for(;te(Ae);){if(Ae.name in Me)return!0;Ae=Ae.parent}return!1},X=ue=>ue.name in yt||_m(Z,ue)||da(ue.name)&&ue.parent===H,fe=(ue,Ae)=>{const rt=Ae?ue.prev:ue.next;return!te(rt)&&!kt(ue.parent)&&X(ue.parent)&&(ue.parent!==H||_e.isRootContent===!0)};return[ue=>{if(ue.type===3&&!G(ue)){let Ae=ue.value??"";Ae=Ae.replace(Ne," "),(((rt,st)=>te(rt)&&(st(rt)||rt.name==="br"))(ue.prev,X)||fe(ue,!0))&&(Ae=Ae.replace(j,"")),Ae.length===0||Ae===" "&&ue.prev&&ue.prev.type===8&&ue.next&&ue.next.type===8?ue.remove():ue.value=Ae}},ue=>{if(ue.type===1){const Ae=Z.getElementRule(ue.name);if(Te&&Ae){const rt=Jl(Z,Se,Me,ue);Ae.paddInEmptyBlock&&rt&&(st=>{let Ft=st;for(;te(Ft);){if(Ft.name in he)return Jl(Z,Se,Me,Ft);Ft=Ft.parent}return!1})(ue)?wp(le,_e,X,ue):Ae.removeEmpty&&rt?X(ue)?ue.remove():ue.unwrap():Ae.paddEmpty&&(rt||(st=>u1(st,"#text")&&st?.firstChild?.value===It)(ue))&&wp(le,_e,X,ue)}}else if(ue.type===3&&!G(ue)){let Ae=ue.value??"";(ue.next&&X(ue.next)||fe(ue,!1))&&(Ae=Ae.replace(z,"")),Ae.length===0?ue.remove():ue.value=Ae}}]})(A,t,r,y),I=[],M=v?H=>((Z,le)=>{Ep(t,Z)&&le.push(Z)})(H,I):Ee,W={nodes:{},attributes:{}},B=H=>l1(l(),m(),H,W);((H,Z,le)=>{const _e=[];for(let Te=H,Se=Te;Te;Se=Te,Te=Te.walk()){const Me=Te;K(Z,(yt=>yt(Me))),kt(Me.parent)&&Me!==H?Te=Se:_e.push(Me)}for(let Te=_e.length-1;Te>=0;Te--){const Se=_e[Te];K(le,(Me=>Me(Se)))}})(A,[R,B],[P,M]),I.reverse(),v&&I.length>0&&(y.context?y.invalid=!0:m1(I,t,A,B));const F=((H,Z)=>{const le=Z.forced_root_block??H.forced_root_block;return le===!1?"":le===!0?"p":le})(r,y);return F&&(A.name==="body"||y.isRootContent)&&((H,Z)=>{const le=$1(H1(U1),t.getBlockElements()),_e=/^[ \t\r\n]+/,Te=/[ \t\r\n]+$/;let Se=H.firstChild,Me=null;const yt=he=>{he&&(Se=he.firstChild,Se&&Se.type===3&&(Se.value=Se.value?.replace(_e,"")),Se=he.lastChild,Se&&Se.type===3&&(Se.value=Se.value?.replace(Te,"")))};if(t.isValidChild(H.name,Z.toLowerCase())){for(;Se;){const he=Se.next;h(le,Se)?(Me||(Me=new An(Z,1),Me.attr(r.forced_root_block_attrs),H.insert(Me,Se)),Me.append(Se)):(yt(Me),Me=null),Se=he}yt(Me)}})(A,F),y.invalid||c1(W,y),A}};return((b,y)=>{const v=b.schema;b.addAttributeFilter("href",(A=>{let R=A.length;const P=I=>{const M=I?E.trim(I):"";return/\b(noopener)\b/g.test(M)?M:(W=>W.split(" ").filter((B=>B.length>0)).concat(["noopener"]).sort().join(" "))(M)};if(!y.allow_unsafe_link_target)for(;R--;){const I=A[R];I.name==="a"&&I.attr("target")==="_blank"&&I.attr("rel",P(I.attr("rel")))}})),y.allow_html_in_named_anchor||b.addAttributeFilter("id,name",(A=>{let R,P,I,M,W=A.length;for(;W--;)if(M=A[W],M.name==="a"&&M.firstChild&&!M.attr("href"))for(I=M.parent,R=M.lastChild;R&&I;)P=R.prev,I.insert(R,M),R=P})),y.fix_list_elements&&b.addNodeFilter("ul,ol",(A=>{let R,P,I=A.length;for(;I--;)if(R=A[I],P=R.parent,P&&(P.name==="ul"||P.name==="ol"))if(R.prev&&R.prev.name==="li")R.prev.append(R);else{const M=new An("li",1);M.attr("style","list-style-type: none"),R.wrap(M)}}));const _=v.getValidClasses();y.validate&&_&&b.addAttributeFilter("class",(A=>{let R=A.length;for(;R--;){const P=A[R],I=P.attr("class")??"",M=E.explode(I," ");let W="";for(let B=0;B<M.length;B++){const F=M[B];let H=!1,Z=_["*"];Z&&Z[F]&&(H=!0),Z=_[P.name],!H&&Z&&Z[F]&&(H=!0),H&&(W&&(W+=" "),W+=F)}W.length||(W=null),P.attr("class",W)}})),((A,R)=>{const{blob_cache:P}=R;if(P){const I=M=>{const W=M.attr("src");(B=>B.attr("src")===p.transparentSrc||te(B.attr("data-mce-placeholder")))(M)||(B=>te(B.attr("data-mce-bogus")))(M)||kt(W)||v1(P,W,!0).each((B=>{M.attr("src",B.blobUri())}))};A.addAttributeFilter("src",(M=>K(M,I)))}})(b,y);const N=y.sandbox_iframes??!1,D=ho(y.sandbox_iframes_exclusions??[]);y.convert_unsafe_embeds&&b.addNodeFilter("object,embed",(A=>K(A,(R=>{R.replace((({type:P,src:I,width:M,height:W}={},B,F)=>{const H=(le=>Lt(le)?"iframe":_p(le,"image")?"img":_p(le,"video")?"video":_p(le,"audio")?"audio":"iframe")(P),Z=new An(H,1);return Z.attr(H==="audio"?{src:I}:{src:I,width:M,height:W}),H!=="audio"&&H!=="video"||Z.attr("controls",""),H==="iframe"&&B&&C1(Z,F),Z})({type:R.attr("type"),src:R.name==="object"?R.attr("data"):R.attr("src"),width:R.attr("width"),height:R.attr("height")},N,D))})))),N&&b.addNodeFilter("iframe",(A=>K(A,(R=>C1(R,D)))))})(g,r),((b,y,v)=>{y.inline_styles&&KD(b,y,v)})(g,r,t),g},eu=e=>e instanceof An,V1=(e,t,n)=>{const o=(s=>eu(s)?Ds({validate:!1}).serialize(s):s)(e),r=t(o);if(r.isDefaultPrevented())return r;if(eu(e)){if(r.content!==o){const s=Oi({validate:!1,forced_root_block:!1,...n}).parse(r.content,{context:e.name});return{...r,content:s}}return{...r,content:e}}return r},K1=e=>({sanitize:Y0(e),sandbox_iframes:Q0(e),sandbox_iframes_exclusions:af(e)}),X1=(e,t)=>{if(t.no_events)return fn.value(t);{const n=((o,r)=>o.dispatch("BeforeGetContent",r))(e,t);return n.isDefaultPrevented()?fn.error(D0(e,{content:"",...n}).content):fn.value(n)}},Y1=(e,t,n)=>n.no_events?t:V1(t,(r=>D0(e,{...n,content:r})),K1(e)).content,Mp=(e,t)=>{if(t.no_events)return fn.value(t);{const n=V1(t.content,(o=>((r,s)=>r.dispatch("BeforeSetContent",s))(e,{...t,content:o})),K1(e));return n.isDefaultPrevented()?(T0(e,n),fn.error(void 0)):fn.value(n)}},Ip=(e,t,n)=>{n.no_events||T0(e,{...n,content:t})},kR="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),_R=["content_css_cors"],NR="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),G1=[{name:"export",replacedWith:"Export to PDF"}],Q1=(e,t)=>{const n=De(t,(o=>Oe(e,o)));return Kr(n)},AR=e=>{const t=Q1(e,kR),n=e.forced_root_block;return n!==!1&&n!==""||t.push("forced_root_block (false only)"),Kr(t)},TR=e=>Q1(e,_R),J1=(e,t)=>{const n=E.makeMap(e.plugins," "),o=De(t,(r=>Oe(n,r)));return Kr(o)},DR=e=>J1(e,NR),RR=e=>J1(e,G1.map((t=>t.name))),OR=e=>Ht(G1,(t=>t.name===e)).fold((()=>e),(t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e)),BR={fire:'The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',selectionSetContent:'The "editor.selection.setContent" method has been deprecated and will be removed in TinyMCE 9. Use "editor.insertContent" instead.'},Z1=e=>{console.warn(BR[e],new Error().stack)},ex=e=>e.dom.length===0?(ft(e),k.none()):k.some(e),tx=(e,t,n,o,r)=>{e.bind((s=>((o?Qf:$d)(s.dom,o?s.dom.length:0,r),t.filter(Et).map((a=>((i,l,c,d,m)=>{const f=i.dom,h=l.dom,g=d?f.length:h.length;d?(Jf(f,h,m,!1,!d),c.setStart(h,g)):(Jf(h,f,m,!1,!d),c.setEnd(h,g))})(s,a,n,o,r)))))).orThunk((()=>((a,i)=>a.filter((l=>Ni.isBookmarkNode(l.dom))).bind(i?Gn:Vt))(t,o).or(t).filter(Et).map((a=>((i,l,c)=>{gn(i).each((d=>{const m=i.dom;l&&Vl(d,Y(m,0),c)?$d(m,0,c):!l&&Kl(d,Y(m,m.length),c)&&Qf(m,m.length,c)}))})(a,o,r)))))},tu=(e,t,n={})=>{const o=((r,s)=>({format:"html",...r,set:!0,selection:!0,content:s}))(n,t);Mp(e,o).each((r=>{const s=((i,l)=>{if(l.format!=="raw"){const c=i.selection.getRng(),d=i.dom.getParent(c.commonAncestorContainer,i.dom.isBlock),m=d?{context:d.nodeName.toLowerCase()}:{},f=i.parser.parse(l.content,{forced_root_block:!1,...m,...l});return Ds({validate:!1},i.schema).serialize(f)}return l.content})(e,r),a=e.selection.getRng();((i,l,c)=>{const d=k.from(l.firstChild).map(S.fromDom),m=k.from(l.lastChild).map(S.fromDom);i.deleteContents(),i.insertNode(l);const f=d.bind(Vt).filter(Et).bind(ex),h=m.bind(Gn).filter(Et).bind(ex);tx(f,d,i,!0,c),tx(h,m,i,!1,c),i.collapse(!1)})(a,a.createContextualFragment(s),e.schema),e.selection.setRng(a),$l(e,a),Ip(e,s,r)}))},PR=(e,t)=>{let n=t.firstChild,o=t.lastChild;return n&&n.name==="meta"&&(n=n.next),o&&o.attr("id")==="mce_marker"&&(o=o.prev),((r,s)=>{const a=r.getNonEmptyElements();return te(s)&&(s.isEmpty(a)||((i,l)=>i.getBlockElements()[l.name]&&(c=>te(c.firstChild)&&c.firstChild===c.lastChild)(l)&&(c=>c.name==="br"||c.value===It)(l.firstChild))(r,s))})(e,o)&&(o=o?.prev),!(!n||n!==o||n.name!=="ul"&&n.name!=="ol")},LR=e=>{return e.length>0&&(!(n=e[e.length-1]).firstChild||(t=n,te(t?.firstChild)&&t.firstChild===t.lastChild&&(o=>o.data===It||Ut(o))(t.firstChild)))?e.slice(0,-1):e;var t,n},Fp=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},nx=(e,t)=>{const n=Y.after(e),o=Br(t).prev(n);return o?o.toRange():null},MR=(e,t,n,o)=>{const r=((d,m,f)=>{const h=m.serialize(f);return(g=>{const b=g.firstChild,y=g.lastChild;return b&&b.nodeName==="META"&&b.parentNode?.removeChild(b),y&&y.id==="mce_marker"&&y.parentNode?.removeChild(y),g})(d.createFragment(h))})(t,e,o),s=Fp(t,n.startContainer),a=LR((i=r.firstChild,De(i?.childNodes??[],(d=>d.nodeName==="LI"))));var i;const l=t.getRoot(),c=d=>{const m=Y.fromRangeStart(n),f=Br(t.getRoot()),h=d===1?f.prev(m):f.next(m),g=h?.getNode();return!g||Fp(t,g)!==s};return s?c(1)?((d,m,f)=>{const h=d.parentNode;return h&&E.each(m,(g=>{h.insertBefore(g,d)})),((g,b)=>{const y=Y.before(g),v=Br(b).next(y);return v?v.toRange():null})(d,f)})(s,a,l):c(2)?((d,m,f,h)=>(h.insertAfter(m.reverse(),d),nx(m[0],f)))(s,a,l,t):((d,m,f,h)=>{const g=((y,v)=>{const _=v.cloneRange(),N=v.cloneRange();return _.setStartBefore(y),N.setEndAfter(y),[_.cloneContents(),N.cloneContents()]})(d,h),b=d.parentNode;return b&&(b.insertBefore(g[0],d),E.each(m,(y=>{b.insertBefore(y,d)})),b.insertBefore(g[1],d),b.removeChild(d)),nx(m[m.length-1],f)})(s,a,l,n):null},IR=["pre"],jp=sd,FR=(e,t)=>{const n=e.schema.getTextInlineElements(),o=e.dom;if(t){const r=e.getBody(),s=lp(e),a="*[data-mce-fragment]",i=o.select(a);E.each(i,(l=>{const c=f=>te(n[f.nodeName.toLowerCase()]),d=f=>f.childNodes.length===1;if(!Pv(o,m=l)&&!((f,h)=>Pv(f,h)&&xt(Di(f,h),(g=>(b=>Ov.has(b))(g))))(o,m)&&c(l)&&d(l)){const f=Di(o,l),h=(v,_)=>eo(v,(N=>we(_,N))),g=v=>d(l)&&o.is(v,a)&&c(v)&&(v.nodeName===l.nodeName&&h(f,Di(o,v))||g(v.children[0])),b=v=>te(v)&&v!==r&&(s.compare(l,v)||b(v.parentElement)),y=v=>te(v)&&v!==r&&o.is(v,a)&&(((_,N,D)=>{const A=Di(_,N),R=Di(_,D),P=I=>{const M=_.getStyle(N,I)??"",W=_.getStyle(D,I)??"";return ko(M)&&ko(W)&&M!==W};return xt(A,(I=>{const M=W=>xt(W,(B=>B===I));if(!M(R)&&M(Bv)){const W=De(R,(B=>xt(Bv,(F=>Gt(B,F)))));return xt(W,P)}return P(I)}))})(o,l,v)||y(v.parentElement));(g(l.children[0])||b(l.parentElement)&&!y(l.parentElement))&&o.remove(l,!0)}var m})),((l,c)=>{const d=De(c,(m=>xp(l.formatter,m)));a1(l,"strikethrough",d)})(e,Ar(i))}},jR=(e,t,n)=>{const o=e.selection,r=e.dom,s=e.parser,a=n.merge,i=Ds({validate:!0},e.schema),l='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=vo(t)),t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,l);let c=o.getRng();const d=c.startContainer,m=e.getBody();d===m&&o.isCollapsed()&&r.isBlock(m.firstChild)&&((v,_)=>te(_)&&!v.schema.getVoidElements()[_.nodeName])(e,m.firstChild)&&r.isEmpty(m.firstChild)&&(c=r.createRng(),c.setStart(m.firstChild,0),c.setEnd(m.firstChild,0),o.setRng(c)),o.isCollapsed()||(v=>{const _=v.dom,N=Gd(v.selection.getRng());v.selection.setRng(N);const D=_.getParent(N.startContainer,jp);((R,P,I)=>!!te(I)&&I===R.getParent(P.endContainer,jp)&&vf(S.fromDom(I),P))(_,N,D)?sp(v,N,S.fromDom(D)):wf(N,gN)||(A=N,wf(A,se))?N.deleteContents():v.getDoc().execCommand("Delete",!1);var A})(e);const f=o.getNode(),h={context:f.nodeName.toLowerCase(),data:n.data,insert:!0},g=s.parse(t,h);if(n.paste===!0&&PR(e.schema,g)&&((v,_)=>!!Fp(v,_))(r,f))return c=MR(i,r,o.getRng(),g),c&&o.setRng(c),t;n.paste===!0&&((v,_,N,D)=>{const A=_.firstChild,R=_.lastChild,P=A===(R.attr("data-mce-type")==="bookmark"?R.prev:R),I=we(IR,A.name);if(P&&I){const M=A.attr("contenteditable")!=="false",W=v.getParent(N,v.isBlock)?.nodeName.toLowerCase()===A.name,B=k.from(_a(D,N)).forall(To);return M&&W&&B}return!1})(r,g,f,e.getBody())&&g.firstChild?.unwrap(),(v=>{let _=v;for(;_=_.walk();)_.type===1&&_.attr("data-mce-fragment","1")})(g);let b=g.lastChild;if(b&&b.attr("id")==="mce_marker"){const v=b;for(b=b.prev;b&&b.name!=="table";b=b.walk(!0))if(b.type===3||!r.isBlock(b.name)){b.parent&&e.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(v,b,b.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(f),h.invalid||((v,_,N)=>xt(N.children(),i1)&&v.getParent(_,v.isBlock)?.nodeName==="SUMMARY")(r,f,g)){tu(e,l);let v,_=o.getNode();const N=e.getBody();for(yl(_)?_=v=N:v=_;v&&v!==N;)_=v,v=v.parentNode;t=_===N?N.innerHTML:r.getOuterHTML(_);const D=s.parse(t),A=(M=>{for(let W=M;W;W=W.walk())if(W.attr("id")==="mce_marker")return k.some(W);return k.none()})(D),R=A.bind(WD).getOr(D);A.each((M=>M.replace(g)));const P=(M=>{const W=[];for(let B=M.firstChild;te(B);B=B.walk())W.push(B);return W})(g);g.unwrap();const I=De(P,(M=>Ep(e.schema,M)));m1(I,e.schema,R),d1(s.getNodeFilters(),s.getAttributeFilters(),D),t=i.serialize(D),_===N?r.setHTML(N,t):r.setOuterHTML(_,t)}else t=i.serialize(g),((v,_,N)=>{N.getAttribute("data-mce-bogus")==="all"?N.parentNode?.insertBefore(v.dom.createFragment(_),N):((D,A)=>{if(D.isBlock(A)&&D.isEditable(A)){const R=A.childNodes;return R.length===1&&Ut(R[0])||R.length===0}return!1})(v.dom,N)?v.dom.setHTML(N,_):tu(v,_,{no_events:!0})})(e,t,f);var y;return FR(e,a),((v,_)=>{let N;const D=v.dom,A=v.selection;if(!_)return;A.scrollIntoView(_);const R=_a(v.getBody(),_);if(R&&D.getContentEditable(R)==="false")return D.remove(_),void A.select(R);let P=D.createRng();const I=_.previousSibling;if(se(I)){P.setStart(I,I.nodeValue?.length??0);const W=_.nextSibling;se(W)&&(I.appendData(W.data),W.parentNode?.removeChild(W))}else P.setStartBefore(_),P.setEndBefore(_);const M=D.getParent(_,D.isBlock);if(D.remove(_),M&&D.isEmpty(M)){const W=jp(M);rn(S.fromDom(M)),P.setStart(M,0),P.setEnd(M,0),W||(B=>!!B.getAttribute("data-mce-fragment"))(M)||!(N=(B=>{let F=Y.fromRangeStart(B);return F=Br(v.getBody()).next(F),F?.toRange()})(P))?D.add(M,D.create("br",W?{}:{"data-mce-bogus":"1"})):(P=N,D.remove(M))}A.setRng(P)})(e,r.get("mce_marker")),y=e.getBody(),E.each(y.getElementsByTagName("*"),(v=>{v.removeAttribute("data-mce-fragment")})),((v,_,N)=>{k.from(v.getParent(_,"td,th")).map(S.fromDom).each((D=>((A,R)=>{Hn(A).each((P=>{Vt(P).each((I=>{R.isBlock(Be(A))&&Ss(P)&&R.isBlock(Be(I))&&ft(P)}))}))})(D,N)))})(r,o.getStart(),e.schema),((v,_,N)=>{const D=Zt(S.fromDom(N),(A=>me(A,S.fromDom(_))));qs(D,D.length-2).filter(ot).fold((()=>wm(v,_)),(A=>wm(v,A.dom)))})(e.schema,e.getBody(),o.getStart()),t},zp=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&(o=>{Ti(o)&&In(o.getBody()).each((r=>{const s=r.getNode(),a=Dr(s)?In(s).getOr(r):r;o.selection.setRng(a.toRange())}))})(e)},oc={},ox=ir(["pre"]);(e=>{oc[e]||(oc[e]=[]),oc[e].push((t=>{if(!t.selection.getRng().collapsed){const n=t.selection.getSelectedBlocks(),o=De(De(n,ox),(r=>s=>{const a=s.previousSibling;return ox(a)&&we(r,a)})(n));K(o,(r=>{((s,a)=>{const i=S.fromDom(a),l=Sn(i).dom;ft(i),ze(S.fromDom(s),[S.fromTag("br",l),S.fromTag("br",l),...ht(i)])})(r.previousSibling,r)}))}}))})("pre");const rx=E.each,zR=E.each,UR=(e,t,n,o)=>{const r=e.formatter.get(t),s=r[0],a=!o&&e.selection.isCollapsed(),i=e.dom,l=e.selection,c=(h,g)=>{let b=!1;return zR(h,(y=>!(!Po(y)||(i.getContentEditable(g)!=="false"||y.ceFalseOverride)&&(!te(y.collapsed)||y.collapsed===a)&&i.is(g,y.selector)&&!Oo(g)&&(Ri(e,g,y,n,g),b=!0,1)))),b},d=h=>{if(xe(h)){const g=i.create(h);return Ri(e,g,s,n,o),g}return null},m=(h,g,b)=>{const y=[];let v=!0;const _=s.inline||s.block,N=d(_);Hl(h,g,(D=>{let A;const R=P=>{let I=!1,M=v,W=!1;const B=P.parentNode,F=B.nodeName.toLowerCase(),H=h.getContentEditable(P);te(H)&&(M=v,v=H==="true",I=!0,W=Oy(e,P));const Z=v&&!I;if(Ut(P)&&!((le,_e,Te,Se)=>{if(BA(le)&&cn(_e)&&Te.parentNode){const Me=Ob(le.schema),yt=aN(S.fromDom(Te),(he=>Oo(he.dom)));return mn(Me,Se)&&es(le.schema,Te.parentNode,{skipBogus:!1,includeZwsp:!0})&&!yt}return!1})(e,s,P,F))return A=null,void(Pr(s)&&h.remove(P));if((le=>(_e=>Pr(_e)&&_e.wrapper===!0)(s)&&Io(e,le,t,n))(P))A=null;else{if(((le,_e,Te)=>{const Se=(Me=>Pr(Me)&&Me.wrapper!==!0)(s)&&Ef(e.schema,le)&&ki(e,_e,_);return Te&&Se})(P,F,Z)){const le=h.rename(P,_);return Ri(e,le,s,n,P),y.push(le),void(A=null)}if(Po(s)){let le=c(r,P);if(!le&&te(B)&&Tf(s)&&(le=c(r,B)),!cn(s)||le)return void(A=null)}te(N)&&((le,_e,Te,Se)=>{const Me=le.nodeName.toLowerCase(),yt=ki(e,_,Me)&&ki(e,_e,_),he=!b&&se(le)&&md(le.data),Ne=Oo(le),j=!cn(s)||!h.isBlock(le);return(Te||Se)&&yt&&!he&&!Ne&&j})(P,F,Z,W)?(A||(A=h.clone(N,!1),B.insertBefore(A,P),y.push(A)),W&&I&&(v=M),A.appendChild(P)):(A=null,K(vn(P.childNodes),R),I&&(v=M),A=null)}};K(D,R)})),s.links===!0&&K(y,(D=>{const A=R=>{R.nodeName==="A"&&Ri(e,R,s,n,o),K(vn(R.childNodes),A)};A(D)})),((D,A,R)=>{if(we($D,A)){const P=((I,M)=>$t(M,(W=>{const B=ed(W,(F=>xp(I,F)));return xp(I,W)?[W,...B]:B})))(D.formatter,R);a1(D,"strikethrough",P)}})(e,t,Ar(y)),K(y,(D=>{const A=(R=>{let P=0;return K(R.childNodes,(I=>{(M=>te(M)&&se(M)&&M.length===0)(I)||Bo(I)||P++})),P})(D);!(y.length>1)&&h.isBlock(D)||A!==0?(cn(s)||Pr(s)&&s.wrapper)&&(s.exact||A!==1||(D=(R=>Ht(R.childNodes,Sf).filter((I=>h.getContentEditable(I)!=="false"&&Xd(h,I,s))).map((I=>{const M=h.clone(I,!1);return Ri(e,M,s,n,R),h.replace(M,R,!0),h.remove(I,!0),M})).getOr(R))(D)),((R,P,I,M)=>{rx(P,(W=>{cn(W)&&rx(R.dom.select(W.inline,M),(B=>{hp(B)&&Ql(R,W,I,B,W.exact?B:null)})),((B,F,H)=>{if(F.clear_child_styles){const Z=F.links?"*:not(a)":"*";gp(B.select(Z,H),(le=>{hp(le)&&B.isEditable(le)&&gp(F.styles,((_e,Te)=>{B.setStyle(le,Te,"")}))}))}})(R.dom,W,M)}))})(e,r,n,D),((R,P,I,M,W)=>{const B=W.parentNode;Io(R,B,I,M)&&Ql(R,P,M,W)||P.merge_with_parents&&B&&R.dom.getParent(B,(F=>!!Io(R,F,I,M)&&(Ql(R,P,M,W),!0)))})(e,s,t,n,D),((R,P,I,M)=>{if(P.styles&&P.styles.backgroundColor){const W=XC(R,"fontSize");bp(M,(B=>W(B)&&R.isEditable(B)),YC(R,"backgroundColor",Ts(P.styles.backgroundColor,I)))}})(h,s,n,D),((R,P,I,M)=>{const W=B=>{if(ar(B)&&ve(B.parentNode)&&R.isEditable(B)){const F=By(R,B.parentNode);R.getStyle(B,"color")&&F?R.setStyle(B,"text-decoration",F):R.getStyle(B,"text-decoration")===F&&R.setStyle(B,"text-decoration",null)}};P.styles&&(P.styles.color||P.styles.textDecoration)&&(E.walk(M,W,"childNodes"),W(M))})(h,s,0,D),((R,P,I,M)=>{if(cn(P)&&(P.inline==="sub"||P.inline==="sup")){const W=XC(R,"fontSize");bp(M,(F=>W(F)&&R.isEditable(F)),YC(R,"fontSize",""));const B=De(R.select(P.inline==="sup"?"sub":"sup",M),R.isEditable);R.remove(B,!0)}})(h,s,0,D),KC(e,s,0,D)):h.remove(D,!0)}))},f=Ul(o)?o:l.getNode();if(i.getContentEditable(f)==="false"&&!Oy(e,f))return c(r,o=f),void N0(e,t,o,n);if(s){if(o)if(Ul(o)){if(!c(r,o)){const h=i.createRng();h.setStartBefore(o),h.setEndAfter(o),m(i,Sa(i,h,r),!0)}}else m(i,o,!0);else a&&cn(s)&&!Ei(e).length?((h,g,b)=>{let y;const v=h.selection,_=h.formatter.get(g);if(!_)return;const N=v.getRng();let D=N.startOffset;const A=N.startContainer.nodeValue;y=xa(h.getBody(),v.getStart());const R=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(A&&D>0&&D<A.length&&R.test(A.charAt(D))&&R.test(A.charAt(D-1))){const M=v.getBookmark();N.collapse(!0);let W=Sa(h.dom,N,_);W=jd(W),h.formatter.apply(g,b,W),v.moveToBookmark(M)}else{let M=y?RC(y):null;y&&M?.data===Gl||(P=h.getDoc(),I=mp(!0).dom,y=P.importNode(I,!0),M=y.firstChild,N.insertNode(y),D=1,LC(h,y)),h.formatter.apply(g,b,y),v.setCursorLocation(M,D)}var P,I})(e,t,n):(l.setRng(Gd(l.getRng())),Dy(e,(()=>{xf(e,((h,g)=>{const b=g?h:Sa(i,h,r);m(i,b,!1)}))}),jt),e.nodeChanged()),zC(e.formatter,t).each((h=>{K((g=>De((b=>{const y=b.getSelectedBlocks(),v=b.getRng();if(b.isCollapsed())return[];if(y.length===1)return UC(v,y[0])&&HC(v,y[0])?y:[];{const _=nn(y).filter((A=>UC(v,A))).toArray(),N=to(y).filter((A=>HC(v,A))).toArray(),D=y.slice(1,-1);return _.concat(D).concat(N)}})(g),$C(g.dom)))(e.selection),(g=>AC(i,g,h,n)))}));((h,g)=>{Oe(oc,h)&&K(oc[h],(b=>{b(g)}))})(t,e)}N0(e,t,o,n)},sx=(e,t,n,o)=>{(o||e.selection.isEditable())&&UR(e,t,n,o)},ax=e=>Oe(e,"vars"),ix=e=>e.selection.getStart(),lx=(e,t,n,o,r)=>go(t,(s=>{const a=e.formatter.matchNode(s,n,r??{},o);return!Lt(a)}),(s=>!!TC(e,s,n)||!o&&te(e.formatter.matchNode(s,n,r,!0)))),cx=(e,t)=>{const n=t??ix(e);return De(Rd(e.dom,n),(o=>ve(o)&&!ca(o)))},dx=(e,t,n)=>{const o=cx(e,t);wt(n,((r,s)=>{const a=i=>{const l=lx(e,o,s,i.similar,ax(i)?i.vars:void 0),c=l.isSome();if(i.state.get()!==c){i.state.set(c);const d=l.getOr(t);ax(i)?i.callback(c,{node:d,format:s,parents:o}):K(i.callbacks,(m=>m(c,{node:d,format:s,parents:o})))}};K([r.withSimilar,r.withoutSimilar],a),K(r.withVars,a)}))},Up=(e,t,n)=>({element:e,width:t,rows:n}),ux=(e,t)=>({element:e,cells:t}),HR=(e,t)=>({x:e,y:t}),mx=(e,t)=>bt(e,t).bind(ps).getOr(1),$R=(e,t,n)=>{const o=e.rows;return!!(o[n]?o[n].cells:[])[t]},fx=e=>Yt(e,((t,n)=>n.cells.length>t?n.cells.length:t),0),px=(e,t)=>{const n=e.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let s=0;s<r.length;s++)if(me(r[s],t))return k.some(HR(s,o))}return k.none()},gx=(e,t,n,o,r)=>{const s=[],a=e.rows;for(let i=n;i<=r;i++){const l=a[i].cells,c=t<o?l.slice(t,o+1):l.slice(o,t+1);s.push(ux(a[i].element,c))}return s},qR=e=>((t,n)=>{const o=$n(t.element),r=S.fromTag("tbody");return ze(r,n),ne(o,r),o})(e,(t=>qe(t.rows,(n=>{const o=qe(n.cells,(s=>{const a=so(s);return vt(a,"colspan"),vt(a,"rowspan"),a})),r=$n(n.element);return ze(r,o),r})))(e)),WR=(e,t,n)=>{const o=S.fromDom(t.commonAncestorContainer),r=ts(o,e),s=De(r,(l=>n.isWrapper(Be(l)))),a=((l,c)=>Ht(l,(d=>Be(d)==="li"&&vf(d,c))).fold(ie([]),(d=>(m=>Ht(m,(f=>Be(f)==="ul"||Be(f)==="ol")))(l).map((m=>{const f=S.fromTag(Be(m)),h=tr(rm(m),((g,b)=>Gt(b,"list-style")));return Xc(f,h),[S.fromTag("li"),f]})).getOr([]))))(r,t),i=s.concat(a.length?a:(l=>mi(l)?gn(l).filter(zm).fold(ie([]),(c=>[l,c])):zm(l)?[l]:[])(o));return qe(i,$n)},hx=()=>gl([]),VR=(e,t)=>((n,o)=>si(o,"table",be(me,n)))(e,t[0]).bind((n=>{const o=t[0],r=t[t.length-1],s=(a=>{const i=Up($n(a),0,[]);return K(_n(a,"tr"),((l,c)=>{K(_n(l,"td,th"),((d,m)=>{((f,h,g,b,y)=>{const v=mx(y,"rowspan"),_=mx(y,"colspan"),N=f.rows;for(let D=g;D<g+v;D++){N[D]||(N[D]=ux(so(b),[]));for(let A=h;A<h+_;A++)N[D].cells[A]=D===g&&A===h?y:$n(y)}})(i,((f,h,g)=>{for(;$R(f,h,g);)h++;return h})(i,m,c),c,l,d)}))})),Up(i.element,fx(i.rows),i.rows)})(n);return((a,i,l)=>px(a,i).bind((c=>px(a,l).map((d=>((m,f,h)=>{const g=f.x,b=f.y,y=h.x,v=h.y,_=b<v?gx(m,g,b,y,v):gx(m,g,v,y,b);return Up(m.element,fx(_),_)})(a,c,d))))))(s,o,r).map((a=>gl([qR(a)])))})).getOrThunk(hx),KR=(e,t,n)=>{const o=Ny(t,e);return o.length>0?VR(e,o):((r,s,a)=>s.length>0&&s[0].collapsed?hx():((i,l,c)=>((d,m)=>{const f=Yt(m,((h,g)=>(ne(g,h),g)),d);return m.length>0?gl([f]):f})(S.fromDom(l.cloneContents()),WR(i,l,c)))(r,s[0],a))(e,t,n)},nu=(e,t)=>t>=0&&t<e.length&&wa(e.charAt(t)),bx=e=>vo(e.innerText),yx=e=>ve(e)?e.outerHTML:se(e)?fa.encodeRaw(e.data,!1):xs(e)?"<!--"+e.data+"-->":"",XR=(e,t)=>(((n,o)=>{let r=0;K(n,(s=>{s[0]===0?r++:s[0]===1?(((a,i,l)=>{const c=(d=>{let m;const f=document.createElement("div"),h=document.createDocumentFragment();for(d&&(f.innerHTML=d);m=f.firstChild;)h.appendChild(m);return h})(i);if(a.hasChildNodes()&&l<a.childNodes.length){const d=a.childNodes[l];a.insertBefore(c,d)}else a.appendChild(c)})(o,s[1],r),r++):s[0]===2&&((a,i)=>{if(a.hasChildNodes()&&i<a.childNodes.length){const l=a.childNodes[i];a.removeChild(l)}})(o,r)}))})(((n,o)=>{const r=n.length+o.length+2,s=new Array(r),a=new Array(r),i=(m,f,h,g,b)=>{const y=c(m,f,h,g);if(y===null||y.start===f&&y.diag===f-g||y.end===m&&y.diag===m-h){let v=m,_=h;for(;v<f||_<g;)v<f&&_<g&&n[v]===o[_]?(b.push([0,n[v]]),++v,++_):f-m>g-h?(b.push([2,n[v]]),++v):(b.push([1,o[_]]),++_)}else{i(m,y.start,h,y.start-y.diag,b);for(let v=y.start;v<y.end;++v)b.push([0,n[v]]);i(y.end,f,y.end-y.diag,g,b)}},l=(m,f,h,g)=>{let b=m;for(;b-f<g&&b<h&&n[b]===o[b-f];)++b;return((y,v,_)=>({start:y,end:v,diag:_}))(m,b,f)},c=(m,f,h,g)=>{const b=f-m,y=g-h;if(b===0||y===0)return null;const v=b-y,_=y+b,N=(_%2==0?_:_+1)/2;let D,A,R,P,I;for(s[1+N]=m,a[1+N]=f+1,D=0;D<=N;++D){for(A=-D;A<=D;A+=2){for(R=A+N,A===-D||A!==D&&s[R-1]<s[R+1]?s[R]=s[R+1]:s[R]=s[R-1]+1,P=s[R],I=P-m+h-A;P<f&&I<g&&n[P]===o[I];)s[R]=++P,++I;if(v%2!=0&&v-D<=A&&A<=v+D&&a[R-v]<=s[R])return l(a[R-v],A+m-h,f,g)}for(A=v-D;A<=v+D;A+=2){for(R=A+N-v,A===v-D||A!==v+D&&a[R+1]<=a[R-1]?a[R]=a[R+1]-1:a[R]=a[R-1],P=a[R]-1,I=P-m+h-A;P>=m&&I>=h&&n[P]===o[I];)a[R]=P--,I--;if(v%2==0&&-D<=A&&A<=D&&a[R]<=s[R+v])return l(a[R],A+m-h,f,g)}}return null},d=[];return i(0,n.length,0,o.length,d),d})(qe(vn(t.childNodes),yx),e),t),t),YR=Un((()=>document.implementation.createHTMLDocument("undo"))),ou=e=>{const t=e.serializer.getTempAttrs(),n=_v(e.getBody(),t);return(o=>o.querySelector("iframe")!==null)(n)?{type:"fragmented",fragments:De(qe(vn(n.childNodes),Bn(vo,yx)),(o=>o.length>0)),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:vo(n.innerHTML),bookmark:null,beforeBookmark:null}},Hp=(e,t,n)=>{const o=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?XR(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!te(o)||!xy(o)||!o.isFakeCaret}),o&&(e.selection.moveToBookmark(o),e.selection.scrollIntoView())},$p=e=>e.type==="fragmented"?e.fragments.join(""):e.content,vx=e=>{const t=S.fromTag("body",YR());return ti(t,$p(e)),K(_n(t,"*[data-mce-bogus]"),sn),fl(t)},qp=(e,t)=>!(!e||!t)&&(!!((n,o)=>$p(n)===$p(o))(e,t)||((n,o)=>vx(n)===vx(o))(e,t)),Wp=e=>e.get()===0,ru=(e,t,n)=>{Wp(n)&&(e.typing=t)},Cx=(e,t)=>{e.typing&&(ru(e,!1,t),e.add())},xx=e=>({init:{bindEvents:Ee},undoManager:{beforeChange:(t,n)=>((o,r,s)=>{Wp(r)&&s.set(Jm(o.selection))})(e,t,n),add:(t,n,o,r,s,a)=>((i,l,c,d,m,f,h)=>{const g=ou(i),b=E.extend(f||{},g);if(!Wp(d)||i.removed)return null;const y=l.data[c.get()];if(i.dispatch("BeforeAddUndo",{level:b,lastLevel:y,originalEvent:h}).isDefaultPrevented()||y&&qp(y,b))return null;l.data[c.get()]&&m.get().each((N=>{l.data[c.get()].beforeBookmark=N}));const v=zA(i);if(v&&l.data.length>v){for(let N=0;N<l.data.length-1;N++)l.data[N]=l.data[N+1];l.data.length--,c.set(l.data.length)}b.bookmark=Jm(i.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(b),c.set(l.data.length-1);const _={level:b,lastLevel:y,originalEvent:h};return c.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",_),i.dispatch("change",_)):i.dispatch("AddUndo",_),b})(e,t,n,o,r,s,a),undo:(t,n,o)=>((r,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,ru(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],Hp(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(e,t,n,o),redo:(t,n)=>((o,r,s)=>{let a;return r.get()<s.length-1&&(r.set(r.get()+1),a=s[r.get()],Hp(o,a,!1),o.setDirty(!0),o.dispatch("Redo",{level:a})),a})(e,t,n),clear:(t,n)=>((o,r,s)=>{r.data=[],s.set(0),r.typing=!1,o.dispatch("ClearUndos")})(e,t,n),reset:t=>(n=>{n.clear(),n.add()})(t),hasUndo:(t,n)=>((o,r,s)=>s.get()>0||r.typing&&r.data[0]&&!qp(ou(o),r.data[0]))(e,t,n),hasRedo:(t,n)=>((o,r)=>r.get()<o.data.length-1&&!o.typing)(t,n),transact:(t,n,o)=>((r,s,a)=>(Cx(r,s),r.beforeChange(),r.ignore(a),r.add()))(t,n,o),ignore:(t,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(t,n),extra:(t,n,o,r)=>((s,a,i,l,c)=>{if(a.transact(l)){const d=a.data[i.get()].bookmark,m=a.data[i.get()-1];Hp(s,m,!0),a.transact(c)&&(a.data[i.get()-1].beforeBookmark=d)}})(e,t,n,o,r)},formatter:{match:(t,n,o,r)=>up(e,t,n,o,r),matchAll:(t,n)=>((o,r,s)=>{const a=[],i={},l=o.selection.getStart();return o.dom.getParent(l,(c=>{for(let d=0;d<r.length;d++){const m=r[d];!i[m]&&Io(o,c,m,s)&&(i[m]=!0,a.push(m))}}),o.dom.getRoot()),a})(e,t,n),matchNode:(t,n,o,r)=>Io(e,t,n,o,r),canApply:t=>((n,o)=>{const r=n.formatter.get(o),s=n.dom;if(r&&n.selection.isEditable()){const a=n.selection.getStart(),i=Rd(s,a);for(let l=r.length-1;l>=0;l--){const c=r[l];if(!Po(c))return!0;for(let d=i.length-1;d>=0;d--)if(s.is(i[d],c.selector))return!0}}return!1})(e,t),closest:t=>((n,o)=>{const r=s=>me(s,S.fromDom(n.getBody()));return k.from(n.selection.getStart(!0)).bind((s=>fm(S.fromDom(s),(a=>zn(o,(i=>((l,c)=>Io(n,l.dom,c)?k.some(c):k.none())(a,i)))),r))).getOrNull()})(e,t),apply:(t,n,o)=>sx(e,t,n,o),remove:(t,n,o,r)=>r1(e,t,n,o,r),toggle:(t,n,o)=>((r,s,a,i)=>{const l=r.formatter.get(s);l&&(!up(r,s,a,i)||"toggle"in l[0]&&!l[0].toggle?sx(r,s,a,i):r1(r,s,a,i))})(e,t,n,o),formatChanged:(t,n,o,r,s)=>((a,i,l,c,d,m)=>(((f,h,g,b,y,v)=>{const _=h.get();K(g.split(","),(N=>{const D=Ot(_,N).getOrThunk((()=>{const R={withSimilar:{state:Qt(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Qt(!1),similar:!1,callbacks:[]},withVars:[]};return _[N]=R,R})),A=()=>{const R=cx(f);return lx(f,R,N,y,v).isSome()};if(Lt(v)){const R=y?D.withSimilar:D.withoutSimilar;R.callbacks.push(b),R.callbacks.length===1&&R.state.set(A())}else D.withVars.push({state:Qt(A()),similar:y,vars:v,callback:b})})),h.set(_)})(a,i,l,c,d,m),{unbind:()=>((f,h,g)=>{const b=f.get();K(h.split(","),(y=>Ot(b,y).each((v=>{b[y]={withSimilar:{...v.withSimilar,callbacks:De(v.withSimilar.callbacks,(_=>_!==g))},withoutSimilar:{...v.withoutSimilar,callbacks:De(v.withoutSimilar.callbacks,(_=>_!==g))},withVars:De(v.withVars,(_=>_.callback!==g))}})))),f.set(b)})(i,l,c)}))(e,t,n,o,r,s)},editor:{getContent:t=>((n,o)=>k.from(n.getBody()).fold(ie(o.format==="tree"?new An("body",11):""),(r=>vD(n,o,r))))(e,t),setContent:(t,n)=>((o,r,s)=>k.from(o.getBody()).map((a=>eu(r)?((i,l,c,d)=>{d1(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),c);const m=Ds({validate:!1},i.schema).serialize(c),f=vo(ud(S.fromDom(l))?m:E.trim(m));return zp(i,f,d.no_selection),{content:c,html:f}})(o,a,r,s):((i,l,c,d)=>{if((c=vo(c)).length===0||/^\s+$/.test(c)){const m='<br data-mce-bogus="1">';l.nodeName==="TABLE"?c="<tr><td>"+m+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+m+"</li>");const f=xn(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),f.toLowerCase())?(c=m,c=i.dom.createHTML(f,yi(i),c)):c||(c=m),zp(i,c,d.no_selection),{content:c,html:c}}{d.format!=="raw"&&(c=Ds({validate:!1},i.schema).serialize(i.parser.parse(c,{isRootContent:!0,insert:!0})));const m=ud(S.fromDom(l))?c:E.trim(c);return zp(i,m,d.no_selection),{content:m,html:m}}})(o,a,r,s))).getOr({content:r,html:eu(s.content)?"":s.content}))(e,t,n),insertContent:(t,n)=>jR(e,t,n),addVisual:t=>((n,o)=>{const r=n.dom,s=te(o)?o:n.getBody();K(r.select("table,a",s),(a=>{switch(a.nodeName){case"TABLE":const i=VA(n),l=r.getAttrib(a,"border");l&&l!=="0"||!n.hasVisual?r.removeClass(a,i):r.addClass(a,i);break;case"A":if(!r.getAttrib(a,"href")){const c=r.getAttrib(a,"name")||a.id,d=V0(n);c&&n.hasVisual?r.addClass(a,d):r.removeClass(a,d)}}})),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((o,r,s={})=>{const a=((i,l)=>({...i,format:l,get:!0,selection:!0,getInner:!0}))(s,r);return X1(o,a).fold(gt,(i=>{const l=((c,d)=>{if(d.format==="text")return(m=>k.from(m.selection.getRng()).map((f=>{const h=k.from(m.dom.getParent(f.commonAncestorContainer,m.dom.isBlock)),g=m.getBody(),b=(D=>D.map((A=>A.nodeName)).getOr("div").toLowerCase())(h),y=S.fromDom(f.cloneContents());Nv(y),Av(y);const v=m.dom.add(g,b,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},y.dom),_=bx(v),N=vo(v.textContent??"");if(m.dom.remove(v),nu(N,0)||nu(N,N.length-1)){const D=h.getOr(g),A=bx(D),R=A.indexOf(_);return R===-1?_:(nu(A,R-1)?" ":"")+_+(nu(A,R+_.length)?" ":"")}return _})).getOr(""))(c);{const m=((f,h)=>{const g=f.selection.getRng(),b=f.dom.create("body"),y=f.selection.getSel(),v=Hf(f,bf(y)),_=h.contextual?KR(S.fromDom(f.getBody()),v,f.schema).dom:g.cloneContents();return _&&b.appendChild(_),f.selection.serializer.serialize(b,h)})(c,d);return d.format==="tree"?m:c.selection.isCollapsed()?"":m}})(o,i);return Y1(o,l,i)}))})(e,t,n)},autocompleter:{addDecoration:Ee,removeDecoration:Ee},raw:{getModel:()=>k.none()}}),Mr=e=>Oe(e.plugins,"rtc"),Vp=e=>e.rtcInstance?e.rtcInstance:xx(e),ln=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},wx=e=>ln(e).init.bindEvents(),Sx=(e,t,n)=>{if(Oe(e,t)){const o=De(e[t],(r=>r!==n));o.length===0?delete e[t]:e[t]=o}},Ex=e=>!(!e||!e.ownerDocument)&&Ze(S.fromDom(e.ownerDocument),S.fromDom(e)),kx=(e,t,n,o)=>{let r,s;const{selectorChangedWithUnbind:a}=((b,y)=>{let v,_;const N=(A,R)=>Ht(R,(P=>b.is(P,A))),D=A=>b.getParents(A,void 0,b.getRoot());return{selectorChangedWithUnbind:(A,R)=>(v||(v={},_={},y.on("NodeChange",(P=>{const I=P.element,M=D(I),W={};wt(v,((B,F)=>{N(F,M).each((H=>{_[F]||(K(B,(Z=>{Z(!0,{node:H,selector:F,parents:M})})),_[F]=B),W[F]=B}))})),wt(_,((B,F)=>{W[F]||(delete _[F],K(B,(H=>{H(!1,{node:I,selector:F,parents:M})})))}))}))),v[A]||(v[A]=[]),v[A].push(R),N(A,D(y.selection.getStart())).each((()=>{_[A]=v[A]})),{unbind:()=>{Sx(v,A,R),Sx(_,A,R)}})}})(e,o),i=b=>{const y=c();y.collapse(!!b),d(y)},l=()=>t.getSelection?t.getSelection():t.document.selection,c=()=>{let b;const y=(_,N,D)=>{try{return N.compareBoundaryPoints(_,D)}catch{return-1}},v=t.document;if(te(o.bookmark)&&!Ti(o)){const _=Rf(o);if(_.isSome())return _.map((N=>Hf(o,[N])[0])).getOr(v.createRange())}try{const _=l();_&&!od(_.anchorNode)&&(b=_.rangeCount>0?_.getRangeAt(0):v.createRange(),b=Hf(o,[b])[0])}catch{}if(b||(b=v.createRange()),yl(b.startContainer)&&b.collapsed){const _=e.getRoot();b.setStart(_,0),b.setEnd(_,0)}return r&&s&&(y(b.START_TO_START,b,r)===0&&y(b.END_TO_END,b,r)===0?b=s:(r=null,s=null)),b},d=(b,y)=>{if(!(_=>!!_&&Ex(_.startContainer)&&Ex(_.endContainer))(b))return;const v=l();if(b=o.dispatch("SetSelectionRange",{range:b,forward:y}).range,v){s=b;try{v.removeAllRanges(),v.addRange(b)}catch{}y===!1&&v.extend&&(v.collapse(b.endContainer,b.endOffset),v.extend(b.startContainer,b.startOffset)),r=v.rangeCount>0?v.getRangeAt(0):null}if(!b.collapsed&&b.startContainer===b.endContainer&&v?.setBaseAndExtent&&b.endOffset-b.startOffset<2&&b.startContainer.hasChildNodes()){const _=b.startContainer.childNodes[b.startOffset];_&&_.nodeName==="IMG"&&(v.setBaseAndExtent(b.startContainer,b.startOffset,b.endContainer,b.endOffset),v.anchorNode===b.startContainer&&v.focusNode===b.endContainer||v.setBaseAndExtent(_,0,_,1))}o.dispatch("AfterSetSelectionRange",{range:b,forward:y})},m=()=>{const b=l(),y=b?.anchorNode,v=b?.focusNode;if(!b||!y||!v||od(y)||od(v))return!0;const _=e.createRng(),N=e.createRng();try{_.setStart(y,b.anchorOffset),_.collapse(!0),N.setStart(v,b.focusOffset),N.collapse(!0)}catch{return!0}return _.compareBoundaryPoints(_.START_TO_START,N)<=0},f={dom:e,win:t,serializer:n,editor:o,expand:(b={type:"word"})=>d(Lr(e).expand(c(),b)),collapse:i,setCursorLocation:(b,y)=>{const v=e.createRng();te(b)&&te(y)?(v.setStart(b,y),v.setEnd(b,y),d(v),i(!1)):(Cf(e,v,o.getBody(),!0),d(v))},getContent:b=>((y,v={})=>((_,N,D)=>ln(_).selection.getContent(N,D))(y,v.format?v.format:"html",v))(o,b),setContent:(b,y)=>((v,_,N={})=>{Z1("selectionSetContent"),tu(v,_,N)})(o,b,y),getBookmark:(b,y)=>h.getBookmark(b,y),moveToBookmark:b=>h.moveToBookmark(b),select:(b,y)=>(((v,_,N)=>k.from(_).bind((D=>k.from(D.parentNode).map((A=>{const R=v.nodeIndex(D),P=v.createRng();return P.setStart(A,R),P.setEnd(A,R+1),N&&(Cf(v,P,D,!0),Cf(v,P,D,!1)),P})))))(e,b,y).each(d),b),isCollapsed:()=>{const b=c(),y=l();return!(!b||b.item)&&(b.compareEndPoints?b.compareEndPoints("StartToEnd",b)===0:!y||b.collapsed)},isEditable:()=>{if(o.mode.isReadOnly())return!1;const b=c(),y=o.getBody().querySelectorAll('[data-mce-selected="1"]');return y.length>0?eo(y,(v=>e.isEditable(v.parentElement))):gv(e,b)},isForward:m,setNode:b=>(tu(o,e.getOuterHTML(b)),b),getNode:()=>((b,y)=>{if(!y)return b;let v=y.startContainer,_=y.endContainer;const N=y.startOffset,D=y.endOffset;let A=y.commonAncestorContainer;y.collapsed||(v===_&&D-N<2&&v.hasChildNodes()&&(A=v.childNodes[N]),se(v)&&se(_)&&(v=v.length===N?vv(v.nextSibling,!0):v.parentNode,_=D===0?vv(_.previousSibling,!1):_.parentNode,v&&v===_&&(A=v)));const R=se(A)?A.parentNode:A;return ar(R)?R:b})(o.getBody(),c()),getSel:l,setRng:d,getRng:c,getStart:b=>bv(o.getBody(),c(),b),getEnd:b=>yv(o.getBody(),c(),b),getSelectedBlocks:(b,y)=>((v,_,N,D)=>{const A=[],R=v.getRoot(),P=v.getParent(N||bv(R,_,_.collapsed),v.isBlock),I=v.getParent(D||yv(R,_,_.collapsed),v.isBlock);if(P&&P!==R&&A.push(P),P&&I&&P!==I){let M;const W=new an(P,R);for(;(M=W.next())&&M!==I;)v.isBlock(M)&&A.push(M)}return I&&P!==I&&I!==R&&A.push(I),A})(e,c(),b,y),normalize:()=>{const b=c(),y=l();if(!(bf(y).length>1)&&Td(o)){const v=Id(e,b);return v.each((_=>{d(_,m())})),v.getOr(b)}return b},selectorChanged:(b,y)=>(a(b,y),f),selectorChangedWithUnbind:a,getScrollContainer:()=>{let b,y=e.getRoot();for(;y&&y.nodeName!=="BODY";){if(y.scrollHeight>y.clientHeight){b=y;break}y=y.parentNode}return b},scrollIntoView:(b,y)=>{te(b)?((v,_,N)=>{(v.inline?iD:cD)(v,_,N)})(o,b,y):$l(o,c(),y)},placeCaretAt:(b,y)=>d(ov(b,y,o.getDoc())),getBoundingClientRect:()=>{const b=c();return b.collapsed?Y.fromRangeStart(b).getClientRects()[0]:b.getBoundingClientRect()},destroy:()=>{t=r=s=null,g.destroy()}},h=Ni(f),g=nv(f,o);return f.bookmarkManager=h,f.controlSelection=g,f},GR=(e,t,n)=>{E.inArray(t,n)===-1&&(e.addAttributeFilter(n,((o,r)=>{let s=o.length;for(;s--;)o[s].attr(r,null)})),t.push(n))},QR=(e,t)=>{const n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},r=t&&t.dom?t.dom:At.DOM,s=t&&t.schema?t.schema:ws(o),a=Oi(o,s);return((i,l,c)=>{i.addAttributeFilter("data-mce-tabindex",((d,m)=>{let f=d.length;for(;f--;){const h=d[f];h.attr("tabindex",h.attr("data-mce-tabindex")),h.attr(m,null)}})),i.addAttributeFilter("src,href,style",((d,m)=>{const f="data-mce-"+m,h=l.url_converter,g=l.url_converter_scope;let b=d.length;for(;b--;){const y=d[b];let v=y.attr(f);v!==void 0?(y.attr(m,v.length>0?v:null),y.attr(f,null)):(v=y.attr(m),m==="style"?v=c.serializeStyle(c.parseStyle(v),y.name):h&&(v=h.call(g,v,m,y.name)),y.attr(m,v.length>0?v:null))}})),i.addAttributeFilter("class",(d=>{let m=d.length;for(;m--;){const f=d[m];let h=f.attr("class");h&&(h=h.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),f.attr("class",h.length>0?h:null))}})),i.addAttributeFilter("data-mce-type",((d,m,f)=>{let h=d.length;for(;h--;){const g=d[h];g.attr("data-mce-type")==="bookmark"&&!f.cleanup&&(k.from(g.firstChild).exists((y=>!md(y.value??"")))?g.unwrap():g.remove())}})),i.addNodeFilter("script,style",((d,m)=>{const f=g=>g.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let h=d.length;for(;h--;){const g=d[h],b=g.firstChild,y=b?.value??"";if(m==="script"){const v=g.attr("type");v&&g.attr("type",v==="mce-no/type"?null:v.replace(/^mce\-/,"")),l.element_format==="xhtml"&&b&&y.length>0&&(b.value=`// <![CDATA[
`+f(y)+`
// ]]>`)}else l.element_format==="xhtml"&&b&&y.length>0&&(b.value=`<!--
`+f(y)+`
-->`)}})),i.addNodeFilter("#comment",(d=>{let m=d.length;for(;m--;){const f=d[m],h=f.value;l.preserve_cdata&&h?.indexOf("[CDATA[")===0?(f.name="#cdata",f.type=4,f.value=c.decode(h.replace(/^\[CDATA\[|\]\]$/g,""))):h?.indexOf("mce:protected ")===0&&(f.name="#text",f.type=3,f.raw=!0,f.value=unescape(h).substr(14))}})),i.addNodeFilter("xml:namespace,input",((d,m)=>{let f=d.length;for(;f--;){const h=d[f];h.type===7?h.remove():h.type===1&&(m!=="input"||h.attr("type")||h.attr("type","text"))}})),i.addAttributeFilter("data-mce-type",(d=>{K(d,(m=>{m.attr("data-mce-type")==="format-caret"&&(m.isEmpty(i.schema.getNonEmptyElements())?m.remove():m.unwrap())}))})),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",((d,m)=>{let f=d.length;for(;f--;)d[f].attr(m,null)})),l.remove_trailing_brs&&((d,m,f)=>{m.addNodeFilter("br",((h,g,b)=>{const y=E.extend({},f.getBlockElements()),v=f.getNonEmptyElements(),_=f.getWhitespaceElements();y.body=1;const N=D=>D.name in y||_m(f,D);for(let D=0,A=h.length;D<A;D++){let R=h[D],P=R.parent;if(P&&N(P)&&R===P.lastChild){let I=R.prev;for(;I;){const M=I.name;if(M!=="span"||I.attr("data-mce-type")!=="bookmark"){M==="br"&&(R=null);break}I=I.prev}if(R&&(R.remove(),Jl(f,v,_,P))){const M=f.getElementRule(P.name);M&&(M.removeEmpty?P.remove():M.paddEmpty&&wp(d,b,N,P))}}else{let I=R;for(;P&&P.firstChild===I&&P.lastChild===I&&(I=P,!y[P.name]);)P=P.parent;if(I===P){const M=new An("#text",3);M.value=It,R.replace(M)}}}}))})(l,i,i.schema)})(a,o,r),{schema:s,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(i,l={})=>{const{indent:c,entity_encoding:d,...m}=l,f={format:"html",...m},h=((v,_,N)=>((D,A)=>te(D)&&D.hasEventListeners("PreProcess")&&!A.no_events)(v,N)?((D,A,R)=>{let P;const I=D.dom;let M=A.cloneNode(!0);const W=document.implementation;if(W.createHTMLDocument){const B=W.createHTMLDocument("");E.each(M.nodeName==="BODY"?M.childNodes:[M],(F=>{B.body.appendChild(B.importNode(F,!0))})),M=M.nodeName!=="BODY"?B.body.firstChild:B.body,P=I.doc,I.doc=B}return((B,F)=>{B.dispatch("PreProcess",F)})(D,{...R,node:M}),P&&(I.doc=P),M})(v,_,N):_)(t,i,f),g=((v,_,N)=>{const D=vo(N.getInner?_.innerHTML:v.getOuterHTML(_));return N.selection||ud(S.fromDom(_))?D:E.trim(D)})(r,h,f),b=((v,_,N)=>{const D=N.selection?{forced_root_block:!1,...N}:N,A=v.parse(_,D);return(R=>{const P=M=>M?.name==="br",I=R.lastChild;if(P(I)){const M=I.prev;P(M)&&(I.remove(),M.remove())}})(A),A})(a,g,f);if(f.format==="tree")return b;const y={...o,...te(c)?{indent:c}:{},...te(d)?{entity_encoding:d}:{}};return((v,_,N,D,A)=>{const R=((P,I,M)=>Ds(P,I).serialize(M))(_,N,D);return((P,I,M)=>!I.no_events&&P?((B,F)=>B.dispatch("PostProcess",F))(P,{...I,content:M}).content:M)(v,A,R)})(t,y,s,b,f)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:be(GR,a,n),getTempAttrs:ie(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter}},_x=(e,t)=>{const n=QR(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Kp=(e,t,n={})=>{const o=((r,s)=>({format:"html",...r,set:!0,content:s}))(n,t);Mp(e,o).each((r=>{const s=((a,i,l)=>Vp(a).editor.setContent(i,l))(e,r.content,r);Ip(e,s.html,r)}))},su=At.DOM,au=e=>k.from(e).each((t=>t.destroy())),iu=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>Oe(e,t)}})(),Bi=Mn.ModelManager,Nx=(e,t)=>t.dom[e],Ax=(e,t)=>parseInt(Yo(t,e),10),JR=be(Nx,"clientWidth"),ZR=be(Nx,"clientHeight"),eO=be(Ax,"margin-top"),tO=be(Ax,"margin-left"),Tx=e=>{const t=[],n=()=>{const l=e.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},o=()=>k.from(t[0]),r=()=>{o().each((l=>{l.reposition()}))},s=l=>{$s(t,(c=>c===l)).each((c=>{t.splice(c,1)}))},a=(l,c=!0)=>e.removed||!(d=>{return(m=d.inline?d.getBody():d.getContentAreaContainer(),k.from(m).map(S.fromDom)).map(aa).getOr(!1);var m})(e)?{}:(c&&e.dispatch("BeforeOpenNotification",{notification:l}),Ht(t,(d=>{return m=n().getArgs(d),f=l,!(m.type!==f.type||m.text!==f.text||m.progressBar||m.timeout||f.progressBar||f.timeout);var m,f})).getOrThunk((()=>{e.editorManager.setActive(e);const d=n().open(l,(()=>{s(d)}),(()=>Lf(e)));return(m=>{t.push(m)})(d),r(),e.dispatch("OpenNotification",{notification:{...d}}),d}))),i=ie(t);return(l=>{l.on("SkinLoaded",(()=>{const c=AA(l);c&&a({text:c,type:"warning",timeout:0},!1),r()})),l.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",(()=>{requestAnimationFrame(r)})),l.on("remove",(()=>{K(t.slice(),(c=>{n().close(c)}))})),l.on("keydown",(c=>{const d=c.key?.toLowerCase()==="f12"||c.keyCode===123;c.altKey&&d&&(c.preventDefault(),o().map((m=>S.fromDom(m.getEl()))).each((m=>vs(m))))}))})(e),{open:a,close:()=>{o().each((l=>{n().close(l),s(l),r()}))},getNotifications:i}},Pi=Mn.PluginManager,Aa=Mn.ThemeManager,Dx=e=>{let t=[];const n=()=>{const i=e.theme;return i&&i.getWindowManagerImpl?i.getWindowManagerImpl():(()=>{const l=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:l,openUrl:l,alert:l,confirm:l,close:l}})()},o=(i,l)=>(...c)=>l?l.apply(i,c):void 0,r=i=>{(c=>{e.dispatch("CloseWindow",{dialog:c})})(i);const l=zn(t,(({instanceApi:c,triggerElement:d})=>c===i?d:k.none()));t=De(t,(({instanceApi:c})=>c!==i)),t.length===0?e.focus():l.filter(aa).each(vs)},s=i=>{e.editorManager.setActive(e),Bd(e);const l=L();e.ui.show();const c=i();return((d,m)=>{t.push({instanceApi:d,triggerElement:m}),(f=>{e.dispatch("OpenWindow",{dialog:f})})(d)})(c,l),c},a=i=>{t.length!==0&&i.each((l=>vs(l)))};return e.on("remove",(()=>{K(t,(({instanceApi:i})=>{n().close(i)}))})),{open:(i,l)=>s((()=>n().open(i,l,r))),openUrl:i=>s((()=>n().openUrl(i,r))),alert:(i,l,c)=>{const d=L(),m=n();m.alert(i,o(c||m,(()=>{a(d),l?.()})))},confirm:(i,l,c)=>{const d=L(),m=n();m.confirm(i,o(c||m,(f=>{a(d),l?.(f)})))},close:()=>{k.from(t[t.length-1]).each((({instanceApi:i})=>{n().close(i),r(i)}))}}},Rx=(e,t)=>{e.notificationManager.open({type:"error",text:t})},lu=(e,t)=>{e._skinLoaded?Rx(e,t):e.on("SkinLoaded",(()=>{Rx(e,t)}))},Ta=(e,t,n)=>{_0(e,t,{message:n}),console.error(n)},Da=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,cu=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},Ox=new WeakMap,Bx=(e,t)=>{const{type:n,message:o}=t;e.notificationManager.open({type:n,text:o})},nO=e=>{(n=>{switch(n){case"error":return console.error;case"info":return console.info;case"warn":return console.warn;default:return console.log}})(e.type)(e.message)},Xp=(e,t)=>{const{console:n,editor:o}=t;te(o)&&(e._skinLoaded?Bx(e,o):e.on("SkinLoaded",(()=>{Bx(e,o)}))),te(n)&&nO(n)},Yp="Read more: https://www.tiny.cloud/docs/tinymce/latest/license-key/",oO="Make sure to provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms.",Px=(e,t)=>{Xp(e,{console:{type:"error",message:[`The "${t}" plugin requires a valid TinyMCE license key.`,Yp].join(" ")}})},Lx="licensekeymanager",Mx=e=>{const t=(r=>xe(wT(r))?"online":"offline")(e),n=(r=>{const s=xT(r)?.toLowerCase();return s==="gpl"?"gpl":kt(s)?"no_key":"non_gpl"})(e),o=new Set(Pl(e)).has(Lx);return n!=="gpl"||t==="online"||o?{type:"use_plugin",onlineStatus:t,licenseKeyType:n,forcePlugin:o}:{type:"use_gpl",onlineStatus:t,licenseKeyType:n,forcePlugin:o}},du="manager",rO=Lx,Gp=(()=>{const e=Mn();return{load:(t,n)=>{if(Mx(t).type==="use_plugin"){const o=`plugins/${rO}/plugin${n}.js`;e.load(du,o).catch((()=>{((r,s)=>{Ta(r,"LicenseKeyManagerLoadError",Da("license key manager",s))})(t,o)}))}},add:t=>{e.add(du,t)},init:t=>{const n=s=>{Object.defineProperty(t,"licenseKeyManager",{value:s,writable:!1,configurable:!1,enumerable:!0})},o=Mx(t),r=e.get(du);if(te(r))n(r(t,e.urls[du]));else switch(o.type){case"use_gpl":n((s=>({validate:a=>{const{plugin:i}=a,l=xe(i);return l&&Px(s,i),Promise.resolve(!l)}}))(t));break;case"use_plugin":(s=>{Ox.has(s)||(Ox.set(s,!0),s.initialized?(s.removed||s.mode.set("readonly"),s.options.set("disabled",!0)):s.on("init",(()=>{s.removed||s.mode.set("readonly"),s.options.set("disabled",!0)})),s.on("DisabledStateChange",(a=>{const{state:i}=a;i||a.preventDefault()}),!0),s.on("SwitchMode",(a=>{const{mode:i}=a;i!=="readonly"&&s.mode.set("readonly")})))})(t),n((s=>({validate:a=>{const{plugin:i}=a;return xe(i)&&Px(s,i),Promise.resolve(!1)}}))(t)),o.onlineStatus==="offline"&&o.licenseKeyType==="no_key"?(s=>{const a="The editor is disabled because a TinyMCE license key has not been provided.";Xp(s,{console:{type:"error",message:[`${a}`,oO,Yp].join(" ")},editor:{type:"warning",message:`${a}`}})})(t):((s,a)=>{const i=(a==="online"?"API":"license")+" key",l=`The editor is disabled because the TinyMCE ${i} could not be validated.`;Xp(s,{console:{type:"error",message:[`${l}`,`The TinyMCE Commercial License Key Manager plugin is required for the provided ${i} to be validated but could not be loaded.`,Yp].join(" ")},editor:{type:"warning",message:`${l}`}})})(t,o.onlineStatus)}t.licenseKeyManager.validate({})}}})(),Qp=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},Ix=(e,t,n)=>{dm(e,t)&&!n?bl(e,t):n&&ai(e,t)},Fx=e=>{const t=S.fromDom(e.getBody());Ix(t,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),(n=>{k.from(n.selection.getNode()).each((o=>{o.removeAttribute("data-mce-selected")}))})(e)},jx=e=>{const t=S.fromDom(e.getBody());Ix(t,"mce-content-readonly",!1),e.hasEditableRoot()&&Zc(t,!0),((n,o)=>{Qp(n,"StyleWithCSS",o),Qp(n,"enableInlineTableEditing",o),Qp(n,"enableObjectResizing",o)})(e,!1),Lf(e)&&e.focus(),(n=>{n.selection.setRng(n.selection.getRng())})(e),e.nodeChanged()},ss=e=>xd(e),Ra="data-mce-contenteditable",zx=(e,t)=>{const n=S.fromDom(e.getBody());t?(Fx(e),Zc(n,!1),K(_n(n,'*[contenteditable="true"]'),(o=>{lt(o,Ra,"true"),Zc(o,!1)}))):(K(_n(n,`*[${Ra}="true"]`),(o=>{vt(o,Ra),Zc(o,!0)})),jx(e))},Ux=e=>{e.parser.addAttributeFilter("contenteditable",(t=>{ss(e)&&K(t,(n=>{n.attr(Ra,n.attr("contenteditable")),n.attr("contenteditable","false")}))})),e.serializer.addAttributeFilter(Ra,(t=>{ss(e)&&K(t,(n=>{n.attr("contenteditable",n.attr(Ra))}))})),e.serializer.addTempAttr(Ra)},sO=["copy"],Jp=e=>"content/"+e+"/content.css",Hx=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`;return qe(t,(r=>(s=>tinymce.Resource.has(Jp(s)))(r)?r:(s=>/^[a-z0-9\-]+$/i.test(s))(r)&&!e.inline?`${n}/${r}/${o}`:e.documentBaseURI.toAbsolute(r)))},aO=(e,t)=>{const n={};return{findAll:(o,r=jt)=>{const s=De((i=>i?vn(i.getElementsByTagName("img")):[])(o),(i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===p.transparentSrc)&&(Gt(l,"blob:")?!e.isUploaded(l)&&r(i):!!Gt(l,"data:")&&r(i))})),a=qe(s,(i=>{const l=i.src;if(Oe(n,l))return n[l].then((c=>xe(c)?c:{image:i,blobInfo:c.blobInfo}));{const c=((d,m)=>{const f=()=>Promise.reject("Invalid data URI");if(Gt(m,"blob:")){const b=d.getByUri(m);return te(b)?Promise.resolve(b):(h=m,Gt(h,"blob:")?(y=>fetch(y).then((v=>v.ok?v.blob():Promise.reject())).catch((()=>Promise.reject({message:`Cannot convert ${y} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))))(h):Gt(h,"data:")?(g=h,new Promise(((y,v)=>{kp(g).bind((({type:_,data:N,base64Encoded:D})=>g1(_,N,D))).fold((()=>v("Invalid data URI")),y)}))):Promise.reject("Unknown URI format")).then((y=>h1(y).then((v=>b1(v,!1,(_=>k.some(y1(d,y,_)))).getOrThunk(f)))))}var h,g;return Gt(m,"data:")?v1(d,m).fold(f,(b=>Promise.resolve(b))):Promise.reject("Unknown image data format")})(t,l).then((d=>(delete n[l],{image:i,blobInfo:d}))).catch((d=>(delete n[l],d)));return n[l]=c,c}}));return Promise.all(a)}}},$x=()=>{let e={};const t=(o,r)=>({status:o,resultUri:r}),n=o=>o in e;return{hasBlobUri:n,getResultUri:o=>{const r=e[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&e[o].status===1,isUploaded:o=>!!n(o)&&e[o].status===2,markPending:o=>{e[o]=t(1,null)},markUploaded:(o,r)=>{e[o]=t(2,r)},removeFailed:o=>{delete e[o]},destroy:()=>{e={}}}};let iO=0;const lO=(e,t)=>{const n={},o=(l,c)=>new Promise(((d,m)=>{const f=new XMLHttpRequest;f.open("POST",t.url),f.withCredentials=t.credentials,f.upload.onprogress=g=>{c(g.loaded/g.total*100)},f.onerror=()=>{m("Image upload failed due to a XHR Transport error. Code: "+f.status)},f.onload=()=>{if(f.status<200||f.status>=300)return void m("HTTP Error: "+f.status);const g=JSON.parse(f.responseText);var b,y;g&&xe(g.location)?d((b=t.basePath,y=g.location,b?b.replace(/\/$/,"")+"/"+y.replace(/^\//,""):y)):m("Invalid JSON: "+f.responseText)};const h=new FormData;h.append("file",l.blob(),l.filename()),f.send(h)})),r=pt(t.handler)?t.handler:o,s=(l,c)=>({url:c,blobInfo:l,status:!0}),a=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),i=(l,c)=>{E.each(n[l],(d=>{d(c)})),delete n[l]};return{upload:(l,c)=>t.url||r!==o?((d,m)=>(d=E.grep(d,(f=>!e.isUploaded(f.blobUri()))),Promise.all(E.map(d,(f=>e.isPending(f.blobUri())?(h=>{const g=h.blobUri();return new Promise((b=>{n[g]=n[g]||[],n[g].push(b)}))})(f):((h,g,b)=>(e.markPending(h.blobUri()),new Promise((y=>{let v,_;try{const N=()=>{v&&(v.close(),_=Ee)},D=R=>{N(),e.markUploaded(h.blobUri(),R),i(h.blobUri(),s(h,R)),y(s(h,R))},A=R=>{N(),e.removeFailed(h.blobUri()),i(h.blobUri(),a(h,R)),y(a(h,R))};_=R=>{R<0||R>100||k.from(v).orThunk((()=>k.from(b).map(vr))).each((P=>{v=P,P.progressBar.value(R)}))},g(h,_).then(D,(R=>{A(xe(R)?{message:R}:R)}))}catch(N){y(a(h,N))}}))))(f,r,m))))))(l,c):new Promise((d=>{d([])}))}},qx=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Wx=(e,t)=>lO(t,{url:gA(e),basePath:hA(e),credentials:bA(e),handler:yA(e)}),cO=e=>{const t=(()=>{let b=[];const y=N=>{if(!N.blob||!N.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const D=N.id||"blobid"+iO+++(()=>{const I=()=>Math.round(4294967295*Ha()).toString(36);return"s"+new Date().getTime().toString(36)+I()+I()+I()})(),A=N.name||D,R=N.blob;var P;return{id:ie(D),name:ie(A),filename:ie(N.filename||A+"."+(P=R.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[P.toLowerCase()]||"dat")),blob:ie(R),base64:ie(N.base64),blobUri:ie(N.blobUri||URL.createObjectURL(R)),uri:ie(N.uri)}},v=N=>Ht(b,N).getOrUndefined(),_=N=>v((D=>D.id()===N));return{create:(N,D,A,R,P)=>{if(xe(N))return y({id:N,name:R,filename:P,blob:D,base64:A});if(He(N))return y(N);throw new Error("Unknown input type")},add:N=>{_(N.id())||b.push(N)},get:_,getByUri:N=>v((D=>D.blobUri()===N)),getByData:(N,D)=>v((A=>A.base64()===N&&A.blob().type===D)),findFirst:v,removeByUri:N=>{b=De(b,(D=>D.blobUri()!==N||(URL.revokeObjectURL(D.blobUri()),!1)))},destroy:()=>{K(b,(N=>{URL.revokeObjectURL(N.blobUri())})),b=[]}}})();let n,o;const r=$x(),s=[],a=b=>y=>e.selection?b(y):[],i=(b,y,v)=>{let _=0;do _=b.indexOf(y,_),_!==-1&&(b=b.substring(0,_)+v+b.substr(_+y.length),_+=v.length-y.length+1);while(_!==-1);return b},l=(b,y,v)=>{const _=`src="${v}"${v===p.transparentSrc?' data-mce-placeholder="1"':""}`;return b=i(b,`src="${y}"`,_),i(b,'data-mce-src="'+y+'"','data-mce-src="'+v+'"')},c=(b,y)=>{K(e.undoManager.data,(v=>{v.type==="fragmented"?v.fragments=qe(v.fragments,(_=>l(_,b,y))):v.content=l(v.content,b,y)}))},d=()=>(n||(n=Wx(e,r)),h().then(a((b=>{const y=qe(b,(v=>v.blobInfo));return n.upload(y,qx(e)).then(a((v=>{const _=[];let N=!1;const D=qe(v,((A,R)=>{const{blobInfo:P,image:I}=b[R];let M=!1;return A.status&&fA(e)?(A.url&&!pn(I.src,A.url)&&(N=!0),t.removeByUri(I.src),Mr(e)||((W,B)=>{const F=e.convertURL(B,"src");var H;c(W.src,B),Qe(S.fromDom(W),{src:I0(e)?(H=B,H+(H.indexOf("?")===-1?"?":"&")+new Date().getTime()):B,"data-mce-src":F})})(I,A.url)):A.error&&(A.error.remove&&(c(I.src,p.transparentSrc),_.push(I),M=!0),((W,B)=>{lu(W,ur.translate(["Failed to upload image: {0}",B]))})(e,A.error.message)),{element:I,status:A.status,uploadUri:A.url,blobInfo:P,removed:M}}));return _.length>0&&!Mr(e)?e.undoManager.transact((()=>{K(Ar(_),(A=>{const R=gn(A);ft(A),R.each((P=>I=>{((M,W)=>M.dom.isEmpty(W.dom)&&te(M.schema.getTextBlockElements()[Be(W)]))(P,I)&&ne(I,S.fromHtml('<br data-mce-bogus="1" />'))})(e)),t.removeByUri(A.dom.src)}))})):N&&e.undoManager.dispatchChange(),D})))})))),m=()=>M0(e)?d():Promise.resolve([]),f=b=>eo(s,(y=>y(b))),h=()=>(o||(o=aO(r,t)),o.findAll(e.getBody(),f).then(a((b=>{const y=De(b,(v=>xe(v)?(lu(e,v),!1):v.uriType!=="blob"));return Mr(e)||K(y,(v=>{c(v.image.src,v.blobInfo.blobUri()),v.image.src=v.blobInfo.blobUri(),v.image.removeAttribute("data-mce-src")})),y})))),g=b=>b.replace(/src="(blob:[^"]+)"/g,((y,v)=>{const _=r.getResultUri(v);if(_)return'src="'+_+'"';let N=t.getByUri(v);return N||(N=Yt(e.editorManager.get(),((D,A)=>D||A.editorUpload&&A.editorUpload.blobCache.getByUri(v)),void 0)),N?'src="data:'+N.blob().type+";base64,"+N.base64()+'"':y}));return e.on("SetContent",(()=>{M0(e)?m():h()})),e.on("RawSaveContent",(b=>{b.content=g(b.content)})),e.on("GetContent",(b=>{b.source_view||b.format==="raw"||b.format==="tree"||(b.content=g(b.content))})),e.on("PostRender",(()=>{e.parser.addNodeFilter("img",(b=>{K(b,(y=>{const v=y.attr("src");if(!v||t.getByUri(v))return;const _=r.getResultUri(v);_&&y.attr("src",_)}))}))})),{blobCache:t,addFilter:b=>{s.push(b)},uploadImages:d,uploadImagesAuto:m,scanForImages:h,destroy:()=>{t.destroy(),r.destroy(),o=n=null}}},Vx={remove_similar:!0,inherit:!1},Li={selector:"td,th",...Vx},dO={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Li},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Li},tablecellbordercolor:{styles:{borderColor:"%value"},...Li},tablecellclass:{classes:["%value"],...Li},tableclass:{selector:"table",classes:["%value"],...Vx},tablecellborderstyle:{styles:{borderStyle:"%value"},...Li},tablecellborderwidth:{styles:{borderWidth:"%value"},...Li}},uO=ie(dO),uu=E.each,Fo=At.DOM,Zp=e=>te(e)&&He(e),Kx=(e,t)=>{const n=t&&t.schema||ws({}),o=a=>{const i=xe(a)?{name:a,classes:[],attrs:{}}:a,l=Fo.create(i.name);return((c,d)=>{d.classes.length>0&&Fo.addClass(c,d.classes.join(" ")),Fo.setAttribs(c,d.attrs)})(l,i),l},r=(a,i,l)=>{let c;const d=i[0],m=Zp(d)?d.name:void 0,f=((b,y)=>{const v=n.getElementRule(b.nodeName.toLowerCase()),_=v?.parentsRequired;return!(!_||!_.length)&&(y&&we(_,y)?y:_[0])})(a,m);if(f)m===f?(c=d,i=i.slice(1)):c=f;else if(d)c=d,i=i.slice(1);else if(!l)return a;const h=c?o(c):Fo.create("div");h.appendChild(a),l&&E.each(l,(b=>{const y=o(b);h.insertBefore(y,a)}));const g=Zp(c)?c.siblings:void 0;return r(h,i,g)},s=Fo.create("div");if(e.length>0){const a=e[0],i=o(a),l=Zp(a)?a.siblings:void 0;s.appendChild(r(i,e.slice(1),l))}return s},mO=e=>{let t="div";const n={name:t,classes:[],attrs:{},selector:e=E.trim(e)};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,((o,r,s,a,i)=>{switch(r){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":E.inArray("checked disabled enabled read-only required".split(" "),s)!==-1&&(n.attrs[s]=s)}if(a==="["){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""}))),n.name=t||"div",n},fO=(e,t)=>{let n="",o=OA(e);if(o==="")return"";const r=h=>xe(h)?h.replace(/%(\w+)/g,""):"",s=(h,g)=>Fo.getStyle(g??e.getBody(),h,!0);if(xe(t)){const h=e.formatter.get(t);if(!h)return"";t=h[0]}if("preview"in t){const h=t.preview;if(h===!1)return"";o=h||o}let a,i=t.block||t.inline||"span";const l=(c=t.selector,xe(c)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),E.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),(h=>{const g=E.map(h.split(/(?:~\+|~|\+)/),mO),b=g.pop();return g.length&&(b.siblings=g),b})).reverse()):[]);var c;l.length>0?(l[0].name||(l[0].name=i),i=t.selector,a=Kx(l,e)):a=Kx([i],e);const d=Fo.select(i,a)[0]||a.firstChild;uu(t.styles,((h,g)=>{const b=r(h);b&&Fo.setStyle(d,g,b)})),uu(t.attributes,((h,g)=>{const b=r(h);b&&Fo.setAttrib(d,g,b)})),uu(t.classes,(h=>{const g=r(h);Fo.hasClass(d,g)||Fo.addClass(d,g)})),e.dispatch("PreviewFormats"),Fo.setStyles(a,{position:"absolute",left:-65535}),e.getBody().appendChild(a);const m=s("fontSize"),f=/px$/.test(m)?parseInt(m,10):0;return uu(o.split(" "),(h=>{let g=s(h,d);if(!(h==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=s(h),Cl(g).toLowerCase()==="#ffffff")||h==="color"&&Cl(g).toLowerCase()==="#000000")){if(h==="font-size"&&/em|%$/.test(g)){if(f===0)return;g=parseFloat(g)/(/%$/.test(g)?100:1)*f+"px"}h==="border"&&g&&(n+="padding:0 2px;"),n+=h+":"+g+";"}})),e.dispatch("AfterPreviewFormats"),Fo.remove(a),n},Xx=e=>{const t=(o=>{const r={},s=(a,i)=>{a&&(xe(a)?(re(i)||(i=[i]),K(i,(l=>{Lt(l.deep)&&(l.deep=!Po(l)),Lt(l.split)&&(l.split=!Po(l)||cn(l)),Lt(l.remove)&&Po(l)&&!cn(l)&&(l.remove="none"),Po(l)&&cn(l)&&(l.mixed=!0,l.block_expand=!0),xe(l.classes)&&(l.classes=l.classes.split(/\s+/))})),r[a]=i):wt(a,((l,c)=>{s(c,l)})))};return s((a=>{const i=a.dom,l=a.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:d=>{i.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:d=>{i.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const d={inline:"span",styles:{textDecoration:"line-through"},exact:!0},m={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return l!=="html4"?[f,d,m]:[d,f,m]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(d,m,f)=>ve(d)&&d.hasAttribute("href"),onformat:(d,m,f)=>{E.each(f,((h,g)=>{i.setAttrib(d,g,h)}))}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":d=>d?.customValue??null}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return E.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),(d=>{c[d]={block:d,remove:"all"}})),c})(o)),s(uO()),s(RA(o)),{get:a=>te(a)?r[a]:r,has:a=>Oe(r,a),register:s,unregister:a=>(a&&r[a]&&delete r[a],r)}})(e),n=Qt({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),(o=>{o.on("mouseup keydown",(r=>{var s;((a,i,l)=>{const c=a.selection,d=a.getBody();pp(a,null,l),i!==8&&i!==46||!c.isCollapsed()||c.getStart().innerHTML!==Gl||pp(a,xa(d,c.getStart()),!0),i!==37&&i!==39||pp(a,xa(d,c.getStart()),!0)})(o,r.keyCode,(s=o.selection.getRng().endContainer,se(s)&&Xa(s.data,It)))}))})(e),Mr(e)||((o,r)=>{o.set({}),r.on("NodeChange",(s=>{dx(r,s.element,o.get())})),r.on("FormatApply FormatRemove",(s=>{const a=k.from(s.node).map((i=>Ul(i)?i:i.startContainer)).bind((i=>ve(i)?k.some(i):k.from(i.parentElement))).getOrThunk((()=>ix(r)));dx(r,a,o.get())}))})(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(o,r,s)=>{((a,i,l,c)=>{ln(a).formatter.apply(i,l,c)})(e,o,r,s)},remove:(o,r,s,a)=>{((i,l,c,d,m)=>{ln(i).formatter.remove(l,c,d,m)})(e,o,r,s,a)},toggle:(o,r,s)=>{((a,i,l,c)=>{ln(a).formatter.toggle(i,l,c)})(e,o,r,s)},match:(o,r,s,a)=>((i,l,c,d,m)=>ln(i).formatter.match(l,c,d,m))(e,o,r,s,a),closest:o=>((r,s)=>ln(r).formatter.closest(s))(e,o),matchAll:(o,r)=>((s,a,i)=>ln(s).formatter.matchAll(a,i))(e,o,r),matchNode:(o,r,s,a)=>((i,l,c,d,m)=>ln(i).formatter.matchNode(l,c,d,m))(e,o,r,s,a),canApply:o=>((r,s)=>ln(r).formatter.canApply(s))(e,o),formatChanged:(o,r,s,a)=>((i,l,c,d,m,f)=>ln(i).formatter.formatChanged(l,c,d,m,f))(e,n,o,r,s,a),getCssText:be(fO,e)}},Yx=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Gx=e=>{const t=$o(),n=Qt(0),o=Qt(0),r={data:[],typing:!1,beforeChange:()=>{((s,a,i)=>{ln(s).undoManager.beforeChange(a,i)})(e,n,t)},add:(s,a)=>((i,l,c,d,m,f,h)=>ln(i).undoManager.add(l,c,d,m,f,h))(e,r,o,n,t,s,a),dispatchChange:()=>{e.setDirty(!0);const s=ou(e);s.bookmark=Jm(e.selection),e.dispatch("change",{level:s,lastLevel:qs(r.data,o.get()).getOrUndefined()})},undo:()=>((s,a,i,l)=>ln(s).undoManager.undo(a,i,l))(e,r,n,o),redo:()=>((s,a,i)=>ln(s).undoManager.redo(a,i))(e,o,r.data),clear:()=>{((s,a,i)=>{ln(s).undoManager.clear(a,i)})(e,r,o)},reset:()=>{((s,a)=>{ln(s).undoManager.reset(a)})(e,r)},hasUndo:()=>((s,a,i)=>ln(s).undoManager.hasUndo(a,i))(e,r,o),hasRedo:()=>((s,a,i)=>ln(s).undoManager.hasRedo(a,i))(e,r,o),transact:s=>((a,i,l,c)=>ln(a).undoManager.transact(i,l,c))(e,r,n,s),ignore:s=>{((a,i,l)=>{ln(a).undoManager.ignore(i,l)})(e,n,s)},extra:(s,a)=>{((i,l,c,d,m)=>{ln(i).undoManager.extra(l,c,d,m)})(e,r,o,s,a)}};return Mr(e)||((s,a,i)=>{const l=Qt(!1),c=d=>{ru(a,!1,i),a.add({},d)};s.on("init",(()=>{a.add()})),s.on("BeforeExecCommand",(d=>{const m=d.command;Yx(m)||(Cx(a,i),a.beforeChange())})),s.on("ExecCommand",(d=>{const m=d.command;Yx(m)||c(d)})),s.on("ObjectResizeStart cut",(()=>{a.beforeChange()})),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",(d=>{const m=d.keyCode;if(d.isDefaultPrevented())return;const f=p.os.isMacOS()&&d.key==="Meta";(m>=33&&m<=36||m>=37&&m<=40||m===45||d.ctrlKey||f)&&(c(),s.nodeChanged()),m!==46&&m!==8||s.nodeChanged(),l.get()&&a.typing&&!qp(ou(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())})),s.on("keydown",(d=>{const m=d.keyCode;if(d.isDefaultPrevented())return;if(m>=33&&m<=36||m>=37&&m<=40||m===45)return void(a.typing&&c(d));const f=d.ctrlKey&&!d.altKey||d.metaKey;if((m<16||m>20)&&m!==224&&m!==91&&!a.typing&&!f)return a.beforeChange(),ru(a,!0,i),a.add({},d),void l.set(!0);(p.os.isMacOS()?d.metaKey:d.ctrlKey&&!d.altKey)&&a.beforeChange()})),s.on("mousedown",(d=>{a.typing&&c(d)})),s.on("input",(d=>{var m;d.inputType&&(d.inputType==="insertReplacementText"||(m=d).inputType==="insertText"&&m.data===null||(f=>f.inputType==="insertFromPaste"||f.inputType==="insertFromDrop")(d))&&c(d)})),s.on("AddUndo Undo Redo ClearUndos",(d=>{d.isDefaultPrevented()||s.nodeChanged()}))})(e,r,n),(s=>{s.addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo")})(e),r},pO=[9,27,de.HOME,de.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,de.DOWN,de.UP,de.LEFT,de.RIGHT].concat(p.browser.isFirefox()?[224]:[]),Qx="data-mce-placeholder",Jx=e=>e.type==="keydown"||e.type==="keyup",Zx=e=>{const t=e.keyCode;return t===de.BACKSPACE||t===de.DELETE},mu=e=>t=>te(t)&&e.test(t.nodeName),Ir=e=>te(e)&&e.nodeType===3,ew=e=>te(e)&&e.nodeType===1,jo=mu(/^(OL|UL|DL)$/),gO=mu(/^(OL|UL)$/),fu=mu(/^(LI|DT|DD)$/),hO=mu(/^(DT|DD)$/),Oa=e=>te(e)&&e.nodeName.toLowerCase()==="br",eg=(e,t)=>te(t)&&t.nodeName in e.schema.getTextBlockElements(),tg=(e,t)=>te(e)&&e.nodeName in t,bO=(e,t)=>te(t)&&t.nodeName in e.schema.getVoidElements(),Ba=(e,t,n)=>{const o=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&o},tw=(e,t)=>e.isChildOf(t,e.getRoot()),nw=At.DOM,ng=(e,t)=>{const n=E.grep(e.select("ol,ul",t));E.each(n,(o=>{((r,s)=>{const a=s.parentElement;if(a&&a.nodeName==="LI"&&a.firstChild===s){const i=a.previousSibling;i&&i.nodeName==="LI"?(i.appendChild(s),Ba(r,a)&&nw.remove(a)):nw.setStyle(a,"listStyleType","none")}if(jo(a)){const i=a.previousSibling;i&&i.nodeName==="LI"&&i.appendChild(s)}})(e,o)}))},ow=(e,t)=>{if(Ir(e))return{container:e,offset:t};const n=Lr.getNode(e,t);return Ir(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&Ir(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&Ir(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},og=e=>{const t=e.cloneRange(),n=ow(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);const o=ow(e.endContainer,e.endOffset);return t.setEnd(o.container,o.offset),t},rw=["OL","UL","DL"],sw=rw.join(","),rc=(e,t)=>{const n=t||e.selection.getStart(!0);return e.dom.getParent(n,sw,sc(e,n))},rg=e=>{const t=e.selection.getSelectedBlocks();return De(((n,o)=>{const r=E.map(o,(s=>n.dom.getParent(s,"li,dd,dt",sc(n,s))||s));return ho(r)})(e,t),fu)},sg=(e,t)=>{const n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},sc=(e,t)=>{const n=e.dom.getParents(t,e.dom.isBlock);return Ht(n,(r=>{return(i=>i.nodeName.toLowerCase()!==xn(e))(r)&&(s=e.schema,!jo(a=r)&&!fu(a)&&xt(rw,(i=>s.isValidChild(a.nodeName,i))));var s,a})).getOr(e.getBody())},aw=(e,t)=>{const n=e.dom.getParents(t,"ol,ul",sc(e,t));return to(n)},yO=(e,t)=>{const n=qe(t,(o=>aw(e,o).getOr(o)));return ho(n)},pu=e=>/\btox\-/.test(e.className),iw=(e,t)=>t!==null&&!e.dom.isEditable(t),ag=(e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return iw(e,n)||!e.selection.isEditable()},Pa=(e,t,n)=>e.dispatch("ListMutation",{action:t,element:n}),lw=(e,t,n={})=>{const o=e.dom,r=e.schema.getBlockElements(),s=o.createFragment(),a=xn(e),i=yi(e);let l,c,d=!1;for(c=o.create(a,{...i,...n.style?{style:n.style}:{}}),tg(t.firstChild,r)||s.appendChild(c);l=t.firstChild;){const m=l.nodeName;d||m==="SPAN"&&l.getAttribute("data-mce-type")==="bookmark"||(d=!0),tg(l,r)?(s.appendChild(l),c=null):(c||(c=o.create(a,i),s.appendChild(c)),c.appendChild(l))}return!d&&c&&c.appendChild(o.create("br",{"data-mce-bogus":"1"})),s},ac=e=>mt(e,"OL,UL"),cw=e=>Bt(e).exists(ac),La=e=>"listAttributes"in e,dw=e=>"isComment"in e,uw=e=>e.depth>0,vO=e=>e.isSelected,CO=e=>{const t=ht(e),n=Hn(e).exists(ac)?t.slice(0,-1):t;return qe(n,so)},mw=(e,t)=>{ne(e.item,t.list)},xO=(e,t)=>{const n={list:S.fromTag(t,e),item:S.fromTag("li",e)};return ne(n.list,n.item),n},fw=(e,t,n)=>{const o=t.slice(0,n.depth);return to(o).each((r=>{if(La(n)){const s=((a,i,l)=>{const c=S.fromTag("li",a);return Qe(c,i),ze(c,l),c})(e,n.itemAttributes,n.content);((a,i)=>{ne(a.list,i),a.item=i})(r,s),((a,i)=>{Be(a.list)!==i.listType&&(a.list=Qr(a.list,i.listType)),Qe(a.list,i.listAttributes)})(r,n)}else if((s=>"isFragment"in s)(n))ze(r.item,n.content);else{const s=S.fromHtml(`<!--${n.content}-->`);ne(r.list,s)}})),o},pw=e=>(K(e,((t,n)=>{((o,r)=>{const s=o[r].depth,a=l=>l.depth===s&&!l.dirty,i=l=>l.depth<s;return go(Eo(o.slice(0,r)),a,i).orThunk((()=>go(o.slice(r+1),a,i)))})(e,n).fold((()=>{t.dirty&&La(t)&&(o=>{o.listAttributes=tr(o.listAttributes,((r,s)=>s!=="start"))})(t)}),(o=>{return s=o,void(La(r=t)&&La(s)&&(r.listType=s.listType,r.listAttributes={...s.listAttributes}));var r,s}))})),e),gw=(e,t,n,o)=>{if(St(o))return[{depth:e+1,content:o.dom.nodeValue??"",dirty:!1,isSelected:!1,isComment:!0}];t.each((a=>{me(a.start,o)&&n.set(!0)}));const r=((a,i,l)=>gn(a).filter(ot).map((c=>({depth:i,dirty:!1,isSelected:l,content:CO(a),itemAttributes:en(a),listAttributes:en(c),listType:Be(c),isInPreviousLi:!1}))))(o,e,n.get());t.each((a=>{me(a.end,o)&&n.set(!1)}));const s=Hn(o).filter(ac).map((a=>gu(e,t,n,a))).getOr([]);return r.toArray().concat(s)},wO=(e,t,n,o)=>Bt(o).filter(ac).fold((()=>gw(e,t,n,o)),(r=>{const s=Yt(ht(o),((a,i,l)=>{if(l===0)return a;if(mt(i,"LI"))return a.concat(gw(e,t,n,i));{const c={isFragment:!0,depth:e,content:[i],isSelected:!1,dirty:!1,parentListType:Be(r)};return a.concat(c)}}),[]);return gu(e,t,n,r).concat(s)})),gu=(e,t,n,o)=>$t(ht(o),(r=>(ac(r)?gu:wO)(e+1,t,n,r))),SO=(e,t)=>{const n=pw(t);return((o,r)=>{let s=k.none();const a=Yt(r,((i,l,c)=>dw(l)?c===0?(s=k.some(l),i):fw(o,i,l):l.depth>i.length?((d,m,f)=>{const h=((b,y,v)=>{const _=[];for(let N=0;N<v;N++)_.push(xO(b,La(y)?y.listType:y.parentListType));return _})(d,f,f.depth-m.length);var g;return(b=>{for(let y=1;y<b.length;y++)mw(b[y-1],b[y])})(h),((b,y)=>{for(let v=0;v<b.length-1;v++)Kc(b[v].item,"list-style-type","none");to(b).each((v=>{La(y)&&(Qe(v.list,y.listAttributes),Qe(v.item,y.itemAttributes)),ze(v.item,y.content)}))})(h,f),g=h,zt(to(m),nn(g),mw),m.concat(h)})(o,i,l):fw(o,i,l)),[]);return s.each((i=>{const l=S.fromHtml(`<!--${i.content}-->`);nn(a).each((c=>{oe(c.list,l)}))})),nn(a).map((i=>i.list))})(e.contentDocument,n).toArray()},EO=(e,t,n)=>{const o=((r,s)=>{const a=Qt(!1);return qe(r,(i=>({sourceList:i,entries:gu(0,s,a,i)})))})(t,(r=>{const s=qe(rg(r),S.fromDom);return zt(Ht(s,Ho(cw)),Ht(Eo(s),Ho(cw)),((a,i)=>({start:a,end:i})))})(e));K(o,(r=>{((i,l,c)=>{K(De(l,vO),(d=>((m,f,h)=>{switch(f){case"Indent":if(!((g,b)=>J0(g).map((y=>y>=b)).getOr(!0))(m,h.depth))return;h.depth++;break;case"Outdent":h.depth--;break;case"Flatten":h.depth=0}h.dirty=!0})(i,c,d)))})(e,r.entries,n);const s=((i,l)=>$t(((c,d)=>{if(c.length===0)return[];{let m=d(c[0]);const f=[];let h=[];for(let g=0,b=c.length;g<b;g++){const y=c[g],v=d(y);v!==m&&(f.push(h),h=[]),m=v,h.push(y)}return h.length!==0&&f.push(h),f}})(l,uw),(c=>nn(c).exists(uw)?SO(i,c):((d,m)=>{const f=pw(m);return qe(f,(h=>{const g=dw(h)?gl([S.fromHtml(`<!--${h.content}-->`)]):gl(h.content),b=La(h)?h.itemAttributes:{};return S.fromDom(lw(d,g.dom,b))}))})(i,c))))(e,r.entries);var a;K(s,(i=>{Pa(e,n==="Indent"?"IndentList":"OutdentList",i.dom)})),a=r.sourceList,K(s,(i=>{$(a,i)})),ft(r.sourceList)}))},Ms=At.DOM,kO=Cn("dd"),hw=Cn("dt"),_O=e=>{hw(e)&&Qr(e,"dd")},NO=(e,t,n)=>{K(n,t==="Indent"?_O:o=>((r,s)=>{kO(s)?Qr(s,"dt"):hw(s)&&En(s).each((a=>((i,l,c)=>{const d=Ms.select('span[data-mce-type="bookmark"]',l),m=lw(i,c),f=Ms.createRng();f.setStartAfter(c),f.setEndAfter(l);const h=f.extractContents();for(let b=h.firstChild;b;b=b.firstChild)if(b.nodeName==="LI"&&i.dom.isEmpty(b)){Ms.remove(b);break}i.dom.isEmpty(h)||Ms.insertAfter(h,l),Ms.insertAfter(m,l);const g=c.parentElement;g&&Ba(i.dom,g)&&(b=>{const y=b.parentNode;y&&E.each(d,(v=>{y.insertBefore(v,c.parentNode)})),Ms.remove(b)})(g),Ms.remove(c),Ba(i.dom,l)&&Ms.remove(l)})(r,a.dom,s.dom)))})(e,o))},AO=(e,t)=>{const n=Ar((s=>{const a=(l=>{const c=aw(l,l.selection.getStart()),d=De(l.selection.getSelectedBlocks(),gO);return c.toArray().concat(d)})(s),i=(l=>{const c=l.selection.getStart();return l.dom.getParents(c,"ol,ul",sc(l,c))})(s);return Ht(i,(l=>{return c=S.fromDom(l),gn(c).exists((d=>fu(d.dom)&&Bt(d).exists((m=>!jo(m.dom)))&&Hn(d).exists((m=>!jo(m.dom)))));var c})).fold((()=>yO(s,a)),(l=>[l]))})(e)),o=Ar((s=>De(rg(s),hO))(e));let r=!1;if(n.length||o.length){const s=e.selection.getBookmark();EO(e,n,t),NO(e,t,o),e.selection.moveToBookmark(s),e.selection.setRng(og(e.selection.getRng())),e.nodeChanged(),r=!0}return r},ig=(e,t)=>!(n=>{const o=rc(n);return iw(n,o)||!n.selection.isEditable()})(e)&&AO(e,t),bw=e=>ig(e,"Indent"),lg=e=>ig(e,"Outdent"),hu=e=>ig(e,"Flatten"),Mi=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},yw=(e,t)=>{E.each(t,((n,o)=>{e.setAttribute(o,n)}))},Ii=(e,t,n)=>{((o,r,s)=>{const a=s["list-style-type"]?s["list-style-type"]:null;o.setStyle(r,"list-style-type",a)})(e,t,n),((o,r,s)=>{yw(r,s["list-attributes"]),E.each(o.select("li",r),(a=>{yw(a,s["list-item-attributes"])}))})(e,t,n)},bu=(e,t)=>te(t)&&!tg(t,e.schema.getBlockElements()),cg=(e,t,n,o)=>{let r=t[n?"startContainer":"endContainer"];const s=t[n?"startOffset":"endOffset"];ew(r)&&(r=r.childNodes[Math.min(s,r.childNodes.length-1)]||r),!n&&Oa(r.nextSibling)&&(r=r.nextSibling);const a=(i,l)=>{const c=new an(i,(f=>{for(;!e.dom.isBlock(f)&&f.parentNode&&o!==f;)f=f.parentNode;return f})(i)),d=l?"next":"prev";let m;for(;m=c[d]();)if(!bO(e,m)&&!Yr(m.textContent)&&m.textContent?.length!==0)return k.some(m);return k.none()};if(n&&Ir(r))if(Yr(r.textContent))r=a(r,!1).getOr(r);else for(r.parentNode!==null&&bu(e,r.parentNode)&&(r=r.parentNode);r.previousSibling!==null&&(bu(e,r.previousSibling)||Ir(r.previousSibling));)r=r.previousSibling;if(!n&&Ir(r))if(Yr(r.textContent))r=a(r,!0).getOr(r);else for(r.parentNode!==null&&bu(e,r.parentNode)&&(r=r.parentNode);r.nextSibling!==null&&(bu(e,r.nextSibling)||Ir(r.nextSibling));)r=r.nextSibling;for(;r.parentNode!==o;){const i=r.parentNode;if(eg(e,r)||/^(TD|TH)$/.test(i.nodeName))return r;r=i}return r},dg=(e,t,n)=>{const o=e.selection.getRng();let r="LI";const s=sc(e,((c,d)=>{const m=c.selection.getStart(!0),f=cg(c,d,!0,c.getBody());return h=S.fromDom(f),g=S.fromDom(d.commonAncestorContainer),um(h,be(me,g))?d.commonAncestorContainer:m;var h,g})(e,o)),a=e.dom;if(a.getContentEditable(e.selection.getNode())==="false")return;(t=t.toUpperCase())==="DL"&&(r="DT");const i=ns(o),l=De(((c,d,m)=>{const f=[],h=c.dom,g=cg(c,d,!0,m),b=cg(c,d,!1,m);let y;const v=[];for(let _=g;_&&(v.push(_),_!==b);_=_.nextSibling);return E.each(v,(_=>{if(eg(c,_))return f.push(_),void(y=null);if(h.isBlock(_)||Oa(_))return Oa(_)&&h.remove(_),void(y=null);const N=_.nextSibling;Ni.isBookmarkNode(_)&&(jo(N)||eg(c,N)||!N&&_.parentNode===m)?y=null:(y||(y=h.create("p"),_.parentNode?.insertBefore(y,_),f.push(y)),y.appendChild(_))})),f})(e,o,s),e.dom.isEditable);E.each(l,(c=>{let d;const m=c.previousSibling,f=c.parentNode;fu(f)||(m&&jo(m)&&m.nodeName===t&&((h,g,b)=>{const y=h.getStyle(g,"list-style-type");let v=b?b["list-style-type"]:"";return v=v===null?"":v,y===v})(a,m,n)?(d=m,c=a.rename(c,r),m.appendChild(c)):(d=a.create(t),f.insertBefore(d,c),d.appendChild(c),c=a.rename(c,r)),((h,g)=>{E.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],(b=>h.setStyle(g,b,"")))})(a,c),Ii(a,d,n),ug(e.dom,d))})),e.selection.setRng(os(i))},vw=(e,t,n)=>{return((r,s)=>jo(r)&&r.nodeName===s?.nodeName)(t,n)&&((r,s,a)=>r.getStyle(s,"list-style-type",!0)===r.getStyle(a,"list-style-type",!0))(e,t,n)&&(o=n,t.className===o.className);var o},ug=(e,t)=>{let n,o=t.nextSibling;if(vw(e,t,o)){const r=o;for(;n=r.firstChild;)t.appendChild(n);e.remove(r)}if(o=t.previousSibling,vw(e,t,o)){const r=o;for(;n=r.lastChild;)t.insertBefore(n,t.firstChild);e.remove(r)}},TO=(e,t,n,o)=>{if(t.nodeName!==n){const r=e.dom.rename(t,n);Ii(e.dom,r,o),Pa(e,Mi(n),r)}else Ii(e.dom,t,o),Pa(e,Mi(n),t)},DO=(e,t,n,o)=>{if(t.classList.forEach(((r,s,a)=>{r.startsWith("tox-")&&(a.remove(r),a.length===0&&t.removeAttribute("class"))})),t.nodeName!==n){const r=e.dom.rename(t,n);Ii(e.dom,r,o),Pa(e,Mi(n),r)}else Ii(e.dom,t,o),Pa(e,Mi(n),t)},Cw=e=>"list-style-type"in e,mg=(e,t,n)=>{const o=rc(e);if(ag(e,o))return;const r=(a=>{const i=rc(a),l=a.selection.getSelectedBlocks();return((c,d)=>te(c)&&d.length===1&&d[0]===c)(i,l)?(c=>De(c.querySelectorAll(sw),jo))(i):De(l,(c=>jo(c)&&i!==c))})(e),s=He(n)?n:{};r.length>0?((a,i,l,c,d)=>{const m=jo(i);if(!m||i.nodeName!==c||Cw(d)||pu(i)){dg(a,c,d);const f=ns(a.selection.getRng()),h=m?[i,...l]:l,g=m&&pu(i)?DO:TO;E.each(h,(b=>{g(a,b,c,d)})),a.selection.setRng(os(f))}else hu(a)})(e,o,r,t,s):((a,i,l,c)=>{if(i!==a.getBody())if(i)if(i.nodeName!==l||Cw(c)||pu(i)){const d=ns(a.selection.getRng());pu(i)&&i.classList.forEach(((f,h,g)=>{f.startsWith("tox-")&&(g.remove(f),g.length===0&&i.removeAttribute("class"))})),Ii(a.dom,i,c);const m=a.dom.rename(i,l);ug(a.dom,m),a.selection.setRng(os(d)),dg(a,l,c),Pa(a,Mi(l),m)}else hu(a);else dg(a,l,c),Pa(a,Mi(l),i)})(e,o,t,s)},xw=(e,t,n,o)=>{let r=t.startContainer;const s=t.startOffset;if(Ir(r)&&(n?s<r.data.length:s>0))return r;const a=e.schema.getNonEmptyElements();ew(r)&&(r=Lr.getNode(r,s));const i=new an(r,o);n&&((c,d)=>!!Oa(d)&&c.isBlock(d.nextSibling)&&!Oa(d.previousSibling))(e.dom,r)&&i.next();const l=n?i.next.bind(i):i.prev2.bind(i);for(;r=l();)if(r.nodeName==="LI"&&!r.hasChildNodes()||a[r.nodeName]||Ir(r)&&r.data.length>0)return r;return null},ww=(e,t)=>{const n=t.childNodes;return n.length===1&&!jo(n[0])&&e.isBlock(n[0])},Sw=(e,t,n)=>{let o;const r=ww(e,n)?n.firstChild:n;if(((s,a)=>{var i;ww(s,a)&&(i=a.firstChild,k.from(i).map(S.fromDom).filter(ro).exists((l=>Jr(l)&&!we(["details"],Be(l)))))&&s.remove(a.firstChild,!0)})(e,t),!Ba(e,t,!0))for(;o=t.firstChild;)r.appendChild(o)},fg=(e,t,n)=>{let o;const r=t.parentNode;if(!tw(e,t)||!tw(e,n))return;jo(n.lastChild)&&(o=n.lastChild),r===n.lastChild&&Oa(r.previousSibling)&&e.remove(r.previousSibling);const s=n.lastChild;s&&Oa(s)&&t.hasChildNodes()&&e.remove(s),Ba(e,n,!0)&&rn(S.fromDom(n)),Sw(e,t,n),o&&n.appendChild(o);const a=Ze(S.fromDom(n),S.fromDom(t))?e.getParents(t,jo,n):[];e.remove(t),K(a,(i=>{Ba(e,i)&&i!==e.getRoot()&&e.remove(i)}))},RO=(e,t)=>{const n=e.dom,o=e.selection,r=o.getStart(),s=sg(e,r),a=n.getParent(o.getStart(),"LI",s);if(a){const i=a.parentElement;if(i===e.getBody()&&Ba(n,i))return!0;const l=og(o.getRng()),c=n.getParent(xw(e,l,t,s),"LI",s),d=c&&(t?n.isChildOf(a,c):n.isChildOf(c,a));if(c&&c!==a&&!d)return e.undoManager.transact((()=>{var m;t?((f,h,g,b)=>{const y=f.dom;if(y.isEmpty(b))((v,_,N)=>{rn(S.fromDom(N)),fg(v.dom,_,N),v.selection.setCursorLocation(N,0)})(f,g,b);else{const v=ns(h);fg(y,g,b),f.selection.setRng(os(v))}})(e,l,c,a):(m=a,m.parentNode?.firstChild===m?lg(e):((f,h,g,b)=>{const y=ns(h);fg(f.dom,g,b);const v=os(y);f.selection.setRng(v)})(e,l,a,c))})),!0;if(d&&!t&&c!==a){const m=l.commonAncestorContainer.parentElement;return!(!m||n.isChildOf(c,m)||(e.undoManager.transact((()=>{const f=ns(l);Sw(n,m,c),m.remove();const h=os(f);e.selection.setRng(h)})),0))}if(!c&&!t&&l.startOffset===0&&l.endOffset===0)return e.undoManager.transact((()=>{hu(e)})),!0}return!1},pg=e=>{const t=e.selection.getStart(),n=sg(e,t),o=e.dom.getParent(t,"LI,DT,DD",n);return te(o)||rg(e).length>0},gg=(e,t)=>{const n=e.selection;return!ag(e,n.getNode())&&(n.isCollapsed()?((o,r)=>RO(o,r)||((s,a)=>{const i=s.dom,l=s.selection.getStart(),c=sg(s,l),d=i.getParent(l,i.isBlock,c);if(d&&i.isEmpty(d,void 0,{checkRootAsContent:!0})){const m=og(s.selection.getRng()),f=xw(s,m,a,c),h=i.getParent(f,"LI",c);if(f&&h){const g=_=>we(["td","th","caption"],Be(_)),b=_=>_.dom===c,y=sr(S.fromDom(h),g,b),v=sr(S.fromDom(m.startContainer),g,b);return!!qa(y,v,me)&&(s.undoManager.transact((()=>{const _=h.parentNode;((N,D,A)=>{const R=N.getParent(D.parentNode,N.isBlock,A);N.remove(D),R&&N.isEmpty(R)&&N.remove(R)})(i,d,c),ug(i,_),s.selection.select(f,!0),s.selection.collapse(a)})),!0)}}return!1})(o,r))(e,t):(o=>!!pg(o)&&(o.undoManager.transact((()=>{let r=!0;const s=()=>r=!1;o.on("input",s),o.execCommand("Delete"),o.off("input",s),r&&o.dispatch("input"),ng(o.dom,o.getBody())})),!0))(e))},OO=(e,t)=>({from:e,to:t}),hg=(e,t)=>{const n=S.fromDom(e),o=S.fromDom(t.container());return Wd(n,o).map((r=>((s,a)=>({block:s,position:a}))(r,t)))},Ew=(e,t)=>sr(t,(n=>Al(n)||To(n.dom)),(n=>me(n,e))).filter(ot).getOr(e),kw=(e,t)=>{const n=((o,r)=>{const s=ht(o);return $s(s,(a=>r.isBlock(Be(a)))).fold(ie(s),(a=>s.slice(0,a)))})(e,t);return K(n,ft),n},_w=(e,t,n)=>{const o=ts(n,t);return Ht(o.reverse(),(r=>Ln(e,r))).each(ft)},BO=(e,t,n,o,r)=>{if(Ln(o,n))return Es(n),In(n.dom);((a,i)=>De(Pn(i),(l=>!Ln(a,l))).length===0)(o,r)&&Ln(o,t)&&$(r,S.fromTag("br"));const s=ao(n.dom,Y.before(r.dom));return K(kw(t,o),(a=>{$(r,a)})),_w(o,e,t),s},PO=(e,t,n,o)=>{if(Ln(o,n)){if(Ln(o,t)){const s=i=>{const l=(c,d)=>Bt(c).fold((()=>d),(m=>((f,h)=>f.isInline(Be(h)))(o,m)?l(m,d.concat($n(m))):d));return l(i,[])},a=Vr(s(n),((i,l)=>(je(i,l),l)),fi());rn(t),ne(t,a)}return ft(n),In(t.dom)}const r=Go(n.dom);return K(kw(t,o),(s=>{ne(n,s)})),_w(o,e,t),r},Nw=(e,t)=>{Si(e,t.dom).bind((n=>k.from(n.getNode()))).map(S.fromDom).filter(Ss).each(ft)},Aw=(e,t,n,o)=>(Nw(!0,t),Nw(!1,n),((r,s)=>Ze(s,r)?((a,i)=>{const l=ts(i,a);return k.from(l[l.length-1])})(s,r):k.none())(t,n).fold(be(PO,e,t,n,o),be(BO,e,t,n,o))),Tw=(e,t,n,o,r)=>t?Aw(e,o,n,r):Aw(e,n,o,r),bg=(e,t)=>{const n=S.fromDom(e.getBody());return((r,s,a,i)=>i.collapsed?((l,c,d,m)=>{const f=hg(c,Y.fromRangeStart(m)),h=f.bind((g=>Ro(d,c,g.position).bind((b=>hg(c,b).map((y=>((v,_,N,D)=>Ut(D.position.getNode())&&!Ln(v,D.block)?Si(!1,D.block.dom).bind((A=>A.isEqual(D.position)?Ro(N,_,A).bind((R=>hg(_,R))):k.some(D))).getOr(D):D)(l,c,d,y)))))));return zt(f,h,OO).filter((g=>(b=>!me(b.from.block,b.to.block))(g)&&((b,y)=>{const v=S.fromDom(b);return me(Ew(v,y.from.block),Ew(v,y.to.block))})(c,g)&&(b=>Pt(b.from.block.dom)===!1&&Pt(b.to.block.dom)===!1)(g)&&(b=>{const y=v=>Xb(v)||Sm(v.dom)||mi(v);return y(b.from.block)&&y(b.to.block)})(g)&&(b=>!(Ze(b.to.block,b.from.block)||Ze(b.from.block,b.to.block)))(g)))})(r,s,a,i):k.none())(e.schema,n.dom,t,e.selection.getRng()).map((r=>()=>{Tw(n,t,r.from.block,r.to.block,e.schema).each((s=>{e.selection.setRng(s.toRange())}))}))},Dw=(e,t)=>{const n=S.fromDom(t),o=be(me,e);return Tr(n,Al,o).isSome()},LO=e=>{const t=S.fromDom(e.getBody());return((n,o)=>{const r=ao(n.dom,Y.fromRangeStart(o)).isNone(),s=Qn(n.dom,Y.fromRangeEnd(o)).isNone();return!((a,i)=>Dw(a,i.startContainer)||Dw(a,i.endContainer))(n,o)&&r&&s})(t,e.selection.getRng())?(n=>k.some((()=>{n.setContent(""),n.selection.setCursorLocation()})))(e):((n,o,r)=>{const s=o.getRng();return zt(Wd(n,S.fromDom(s.startContainer)),Wd(n,S.fromDom(s.endContainer)),((a,i)=>me(a,i)?k.none():k.some((()=>{s.deleteContents(),Tw(n,!0,a,i,r).each((l=>{o.setRng(l.toRange())}))})))).getOr(k.none())})(t,e.selection,e.schema)},yg=(e,t)=>e.selection.isCollapsed()?k.none():LO(e),as=(e,t,n,o,r)=>k.from(t._selectionOverrides.showCaret(e,n,o,r)),ic=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?k.none():k.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(t)),vg=(e,t,n)=>t.collapsed?((o,r,s)=>{const a=df(1,o.getBody(),r),i=Y.fromRangeStart(a),l=i.getNode();if(Ll(l))return as(1,o,l,!i.isAtEnd(),!1);const c=i.getNode(!0);if(Ll(c))return as(1,o,c,!1,!1);const d=_a(o.dom.getRoot(),i.getNode());return Ll(d)?as(1,o,d,!1,s):k.none()})(e,t,n).getOr(t):t,MO=e=>Os(e)||ql(e),IO=e=>Bs(e)||Wl(e),Rw=(e,t,n,o,r,s)=>{as(o,e,s.getNode(!r),r,!0).each((a=>{if(t.collapsed){const i=t.cloneRange();r?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else t.deleteContents();e.selection.setRng(a)})),((a,i)=>{se(i)&&i.data.length===0&&a.remove(i)})(e.dom,n)},Cg=(e,t)=>((n,o)=>{const r=n.selection.getRng();if(!se(r.commonAncestorContainer))return k.none();const s=o?1:-1,a=Br(n.getBody()),i=be(uf,o?a.next:a.prev),l=o?MO:IO,c=Ci(s,n.getBody(),r),d=i(c),m=d&&Mo(o,d);if(!m||!kd(c,m))return k.none();if(l(m))return k.some((()=>Rw(n,r,c.getNode(),s,o,m)));const f=i(m);return f&&l(f)&&kd(m,f)?k.some((()=>Rw(n,r,c.getNode(),s,o,f))):k.none()})(e,t),xg=(e,t)=>{const n=e.getBody();return t?In(n).filter(Os):Go(n).filter(Bs)},wg=e=>{const t=e.selection.getRng();return!t.collapsed&&(xg(e,!0).exists((n=>n.isEqual(Y.fromRangeStart(t))))||xg(e,!1).exists((n=>n.isEqual(Y.fromRangeEnd(t)))))},zo=bo([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Ow=(e,t,n,o)=>Ro(t,e,n).bind((r=>{return s=r.getNode(),te(s)&&(Al(S.fromDom(s))||mi(S.fromDom(s)))||((a,i,l,c,d)=>{const m=f=>d.isInline(f.nodeName.toLowerCase())&&!Rr(l,c,a);return uy(!i,l).fold((()=>uy(i,c).fold(Nt,m)),m)})(e,t,n,r,o)?k.none():t&&Pt(r.getNode())||!t&&Pt(r.getNode(!0))?((a,i,l,c,d)=>{const m=d.getNode(!l);return Wd(S.fromDom(i),S.fromDom(c.getNode())).map((f=>Ln(a,f)?zo.remove(f.dom):zo.moveToElement(m))).orThunk((()=>k.some(zo.moveToElement(m))))})(o,e,t,n,r):t&&Bs(n)||!t&&Os(n)?k.some(zo.moveToPosition(r)):k.none();var s})),Bw=(e,t)=>k.from(_a(e.getBody(),t)),FO=(e,t)=>{const n=e.selection.getNode();return Bw(e,n).filter(Pt).fold((()=>((o,r,s,a)=>{const i=df(r?1:-1,o,s),l=Y.fromRangeStart(i),c=S.fromDom(o);return!r&&Bs(l)?k.some(zo.remove(l.getNode(!0))):r&&Os(l)?k.some(zo.remove(l.getNode())):!r&&Os(l)&&Hd(c,l,a)?qv(c,l,a).map((d=>zo.remove(d.getNode()))):r&&Bs(l)&&Xf(c,l,a)?_D(c,l,a).map((d=>zo.remove(d.getNode()))):((d,m,f,h)=>((g,b)=>{const y=b.getNode(!g),v=g?"after":"before";return ve(y)&&y.getAttribute("data-mce-caret")===v})(m,f)?((g,b)=>kt(b)?k.none():g&&Pt(b.nextSibling)?k.some(zo.moveToElement(b.nextSibling)):!g&&Pt(b.previousSibling)?k.some(zo.moveToElement(b.previousSibling)):k.none())(m,f.getNode(!m)).orThunk((()=>Ow(d,m,f,h))):Ow(d,m,f,h).bind((g=>((b,y,v)=>v.fold((_=>k.some(zo.remove(_))),(_=>k.some(zo.moveToElement(_))),(_=>Rr(y,_,b)?k.none():k.some(zo.moveToPosition(_)))))(d,f,g))))(o,r,l,a)})(e.getBody(),t,e.selection.getRng(),e.schema).map((o=>()=>o.fold(((r,s)=>a=>(r._selectionOverrides.hideFakeCaret(),Ps(r,s,S.fromDom(a)),!0))(e,t),((r,s)=>a=>{const i=s?Y.before(a):Y.after(a);return r.selection.setRng(i.toRange()),!0})(e,t),(r=>s=>(r.selection.setRng(s.toRange()),!0))(e))))),(()=>k.some(Ee)))},Pw=e=>{const t=e.dom,n=e.selection,o=_a(e.getBody(),n.getNode());if(To(o)&&t.isBlock(o)&&t.isEmpty(o)){const r=t.create("br",{"data-mce-bogus":"1"});t.setHTML(o,""),o.appendChild(r),n.setRng(Y.before(r).toRange())}return!0},Sg=(e,t)=>e.selection.isCollapsed()?FO(e,t):((n,o)=>{const r=n.selection.getNode();return Pt(r)&&!sd(r)?Bw(n,r.parentNode).filter(Pt).fold((()=>k.some((()=>{var s;s=S.fromDom(n.getBody()),K(_n(s,".mce-offscreen-selection"),ft),Ps(n,o,S.fromDom(n.selection.getNode())),Zf(n)}))),(()=>k.some(Ee))):wg(n)?k.some((()=>{mC(n,n.selection.getRng(),S.fromDom(n.getBody()))})):k.none()})(e,t),Eg=(e,t)=>{const n=e.dom,o=n.getParent(e.selection.getStart(),n.isBlock),r=n.getParent(e.selection.getEnd(),n.isBlock),s=e.getBody();if(o?.nodeName?.toLowerCase()==="div"&&o&&r&&o===s.firstChild&&r===s.lastChild&&!n.isEmpty(s)){const i=o.cloneNode(!1),l=()=>{if(t?cC(e):qd(e),s.firstChild!==o){const c=ns(e.selection.getRng(),(()=>document.createElement("span")));Array.from(s.childNodes).forEach((d=>i.appendChild(d))),s.appendChild(i),e.selection.setRng(os(c))}};return k.some(l)}return k.none()},kg=(e,t)=>e.selection.isCollapsed()?((n,o)=>{const r=Y.fromRangeStart(n.selection.getRng());return Ro(o,n.getBody(),r).filter((s=>o?xD(s):wD(s))).bind((s=>cf(o?0:-1,s))).map((s=>()=>n.selection.select(s)))})(e,t):k.none(),Fi=se,Lw=e=>Fi(e)&&e.data[0]===hn,Mw=e=>Fi(e)&&e.data[e.data.length-1]===hn,Iw=e=>(e.ownerDocument??document).createTextNode(hn),yu=(e,t)=>e?(n=>{if(Fi(n.previousSibling))return Mw(n.previousSibling)||n.previousSibling.appendData(hn),n.previousSibling;if(Fi(n))return Lw(n)||n.insertData(0,hn),n;{const o=Iw(n);return n.parentNode?.insertBefore(o,n),o}})(t):(n=>{if(Fi(n.nextSibling))return Lw(n.nextSibling)||n.nextSibling.insertData(0,hn),n.nextSibling;if(Fi(n))return Mw(n)||n.appendData(hn),n;{const o=Iw(n);return n.nextSibling?n.parentNode?.insertBefore(o,n.nextSibling):n.parentNode?.appendChild(o),o}})(t),jO=be(yu,!0),zO=be(yu,!1),Fw=(e,t)=>se(e.container())?yu(t,e.container()):yu(t,e.getNode()),jw=(e,t)=>{const n=t.get();return n&&e.container()===n&&ks(n)},_g=(e,t)=>t.fold((n=>{Ca(e.get());const o=jO(n);return e.set(o),k.some(Y(o,o.length-1))}),(n=>In(n).map((o=>{if(jw(o,e)){const r=e.get();return Y(r,1)}{Ca(e.get());const r=Fw(o,!0);return e.set(r),Y(r,1)}}))),(n=>Go(n).map((o=>{if(jw(o,e)){const r=e.get();return Y(r,r.length-1)}{Ca(e.get());const r=Fw(o,!1);return e.set(r),Y(r,r.length-1)}}))),(n=>{Ca(e.get());const o=zO(n);return e.set(o),k.some(Y(o,1))})),zw=(e,t)=>{for(let n=0;n<e.length;n++){const o=e[n].apply(null,t);if(o.isSome())return o}return k.none()},qn=bo([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Uw=(e,t)=>As(t,e)||e,UO=(e,t,n)=>{const o=aC(n),r=Uw(t,o.container());return Ls(e,r,o).fold((()=>Qn(r,o).bind(be(Ls,e,r)).map((s=>qn.before(s)))),k.none)},HO=(e,t)=>xa(e,t)===null,Hw=(e,t,n)=>Ls(e,t,n).filter(be(HO,t)),$O=(e,t,n)=>{const o=iC(n);return Hw(e,t,o).bind((r=>ao(r,o).isNone()?k.some(qn.start(r)):k.none()))},qO=(e,t,n)=>{const o=aC(n);return Hw(e,t,o).bind((r=>Qn(r,o).isNone()?k.some(qn.end(r)):k.none()))},WO=(e,t,n)=>{const o=iC(n),r=Uw(t,o.container());return Ls(e,r,o).fold((()=>ao(r,o).bind(be(Ls,e,r)).map((s=>qn.after(s)))),k.none)},$w=e=>!sC(Ng(e)),Fr=(e,t,n)=>zw([UO,$O,qO,WO],[e,t,n]).filter($w),Ng=e=>e.fold(gt,gt,gt,gt),qw=e=>e.fold(ie("before"),ie("start"),ie("end"),ie("after")),vu=e=>e.fold(qn.before,qn.before,qn.after,qn.after),Ag=e=>e.fold(qn.start,qn.start,qn.end,qn.end),VO=(e,t,n,o,r,s)=>zt(Ls(t,n,o),Ls(t,n,r),((a,i)=>a!==i&&((l,c,d)=>{const m=As(c,l),f=As(d,l);return te(m)&&m===f})(n,a,i)?qn.after(e?a:i):s)).getOr(s),KO=(e,t)=>e.fold(jt,(n=>{return r=t,!(qw(o=n)===qw(r)&&Ng(o)===Ng(r));var o,r})),XO=(e,t)=>e?t.fold(Bn(k.some,qn.start),k.none,Bn(k.some,qn.after),k.none):t.fold(k.none,Bn(k.some,qn.before),k.none,Bn(k.some,qn.end)),Ww=(e,t,n)=>{const o=e?1:-1;return t.setRng(Y(n.container(),n.offset()+o).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};var jr;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(jr||(jr={}));const Cu=(e,t)=>e===-1?Eo(t):t,YO=(e,t,n)=>e===1?t.next(n):t.prev(n),GO=(e,t,n,o)=>Ut(o.getNode(t===1))?jr.Br:Rr(n,o)===!1?jr.Block:jr.Wrap,Vw=(e,t,n,o)=>{const r=Br(n);let s=o;const a=[];for(;s;){const i=YO(t,r,s);if(!i)break;if(Ut(i.getNode(!1)))return t===1?{positions:Cu(t,a).concat([i]),breakType:jr.Br,breakAt:k.some(i)}:{positions:Cu(t,a),breakType:jr.Br,breakAt:k.some(i)};if(i.isVisible()){if(e(s,i)){const l=GO(0,t,s,i);return{positions:Cu(t,a),breakType:l,breakAt:k.some(i)}}a.push(i),s=i}else s=i}return{positions:Cu(t,a),breakType:jr.Eol,breakAt:k.none()}},Kw=(e,t,n,o)=>t(n,o).breakAt.map((r=>{const s=t(n,r).positions;return e===-1?s.concat(r):[r].concat(s)})).getOr([]),Tg=(e,t)=>Yt(e,((n,o)=>n.fold((()=>k.some(o)),(r=>zt(nn(r.getClientRects()),nn(o.getClientRects()),((s,a)=>{const i=Math.abs(t-s.left);return Math.abs(t-a.left)<=i?o:r})).or(n)))),k.none()),xu=(e,t)=>nn(t.getClientRects()).bind((n=>Tg(e,n.left))),lc=be(Vw,Y.isAbove,-1),cc=be(Vw,Y.isBelow,1),Xw=be(Kw,-1,lc),Yw=be(Kw,1,cc),Dg=(e,t)=>lc(e,t).breakAt.isNone(),Rg=(e,t)=>cc(e,t).breakAt.isNone(),Gw=(e,t)=>xu(Xw(e,t),t),Qw=(e,t)=>xu(Yw(e,t),t),QO=Pt,Jw=(e,t)=>Math.abs(e.left-t),Zw=(e,t)=>Math.abs(e.right-t),eS=(e,t)=>Yn(e,((n,o)=>{const r=Math.min(Jw(n,t),Zw(n,t)),s=Math.min(Jw(o,t),Zw(o,t));return s===r&&mn(o,"node")&&QO(o.node)||s<r?o:n})),JO=e=>{const t=n=>qe(n,(o=>{const r=ba(o);return r.node=e,r}));if(ve(e))return t(e.getClientRects());if(se(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},tS=e=>$t(e,JO);var Ma;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Ma||(Ma={}));const nS=(e,t,n,o,r,s)=>{let a=0;const i=[],l=m=>{let f=tS([m]);e===Ma.Up&&(f=f.reverse());for(let h=0;h<f.length;h++){const g=f[h];if(!n(g,c)){if(i.length>0&&t(g,_o(i))&&a++,g.line=a,r(g))return!0;i.push(g)}}return!1},c=_o(s.getClientRects());if(!c)return i;const d=s.getNode();return d&&(l(d),((m,f,h,g)=>{let b=g;for(;b=Il(b,m,o0,f);)if(h(b))return})(e,o,l,d)),i},ZO=be(nS,Ma.Up,Tl,Dl),eB=be(nS,Ma.Down,Dl,Tl),oS=e=>_o(e.getClientRects()),rS=e=>t=>((n,o)=>o.line>n)(e,t),Og=e=>t=>((n,o)=>o.line===n)(e,t),zr=(e,t)=>{e.selection.setRng(t),$l(e,e.selection.getRng())},Bg=(e,t,n)=>k.some(vg(e,t,n)),sS=(e,t)=>{const n=e.getNode(t===-1);return te(n)&&lf(n)?k.some(n):k.none()},aS=(e,t)=>{const n=e.dom.createRng();return n.selectNode(t),n},iS=(e,t,n,o,r,s)=>{const a=t===1,i=Br(e.getBody()),l=be(uf,a?i.next:i.prev),c=a?o:r;if(!n.collapsed){const g=gd(n);if(s(g)){if(lf(g)){const b=Ci(t,e.getBody(),n);return k.from(l(b)).map((y=>y.toRange()))}return as(t,e,g,t===-1,!1)}if(wg(e)){const b=n.cloneRange();return b.collapse(t===-1),k.from(b)}}const d=Ci(t,e.getBody(),n);if(c(d))return ic(e,d.getNode(!a));let m=l(d);const f=Gb(n);if(!m)return f?k.some(n):k.none();if(m=Mo(a,m),c(m))return sS(m,t).fold((()=>as(t,e,m?.getNode(!a),a,!1)),(g=>k.some(aS(e,g))));const h=l(m);return h&&c(h)&&kd(m,h)?sS(m,t).fold((()=>as(t,e,h.getNode(!a),a,!1)),(g=>k.some(aS(e,g)))):f?Bg(e,m.toRange(),!1):k.none()},lS=(e,t,n,o,r,s)=>{const a=Ci(t,e.getBody(),n),i=_o(a.getClientRects()),l=t===Ma.Down,c=e.getBody();if(!i)return k.none();if(wg(e)){const b=l?Y.fromRangeEnd(n):Y.fromRangeStart(n);return(l?Qw:Gw)(c,b).orThunk((()=>k.from(b))).map((y=>y.toRange()))}const d=(l?eB:ZO)(c,rS(1),a),m=De(d,Og(1)),f=i.left,h=eS(m,f);if(h&&s(h.node)){const b=Math.abs(f-h.left),y=Math.abs(f-h.right);return as(t,e,h.node,b<y,!1)}let g;if(g=o(a)?a.getNode():r(a)?a.getNode(!0):gd(n),g){const b=((v,_,N,D)=>{const A=Br(_);let R,P,I,M;const W=[];let B=0;v===Ma.Down?(R=A.next,P=Dl,I=Tl,M=Y.after(D)):(R=A.prev,P=Tl,I=Dl,M=Y.before(D));const F=oS(M);do{if(!M.isVisible())continue;const H=oS(M);if(I(H,F))continue;W.length>0&&P(H,_o(W))&&B++;const Z=ba(H);if(Z.position=M,Z.line=B,N(Z))return W;W.push(Z)}while(M=R(M));return W})(t,c,rS(1),g);let y=eS(De(b,Og(1)),f);if(y||(y=_o(De(b,Og(0))),y))return Bg(e,y.position.toRange(),!1)}return m.length===0?Pg(e,l).filter(l?r:o).map((b=>vg(e,b.toRange(),!1))):k.none()},Pg=(e,t)=>{const n=e.selection.getRng(),o=t?Y.fromRangeEnd(n):Y.fromRangeStart(n),r=(s=o.container(),a=e.getBody(),Tr(S.fromDom(s),(i=>OT(i.dom)),(i=>i.dom===a)).map((i=>i.dom)).getOr(a));var s,a;if(t){const i=cc(r,o);return to(i.positions)}{const i=lc(r,o);return nn(i.positions)}},cS=(e,t,n)=>Pg(e,t).filter(n).exists((o=>(e.selection.setRng(o.toRange()),!0))),wu=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},dS=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},uS=(e,t,n)=>_g(t,n).map((o=>(wu(e,o),n))),tB=(e,t,n)=>{const o=e.getBody(),r=((s,a,i)=>{const l=Y.fromRangeStart(s);if(s.collapsed)return l;{const c=Y.fromRangeEnd(s);return i?ao(a,c).getOr(c):Qn(a,l).getOr(l)}})(e.selection.getRng(),o,n);return((s,a,i,l)=>{const c=Mo(s,l),d=Fr(a,i,c);return Fr(a,i,c).bind(be(XO,s)).orThunk((()=>((m,f,h,g,b)=>{const y=Mo(m,b);return Ro(m,h,y).map(be(Mo,m)).fold((()=>g.map(vu)),(v=>Fr(f,h,v).map(be(VO,m,f,h,y,v)).filter(be(KO,g)))).filter($w)})(s,a,i,d,l)))})(n,be(ka,e),o,r).bind((s=>uS(e,t,s)))},mS=(e,t,n)=>!!Bl(e)&&tB(e,t,n).isSome(),fS=(e,t,n)=>!!Bl(t)&&((o,r)=>{const s=r.selection.getRng(),a=o?Y.fromRangeEnd(s):Y.fromRangeStart(s);return!!(i=>pt(i.selection.getSel().modify))(r)&&(o&&Um(a)?Ww(!0,r.selection,a):!(o||!Hm(a))&&Ww(!1,r.selection,a))})(e,t),nB=e=>{const t=Qt(null),n=be(ka,e);return e.on("NodeChange",(o=>{Bl(e)&&(((r,s,a)=>{const i=qe(_n(S.fromDom(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),(d=>d.dom)),l=De(i,r),c=De(a,r);K(Ye(l,c),be(dS,!1)),K(Ye(c,l),be(dS,!0))})(n,e.dom,o.parents),((r,s)=>{const a=s.get();if(r.selection.isCollapsed()&&!r.composing&&a){const i=Y.fromRangeStart(r.selection.getRng());Y.isTextPosition(i)&&!(l=>Um(l)||Hm(l))(i)&&(wu(r,NT(a,i)),s.set(null))}})(e,t),((r,s,a,i)=>{if(s.selection.isCollapsed()){const l=De(i,r);K(l,(c=>{const d=Y.fromRangeStart(s.selection.getRng());Fr(r,s.getBody(),d).bind((m=>uS(s,a,m)))}))}})(n,e,t,o.parents))})),t},oB=be(fS,!0),rB=be(fS,!1),Su=(e,t,n)=>{if(Bl(e)){const o=Pg(e,t).getOrThunk((()=>{const r=e.selection.getRng();return t?Y.fromRangeEnd(r):Y.fromRangeStart(r)}));return Fr(be(ka,e),e.getBody(),o).exists((r=>{const s=vu(r);return _g(n,s).exists((a=>(wu(e,a),!0)))}))}return!1},pS=(e,t)=>n=>_g(t,n).map((o=>()=>wu(e,o))),gS=(e,t,n,o)=>{const r=e.getBody(),s=be(ka,e);e.undoManager.ignore((()=>{e.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,o)),qd(e),Fr(s,r,Y.fromRangeStart(e.selection.getRng())).map(Ag).bind(pS(e,t)).each(Xn)})),e.nodeChanged()},Lg=(e,t,n)=>{if(e.selection.isCollapsed()&&Bl(e)){const o=Y.fromRangeStart(e.selection.getRng());return((r,s,a,i)=>{const l=((m,f)=>As(f,m)||m)(r.getBody(),i.container()),c=be(ka,r),d=Fr(c,l,i);return d.bind((m=>a?m.fold(ie(k.some(Ag(m))),k.none,ie(k.some(vu(m))),k.none):m.fold(k.none,ie(k.some(vu(m))),k.none,ie(k.some(Ag(m)))))).map(pS(r,s)).getOrThunk((()=>{const m=wi(a,l,i),f=m.bind((h=>Fr(c,l,h)));return zt(d,f,(()=>Ls(c,l,i).bind((h=>(g=>zt(In(g),Go(g),((b,y)=>{const v=Mo(!0,b),_=Mo(!1,y);return Qn(g,v).forall((N=>N.isEqual(_)))})).getOr(!0))(h)?k.some((()=>{Ps(r,a,S.fromDom(h))})):k.none())))).getOrThunk((()=>f.bind((()=>m.map((h=>()=>{a?gS(r,s,i,h):gS(r,s,h,i)}))))))}))})(e,t,n,o)}return k.none()},hS=(e,t)=>{const n=S.fromDom(e.getBody()),o=S.fromDom(e.selection.getStart()),r=ts(o,n);return $s(r,t).fold(ie(r),(s=>r.slice(0,s)))},sB=e=>Nr(e)===1,bS=(e,t)=>{const n=be(FC,e);return $t(t,(o=>n(o)?[o.dom]:[]))},Mg=e=>{const t=(n=>hS(n,(o=>n.schema.isBlock(Be(o)))))(e);return bS(e,t)},aB=(e,t)=>{const n=De((o=>hS(o,(r=>o.schema.isBlock(Be(r))||(s=>Nr(s)>1)(r))))(e),sB);return to(n).bind((o=>{const r=Y.fromRangeStart(e.selection.getRng());return dC(t,r,o.dom)&&!Df(o)?k.some((()=>((s,a,i,l)=>{const c=bS(a,l);if(c.length===0)Ps(a,s,i);else{const d=IC(i.dom,c);a.selection.setRng(d.toRange())}})(t,e,o,n))):k.none()}))},yS=(e,t)=>{const n=e.selection.getStart(),o=((r,s)=>{const a=s.parentElement;return Ut(s)&&!Xe(a)&&r.dom.isEmpty(a)})(e,n)||Df(S.fromDom(n))?IC(n,t):((r,s)=>{const{caretContainer:a,caretPosition:i}=MC(s);return r.insertNode(a.dom),i})(e.selection.getRng(),t);e.selection.setRng(o.toRange())},vS=(e,t)=>{const n=Ye(t,Mg(e));n.length>0&&yS(e,n)},CS=e=>se(e.startContainer),iB=e=>{const t=e.selection.getRng();return(n=>n.startOffset===0&&CS(n))(t)&&((n,o)=>{const r=o.startContainer.parentElement;return!Xe(r)&&FC(n,S.fromDom(r))})(e,t)&&(n=>(o=>(r=>{const s=r.startContainer.parentNode,a=r.endContainer.parentNode;return!Xe(s)&&!Xe(a)&&s.isEqualNode(a)})(o)&&(r=>{const s=r.endContainer;return r.endOffset===(se(s)?s.length:s.childNodes.length)})(o))(n)||(o=>!o.endContainer.isEqualNode(o.commonAncestorContainer))(n))(t)},Ig=(e,t)=>e.selection.isCollapsed()?aB(e,t):(n=>{if(iB(n)){const o=Mg(n);return k.some((()=>{qd(n),vS(n,o)}))}return k.none()})(e),dc=e=>((t=>{const n=t.selection.getRng();return n.collapsed&&(CS(n)||t.dom.isEmpty(n.startContainer))&&!(o=>{return r=S.fromDom(o.selection.getStart()),s=o.schema,um(r,(a=>Oo(a.dom)),(a=>s.isBlock(Be(a))));var r,s})(t)})(e)&&yS(e,[]),!0),Fg=(e,t,n)=>te(n)?k.some((()=>{e._selectionOverrides.hideFakeCaret(),Ps(e,t,S.fromDom(n))})):k.none(),jg=(e,t)=>e.selection.isCollapsed()?((n,o)=>{const r=o?ql:Wl,s=Ci(o?1:-1,n.getBody(),n.selection.getRng());return r(s)?Fg(n,o,s.getNode(!o)):k.from(Mo(o,s)).filter((a=>r(a)&&kd(s,a))).bind((a=>Fg(n,o,a.getNode(!o))))})(e,t):((n,o)=>{const r=n.selection.getNode();return lr(r)?Fg(n,o,r):k.none()})(e,t),zg=e=>ps(e??"").getOr(0),xS=(e,t)=>(e||Be(t)==="table"?"margin":"padding")+(Yo(t,"direction")==="rtl"?"-right":"-left"),wS=e=>{const t=ES(e);return!e.mode.isReadOnly()&&(t.length>1||((n,o)=>eo(o,(r=>{const s=xS(z0(n),r),a=ni(r,s).map(zg).getOr(0);return n.dom.getContentEditable(r.dom)!=="false"&&a>0})))(e,t))},SS=e=>zm(e)||mi(e),ES=e=>De(Ar(e.selection.getSelectedBlocks()),(t=>!SS(t)&&!(n=>gn(n).exists(SS))(t)&&sr(t,(n=>To(n.dom)||Pt(n.dom))).exists((n=>To(n.dom))))),kS=(e,t)=>{if(e.mode.isReadOnly())return;const{dom:n}=e,o=xA(e),r=/[a-z%]+$/i.exec(o)?.[0]??"px",s=zg(o),a=z0(e);K(ES(e),(i=>{((l,c,d,m,f,h)=>{const g=xS(d,S.fromDom(h)),b=zg(l.getStyle(h,g));if(c==="outdent"){const y=Math.max(0,b-m);l.setStyle(h,g,y?y+f:"")}else{const y=b+m+f;l.setStyle(h,g,y)}})(n,t,a,s,r,i.dom)})),t==="indent"?bw(e):lg(e)},_S=e=>kS(e,"outdent"),NS=e=>{if(e.selection.isCollapsed()&&wS(e)){const t=e.dom,n=e.selection.getRng(),o=Y.fromRangeStart(n),r=t.getParent(n.startContainer,t.isBlock);if(r!==null&&Kf(S.fromDom(r),o,e.schema))return k.some((()=>_S(e)))}return k.none()},Ug=(e,t)=>e.selection.isCollapsed()?k.none():((n,o)=>{return r=Gd(n.selection.getRng()),wf(r,ar)?k.some((()=>Ps(n,o,S.fromDom(n.selection.getNode())))):k.none();var r})(e,t),AS=(e,t,n)=>zn([NS,Sg,Cg,(o,r)=>Lg(o,t,r),bg,ip,kg,jg,yg,Ig,Eg,Ug],(o=>o(e,n))).filter((o=>e.selection.isEditable())),Hg=(e,t)=>{AS(e,t,!1).fold((()=>{e.selection.isEditable()&&(qd(e),Zf(e))}),Xn),pg(e)&&ng(e.dom,e.getBody())},TS=e=>e.touches===void 0||e.touches.length!==1?k.none():k.some(e.touches[0]),$g=(e,t)=>Oe(e,t.nodeName),lB=(e,t)=>!!se(t)||!!ve(t)&&!($g(e.getBlockElements(),t)||Bo(t)||ua(e,t)||Cm(t)||lb(t)),cB=(e,t)=>{if(se(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||$g(e,t.nextSibling)||Cm(t.nextSibling)}return!1},qg=e=>e.dom.create(xn(e),yi(e)),DS=(e,t,n)=>{const o=S.fromDom(qg(e)),r=fi();ne(o,r),n(t,o);const s=document.createRange();return s.setStartBefore(r.dom),s.setEndBefore(r.dom),s},RS=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,dB=(e,t,n)=>function(o){const r=arguments,s=r[r.length-2],a=s>0?t.charAt(s-1):"";if(a==='"')return o;if(a===">"){const i=t.lastIndexOf("<",s);if(i!==-1&&t.substring(i,s).indexOf('contenteditable="false"')!==-1)return o}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(r[0])+'">'+e.dom.encode(typeof r[1]=="string"?r[1]:r[0])+"</span>"},uB=(e,t)=>eo(e,(n=>{const o=t.match(n);return o!==null&&o[0].length===t.length})),OS=(e,t)=>{t.hasAttribute("data-mce-caret")&&($m(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},mB=(e,t)=>{const n=(o=>Jc(S.fromDom(o.getBody()),"*[data-mce-caret]").map((r=>r.dom)).getOrNull())(e);if(n)return t.type==="compositionstart"?(t.preventDefault(),t.stopPropagation(),void OS(e,n)):void(Yb(n)&&(OS(e,n),e.undoManager.add()))},BS=Pt,PS=(e,t,n)=>{const o=Br(e.getBody()),r=be(uf,t===1?o.next:o.prev);if(n.collapsed){const s=e.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!r(Y.fromRangeStart(n))){const a=S.fromDom((i=>{const l=i.dom.create(xn(i));return l.innerHTML='<br data-mce-bogus="1">',l})(e));t===1?J(S.fromDom(s),a):$(S.fromDom(s),a),e.selection.select(a.dom,!0),e.selection.collapse()}}},LS=(e,t)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return((a,i,l)=>iS(i,a,l,Os,Bs,BS))(r,n,s).orThunk((()=>(PS(n,r,s),k.none())))})(e,((n,o)=>{const r=o?n.getEnd(!0):n.getStart(!0);return sC(r)?!o:o})(e.selection,t)).exists((n=>(zr(e,n),!0))),MS=(e,t)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return((a,i,l)=>lS(i,a,l,(c=>Os(c)||Fv(c)),(c=>Bs(c)||Wf(c)),BS))(r,n,s).orThunk((()=>(PS(n,r,s),k.none())))})(e,t).exists((n=>(zr(e,n),!0))),IS=(e,t)=>cS(e,t,t?Bs:Os),Eu=(e,t)=>xg(e,!t).map((n=>{const o=n.toRange(),r=e.selection.getRng();return t?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o})).exists((n=>(zr(e,n),!0))),FS=(e,t)=>{const n=r=>me(r,t),o=S.fromDom(e.container());return sr(o,(r=>To(r.dom)),n).filter((r=>!n(r)))},jS=(e,t)=>((n,o)=>{const r=Y.fromRangeStart(n.selection.getRng()),s=Y.fromRangeEnd(n.selection.getRng()),a=S.fromDom(n.getBody());return zt(FS(r,a),FS(s,a),((i,l)=>me(i,l)?k.some(i):k.none())).bind(gt).fold(Nt,(i=>!!(o&&Rg(i.dom,s)||!o&&Dg(i.dom,r))&&((l,c,d)=>(d?Qw:Gw)(l.getBody(),c).map((m=>m.toRange())))(n,o?s:r,o).exists((l=>(zr(n,l),!0)))))})(e,t),fB=e=>we(["figcaption"],Be(e)),zS=(e,t)=>!!e.selection.isCollapsed()&&((n,o)=>{const r=S.fromDom(n.getBody()),s=Y.fromRangeStart(n.selection.getRng());return((a,i,l)=>{const c=be(me,i);return sr(S.fromDom(a.container()),(d=>l.isBlock(Be(d))),c).filter(fB)})(s,r,n.schema).exists((()=>{if(((a,i,l)=>i?Rg(a.dom,l):Dg(a.dom,l))(r,o,s)){const a=DS(n,r,o?ne:oe);return n.selection.setRng(a),!0}return!1}))})(e,t),US=(e,t)=>((n,o)=>o?k.from(n.dom.getParent(n.selection.getNode(),"details")).map((r=>((s,a)=>{const i=s.selection.getRng(),l=Y.fromRangeStart(i);return!(s.getBody().lastChild!==a||!Rg(a,l)||(s.execCommand("InsertNewBlockAfter"),0))})(n,r))).getOr(!1):k.from(n.dom.getParent(n.selection.getNode(),"summary")).bind((r=>k.from(n.dom.getParent(r,"details")).map((s=>((a,i,l)=>{const c=a.selection.getRng(),d=Y.fromRangeStart(c);return!(a.getBody().firstChild!==i||!Dg(l,d)||(a.execCommand("InsertNewBlockBefore"),0))})(n,s,r))))).getOr(!1))(e,t),HS={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},$S=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,Pe=(e,...t)=>()=>e.apply(null,t),uc=(e,t)=>Ht(((n,o)=>$t((r=>qe(r,(s=>({...HS,...s}))))(n),(r=>$S(r,o)?[r]:[])))(e,t),(n=>n.action())),qS=(e,t)=>zn(((n,o)=>$t((r=>qe(r,(s=>({...HS,...s}))))(n),(r=>$S(r,o)?[r]:[])))(e,t),(n=>n.action())),WS=(e,t)=>{const n=t?1:-1,o=e.selection.getRng();return iS(e,n,o,ql,Wl,lr).exists((r=>(zr(e,r),!0)))},VS=(e,t)=>{const n=t?1:-1,o=e.selection.getRng();return lS(e,n,o,ql,Wl,lr).exists((r=>(zr(e,r),!0)))},KS=(e,t)=>cS(e,t,t?Wl:ql),XS=(e,t,n)=>$t(ht(e),(o=>Q(o,t)?n(o)?[o]:[]:XS(o,t,n))),YS=(e,t)=>Cs(e,"table",t),GS=bo([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),mc={...GS,none:e=>GS.none(e)},Wg=(e,t,n,o,r=jt)=>{const s=o===1;if(!s&&n<=0)return mc.first(e[0]);if(s&&n>=e.length-1)return mc.last(e[e.length-1]);{const a=n+o,i=e[a];return r(i)?mc.middle(t,i):Wg(e,t,a,o,r)}},QS=(e,t)=>YS(e,t).bind((n=>{const o=XS(n,"th,td",jt);return $s(o,(r=>me(e,r))).map((r=>({index:r,all:o})))}));var pB=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const Vg=(e,t)=>({element:e,offset:t}),JS=(e,t)=>{if(e.property().isText(t))return Vg(t,e.property().getText(t).length);{const n=e.property().children(t);return n.length>0?JS(e,n[n.length-1]):Vg(t,n.length)}},ZS=(e,t,n)=>{const o=e.property().children(t);return o.length>0&&n<o.length?ZS(e,o[n],0):o.length>0&&e.property().isElement(t)&&o.length===n?JS(e,o[o.length-1]):Vg(t,n)},gB=ZS,hB={up:ie({selector:si,closest:Cs,predicate:Tr,all:Zt}),down:ie({selector:_n,predicate:ed}),styles:ie({get:Yo,getRaw:ni,set:Kc,remove:Yc}),attrs:ie({get:et,set:lt,remove:vt,copyTo:(e,t)=>{const n=en(e);Qe(t,n)}}),insert:ie({before:$,after:J,afterAll:$e,append:ne,appendAll:ze,prepend:oe,wrap:je}),remove:ie({unwrap:sn,remove:ft}),create:ie({nu:S.fromTag,clone:e=>S.fromDom(e.dom.cloneNode(!1)),text:S.fromText}),query:ie({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:Vt,nextSibling:Gn}),property:ie({children:ht,name:Be,parent:gn,document:e=>Sn(e).dom,isText:Et,isComment:St,isElement:ot,isSpecial:e=>{const t=Be(e);return we(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>ot(e)?bt(e,"lang"):k.none(),getText:ri,setText:lm,isBoundary:e=>!!ot(e)&&(Be(e)==="body"||we(pB,Be(e))),isEmptyTag:e=>!!ot(e)&&we(["br","img","hr","input"],Be(e)),isNonEditable:e=>ot(e)&&et(e,"contenteditable")==="false"}),eq:me,is:mt},eE=Xs("image"),Kg=Xs("event"),ku=e=>t=>{t[Kg]=e},tE=ku(0),bB=ku(2),yB=ku(1),vB=e=>{const t=e;return k.from(t[Kg]).exists((n=>n===0))},Xg=Xs("mode"),_u=e=>t=>{t[Xg]=e},nE=(e,t)=>_u(t)(e),oE=_u(0),Yg=_u(2),CB=_u(1),rE=e=>t=>{const n=t;return k.from(n[Xg]).exists((o=>o===e))},ji=rE(0),sE=rE(1),xB=["none","copy","link","move"],wB=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Gg=()=>{const e=new window.DataTransfer;let t="move",n="all";const o={get dropEffect(){return t},set dropEffect(r){we(xB,r)&&(t=r)},get effectAllowed(){return n},set effectAllowed(r){vB(o)&&we(wB,r)&&(n=r)},get items(){return((r,s)=>({...s,get length(){return s.length},add:(a,i)=>{if(ji(r)){if(!xe(a))return s.add(a);if(!Lt(i))return s.add(a,i)}return null},remove:a=>{ji(r)&&s.remove(a)},clear:()=>{ji(r)&&s.clear()}}))(o,e.items)},get files(){return sE(o)?Object.freeze({length:0,item:r=>null}):e.files},get types(){return e.types},setDragImage:(r,s,a)=>{var i;ji(o)&&(i={image:r,x:s,y:a},o[eE]=i,e.setDragImage(r,s,a))},getData:r=>sE(o)?"":e.getData(r),setData:(r,s)=>{ji(o)&&e.setData(r,s)},clearData:r=>{ji(o)&&e.clearData(r)}};return oE(o),o},aE=(e,t)=>e.setData("text/html",t),iE=(e,t,n,o,r)=>{const s=_n(S.fromDom(n),"td,th,caption").map((i=>i.dom)),a=De(((i,l)=>$t(l,(c=>{const d=((m,f)=>({left:m.left-f,top:m.top-f,right:m.right+-2,bottom:m.bottom+-2,width:m.width+f,height:m.height+f}))(ba(c.getBoundingClientRect()),-1);return[{x:d.left,y:i(d),cell:c},{x:d.right,y:i(d),cell:c}]})))(e,s),(i=>t(i,r)));return((i,l,c)=>Yt(i,((d,m)=>d.fold((()=>k.some(m)),(f=>{const h=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c)),g=Math.sqrt(Math.abs(m.x-l)+Math.abs(m.y-c));return k.some(g<h?m:f)}))),k.none()))(a,o,r).map((i=>i.cell))},SB=be(iE,(e=>e.bottom),((e,t)=>e.y<t)),EB=be(iE,(e=>e.top),((e,t)=>e.y>t)),lE=(e,t,n)=>{const o=e(t,n);return(r=>r.breakType===jr.Wrap&&r.positions.length===0)(o)||!Ut(n.getNode())&&(r=>r.breakType===jr.Br&&r.positions.length===1)(o)?!((r,s,a)=>a.breakAt.exists((i=>r(s,i).breakAt.isSome())))(e,t,o):o.breakAt.isNone()},kB=be(lE,lc),_B=be(lE,cc),NB=(e,t,n,o)=>{const r=e.selection.getRng(),s=t?1:-1;return!(!sy()||!((a,i,l)=>{const c=Y.fromRangeStart(i);return Si(!a,l).exists((d=>d.isEqual(c)))})(t,r,n)||(as(s,e,n,!t,!1).each((a=>{zr(e,a)})),0))},cE=(e,t,n)=>{const o=((s,a)=>{const i=a.getNode(s);return Dr(i)?k.some(i):k.none()})(!!t,n),r=t===!1;o.fold((()=>zr(e,n.toRange())),(s=>Si(r,e.getBody()).filter((a=>a.isEqual(n))).fold((()=>zr(e,n.toRange())),(a=>((i,l,c)=>{l.undoManager.transact((()=>{const d=i?J:$,m=DS(l,S.fromDom(c),d);zr(l,m)}))})(t,e,s)))))},AB=(e,t,n,o)=>{const r=e.selection.getRng(),s=Y.fromRangeStart(r),a=e.getBody();if(!t&&kB(o,s)){const i=((l,c,d)=>((m,f)=>nn(f.getClientRects()).bind((h=>SB(m,h.left,h.top))).bind((h=>{return xu(Go(g=h).map((b=>lc(g,b).positions.concat(b))).getOr([]),f);var g})))(c,d).orThunk((()=>nn(d.getClientRects()).bind((m=>Tg(Xw(l,Y.before(c)),m.left))))).getOr(Y.before(c)))(a,n,s);return cE(e,t,i),!0}if(t&&_B(o,s)){const i=((l,c,d)=>((m,f)=>to(f.getClientRects()).bind((h=>EB(m,h.left,h.top))).bind((h=>{return xu(In(g=h).map((b=>[b].concat(cc(g,b).positions))).getOr([]),f);var g})))(c,d).orThunk((()=>nn(d.getClientRects()).bind((m=>Tg(Yw(l,Y.after(c)),m.left))))).getOr(Y.after(c)))(a,n,s);return cE(e,t,i),!0}return!1},dE=(e,t,n)=>k.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((o=>k.from(e.dom.getParent(o,"table")).map((r=>n(e,t,r,o))))).getOr(!1),uE=(e,t)=>dE(e,t,NB),Qg=(e,t)=>dE(e,t,AB),mE=(e,t,n)=>n.fold(k.none,k.none,((o,r)=>{return(s=r,Qc(s,lN)).map((a=>(i=>{const l=ii.exact(i,0,i,0);return dN(l)})(a)));var s}),(o=>!e.mode.isReadOnly()&&TB(o)&&(r=>Nu(r)||on(r).some((s=>ro(s)&&Nu(s))))(o)?(e.execCommand("mceTableInsertRowAfter"),fE(e,t,o)):k.none())),TB=e=>sr(e,Cn("table")).exists(Jr),fE=(e,t,n)=>{return mE(e,t,(r=Nu,QS(o=n,void 0).fold((()=>mc.none(o)),(s=>Wg(s.all,o,s.index,1,r)))));var o,r},DB=(e,t,n)=>{return mE(e,t,(r=Nu,QS(o=n,void 0).fold((()=>mc.none()),(s=>Wg(s.all,o,s.index,-1,r)))));var o,r},Nu=e=>Jr(e)||mm(e,RB),RB=e=>ro(e)&&Jr(e),pE=(e,t)=>{const n=["table","li","dl"],o=S.fromDom(e.getBody()),r=a=>{const i=Be(a);return me(a,o)||we(n,i)},s=e.selection.getRng();return((a,i)=>((l,c,d=Nt)=>d(c)?k.none():we(l,Be(c))?k.some(c):si(c,l.join(","),(m=>Q(m,"table")||d(m))))(["td","th"],a,i))(S.fromDom(t?s.endContainer:s.startContainer),r).map((a=>(YS(a,r).each((i=>{e.model.table.clearSelectedCells(i.dom)})),e.selection.collapse(!t),(t?fE:DB)(e,r,a).each((i=>{e.selection.setRng(i)})),!0))).getOr(!1)},gr=(e,t)=>({container:e,offset:t}),Au=At.DOM,Tu=e=>t=>e===t?-1:0,Jg=(e,t,n)=>{if(se(e)&&t>=0)return k.some(gr(e,t));{const o=ha(Au);return k.from(o.backwards(e,t,Tu(e),n)).map((r=>gr(r.container,r.container.data.length)))}},Zg=(e,t,n)=>{if(!se(e))return k.none();const o=e.data;if(t>=0&&t<=o.length)return k.some(gr(e,t));{const r=ha(Au);return k.from(r.backwards(e,t,Tu(e),n)).bind((s=>{const a=s.container.data;return Zg(s.container,t+a.length,n)}))}},gE=(e,t,n)=>{if(!se(e))return k.none();const o=e.data;if(t<=o.length)return k.some(gr(e,t));{const r=ha(Au);return k.from(r.forwards(e,t,Tu(e),n)).bind((s=>gE(s.container,t-o.length,n)))}},eh=(e,t,n,o,r)=>{const s=ha(e,(a=>i=>a.isBlock(i)||we(["BR","IMG","HR","INPUT"],i.nodeName)||a.getContentEditable(i)==="false")(e));return k.from(s.backwards(t,n,o,r))},hE=e=>e!==""&&` \xA0\uFEFF\f
\r	\v`.indexOf(e)!==-1,OB=(e,t)=>e.substring(t.length),th=(e,t,n,o=!1)=>{if(!(r=t).collapsed||!se(r.startContainer))return k.none();var r;const s={text:"",offset:0},a=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return eh(e,t.startContainer,t.startOffset,((i,l,c)=>(s.text=c+s.text,s.offset+=l,((d,m,f,h=!1)=>{let g;const b=f.charAt(0);for(g=m-1;g>=0;g--){const y=d.charAt(g);if(!h&&hE(y))return k.none();if(b===y&&pn(d,f,g,m))break}return k.some(g)})(s.text,s.offset,n,o).getOr(l))),a).bind((i=>{const l=t.cloneRange();if(l.setStart(i.container,i.offset),l.setEnd(t.endContainer,t.endOffset),l.collapsed)return k.none();const c=(d=>vo(d.toString().replace(/\u00A0/g," ")))(l);return c.lastIndexOf(n)!==0?k.none():k.some({text:OB(c,n),range:l,trigger:n})}))},bE=e=>{if((t=>t.nodeType===3)(e))return gr(e,e.data.length);{const t=e.childNodes;return t.length>0?bE(t[t.length-1]):gr(e,t.length)}},yE=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?yE(n[t],0):n.length>0&&(o=>o.nodeType===1)(e)&&n.length===t?bE(n[n.length-1]):gr(e,t)},vE=(e,t,n,o={})=>{const r=t(),s=e.selection.getRng().startContainer.nodeValue??"",a=De(r.lookupByTrigger(n.trigger),(l=>n.text.length>=l.minChars&&l.matches.getOrThunk((()=>(c=>d=>{const m=yE(d.startContainer,d.startOffset);return!((f,h)=>{const g=f.getParent(h.container,f.isBlock)??f.getRoot();return eh(f,h.container,h.offset,((b,y)=>y===0?-1:y),g).filter((b=>{const y=b.container.data.charAt(b.offset-1);return!hE(y)})).isSome()})(c,m)})(e.dom)))(n.range,s,n.text)));if(a.length===0)return k.none();const i=Promise.all(qe(a,(l=>l.fetch(n.text,l.maxResults,o).then((c=>({matchText:n.text,items:c,columns:l.columns,onAction:l.onAction,highlightOn:l.highlightOn}))))));return k.some({lookupData:i,context:n})};var Ur;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Ur||(Ur={}));const nh=(e,t,n)=>e.stype===Ur.Error?t(e.serror):n(e.svalue),zi=e=>({stype:Ur.Value,svalue:e}),fc=e=>({stype:Ur.Error,serror:e}),BB=nh,CE=e=>He(e)&&un(e).length>100?" removed due to size":JSON.stringify(e,null,2),xE=(e,t)=>fc([{path:e,getErrorInfo:t}]),oh=e=>({extract:(t,n)=>{return o=e(n),r=s=>((a,i)=>xE(a,ie(i)))(t,s),o.stype===Ur.Error?r(o.serror):o;var o,r},toString:ie("val")}),PB=oh(zi),rh=ie(PB),Du=(e,t)=>oh((n=>{const o=typeof n;return e(n)?zi(n):fc(`Expected type: ${t} but got: ${o}`)})),LB=Du(x,"number"),sh=Du(xe,"string");Du(yn,"boolean");const wE=Du(pt,"function"),SE=e=>{if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every((t=>SE(e[t])));default:return!1}};oh((e=>SE(e)?zi(e):fc("Expected value to be acceptable for sending via postMessage")));const EE=e=>({tag:"defaultedThunk",process:ie(e)}),kE=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},MB=e=>{const t=(o=>{const r=[],s=[];return K(o,(a=>{nh(a,(i=>s.push(i)),(i=>r.push(i)))})),{values:r,errors:s}})(e);return t.errors.length>0?(n=t.errors,Bn(fc,Ec)(n)):zi(t.values);var n},_E=(e,t,n,o)=>o(Ot(e,t).getOrThunk((()=>n(e)))),IB=(e,t,n,o,r)=>{const s=i=>r.extract(t.concat([o]),i),a=i=>i.fold((()=>zi(k.none())),(l=>{return d=r.extract(t.concat([o]),l),m=k.some,d.stype===Ur.Value?{stype:Ur.Value,svalue:m(d.svalue)}:d;var d,m}));switch(e.tag){case"required":return((i,l,c,d)=>Ot(l,c).fold((()=>((m,f,h)=>xE(m,(()=>'Could not find valid *required* value for "'+f+'" in '+CE(h))))(i,c,l)),d))(t,n,o,s);case"defaultedThunk":return _E(n,o,e.process,s);case"option":return((i,l,c)=>c(Ot(i,l)))(n,o,a);case"defaultedOptionThunk":return((i,l,c,d)=>d(Ot(i,l).map((m=>m===!0?c(i):m))))(n,o,e.process,a);case"mergeWithThunk":return _E(n,o,ie({}),(i=>{const l=$a(e.process(n),i);return s(l)}))}},NE=e=>({extract:(t,n)=>((o,r,s)=>{const a={},i=[];for(const l of s)kE(l,((c,d,m,f)=>{const h=IB(m,o,r,c,f);BB(h,(g=>{i.push(...g)}),(g=>{a[d]=g}))}),((c,d)=>{a[c]=d(r)}));return i.length>0?fc(i):zi(a)})(t,n,e),toString:()=>`obj{
`+qe(e,(n=>kE(n,((o,r,s,a)=>o+" -> "+a.toString()),((o,r)=>"state("+o+")")))).join(`
`)+"}"}),AE=(e,t,n)=>{return o=((r,s,a)=>((i,l)=>i.stype===Ur.Error?{stype:Ur.Error,serror:l(i.serror)}:i)(s.extract([r],a),(i=>({input:a,errors:i}))))(e,t,n),nh(o,fn.error,fn.value);var o},TE=e=>`Errors: 
`+(t=>{const n=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:ie("... (only showing first ten failures)")}]):t;return qe(n,(o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo()))})(e.errors).join(`
`)+`

Input object: `+CE(e.input),Ui=(e,t,n,o)=>({tag:"field",key:e,newKey:t,presence:n,prop:o}),DE=(e,t)=>Ui(e,e,{tag:"required",process:{}},t),RE=e=>DE(e,sh),OE=e=>DE(e,wE),BE=(e,t)=>Ui(e,e,{tag:"option",process:{}},t),hr=e=>BE(e,sh),PE=(e,t,n)=>Ui(e,e,EE(t),n),LE=(e,t)=>PE(e,t,LB),FB=RE("type"),jB=OE("fetch"),zB=OE("onAction");hr("name"),hr("text"),hr("role"),hr("icon"),hr("url"),hr("tooltip"),hr("chevronTooltip"),hr("label"),hr("shortcut");const UB=NE([FB,RE("trigger"),LE("minChars",1),(e=>Ui(e,e,EE(1),rh()))("columns"),LE("maxResults",10),BE("matches",wE),jB,zB,(ME=sh,PE("highlightOn",[],(ah=ME,{extract:(e,t)=>{const n=qe(t,((o,r)=>ah.extract(e.concat(["["+r+"]"]),o)));return MB(n)},toString:()=>"array("+ah.toString()+")"})))]);var ME,ah;const HB=e=>{const t=$o(),n=Qt(!1),o=t.isSet,r=()=>{o()&&((l=>{l.dispatch("AutocompleterEnd")})(e),n.set(!1),t.clear())},s=Un((()=>(l=>{const c=l.ui.registry.getAll().popups,d=Ws(c,(h=>{return(g=h,AE("Autocompleter",UB,g)).fold((b=>{throw new Error(TE(b))}),gt);var g})),m=Dc(nr(d,(h=>h.trigger))),f=Vs(d);return{dataset:d,triggers:m,lookupByTrigger:h=>De(f,(g=>g.trigger===h))}})(e))),a=l=>{(c=>t.get().map((d=>th(e.dom,e.selection.getRng(),d.trigger,!0).bind((m=>vE(e,s,m,c))))).getOrThunk((()=>((d,m)=>{const f=m(),h=d.selection.getRng();return((g,b,y)=>zn(y.triggers,(v=>th(g,b,v))))(d.dom,h,f).bind((g=>vE(d,m,g)))})(e,s))))(l).fold(r,(c=>{(d=>{o()||t.set({trigger:d.trigger,matchLength:d.text.length})})(c.context),c.lookupData.then((d=>{t.get().map((m=>{const f=c.context;m.trigger===f.trigger&&(t.set({...m,matchLength:f.text.length}),n.get()?(ef(e,{range:f.range}),((h,g)=>{h.dispatch("AutocompleterUpdate",g)})(e,{lookupData:d})):(n.set(!0),ef(e,{range:f.range}),((h,g)=>{h.dispatch("AutocompleterStart",g)})(e,{lookupData:d})))}))}))}))},i=()=>t.get().bind((({trigger:l})=>{const c=e.selection.getRng();return th(e.dom,c,l,n.get()).filter((({range:d})=>((m,f)=>{const h=m.compareBoundaryPoints(window.Range.START_TO_START,f),g=m.compareBoundaryPoints(window.Range.END_TO_END,f);return h>=0&&g<=0})(c,d))).map((({range:d})=>d))}));e.addCommand("mceAutocompleterReload",((l,c)=>{const d=He(c)?c.fetchOptions:{};a(d)})),e.addCommand("mceAutocompleterClose",r),e.addCommand("mceAutocompleterRefreshActiveRange",(()=>{i().each((l=>{ef(e,{range:l})}))})),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",(()=>i().isSome())),((l,c)=>{const d=no(c.load,50);l.on("input",(m=>{(m.inputType!=="insertCompositionText"||l.composing)&&d.throttle()})),l.on("keydown",(m=>{const f=m.which;f===8?d.throttle():f===27?(d.cancel(),c.cancelIfNecessary()):f!==38&&f!==40||d.cancel()}),!0),l.on("remove",d.cancel)})(e,{cancelIfNecessary:r,load:a})},$B=qo().browser.isSafari(),IE=e=>Es(S.fromDom(e)),FE=(e,t)=>e.startOffset===0&&e.endOffset===t.textContent?.length,Ru=(e,t)=>k.from(e.getParent(t.container(),"details")),jE=(e,t)=>Ru(e,t).isSome(),zE=(e,t)=>{const n=t.getNode();Lt(n)||e.selection.setCursorLocation(n,t.offset())},UE=(e,t,n)=>{const o=e.dom.getParent(t.container(),"details");if(o&&!o.open){const r=e.dom.select("summary",o)[0];r&&(n?In(r):Go(r)).each((s=>zE(e,s)))}else zE(e,t)},HE=(e,t,n)=>{const{dom:o,selection:r}=e,s=e.getBody();if(n==="character"){const a=Y.fromRangeStart(r.getRng()),i=o.getParent(a.container(),o.isBlock),l=Ru(o,a),c=i&&o.isEmpty(i),d=Xe(i?.previousSibling),m=Xe(i?.nextSibling);return!!(c&&(t?m:d)&&wi(!t,s,a).exists((f=>jE(o,f)&&!qa(l,Ru(o,f)))))||wi(t,s,a).fold(Nt,(f=>{const h=Ru(o,f);if(jE(o,f)&&!qa(l,h)){if(t||UE(e,f,!1),i&&c){if(t&&d||!t&&m)return!0;UE(e,f,t),e.dom.remove(i)}return!0}return!1}))}return!1},qB=(e,t,n,o)=>{const r=e.selection.getRng(),s=Y.fromRangeStart(r),a=e.getBody();return o==="selection"?((i,l)=>{const c=l.startSummary.exists((f=>f.contains(i.startContainer))),d=l.startSummary.exists((f=>f.contains(i.endContainer))),m=l.startDetails.forall((f=>l.endDetails.forall((h=>f!==h))));return(c||d)&&!(c&&d)||m})(r,t):n?((i,l)=>l.startSummary.exists((c=>((d,m)=>Go(m).exists((f=>Ut(f.getNode())&&ao(m,f).exists((h=>h.isEqual(d)))||f.isEqual(d))))(i,c))))(s,t)||((i,l,c)=>c.startDetails.exists((d=>Qn(i,l).forall((m=>!d.contains(m.container()))))))(a,s,t):((i,l)=>l.startSummary.exists((c=>((d,m)=>In(m).exists((f=>f.isEqual(d))))(i,c))))(s,t)||((i,l)=>l.startDetails.exists((c=>ao(c,i).forall((d=>l.startSummary.exists((m=>!m.contains(i.container())&&m.contains(d.container()))))))))(s,t)},Ia=(e,t,n)=>((o,r,s)=>((a,i)=>{const l=k.from(a.getParent(i.startContainer,"details")),c=k.from(a.getParent(i.endContainer,"details"));if(l.isSome()||c.isSome()){const d=l.bind((m=>k.from(a.select("summary",m)[0])));return k.some({startSummary:d,startDetails:l,endDetails:c})}return k.none()})(o.dom,o.selection.getRng()).fold((()=>HE(o,r,s)),(a=>qB(o,a,r,s)||HE(o,r,s))))(e,t,n)||$B&&((o,r,s)=>{const a=o.selection,i=a.getNode(),l=a.getRng(),c=Y.fromRangeStart(l);return!!yN(i)&&(s==="selection"&&FE(l,i)||dC(r,c,i)?IE(i):o.undoManager.transact((()=>{const d=a.getSel();let{anchorNode:m,anchorOffset:f,focusNode:h,focusOffset:g}=d??{};const b=()=>{te(m)&&te(f)&&te(h)&&te(g)&&d?.setBaseAndExtent(m,f,h,g)},y=(_,N)=>{K(_.childNodes,(D=>{Ul(D)&&N.appendChild(D)}))},v=o.dom.create("span",{"data-mce-bogus":"1"});y(i,v),i.appendChild(v),b(),s!=="word"&&s!=="line"||d?.modify("extend",r?"right":"left",s),!a.isCollapsed()&&FE(a.getRng(),v)?IE(i):(o.execCommand(r?"ForwardDelete":"Delete"),m=d?.anchorNode,f=d?.anchorOffset,h=d?.focusNode,g=d?.focusOffset,y(v,i),b()),o.dom.remove(v)})),!0)})(e,t,n)?k.some(Ee):k.none(),$E=e=>(t,n,o={})=>{const r=t.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:Ee,inputType:n},a=Ib(new InputEvent(e));return t.dispatch(e,{...a,...s,...o})},pc=$E("input"),Ou=$E("beforeinput"),qE=qo(),WE=qE.os,VE=WE.isMacOS()||WE.isiOS(),WB=qE.browser.isFirefox(),Hi=(e,t)=>{const n=e.dom,o=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const s=l=>/^(ul|ol|dl)$/.test(Be(l)),a=l=>s(l)?k.from(l):Qc(l,s),i=l=>n.isEmpty(l.dom);(l=>{for(;l;){if(ve(l)||se(l)&&l.data&&/[\r\n\s]/.test(l.data))return k.from(S.fromDom(l));l=l.nextSibling}return k.none()})(t.firstChild).each((l=>{a(l).fold((()=>{if(i(l)){const c=(d=>gB(hB,d,0))(l).element;ot(c)&&!Ss(c)&&ne(c,S.fromText(It))}}),(c=>{$(c,S.fromText(It))}))}))}const r=n.createRng();if(t.normalize(),t.hasChildNodes()){const s=new an(t,t);let a,i=t;for(;a=s.current();){if(se(a)){r.setStart(a,0),r.setEnd(a,0);break}if(o[a.nodeName.toLowerCase()]){r.setStartBefore(a),r.setEndBefore(a);break}i=a,a=s.next()}a||(r.setStart(i,0),r.setEnd(i,0))}else Ut(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)):(r.setStart(t,0),r.setEnd(t,0));e.selection.setRng(r),$l(e,r)},gc=(e,t)=>{const n=e.getRoot();let o,r=t;for(;r!==n&&r&&e.getContentEditable(r)!=="false";){if(e.getContentEditable(r)==="true"){o=r;break}r=r.parentNode}return r!==n?o:n},ih=e=>k.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),lh=e=>{e.innerHTML='<br data-mce-bogus="1">'},hc=(e,t)=>{xn(e).toLowerCase()===t.tagName.toLowerCase()&&((n,o,r)=>{const s=n.dom;k.from(r.style).map(s.parseStyle).each((d=>{const m={...rm(S.fromDom(o)),...d};s.setStyles(o,m)}));const a=k.from(r.class).map((d=>d.split(/\s+/))),i=k.from(o.className).map((d=>De(d.split(/\s+/),(m=>m!==""))));zt(a,i,((d,m)=>{const f=De(m,(g=>!we(d,g))),h=[...d,...f];s.setAttrib(o,"class",h.join(" "))}));const l=["style","class"],c=tr(r,((d,m)=>!we(l,m)));s.setAttribs(o,c)})(e,t,yi(e))},KE=(e,t,n,o,r=!0,s,a)=>{const i=e.dom,l=e.schema,c=xn(e),d=n?n.nodeName.toUpperCase():"";let m=t;const f=l.getTextInlineElements();let h;h=s||d==="TABLE"||d==="HR"?i.create(s||c,a||{}):n.cloneNode(!1);let g=h;if(r){do if(f[m.nodeName]){if(Oo(m)||Bo(m))continue;const b=m.cloneNode(!1);i.setAttrib(b,"id",""),h.hasChildNodes()?(b.appendChild(h.firstChild),h.appendChild(b)):(g=b,h.appendChild(b))}while((m=m.parentNode)&&m!==o);((b,y)=>{const v=S.fromDom(b),_=S.fromDom(y),N=Cn("span"),D=be(me,v),A=P=>ot(P)&&ni(P,"font-size").isSome(),R=[...A(_)?[_]:[],...Jh(_,A,D)];K(R.slice(1),(P=>{Yc(P,"font-size"),vt(P,"data-mce-style"),N(P)&&kn(P)&&sn(P)}))})(h,g)}else i.setAttrib(h,"style",null),i.setAttrib(h,"class",null);return hc(e,h),lh(g),h},XE=(e,t)=>{const n=e?.parentNode;return te(n)&&n.nodeName===t},YE=e=>te(e)&&/^(OL|UL|LI)$/.test(e.nodeName),ch=e=>te(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Bu=e=>{const t=e.parentNode;return ch(t)?t:e},Pu=(e,t,n)=>{let o=e[n?"firstChild":"lastChild"];for(;o&&!ve(o);)o=o[n?"nextSibling":"previousSibling"];return o===t},GE=e=>Yt(nr(rm(S.fromDom(e)),((t,n)=>`${n}: ${t};`)),((t,n)=>t+n),""),VB=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),dh=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,uh=(e,t)=>te(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",mh=(e,t,n)=>se(t)?e?n===1&&t.data.charAt(n-1)===hn?0:n:n===t.data.length-1&&t.data.charAt(n)===hn?t.data.length:n:n,QE={insert:(e,t)=>{let n,o,r,s,a=!1;const i=e.dom,l=e.schema.getNonEmptyElements(),c=e.selection.getRng(),d=xn(e),m=S.fromDom(c.startContainer),f=qt(m,c.startOffset),h=f.exists((M=>ro(M)&&!Jr(M))),g=c.collapsed&&h,b=(M,W)=>KE(e,n,A,D,uA(e),M,W),y=M=>{const W=mh(M,n,o);if(se(n)&&(M?W>0:W<n.data.length))return!1;if((n.parentNode===A||n===A)&&a&&!M||M&&ve(n)&&n===A.firstChild)return!0;if(dh(n,"TABLE")||dh(n,"HR"))return(H=>H.nodeName==="BR"||H.nextSibling&&H.nextSibling.nodeName==="BR")(n)?!M:a&&!M||!a&&M;const B=new an(n,A);let F;for(se(n)&&(M&&W===0?B.prev():M||W!==n.data.length||B.next());F=B.current();){if(ve(F)){if(!F.getAttribute("data-mce-bogus")){const H=F.nodeName.toLowerCase();if(l[H]&&H!=="br")return!1}}else if(se(F)&&!li(F.data))return!1;M?B.prev():B.next()}return!0},v=()=>{let M;return M=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&R!=="HGROUP"?b(d):b(),((W,B)=>{const F=mA(W);return!kt(B)&&(xe(F)?we(E.explode(F),B.nodeName.toLowerCase()):F)})(e,s)&&uh(i,s)&&i.isEmpty(A,void 0,{includeZwsp:!0})?M=i.split(s,A):i.insertAfter(M,A),Hi(e,M),M};Id(i,c).each((M=>{c.setStart(M.startContainer,M.startOffset),c.setEnd(M.endContainer,M.endOffset)})),n=c.startContainer,o=c.startOffset;const _=!(!t||!t.shiftKey),N=!(!t||!t.ctrlKey);ve(n)&&n.hasChildNodes()&&!g&&(a=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=a&&se(n)?n.data.length:0);const D=gc(i,n);if(!D||((M,W)=>{const B=M.dom.getParent(W,"ol,ul,dl");return B!==null&&M.dom.getContentEditableParent(B)==="false"})(e,n))return;_||(n=((M,W,B,F,H)=>{const Z=M.dom,le=gc(Z,F)??Z.getRoot();let _e=Z.getParent(F,Z.isBlock);if(!_e||!uh(Z,_e)){if(_e=_e||le,!_e.hasChildNodes()){const yt=Z.create(W);return hc(M,yt),_e.appendChild(yt),B.setStart(yt,0),B.setEnd(yt,0),yt}let Te,Se=F;for(;Se&&Se.parentNode!==_e;)Se=Se.parentNode;for(;Se&&!Z.isBlock(Se);)Te=Se,Se=Se.previousSibling;const Me=Te?.parentElement?.nodeName;if(Te&&Me&&M.schema.isValidChild(Me,W.toLowerCase())){const yt=Te.parentNode,he=Z.create(W);for(hc(M,he),yt.insertBefore(he,Te),Se=Te;Se&&!Z.isBlock(Se);){const Ne=Se.nextSibling;he.appendChild(Se),Se=Ne}B.setStart(F,H),B.setEnd(F,H)}}return F})(e,d,c,n,o));let A=i.getParent(n,i.isBlock)||i.getRoot();s=te(A?.parentNode)?i.getParent(A.parentNode,i.isBlock):null,r=A?A.nodeName.toUpperCase():"";const R=s?s.nodeName.toUpperCase():"";if(R!=="LI"||N||(A=s,s=s.parentNode,r=R),ve(s)&&((M,W,B)=>!W&&B.nodeName.toLowerCase()===xn(M)&&M.dom.isEmpty(B)&&((F,H)=>{let Z=H;for(;Z&&Z!==F&&Xe(Z.nextSibling);){const _e=Z.parentElement;if(!_e||(le=_e,!Oe(M.schema.getTextBlockElements(),le.nodeName.toLowerCase())))return ym(_e);Z=_e}var le;return!1})(M.getBody(),B))(e,_,A))return((M,W,B)=>{const F=W(xn(M)),H=((Z,le)=>Z.dom.getParent(le,ym))(M,B);H&&(M.dom.insertAfter(F,H),Hi(M,F),(B.parentElement?.childNodes?.length??0)>1&&M.dom.remove(B))})(e,b,A);if(/^(LI|DT|DD)$/.test(r)&&ve(s)&&i.isEmpty(A))return void((M,W,B,F,H)=>{const Z=M.dom,le=M.selection.getRng(),_e=B.parentNode;if(B===M.getBody()||!_e)return;var Te;YE(Te=B)&&YE(Te.parentNode)&&(H="LI");const Se=ch(F)?GE(F):void 0;let Me=ch(F)&&Se?W(H,{style:GE(F)}):W(H);if(Pu(B,F,!0)&&Pu(B,F,!1))if(XE(B,"LI")){const yt=Bu(B);Z.insertAfter(Me,yt),(he=>he.parentNode?.firstChild===he)(B)?Z.remove(yt):Z.remove(B)}else Z.replace(Me,B);else if(Pu(B,F,!0))XE(B,"LI")?(Z.insertAfter(Me,Bu(B)),Me.appendChild(Z.doc.createTextNode(" ")),Me.appendChild(B)):_e.insertBefore(Me,B),Z.remove(F);else if(Pu(B,F,!1))Z.insertAfter(Me,Bu(B)),Z.remove(F);else{B=Bu(B);const yt=le.cloneRange();yt.setStartAfter(F),yt.setEndAfter(B);const he=yt.extractContents();if(H==="LI"&&(Ne=>Ne.firstChild&&Ne.firstChild.nodeName==="LI")(he)){const Ne=De(qe(Me.children,S.fromDom),Ho(Cn("br")));Me=he.firstChild,Z.insertAfter(he,B),K(Ne,(j=>oe(S.fromDom(Me),j))),Se&&Me.setAttribute("style",Se)}else Z.insertAfter(he,B),Z.insertAfter(Me,B);Z.remove(F)}Hi(M,Me)})(e,b,s,A,d);if(!(g||A!==e.getBody()&&uh(i,A)))return;const P=A.parentNode;let I;if(g)I=b(d),f.fold((()=>{ne(m,S.fromDom(I))}),(M=>{$(M,S.fromDom(I))})),e.selection.setCursorLocation(I,0);else if(gi(A))I=$m(A),i.isEmpty(A)&&lh(A),hc(e,I),Hi(e,I);else if(y(!1))I=v();else if(y(!0)&&P){const M=Y.fromRangeStart(c),W=Wf(M),B=S.fromDom(A),F=Hd(B,M,e.schema)?qv(B,M,e.schema).bind((Z=>k.from(Z.getNode()))):k.none();I=P.insertBefore(b(),A);const H=dh(A,"HR")||W?I:F.getOr(A);Hi(e,H)}else{const M=(B=>{const F=B.cloneRange();return F.setStart(B.startContainer,mh(!0,B.startContainer,B.startOffset)),F.setEnd(B.endContainer,mh(!1,B.endContainer,B.endOffset)),F})(c).cloneRange();M.setEndAfter(A);const W=M.extractContents();(B=>{K(ed(S.fromDom(B),Et),(F=>{const H=F.dom;H.nodeValue=vo(H.data)}))})(W),(B=>{let F=B;do se(F)&&(F.data=F.data.replace(/^[\r\n]+/,"")),F=F.firstChild;while(F)})(W),I=W.firstChild,A===I?te(P)&&i.insertAfter(W,P):i.insertAfter(W,A),((B,F,H)=>{const Z=[];if(!H)return;let le=H;for(;le=le.firstChild;){if(B.isBlock(le))return;ve(le)&&!F[le.nodeName.toLowerCase()]&&Z.push(le)}let _e=Z.length;for(;_e--;)le=Z[_e],(!le.hasChildNodes()||le.firstChild===le.lastChild&&le.firstChild?.nodeValue===""||VB(B,le))&&B.remove(le)})(i,l,I),((B,F)=>{F.normalize();const H=F.lastChild;(!H||ve(H)&&/^(left|right)$/gi.test(B.getStyle(H,"float",!0)))&&B.add(F,"br")})(i,A),i.isEmpty(A)&&lh(A),I.normalize(),i.isEmpty(I)?(i.remove(I),v()):(hc(e,I),Hi(e,I))}i.setAttrib(I,"id",""),e.dispatch("NewBlock",{newBlock:I})},fakeEventName:"insertParagraph"},JE=(e,t,n)=>{const o=e.dom.createRng();n?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),e.selection.setRng(o),$l(e,o)},KB=(e,t)=>{const n=S.fromTag("br");$(S.fromDom(t),n),e.undoManager.add()},XB=(e,t)=>{YB(e.getBody(),t)||J(S.fromDom(t),S.fromTag("br"));const n=S.fromTag("br");J(S.fromDom(t),n),JE(e,n.dom,!1),e.undoManager.add()},YB=(e,t)=>{return n=Y.after(t),!!Ut(n.getNode())||Qn(e,Y.after(t)).map((o=>Ut(o.getNode()))).getOr(!1);var n},ZE=e=>e&&e.nodeName==="A"&&"href"in e,GB=e=>e.fold(Nt,ZE,ZE,Nt),QB=(e,t)=>{t.fold(Ee,be(KB,e),be(XB,e),Ee)},ek={insert:(e,t)=>{const n=(o=>{const r=be(ka,o),s=Y.fromRangeStart(o.selection.getRng());return Fr(r,o.getBody(),s).filter(GB)})(e);n.isSome()?n.each(be(QB,e)):((o,r)=>{const s=o.selection,a=o.dom,i=s.getRng();let l,c=!1;Id(a,i).each((y=>{i.setStart(y.startContainer,y.startOffset),i.setEnd(y.endContainer,y.endOffset)}));let d=i.startOffset,m=i.startContainer;if(ve(m)&&m.hasChildNodes()){const y=d>m.childNodes.length-1;m=m.childNodes[Math.min(d,m.childNodes.length-1)]||m,d=y&&se(m)?m.data.length:0}let f=a.getParent(m,a.isBlock);const h=f&&f.parentNode?a.getParent(f.parentNode,a.isBlock):null,g=h?h.nodeName.toUpperCase():"",b=!(!r||!r.ctrlKey);g!=="LI"||b||(f=h),se(m)&&d>=m.data.length&&(((y,v,_)=>{const N=new an(v,_);let D;const A=y.getNonEmptyElements();for(;D=N.next();)if(A[D.nodeName.toLowerCase()]||se(D)&&D.length>0)return!0;return!1})(o.schema,m,f||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),c=!0)),l=a.create("br"),Ym(a,i,l),JE(o,l,c),o.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},tk=(e,t)=>ih(e).filter((n=>t.length>0&&Q(S.fromDom(n),t))).isSome(),Co=bo([{br:[]},{block:[]},{none:[]}]),JB=(e,t)=>(n=>tk(n,dA(n)))(e),nk=e=>(t,n)=>(o=>ih(o).filter((r=>mi(S.fromDom(r)))).isSome())(t)===e,ok=(e,t)=>(n,o)=>(s=>ih(s).fold(ie(""),(a=>a.nodeName.toUpperCase())))(n)===e.toUpperCase()===t,ZB=e=>{const t=gc(e.dom,e.selection.getStart());return kt(t)},bc=e=>ok("pre",e),Lu=e=>(t,n)=>iA(t)===e,eP=(e,t)=>(n=>tk(n,cA(n)))(e),Mu=(e,t)=>t,tP=e=>{const t=xn(e),n=gc(e.dom,e.selection.getStart());return te(n)&&e.schema.isValidChild(n.nodeName,t)},nP=e=>{const t=e.selection.getRng(),n=S.fromDom(t.startContainer),o=qt(n,t.startOffset).map((r=>ro(r)&&!Jr(r)));return t.collapsed&&o.getOr(!0)},Uo=(e,t)=>(n,o)=>Yt(e,((r,s)=>r&&s(n,o)),!0)?k.some(t):k.none(),Iu=(e,t,n)=>{if(!t.mode.isReadOnly()){if(t.selection.isCollapsed()||(o=>{o.execCommand("delete")})(t),te(n)&&Ou(t,e.fakeEventName).isDefaultPrevented())return;e.insert(t,n),te(n)&&pc(t,e.fakeEventName)}},rk=(e,t)=>{if(e.mode.isReadOnly())return;const n=()=>Iu(ek,e,t),o=()=>Iu(QE,e,t),r=((s,a)=>zw([Uo([JB],Co.none()),Uo([bc(!0),ZB],Co.none()),Uo([ok("summary",!0)],Co.br()),Uo([bc(!0),Lu(!1),Mu],Co.br()),Uo([bc(!0),Lu(!1)],Co.block()),Uo([bc(!0),Lu(!0),Mu],Co.block()),Uo([bc(!0),Lu(!0)],Co.br()),Uo([nk(!0),Mu],Co.br()),Uo([nk(!0)],Co.block()),Uo([eP],Co.br()),Uo([Mu],Co.br()),Uo([tP],Co.block()),Uo([nP],Co.block())],[s,!(!a||!a.shiftKey)]).getOr(Co.none()))(e,t);switch(lA(e)){case"linebreak":r.fold(n,n,Ee);break;case"block":r.fold(o,o,Ee);break;case"invert":r.fold(o,n,Ee);break;default:r.fold(n,o,Ee)}},sk=qo(),oP=sk.os.isiOS()&&sk.browser.isSafari(),ak=(e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact((()=>{rk(e,t)})))},rP=qo(),ik=e=>e.stopImmediatePropagation(),lk=e=>e.keyCode===de.PAGE_UP||e.keyCode===de.PAGE_DOWN,ck=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",ik,!0):!n&&e.get()&&t.off("NodeChange",ik),e.set(n)},dk=(e,t)=>e===t||e.contains(t),uk=(e,t)=>{const n=t.container(),o=t.offset();return se(n)?(n.insertData(o,e),k.some(Y(n,o+e.length))):Ed(t).map((r=>{const s=S.fromText(e);return t.isAtEnd()?J(r,s):$(r,s),Y(s.dom,e.length)}))},mk=be(uk,It),fk=be(uk," "),pk=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},sP=e=>{const t=Y.fromRangeStart(e.selection.getRng()),n=S.fromDom(e.getBody());if(e.selection.isCollapsed()){const o=be(ka,e),r=Y.fromRangeStart(e.selection.getRng());return Fr(o,e.getBody(),r).bind((s=>a=>a.fold((i=>ao(s.dom,Y.before(i))),(i=>In(i)),(i=>Go(i)),(i=>Qn(s.dom,Y.after(i)))))(n)).map((s=>()=>((a,i,l)=>c=>Gv(a,c,l)?mk(i):fk(i))(n,t,e.schema)(s).each(pk(e))))}return k.none()},aP=e=>{return Xr(p.browser.isFirefox()&&e.selection.isEditable()&&(t=e.dom,n=e.selection.getRng().startContainer,t.isEditable(t.getParent(n,"summary"))),(()=>{const o=S.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),((r,s,a)=>Gv(r,s,a)?mk(s):fk(s))(o,Y.fromRangeStart(e.selection.getRng()),e.schema).each(pk(e))}));var t,n},iP=e=>bT(e)?[{keyCode:de.TAB,action:Pe(pE,e,!0)},{keyCode:de.TAB,shiftKey:!0,action:Pe(pE,e,!1)}]:[],lP=e=>{if(e.addShortcut("Meta+P","","mcePrint"),HB(e),Mr(e))return Qt(null);{const t=nB(e);return(n=>{n.on("beforeinput",(o=>{n.selection.isEditable()&&!xt(o.getTargetRanges(),(r=>!((s,a)=>!dk(s.getBody(),a.startContainer)||!dk(s.getBody(),a.endContainer)||gv(s.dom,a))(n,r)))||o.preventDefault()}))})(e),(n=>{n.on("keyup compositionstart",be(mB,n))})(e),((n,o)=>{n.on("keydown",(r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=p.os.isMacOS()||p.os.isiOS(),c=p.browser.isFirefox();uc([{keyCode:de.RIGHT,action:Pe(LS,s,!0)},{keyCode:de.LEFT,action:Pe(LS,s,!1)},{keyCode:de.UP,action:Pe(MS,s,!1)},{keyCode:de.DOWN,action:Pe(MS,s,!0)},...l?[{keyCode:de.UP,action:Pe(Eu,s,!1),metaKey:!0,shiftKey:!0},{keyCode:de.DOWN,action:Pe(Eu,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:de.RIGHT,action:Pe(uE,s,!0)},{keyCode:de.LEFT,action:Pe(uE,s,!1)},{keyCode:de.UP,action:Pe(Qg,s,!1)},{keyCode:de.DOWN,action:Pe(Qg,s,!0)},{keyCode:de.UP,action:Pe(Qg,s,!1)},{keyCode:de.UP,action:Pe(US,s,!1)},{keyCode:de.DOWN,action:Pe(US,s,!0)},{keyCode:de.RIGHT,action:Pe(WS,s,!0)},{keyCode:de.LEFT,action:Pe(WS,s,!1)},{keyCode:de.UP,action:Pe(VS,s,!1)},{keyCode:de.DOWN,action:Pe(VS,s,!0)},{keyCode:de.RIGHT,action:Pe(mS,s,a,!0)},{keyCode:de.LEFT,action:Pe(mS,s,a,!1)},{keyCode:de.RIGHT,ctrlKey:!l,altKey:l,action:Pe(oB,s,a)},{keyCode:de.LEFT,ctrlKey:!l,altKey:l,action:Pe(rB,s,a)},{keyCode:de.UP,action:Pe(zS,s,!1)},{keyCode:de.DOWN,action:Pe(zS,s,!0)},...c?[{keyCode:de.UP,action:Pe(jS,s,!1)},{keyCode:de.DOWN,action:Pe(jS,s,!0)}]:[]],i).each((d=>{i.preventDefault()}))})(n,o,r)}))})(e,t),((n,o)=>{let r=!1,s=[];n.on("keydown",(a=>{r=a.keyCode===de.BACKSPACE,s=Mg(n),a.isDefaultPrevented()||((i,l,c)=>{const d=c.keyCode===de.BACKSPACE?"deleteContentBackward":"deleteContentForward",m=i.selection.isCollapsed(),f=m?"character":"selection",h=g=>m?g?"word":"line":"selection";qS([{keyCode:de.BACKSPACE,action:Pe(NS,i)},{keyCode:de.BACKSPACE,action:Pe(Sg,i,!1)},{keyCode:de.DELETE,action:Pe(Sg,i,!0)},{keyCode:de.BACKSPACE,action:Pe(Cg,i,!1)},{keyCode:de.DELETE,action:Pe(Cg,i,!0)},{keyCode:de.BACKSPACE,action:Pe(Lg,i,l,!1)},{keyCode:de.DELETE,action:Pe(Lg,i,l,!0)},{keyCode:de.BACKSPACE,action:Pe(ip,i,!1)},{keyCode:de.DELETE,action:Pe(ip,i,!0)},{keyCode:de.BACKSPACE,action:Pe(Ia,i,!1,f)},{keyCode:de.DELETE,action:Pe(Ia,i,!0,f)},...VE?[{keyCode:de.BACKSPACE,altKey:!0,action:Pe(Ia,i,!1,h(!0))},{keyCode:de.DELETE,altKey:!0,action:Pe(Ia,i,!0,h(!0))},{keyCode:de.BACKSPACE,metaKey:!0,action:Pe(Ia,i,!1,h(!1))}]:[{keyCode:de.BACKSPACE,ctrlKey:!0,action:Pe(Ia,i,!1,h(!0))},{keyCode:de.DELETE,ctrlKey:!0,action:Pe(Ia,i,!0,h(!0))}],{keyCode:de.BACKSPACE,action:Pe(kg,i,!1)},{keyCode:de.DELETE,action:Pe(kg,i,!0)},{keyCode:de.BACKSPACE,action:Pe(jg,i,!1)},{keyCode:de.DELETE,action:Pe(jg,i,!0)},{keyCode:de.BACKSPACE,action:Pe(yg,i,!1)},{keyCode:de.DELETE,action:Pe(yg,i,!0)},{keyCode:de.BACKSPACE,action:Pe(bg,i,!1)},{keyCode:de.DELETE,action:Pe(bg,i,!0)},{keyCode:de.BACKSPACE,action:Pe(Ig,i,!1)},{keyCode:de.DELETE,action:Pe(Ig,i,!0)},{keyCode:de.BACKSPACE,action:Pe(Eg,i,!1)},{keyCode:de.DELETE,action:Pe(Eg,i,!0)},{keyCode:de.BACKSPACE,action:Pe(Ug,i,!1)},{keyCode:de.DELETE,action:Pe(Ug,i,!0)}],c).filter((g=>i.selection.isEditable())).each((g=>{c.preventDefault(),Ou(i,d).isDefaultPrevented()||(g(),pc(i,d))}))})(n,o,a)})),n.on("keyup",(a=>{a.isDefaultPrevented()||(((i,l,c,d)=>{uc([{keyCode:de.BACKSPACE,action:Pe(Pw,i)},{keyCode:de.DELETE,action:Pe(Pw,i)},...VE?[{keyCode:de.BACKSPACE,altKey:!0,action:Pe(dc,i)},{keyCode:de.DELETE,altKey:!0,action:Pe(dc,i)},...c?[{keyCode:WB?224:91,action:Pe((()=>(vS(i,d),dc(i))))}]:[]]:[{keyCode:de.BACKSPACE,ctrlKey:!0,action:Pe(dc,i)},{keyCode:de.DELETE,ctrlKey:!0,action:Pe(dc,i)}]],l)})(n,a,r,s),s.length=0),r=!1}))})(e,t),(n=>{let o=k.none();n.on("keydown",(r=>{r.keyCode===de.ENTER&&(oP&&(s=>{if(!s.collapsed)return!1;const a=s.startContainer;if(se(a)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=a.data.charAt(s.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(s=>{o=k.some(s.selection.getBookmark()),s.undoManager.add()})(n):ak(n,r))})),n.on("keyup",(r=>{r.keyCode===de.ENTER&&o.each((()=>((s,a)=>{s.undoManager.undo(),o.fold(Ee,(i=>s.selection.moveToBookmark(i))),ak(s,a),o=k.none()})(n,r)))}))})(e),(n=>{n.on("keydown",(o=>{o.isDefaultPrevented()||((r,s)=>{qS([{keyCode:de.SPACEBAR,action:Pe(sP,r)},{keyCode:de.SPACEBAR,action:Pe(aP,r)}],s).each((a=>{s.preventDefault(),Ou(r,"insertText",{data:" "}).isDefaultPrevented()||(a(),pc(r,"insertText",{data:" "}))}))})(n,o)}))})(e),(n=>{n.on("input",(o=>{o.isComposing||(r=>{const s=S.fromDom(r.getBody());r.selection.isCollapsed()&&ND(s,Y.fromRangeStart(r.selection.getRng()),r.schema).each((a=>{r.selection.setRng(a.toRange())}))})(n)}))})(e),(n=>{n.on("keydown",(o=>{o.isDefaultPrevented()||((r,s)=>{uc([...iP(r)],s).each((a=>{s.preventDefault()}))})(n,o)}))})(e),((n,o)=>{n.on("keydown",(r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=p.os.isMacOS()||p.os.isiOS();uc([{keyCode:de.END,action:Pe(IS,s,!0)},{keyCode:de.HOME,action:Pe(IS,s,!1)},...l?[]:[{keyCode:de.HOME,action:Pe(Eu,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:de.END,action:Pe(Eu,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:de.END,action:Pe(KS,s,!0)},{keyCode:de.HOME,action:Pe(KS,s,!1)},{keyCode:de.END,action:Pe(Su,s,!0,a)},{keyCode:de.HOME,action:Pe(Su,s,!1,a)}],i).each((c=>{i.preventDefault()}))})(n,o,r)}))})(e,t),((n,o)=>{if(rP.os.isMacOS())return;const r=Qt(!1);n.on("keydown",(s=>{lk(s)&&ck(r,n,!0)})),n.on("keyup",(s=>{s.isDefaultPrevented()||((a,i,l)=>{uc([{keyCode:de.PAGE_UP,action:Pe(Su,a,!1,i)},{keyCode:de.PAGE_DOWN,action:Pe(Su,a,!0,i)}],l)})(n,o,s),lk(s)&&r.get()&&(ck(r,n,!1),n.nodeChanged())}))})(e,t),t}},fh=(e,t)=>()=>{const n=rc(e);return te(n)&&n.nodeName===t},gk=e=>e.type===3,hk=e=>e.length===0,cP=e=>{const t=(o,r)=>{const s=An.create("li");K(o,(a=>s.append(a))),r?e.insert(s,r,!0):e.append(s)},n=Yt(e.children(),((o,r)=>gk(r)?[...o,r]:hk(o)||gk(r)?o:(t(o,r),[])),[]);hk(n)||t(n)},dP=e=>{(t=>{t.on("keydown",(n=>{n.keyCode===de.BACKSPACE?gg(t,!1)&&n.preventDefault():n.keyCode===de.DELETE&&gg(t,!0)&&n.preventDefault()}))})(e),(t=>{t.addCommand("InsertUnorderedList",((n,o)=>{mg(t,"UL",o)})),t.addCommand("InsertOrderedList",((n,o)=>{mg(t,"OL",o)})),t.addCommand("InsertDefinitionList",((n,o)=>{mg(t,"DL",o)})),t.addCommand("RemoveList",(()=>{hu(t)})),t.addCommand("mceListUpdate",((n,o)=>{He(o)&&((r,s)=>{const a=rc(r);a===null||ag(r,a)||r.undoManager.transact((()=>{He(s.styles)&&r.dom.setStyles(a,s.styles),He(s.attrs)&&wt(s.attrs,((i,l)=>r.dom.setAttrib(a,l,i)))}))})(t,o)})),t.addCommand("mceListBackspaceDelete",((n,o)=>{gg(t,o)})),t.addQueryStateHandler("InsertUnorderedList",fh(t,"UL")),t.addQueryStateHandler("InsertOrderedList",fh(t,"OL")),t.addQueryStateHandler("InsertDefinitionList",fh(t,"DL"))})(e),(t=>{t.on("PreInit",(()=>{const{parser:n}=t;n.addNodeFilter("ul,ol",(o=>K(o,cP)))}))})(e),(t=>{kT(t)&&(n=>{n.on("keydown",(o=>{o.keyCode!==de.TAB||de.metaKeyPressed(o)||n.undoManager.transact((()=>{(o.shiftKey?lg(n):bw(n))&&o.preventDefault()}))}))})(t)})(e)};class uP{editor;lastPath=[];constructor(t){let n;this.editor=t;const o=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",(r=>{const s=t.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};r.type!=="nodechange"&&Ff(a,n)||t.dispatch("SelectionChange"),n=a})),t.on("contextmenu",(()=>{Bd(t),t.dispatch("SelectionChange")})),t.on("SelectionChange",(()=>{const r=t.selection.getStart(!0);r&&Td(t)&&!o.isSameElementPath(r)&&t.dom.isChildOf(r,t.getBody())&&t.nodeChanged({selectionChange:!0})})),t.on("mouseup",(r=>{!r.isDefaultPrevented()&&Td(t)&&(t.selection.getNode().nodeName==="IMG"?Lo.setEditorTimeout(t,(()=>{t.nodeChanged()})):t.nodeChanged())}))}nodeChanged(t={}){const n=this.editor,o=n.selection;let r;if(n.initialized&&o&&!UA(n)&&!xd(n)){const s=n.getBody();r=o.getStart(!0)||s,r.ownerDocument===n.getDoc()&&n.dom.isChildOf(r,s)||(r=s);const a=[];n.dom.getParent(r,(i=>i===s||(a.push(i),!1))),n.dispatch("NodeChange",{...t,element:r,parents:a})}}isSameElementPath(t){let n;const o=this.editor,r=Eo(o.dom.getParents(t,jt,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=r,!0}return this.lastPath=r,!1}}const bk="x-tinymce/html",Fu=ie(bk),ph="<!-- "+bk+" -->",mP=e=>ph+e,yk=e=>e.indexOf(ph)!==-1,vk="%MCEPASTEBIN%",gh=e=>e.dom.get("mcepastebin"),fP=e=>te(e)&&e.id==="mcepastebin",Ck=e=>e===vk,xk=(e,t)=>(E.each(t,(n=>{e=So(n,RegExp)?e.replace(n,""):e.replace(n[0],n[1])})),e),wk=e=>xk(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(t,n,o)=>n||o?It:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),Sk=(e,t)=>({content:e,cancelled:t}),hh=(e,t)=>(e.insertContent(t,{merge:sT(e),paste:!0}),!0),bh=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),pP=(e,t,n)=>!(e.selection.isCollapsed()||!bh(t))&&((o,r,s)=>(o.undoManager.extra((()=>{s(o,r)}),(()=>{o.execCommand("mceInsertLink",!1,r)})),!0))(e,t,n),gP=(e,t,n)=>!!((o,r)=>bh(r)&&xt(G0(o),(s=>Xa(r.toLowerCase(),`.${s.toLowerCase()}`))))(e,t)&&((o,r,s)=>(o.undoManager.extra((()=>{s(o,r)}),(()=>{o.insertContent('<img src="'+r+'">')})),!0))(e,t,n),hP=(()=>{let e=0;return()=>"mceclip"+e++})(),bP=e=>{const t=Gg();return aE(t,e),Yg(t),t},Ek=(e,t,n,o,r)=>{const s=((a,i,l)=>((c,d,m)=>{const f=((g,b,y)=>g.dispatch("PastePreProcess",{content:b,internal:y}))(c,d,m),h=((g,b)=>{const y=Oi({sanitize:Y0(g),sandbox_iframes:Q0(g),sandbox_iframes_exclusions:af(g),convert_unsafe_embeds:CT(g)},g.schema);y.addNodeFilter("meta",(_=>{E.each(_,(N=>{N.remove()}))}));const v=y.parse(b,{forced_root_block:!1,isRootContent:!0});return Ds({validate:!0},g.schema).serialize(v)})(c,f.content);return c.hasEventListeners("PastePostProcess")&&!f.isDefaultPrevented()?((g,b,y)=>{const v=g.dom.create("div",{style:"display:none"},b),_=((N,D,A)=>N.dispatch("PastePostProcess",{node:D,internal:A}))(g,v,y);return Sk(_.node.innerHTML,_.isDefaultPrevented())})(c,h,m):Sk(h,f.isDefaultPrevented())})(a,i,l))(e,t,n);if(!s.cancelled){const a=s.content,i=()=>((l,c,d)=>{d||!aT(l)?hh(l,c):((m,f)=>{E.each([pP,gP,hh],(h=>!h(m,f,hh)))})(l,c)})(e,a,o);r?Ou(e,"insertFromPaste",{dataTransfer:bP(a)}).isDefaultPrevented()||(i(),pc(e,"insertFromPaste")):i()}},ju=(e,t,n,o)=>{const r=n||yk(t);Ek(e,(s=>s.replace(ph,""))(t),r,!1,o)},yh=(e,t,n)=>{const o=e.dom.encode(t).replace(/\r\n/g,`
`),r=((s,a,i)=>{const l=s.split(/\n\n/),c=((f,h)=>{let g="<"+f;const b=nr(h,((y,v)=>v+'="'+fa.encodeAllRaw(y)+'"'));return b.length&&(g+=" "+b.join(" ")),g+">"})(a,i),d="</"+a+">",m=qe(l,(f=>f.split(/\n/).join("<br />")));return m.length===1?m[0]:qe(m,(f=>c+f+d)).join("")})(sb(o,lT(e)),xn(e),yi(e));Ek(e,r,!1,!0,n)},kk=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const o=e.types[n];try{t[o]=e.getData(o)}catch{t[o]=""}}return t},Is=(e,t)=>t in e&&e[t].length>0,_k=e=>Is(e,"text/html")||Is(e,"text/plain"),Nk=(e,t,n)=>{const o=t.type==="paste"?t.clipboardData:t.dataTransfer;var r;if(Cd(e)&&o){const s=((a,i)=>{const l=i.items?$t(vn(i.items),(d=>d.kind==="file"?[d.getAsFile()]:[])):[],c=i.files?vn(i.files):[];return De(l.length>0?l:c,(d=>{const m=G0(d);return f=>Gt(f.type,"image/")&&xt(m,(h=>(g=>{const b=g.toLowerCase(),y={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return E.hasOwn(y,b)?"image/"+y[b]:"image/"+b})(h)===f.type))})(a))})(e,o);if(s.length>0)return t.preventDefault(),(r=s,Promise.all(qe(r,(a=>h1(a).then((i=>({file:a,uri:i}))))))).then((a=>{n&&e.selection.setRng(n),K(a,(i=>{((l,c)=>{kp(c.uri).each((({data:d,type:m,base64Encoded:f})=>{const h=f?d:btoa(d),g=c.file,b=l.editorUpload.blobCache,y=b.getByData(h,m)??((v,_,N,D)=>{const A=hP(),R=I0(v)&&te(N.name),P=R?((W,B)=>{const F=B.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return te(F)?W.dom.encode(F[1]):void 0})(v,N.name):A,I=R?N.name:void 0,M=_.create(A,N,D,P,I);return _.add(M),M})(l,b,g,h);ju(l,`<img src="${y.blobUri()}">`,!1,!0)}))})(e,i)}))})),!0}return!1},vh=(e,t,n,o,r)=>{let s=wk(n);const a=Is(t,Fu())||yk(n),i=!a&&(c=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(c))(s),l=bh(s);(Ck(s)||!s.length||i&&!l)&&(o=!0),(o||l)&&(s=Is(t,"text/plain")&&i?t["text/plain"]:(c=>{const d=ws(),m=Oi({},d);let f="";const h=d.getVoidElements(),g=E.makeMap("script noscript style textarea video audio iframe object"," "),b=d.getBlockElements(),y=v=>{const _=v.name,N=v;if(_!=="br"){if(_!=="wbr")if(h[_]&&(f+=" "),g[_])f+=" ";else{if(v.type===3&&(f+=v.value),!(v.name in d.getVoidElements())){let D=v.firstChild;if(D)do y(D);while(D=D.next)}b[_]&&N.next&&(f+=`
`,_==="p"&&(f+=`
`))}}else f+=`
`};return c=xk(c,[/<!\[[^\]]+\]>/g]),y(m.parse(c)),f})(s)),Ck(s)||(o?yh(e,s,r):ju(e,s,a,r))},yP=(e,t,n)=>{((o,r,s)=>{let a;o.on("keydown",(i=>{(l=>de.metaKeyPressed(l)&&l.keyCode===86||l.shiftKey&&l.keyCode===45)(i)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&i.keyCode===86)})),o.on("paste",(i=>{if(i.isDefaultPrevented()||(d=>p.os.isAndroid()&&d.clipboardData?.items?.length===0)(i))return;const l=s.get()==="text"||a;a=!1;const c=kk(i.clipboardData);!_k(c)&&Nk(o,i,r.getLastRng()||o.selection.getRng())||(Is(c,"text/html")?(i.preventDefault(),vh(o,c,c["text/html"],l,!0)):Is(c,"text/plain")&&Is(c,"text/uri-list")?(i.preventDefault(),vh(o,c,c["text/plain"],l,!0)):(r.create(),Lo.setEditorTimeout(o,(()=>{const d=r.getHtml();r.remove(),vh(o,c,d,l,!1)}),0)))}))})(e,t,n),(o=>{const r=a=>Gt(a,"webkit-fake-url"),s=a=>Gt(a,"data:");o.parser.addNodeFilter("img",((a,i,l)=>{if(!Cd(o)&&(c=>c.data?.paste===!0)(l))for(const c of a){const d=c.attr("src");xe(d)&&!c.attr("data-mce-object")&&d!==p.transparentSrc&&(r(d)||!cT(o)&&s(d))&&c.remove()}}))})(e)},Ak=(e,t,n,o)=>{((r,s,a)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",s),r.setData("text/plain",a),r.setData(Fu(),s),!0}catch{return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),o()):n(t.html,o)},Tk=e=>(t,n)=>{const{dom:o,selection:r}=e,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=o.create("div",{contenteditable:"true"},t);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),o.add(e.getBody(),s);const i=r.getRng();a.focus();const l=o.createRng();l.selectNodeContents(a),r.setRng(l),Lo.setEditorTimeout(e,(()=>{r.setRng(i),o.remove(s),n()}),0)},Dk=e=>({html:mP(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),Rk=e=>!e.selection.isCollapsed()||(t=>!!t.dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody()))(e),Ok=(e,t)=>Lr.getCaretRangeFromPoint(t.clientX??0,t.clientY??0,e.getDoc()),Bk=(e,t)=>{t&&e.selection.setRng(t),e.focus()},vP=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,Pk=e=>E.trim(e).replace(vP,Cl).toLowerCase(),CP=(e,t,n)=>{const o=oT(e);if(n||o==="all"||!rT(e))return t;const r=o?o.split(/[, ]/):[];if(r&&o!=="none"){const s=e.dom,a=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,((i,l,c,d)=>{const m=s.parseStyle(s.decode(c)),f={};for(let g=0;g<r.length;g++){const b=m[r[g]];let y=b,v=s.getStyle(a,r[g],!0);/color/.test(r[g])&&(y=Pk(y),v=Pk(v)),v!==y&&(f[r[g]]=b)}const h=s.serializeStyle(f,"span");return h?l+' style="'+h+'"'+d:l+d}))}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,((s,a,i,l)=>a+' style="'+i+'"'+l)),t},xP=(e,t)=>{const n=Qt(!1),o=Qt(iT(e)?"text":"html"),r=(s=>{const a=Qt(null);return{create:()=>((i,l)=>{const{dom:c,selection:d}=i,m=i.getBody();l.set(d.getRng());const f=c.add(i.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},vk);p.browser.isFirefox()&&c.setStyle(f,"left",c.getStyle(m,"direction",!0)==="rtl"?65535:-65535),c.bind(f,"beforedeactivate focusin focusout",(h=>{h.stopPropagation()})),f.focus(),d.select(f,!0)})(s,a),remove:()=>((i,l)=>{const c=i.dom;if(gh(i)){let d;const m=l.get();for(;d=gh(i);)c.remove(d),c.unbind(d);m&&i.selection.setRng(m)}l.set(null)})(s,a),getEl:()=>gh(s),getHtml:()=>(i=>{const l=i.dom,c=(h,g)=>{h.appendChild(g),l.remove(g,!0)},[d,...m]=De(i.getBody().childNodes,fP);K(m,(h=>{c(d,h)}));const f=l.select("div[id=mcepastebin]",d);for(let h=f.length-1;h>=0;h--){const g=l.create("div");d.insertBefore(g,f[h]),c(g,f[h])}return d?d.innerHTML:""})(s),getLastRng:a.get}})(e);(s=>{(p.browser.isChromium()||p.browser.isSafari())&&((a,i)=>{a.on("PastePreProcess",(l=>{l.content=i(a,l.content,l.internal)}))})(s,CP)})(e),((s,a)=>{s.addCommand("mceTogglePlainTextPaste",(()=>{((i,l)=>{l.get()==="text"?(l.set("html"),R0(i,!1)):(l.set("text"),R0(i,!0)),i.focus()})(s,a)})),s.addCommand("mceInsertClipboardContent",((i,l)=>{l.html&&ju(s,l.html,l.internal,!1),l.text&&yh(s,l.text,!1)}))})(e,o),(s=>{const a=c=>d=>{c(s,d)},i=eT(s);pt(i)&&s.on("PastePreProcess",a(i));const l=tT(s);pt(l)&&s.on("PastePostProcess",a(l))})(e),e.addQueryStateHandler("mceTogglePlainTextPaste",(()=>o.get()==="text")),e.on("PreInit",(()=>{((s,a)=>{s.on("cut",((i,l)=>c=>{!c.isDefaultPrevented()&&Rk(i)&&i.selection.isEditable()&&Ak(c,Dk(i),Tk(i),(()=>{if(p.browser.isChromium()||p.browser.isFirefox()){const d=i.selection.getRng();Lo.setEditorTimeout(i,(()=>{i.selection.setRng(d),Hg(i,l)}),0)}else Hg(i,l)}))})(s,a)),s.on("copy",(i=>l=>{!l.isDefaultPrevented()&&Rk(i)&&Ak(l,Dk(i),Tk(i),Ee)})(s))})(e,t),((s,a)=>{ZA(s)&&s.on("dragend dragover draggesture dragdrop drop drag",(i=>{i.preventDefault(),i.stopPropagation()})),Cd(s)||s.on("drop",(i=>{const l=i.dataTransfer;l&&(c=>xt(c.files,(d=>/^image\//.test(d.type))))(l)&&i.preventDefault()})),s.on("drop",(i=>{if(i.isDefaultPrevented())return;const l=Ok(s,i);if(kt(l))return;const c=kk(i.dataTransfer),d=Is(c,Fu());if((!_k(c)||(b=>{const y=b["text/plain"];return!!y&&y.indexOf("file://")===0})(c))&&Nk(s,i,l))return;const m=c[Fu()],f=m||c["text/html"]||c["text/plain"],h=((b,y,v,_)=>{const N=b.getParent(v,(D=>ua(y,D)));if(!Xe(b.getParent(v,"summary")))return!0;if(N&&Oe(_,"text/html")){const D=new DOMParser().parseFromString(_["text/html"],"text/html").body;return!Xe(D.querySelector(N.nodeName.toLowerCase()))}return!1})(s.dom,s.schema,l.startContainer,c),g=a.get();g&&!h||f&&(i.preventDefault(),Lo.setEditorTimeout(s,(()=>{s.undoManager.transact((()=>{(m||g&&h)&&s.execCommand("Delete"),Bk(s,l);const b=wk(f);c["text/html"]?ju(s,b,d,!0):yh(s,b,!0)}))})))})),s.on("dragstart",(i=>{a.set(!0)})),s.on("dragover dragend",(i=>{Cd(s)&&!a.get()&&(i.preventDefault(),Bk(s,Ok(s,i))),i.type==="dragend"&&a.set(!1)})),(i=>{i.on("input",(l=>{const c=d=>Xe(d.querySelector("summary"));if(l.inputType==="deleteByDrag"){const d=De(i.dom.select("details"),c);K(d,(m=>{Ut(m.firstChild)&&m.firstChild.remove();const f=i.dom.create("summary");f.appendChild(fi().dom),m.prepend(f)}))}}))})(s)})(e,n),yP(e,r,o)}))},wP=Ut,Lk=se,SP=e=>Pt(e.dom),Mk=e=>t=>me(S.fromDom(e),t),Ik=(e,t)=>sr(S.fromDom(e),SP,Mk(t)),Fk=(e,t,n)=>{const o=new an(e,t),r=n?o.next.bind(o):o.prev.bind(o);let s=e;for(let a=n?e:r();a&&!wP(a);a=r())mr(a)&&(s=a);return s},EP=e=>{const t=((n,o,r)=>{const s=Y.fromRangeStart(n).getNode(),a=((d,m,f)=>sr(S.fromDom(d),(h=>(g=>To(g.dom))(h)||f.isBlock(Be(h))),Mk(m)).getOr(S.fromDom(m)).dom)(s,o,r),i=Fk(s,a,!1),l=Fk(s,a,!0),c=document.createRange();return Ik(i,a).fold((()=>{Lk(i)?c.setStart(i,0):c.setStartBefore(i)}),(d=>c.setStartBefore(d.dom))),Ik(l,a).fold((()=>{Lk(l)?c.setEnd(l,l.data.length):c.setEndAfter(l)}),(d=>c.setEndAfter(d.dom))),c})(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Gd(t))};var $i;(function(e){e.Before="before",e.After="after"})($i||($i={}));const kP=(e,t)=>Math.abs(e.left-t),_P=(e,t)=>Math.abs(e.right-t),NP=(e,t)=>(n=>Yt(n,((o,r)=>o.fold((()=>k.some(r)),(s=>{const a=Math.min(r.left,s.left),i=Math.min(r.top,s.top),l=Math.max(r.right,s.right),c=Math.max(r.bottom,s.bottom);return k.some({top:i,right:l,bottom:c,left:a,width:l-a,height:c-i})}))),k.none()))(De(e,(n=>{return(o=t)>=(r=n).top&&o<=r.bottom;var o,r}))).fold((()=>[[],e]),(n=>{const{pass:o,fail:r}=er(e,(s=>((a,i)=>{const l=((c,d)=>Math.max(0,Math.min(c.bottom,d.bottom)-Math.max(c.top,d.top)))(a,i)/Math.min(a.height,i.height);return((c,d)=>c.top<d.bottom&&c.bottom>d.top)(a,i)&&l>.5})(s,n)));return[o,r]})),AP=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),Ch=(e,t,n,o)=>{const r=d=>mr(d.node)?k.some(d):ve(d.node)?Ch(vn(d.node.childNodes),t,n,!1):k.none(),s=(d,m)=>{const f=Kr(d,((h,g)=>m(h,t,n)-m(g,t,n)));return zn(f,r).map((h=>o&&!se(h.node)&&f.length>1?((g,b,y)=>r(b).filter((v=>Math.abs(y(g,t,n)-y(v,t,n))<2&&se(v.node))))(h,f[1],m).getOr(h):h))},[a,i]=NP(tS(e),n),{pass:l,fail:c}=er(i,(d=>d.top<n));return s(a,AP).orThunk((()=>s(c,Zb))).orThunk((()=>s(l,Zb)))},jk=(e,t,n)=>((o,r,s)=>{const a=S.fromDom(o),i=Sn(a),l=S.fromPoint(i,r,s).filter((c=>Ze(a,c))).getOr(a);return((c,d,m,f)=>{const h=(g,b)=>{const y=De(g.dom.childNodes,Ho((v=>ve(v)&&v.classList.contains("mce-drag-container"))));return b.fold((()=>Ch(y,m,f,!0)),(v=>{const _=De(y,(N=>N!==v.dom));return Ch(_,m,f,!0)})).orThunk((()=>(me(g,c)?k.none():En(g)).bind((v=>h(v,k.some(g))))))};return h(d,k.none())})(a,l,r,s)})(e,t,n).filter((o=>Ml(o.node))).map((o=>((r,s)=>({node:r.node,position:kP(r,s)<_P(r,s)?$i.Before:$i.After}))(o,t))),zk=e=>{const t=e.getBoundingClientRect(),n=e.ownerDocument,o=n.documentElement,r=n.defaultView;return{top:t.top+(r?.scrollY??0)-o.clientTop,left:t.left+(r?.scrollX??0)-o.clientLeft}},Uk=e=>({target:e,srcElement:e}),TP=(e,t,n,o)=>{const r=((s,a)=>{const i=(l=>{const c=Gg(),d=(m=>{const f=m;return k.from(f[Xg])})(l);return Yg(l),tE(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(m=>{const f=m;return k.from(f[eE])})(l).each((m=>c.setDragImage(m.image,m.x,m.y))),K(l.types,(m=>{m!=="Files"&&c.setData(m,l.getData(m))})),K(l.files,(m=>c.items.add(m))),(m=>{const f=m;return k.from(f[Kg])})(l).each((m=>{((f,h)=>{ku(h)(f)})(c,m)})),d.each((m=>{nE(l,m),nE(c,m)})),c})(s);return a==="dragstart"?(tE(i),oE(i)):a==="drop"?(bB(i),Yg(i)):(yB(i),CB(i)),i})(n,e);return Lt(o)?((s,a,i)=>{const l=po("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:Ee,stopImmediatePropagation:Ee,stopPropagation:Ee,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...Uk(a)}})(e,t,r):((s,a,i,l)=>({...a,dataTransfer:l,type:s,...Uk(i)}))(e,o,t,r)},Hk=Pt,DP=((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})(Hk,To),RP=(e,t,n,o)=>{const r=e.dom,s=t.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const a=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},zu=(e,t)=>n=>()=>{const o=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:o+t,behavior:"smooth"})},$k=zu("left",-32),qk=zu("left",32),Wk=zu("top",-32),Vk=zu("top",32),Kk=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},yc=(e,t,n,o,r)=>{t==="dragstart"&&aE(o,e.dom.getOuterHTML(n));const s=TP(t,n,o,r);return e.dispatch(t,s)},OP=(e,t)=>{const n=Ys(((r,s)=>((a,i,l)=>{a._selectionOverrides.hideFakeCaret(),jk(a.getBody(),i,l).fold((()=>a.selection.placeCaretAt(i,l)),(c=>{const d=a._selectionOverrides.showCaret(1,c.node,c.position===$i.Before,!1);d?a.selection.setRng(d):a.selection.placeCaretAt(i,l)}))})(t,r,s)),0);t.on("remove",n.cancel);const o=e;return r=>e.on((s=>{const a=Math.max(Math.abs(r.screenX-s.screenX),Math.abs(r.screenY-s.screenY));if(!s.dragging&&a>10){const c=yc(t,"dragstart",s.element,s.dataTransfer,r);if(te(c.dataTransfer)&&(s.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;s.dragging=!0,t.focus()}if(s.dragging){const c=r.currentTarget===t.getDoc().documentElement,d=((m,f)=>({pageX:f.pageX-m.relX,pageY:f.pageY+5}))(s,((m,f)=>{return h=(y=>y.inline?zk(y.getBody()):{left:0,top:0})(m),g=(y=>{const v=y.getBody();return y.inline?{left:v.scrollLeft,top:v.scrollTop}:{left:0,top:0}})(m),b=((y,v)=>{if(v.target.ownerDocument!==y.getDoc()){const _=zk(y.getContentAreaContainer()),N=(D=>{const A=D.getBody(),R=D.getDoc().documentElement,P={left:A.scrollLeft,top:A.scrollTop},I={left:A.scrollLeft||R.scrollLeft,top:A.scrollTop||R.scrollTop};return D.inline?P:I})(y);return{left:v.pageX-_.left+N.left,top:v.pageY-_.top+N.top}}return{left:v.pageX,top:v.pageY}})(m,f),{pageX:b.left-h.left+g.left,pageY:b.top-h.top+g.top};var h,g,b})(t,r));i=s.ghost,l=t.getBody(),i.parentNode!==l&&l.appendChild(i),((m,f,h,g,b,y,v,_,N,D,A,R)=>{let P=0,I=0;m.style.left=f.pageX+"px",m.style.top=f.pageY+"px",f.pageX+h>b&&(P=f.pageX+h-b),f.pageY+g>y&&(I=f.pageY+g-y),m.style.width=h-P+"px",m.style.height=g-I+"px";const M=N.clientHeight,W=N.clientWidth,B=v+N.getBoundingClientRect().top,F=_+N.getBoundingClientRect().left;A.on((H=>{H.intervalId.clear(),H.dragging&&R&&(v+8>=M?H.intervalId.set(Vk(D)):v-8<=0?H.intervalId.set(Wk(D)):_+8>=W?H.intervalId.set(qk(D)):_-8<=0?H.intervalId.set($k(D)):B+16>=window.innerHeight?H.intervalId.set(Vk(window)):B-16<=0?H.intervalId.set(Wk(window)):F+16>=window.innerWidth?H.intervalId.set(qk(window)):F-16<=0&&H.intervalId.set($k(window)))}))})(s.ghost,d,s.width,s.height,s.maxX,s.maxY,r.clientY,r.clientX,t.getContentAreaContainer(),t.getWin(),o,c),n.throttle(r.clientX,r.clientY)}var i,l}))},Xk=(e,t,n)=>{e.on((o=>{o.intervalId.clear(),o.dragging&&n.fold((()=>yc(t,"dragend",o.element,o.dataTransfer)),(r=>yc(t,"dragend",o.element,o.dataTransfer,r)))})),Yk(e)},Yk=e=>{e.on((t=>{t.intervalId.clear(),Kk(t.ghost)})),e.clear()},BP=e=>{const t=$o(),n=At.DOM,o=document,r=((l,c)=>d=>{if((m=>m.button===0)(d)){const m=Ht(c.dom.getParents(d.target),DP).getOr(null);if(te(m)&&((f,h,g)=>Hk(g)&&g!==h&&f.isEditable(g.parentElement))(c.dom,c.getBody(),m)){const f=c.dom.getPos(m),h=c.getBody(),g=c.getDoc().documentElement;l.set({element:m,dataTransfer:Gg(),dragging:!1,screenX:d.screenX,screenY:d.screenY,maxX:(c.inline?h.scrollWidth:g.offsetWidth)-2,maxY:(c.inline?h.scrollHeight:g.offsetHeight)-2,relX:d.pageX-f.x,relY:d.pageY-f.y,width:m.offsetWidth,height:m.offsetHeight,ghost:RP(c,m,m.offsetWidth,m.offsetHeight),intervalId:Ka(100)})}}})(t,e),s=OP(t,e),a=((l,c)=>d=>{l.on((m=>{if(m.intervalId.clear(),m.dragging){if(((f,h,g)=>!kt(h)&&h!==g&&!f.dom.isChildOf(h,g)&&f.dom.isEditable(h))(c,(f=>{const h=f.getSel();if(te(h)){const g=h.getRangeAt(0).startContainer;return se(g)?g.parentNode:g}return null})(c.selection),m.element)){const f=c.getDoc().elementFromPoint(d.clientX,d.clientY)??c.getBody();yc(c,"drop",f,m.dataTransfer,d).isDefaultPrevented()||c.undoManager.transact((()=>{((h,g)=>{const b=h.getParent(g.parentNode,h.isBlock);Kk(g),b&&b!==h.getRoot()&&h.isEmpty(b)&&Es(S.fromDom(b))})(c.dom,m.element),(h=>{const g=h.getData("text/html");return g===""?k.none():k.some(g)})(m.dataTransfer).each((h=>c.insertContent(h))),c._selectionOverrides.hideFakeCaret()}))}yc(c,"dragend",c.getBody(),m.dataTransfer,d)}})),Yk(l)})(t,e),i=((l,c)=>d=>Xk(l,c,k.some(d)))(t,e);e.on("mousedown",r),e.on("mousemove",s),e.on("mouseup",a),n.bind(o,"mousemove",s),n.bind(o,"mouseup",i),e.on("remove",(()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",i)})),e.on("keydown",(l=>{l.keyCode===de.ESC&&Xk(t,e,k.none())}))},vc=Pt,Gk=(e,t)=>_a(e.getBody(),t),PP=e=>{const t=e.selection,n=e.dom,o=e.getBody(),r=RT(e,o,n.isBlock,(()=>Ti(e))),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=y=>y!==o&&(vc(y)||lr(y))&&n.isChildOf(y,o)&&n.isEditable(y.parentNode),c=(y,v,_,N=!0)=>e.dispatch("ShowCaret",{target:v,direction:y,before:_}).isDefaultPrevented()?null:(N&&t.scrollIntoView(v,y===-1),r.show(_,v)),d=y=>Do(y)||fd(y)||pd(y),m=y=>d(y.startContainer)||d(y.endContainer),f=y=>{const v=e.schema.getVoidElements(),_=n.createRng(),N=y.startContainer,D=y.startOffset,A=y.endContainer,R=y.endOffset;return Oe(v,N.nodeName.toLowerCase())?D===0?_.setStartBefore(N):_.setStartAfter(N):_.setStart(N,D),Oe(v,A.nodeName.toLowerCase())?R===0?_.setEndBefore(A):_.setEndAfter(A):_.setEnd(A,R),_},h=(y,v)=>{if(!y)return null;if(y.collapsed){if(!m(y)){const A=v?1:-1,R=Ci(A,o,y),P=R.getNode(!v);if(te(P)){if(Ml(P))return c(A,P,!!v&&!R.isAtEnd(),!1);if(ks(P)&&Pt(P.nextSibling)){const M=n.createRng();return M.setStart(P,0),M.setEnd(P,0),M}}const I=R.getNode(v);if(te(I)){if(Ml(I))return c(A,I,!v&&!R.isAtEnd(),!1);if(ks(I)&&Pt(I.previousSibling)){const M=n.createRng();return M.setStart(I,1),M.setEnd(I,1),M}}}return null}let _=y.startContainer,N=y.startOffset;const D=y.endOffset;if(se(_)&&N===0&&vc(_.parentNode)&&(_=_.parentNode,N=n.nodeIndex(_),_=_.parentNode),!ve(_))return null;if(D===N+1&&_===y.endContainer){const A=_.childNodes[N];if(l(A))return(R=>{const P=R.cloneNode(!0),I=e.dispatch("ObjectSelected",{target:R,targetClone:P});if(I.isDefaultPrevented())return null;const M=((B,F)=>{const H=S.fromDom(e.getBody()),Z=e.getDoc(),le=Jc(H,"#"+s).getOrThunk((()=>{const Se=S.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Z);return lt(Se,"id",s),ne(H,Se),Se})),_e=n.createRng();rn(le),ze(le,[S.fromText(It,Z),S.fromDom(F),S.fromText(It,Z)]),_e.setStart(le.dom.firstChild,1),_e.setEnd(le.dom.lastChild,0),Xc(le,{top:n.getPos(B,e.getBody()).y+"px"}),vs(le);const Te=t.getSel();return Te&&(Te.removeAllRanges(),Te.addRange(_e)),_e})(R,I.targetClone),W=S.fromDom(R);return K(_n(S.fromDom(e.getBody()),`*[${a}]`),(B=>{me(W,B)||vt(B,a)})),n.getAttrib(R,a)||R.setAttribute(a,"1"),i=R,b(),M})(A)}return null},g=()=>{i&&i.removeAttribute(a),Jc(S.fromDom(e.getBody()),"#"+s).each(ft),i=null},b=()=>{r.hide()};return Mr(e)||(e.on("click",(y=>{n.isEditable(y.target)||(y.preventDefault(),e.focus())})),e.on("blur NewBlock",g),e.on("ResizeWindow FullscreenStateChanged",r.reposition),e.on("tap",(y=>{const v=y.target,_=Gk(e,v);vc(_)?(y.preventDefault(),ic(e,_).each(h)):l(v)&&ic(e,v).each(h)}),!0),e.on("mousedown",(y=>{const v=y.target;if(v!==o&&v.nodeName!=="HTML"&&!n.isChildOf(v,o)||!((N,D,A)=>{const R=S.fromDom(N.getBody()),P=N.inline?R:S.fromDom(Sn(R).dom.documentElement),I=((M,W,B,F)=>{const H=(Z=>Z.dom.getBoundingClientRect())(W);return{x:B-(M?H.left+W.dom.clientLeft+tO(W):0),y:F-(M?H.top+W.dom.clientTop+eO(W):0)}})(N.inline,P,D,A);return((M,W,B)=>{const F=JR(M),H=ZR(M);return W>=0&&B>=0&&W<=F&&B<=H})(P,I.x,I.y)})(e,y.clientX,y.clientY))return;g(),b();const _=Gk(e,v);vc(_)?(y.preventDefault(),ic(e,_).each(h)):jk(o,y.clientX,y.clientY).each((N=>{var D;y.preventDefault(),(D=c(1,N.node,N.position===$i.Before,!1))&&t.setRng(D),ar(_)?_.focus():e.getBody().focus()}))})),e.on("keypress",(y=>{de.modifierPressed(y)||vc(t.getNode())&&y.preventDefault()})),e.on("GetSelectionRange",(y=>{let v=y.range;if(i){if(!i.parentNode)return void(i=null);v=v.cloneRange(),v.selectNode(i),y.range=v}})),e.on("focusin",(y=>{if(!lr(y.target)&&e.getBody().contains(y.target)&&y.target!==e.getBody()&&!e.dom.isEditable(y.target.parentNode)){r.isShowing()&&r.hide(),y.target.contains(e.selection.getNode())||(e.selection.select(y.target,!0),e.selection.collapse(!0));const v=h(e.selection.getRng(),!0);v&&e.selection.setRng(v)}})),e.on("SetSelectionRange",(y=>{y.range=f(y.range);const v=h(y.range,y.forward);v&&(y.range=v)})),e.on("AfterSetSelectionRange",(y=>{const v=y.range,_=v.startContainer.parentElement;var N;m(v)||ve(N=_)&&N.id==="mcepastebin"||b(),(D=>te(D)&&n.hasClass(D,"mce-offscreen-selection"))(_)||g()})),(y=>{BP(y),qA(y)&&(v=>{const _=A=>{if(!A.isDefaultPrevented()){const R=A.dataTransfer;R&&(we(R.types,"Files")||R.files.length>0)&&(A.preventDefault(),A.type==="drop"&&lu(v,"Dropped file type is not supported"))}},N=A=>{Pd(v,A.target)&&_(A)},D=()=>{const A=At.DOM,R=v.dom,P=document,I=v.inline?v.getBody():v.getDoc(),M=["drop","dragover"];K(M,(W=>{A.bind(P,W,N),R.bind(I,W,_)})),v.on("remove",(()=>{K(M,(W=>{A.unbind(P,W,N),R.unbind(I,W,_)}))}))};v.on("init",(()=>{Lo.setEditorTimeout(v,D,0)}))})(y)})(e),(y=>{const v=Ys((()=>{if(!y.removed&&y.getBody().contains(document.activeElement)){const _=y.selection.getRng();if(_.collapsed){const N=vg(y,_,!1);y.selection.setRng(N)}}}),0);y.on("focus",(()=>{v.throttle()})),y.on("blur",(()=>{v.cancel()}))})(e),(y=>{y.on("init",(()=>{y.on("focusin",(v=>{const _=v.target;if(lr(_)){const N=_a(y.getBody(),_),D=Pt(N)?N:_;y.selection.getNode()!==D&&ic(y,D).each((A=>y.selection.setRng(A)))}}))}))})(e)),{showCaret:c,showBlockCaretContainer:y=>{y.hasAttribute("data-mce-caret")&&($m(y),t.scrollIntoView(y))},hideFakeCaret:b,destroy:()=>{r.destroy(),i=null}}},LP=(e,t)=>{let n=t;for(let o=e.previousSibling;se(o);o=o.previousSibling)n+=o.data.length;return n},Qk=(e,t,n,o,r)=>{if(se(n)&&(o<0||o>n.data.length))return[];const s=r&&se(n)?[LP(n,o)]:[o];let a=n;for(;a!==t&&a.parentNode;)s.push(e.nodeIndex(a,r)),a=a.parentNode;return a===t?s.reverse():[]},xh=(e,t,n,o,r,s,a=!1)=>({start:Qk(e,t,n,o,a),end:Qk(e,t,r,s,a)}),Jk=(e,t)=>{const n=t.slice(),o=n.pop();return x(o)?Yt(n,((r,s)=>r.bind((a=>k.from(a.childNodes[s])))),k.some(e)).bind((r=>se(r)&&(o<0||o>r.data.length)?k.none():k.some({node:r,offset:o}))):k.none()},Zk=(e,t)=>Jk(e,t.start).bind((({node:n,offset:o})=>Jk(e,t.end).map((({node:r,offset:s})=>{const a=document.createRange();return a.setStart(n,o),a.setEnd(r,s),a})))),qi=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const o=t.parentNode;e.remove(t,se(t.firstChild)&&li(t.firstChild.data)),qi(e,o,n)}},Uu=(e,t,n,o=!0)=>{const r=t.startContainer.parentNode,s=t.endContainer.parentNode;t.deleteContents(),o&&!n(t.startContainer)&&(se(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),se(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),qi(e,r,n),r!==s&&qi(e,s,n))},Hu=(e,t)=>k.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),wh=(e,t,n)=>{const o=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:S0(o).concat(e.blockPatterns),inlinePatterns:E0(o).concat(e.inlinePatterns)}},Sh=(e,t,n,o)=>{const r=e.createRng();return r.setStart(t,0),r.setEnd(n,o),r.toString()},e_=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),$u=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},t_=(e,t,n)=>{const o=Zk(e.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,a=o.endOffset===0?s:s.splitText(o.endOffset),i=o.startOffset===0?r:r.splitText(o.startOffset),l=i.parentNode;return{prefix:t,end:a.parentNode.insertBefore(e_(e,t+"-end"),a),start:l.insertBefore(e_(e,t+"-start"),i)}},n_=(e,t,n)=>{qi(e,e.get(t.prefix+"-end"),n),qi(e,e.get(t.prefix+"-start"),n)},Eh=e=>e.start.length===0,o_=(e,t,n,o)=>{const r=t.start;var s;return eh(e,o.container,o.offset,(s=r,(a,i)=>{const l=a.data.substring(0,i),c=l.lastIndexOf(s.charAt(s.length-1)),d=l.lastIndexOf(s);return d!==-1?d+s.length:c!==-1?c+1:-1}),n).bind((a=>{const i=n.textContent?.indexOf(r)??-1;if(i!==-1&&a.offset>=i+r.length){const l=e.createRng();return l.setStart(a.container,a.offset-r.length),l.setEnd(a.container,a.offset),k.some(l)}{const l=a.offset-r.length;return Zg(a.container,l,n).map((c=>{const d=e.createRng();return d.setStart(c.container,c.offset),d.setEnd(a.container,a.offset),d})).filter((c=>c.toString()===r)).orThunk((()=>o_(e,t,n,gr(a.container,0))))}}))},MP=(e,t,n,o)=>{const r=e.dom,s=r.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return Zg(i,l-n.pattern.end.length,t).bind((c=>{const d=xh(r,s,c.container,c.offset,i,l,o);if(Eh(a))return k.some({matches:[{pattern:a,startRng:d,endRng:d}],position:c});{const m=qu(e,n.remainingPatterns,c.container,c.offset,t,o),f=m.getOr({matches:[],position:c}),h=f.position;return((b,y,v,_,N,D=!1)=>{if(y.start.length===0&&!D){const A=b.createRng();return A.setStart(v,_),A.setEnd(v,_),k.some(A)}return Jg(v,_,N).bind((A=>o_(b,y,N,A).bind((R=>D&&(R.endContainer===A.container&&R.endOffset===A.offset||A.offset===0&&R.endContainer.textContent?.length===R.endOffset)?k.none():k.some(R)))))})(r,a,h.container,h.offset,t,m.isNone()).map((b=>{const y=((v,_,N,D=!1)=>xh(v,_,N.startContainer,N.startOffset,N.endContainer,N.endOffset,D))(r,s,b,o);return{matches:f.matches.concat([{pattern:a,startRng:y,endRng:d}]),position:gr(b.startContainer,b.startOffset)}}))}}))},qu=(e,t,n,o,r,s)=>{const a=e.dom;return Jg(n,o,a.getRoot()).bind((i=>{const l=Sh(a,r,n,o);for(let c=0;c<t.length;c++){const d=t[c];if(!Xa(l,d.end))continue;const m=t.slice();m.splice(c,1);const f=MP(e,r,{pattern:d,remainingPatterns:m,position:i},s);if(f.isNone()&&o>0)return qu(e,t,n,o-1,r,s);if(f.isSome())return f}return k.none()}))},r_=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?K(t.format,(o=>{e.formatter.apply(o)})):e.execCommand(t.cmd,!1,t.value)},s_=(e,t,n,o,r,s)=>{var a;return((i,l)=>{const c=eo(i,(d=>xt(l,(m=>d.pattern.start===m.pattern.start&&d.pattern.end===m.pattern.end))));return i.length===l.length?c?i:l:i.length>l.length?i:l})(qu(e,r.inlinePatterns,n,o,t,s).fold((()=>[]),(i=>i.matches)),qu(e,(a=r.inlinePatterns,Kr(a,((i,l)=>l.end.length-i.end.length))),n,o,t,s).fold((()=>[]),(i=>i.matches)))},a_=(e,t)=>{if(t.length===0)return;const n=e.dom,o=e.selection.getBookmark(),r=((s,a)=>{const i=Xs("mce_textpattern"),l=Vr(a,((c,d)=>{const m=t_(s,i+`_end${c.length}`,d.endRng);return c.concat([{...d,endMarker:m}])}),[]);return Vr(l,((c,d)=>{const m=l.length-c.length-1,f=Eh(d.pattern)?d.endMarker:t_(s,i+`_start${m}`,d.startRng);return c.concat([{...d,startMarker:f}])}),[])})(n,t);K(r,(s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;Eh(s.pattern)?((l,c,d,m)=>{const f=$u(l.dom,d);Uu(l.dom,f,m),r_(l,c,f)})(e,s.pattern,s.endMarker,i):((l,c,d,m,f)=>{const h=l.dom,g=$u(h,m),b=$u(h,d);Uu(h,b,f),Uu(h,g,f);const y={prefix:d.prefix,start:d.end,end:m.start},v=$u(h,y);r_(l,c,v)})(e,s.pattern,s.startMarker,s.endMarker,i),n_(n,s.endMarker,i),n_(n,s.startMarker,i)})),e.selection.moveToBookmark(o)},i_=(e,t,n)=>((o,r,s)=>{if(se(o)&&0>=o.length)return k.some(gr(o,0));{const a=ha(Au);return k.from(a.forwards(o,0,Tu(o),s)).map((i=>gr(i.container,0)))}})(t,0,t).map((o=>{const r=o.container;return gE(r,n.start.length,t).each((s=>{const a=e.createRng();a.setStart(r,0),a.setEnd(s.container,s.offset),Uu(e,a,(i=>i===t))})),r})),l_=e=>(t,n)=>{const o=t.dom,r=n.pattern,s=Zk(o.getRoot(),n.range).getOrDie("Unable to resolve path range");return Hu(t,s).each((a=>{r.type==="block-format"?((i,l)=>{const c=l.get(i);return re(c)&&nn(c).exists((d=>Oe(d,"block")))})(r.format,t.formatter)&&t.undoManager.transact((()=>{e(t.dom,a,r),t.formatter.apply(r.format)})):r.type==="block-command"&&t.undoManager.transact((()=>{e(t.dom,a,r),t.execCommand(r.cmd,!1,r.value)}))})),!0},c_=e=>(t,n)=>{const o=(s=>Kr(s,((a,i)=>i.start.length-a.start.length)))(t),r=n.replace(It," ");return Ht(o,(s=>e(s,n,r)))},d_=(e,t)=>(n,o,r,s,a=o.textContent??"")=>{const i=n.dom,l=xn(n);return i.is(o,l)?e(r.blockPatterns,a).map((c=>t&&E.trim(a).length===c.start.length?[]:[{pattern:c,range:xh(i,i.getRoot(),o,0,o,0,s)}])).getOr([]):[]},IP=l_(((e,t,n)=>{i_(e,t,n).each((o=>{const r=S.fromDom(o),s=ri(r);/^\s[^\s]/.test(s)&&lm(r,s.slice(1))}))})),FP=c_(((e,t,n)=>t.indexOf(e.start)===0||n.indexOf(e.start)===0)),jP=d_(FP,!0),zP=l_(i_),UP=c_(((e,t,n)=>t===e.start||n===e.start)),HP=d_(UP,!1),u_=(e,t,n)=>{for(let o=0;o<e.length;o++)if(n(e[o],t))return!0;return!1},$P=e=>{const t=[",",".",";",":","!","?"],n=[32],o=()=>{return a=dT(e).filter((l=>l.type!=="inline-command"&&l.type!=="block-command"||e.queryCommandSupported(l.cmd))),i=uT(e),{inlinePatterns:E0(a),blockPatterns:S0(a),dynamicPatternsLookup:i};var a,i},r=()=>(a=>a.options.isSet("text_patterns_lookup"))(e);e.on("keydown",(a=>{if(a.keyCode===13&&!de.modifierPressed(a)&&e.selection.isCollapsed()&&e.selection.isEditable()){const i=Zm(o(),"enter");(i.inlinePatterns.length>0||i.blockPatterns.length>0||r())&&((l,c)=>((d,m)=>{const f=d.selection.getRng();return Hu(d,f).map((h=>{const g=Math.max(0,f.startOffset),b=wh(m,h,h.textContent??"");return{inlineMatches:s_(d,h,f.startContainer,g,b,!0),blockMatches:jP(d,h,b,!0)}})).filter((({inlineMatches:h,blockMatches:g})=>g.length>0||h.length>0))})(l,c).fold(Nt,(({inlineMatches:d,blockMatches:m})=>(l.undoManager.add(),l.undoManager.extra((()=>{l.execCommand("mceInsertNewLine")}),(()=>{(g=>{g.insertContent(hn,{preserve_zwsp:!0})})(l),a_(l,d),((g,b)=>{if(b.length===0)return;const y=g.selection.getBookmark();K(b,(v=>IP(g,v))),g.selection.moveToBookmark(y)})(l,m);const f=l.selection.getRng(),h=Jg(f.startContainer,f.startOffset,l.dom.getRoot());l.execCommand("mceInsertNewLine"),h.each((g=>{const b=g.container;b.data.charAt(g.offset-1)===kr&&(b.deleteData(g.offset-1,1),qi(l.dom,b.parentNode,(y=>y===l.dom.getRoot())))}))})),!0))))(e,i)&&a.preventDefault()}}),!0),e.on("keydown",(a=>{if(a.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const i=Zm(o(),"space");(i.blockPatterns.length>0||r())&&((l,c)=>((d,m)=>{const f=d.selection.getRng();return Hu(d,f).map((h=>{const g=Math.max(0,f.startOffset),b=Sh(d.dom,h,f.startContainer,g),y=wh(m,h,b);return HP(d,h,y,!1,b)})).filter((h=>h.length>0))})(l,c).fold(Nt,(d=>(l.undoManager.transact((()=>{((m,f)=>{K(f,(h=>zP(m,h)))})(l,d)})),!0))))(e,i)&&a.preventDefault()}}),!0);const s=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const a=Zm(o(),"space");(a.inlinePatterns.length>0||r())&&((i,l)=>{const c=i.selection.getRng();Hu(i,c).map((d=>{const m=Math.max(0,c.startOffset-1),f=Sh(i.dom,d,c.startContainer,m),h=wh(l,d,f),g=s_(i,d,c.startContainer,m,h,!1);g.length>0&&i.undoManager.transact((()=>{a_(i,g)}))}))})(e,a)}};e.on("keyup",(a=>{u_(n,a,((i,l)=>i===l.keyCode&&!de.modifierPressed(l)))&&s()})),e.on("keypress",(a=>{u_(t,a,((i,l)=>i.charCodeAt(0)===l.charCode))&&Lo.setEditorTimeout(e,s)}))},qP=e=>{const t=E.each,n=de.BACKSPACE,o=de.DELETE,r=e.dom,s=e.selection,a=e.parser,i=p.browser,l=i.isFirefox(),c=i.isChromium()||i.isSafari(),d=p.deviceType.isiPhone()||p.deviceType.isiPad(),m=p.os.isMacOS()||p.os.isiOS(),f=(B,F)=>{try{e.getDoc().execCommand(B,!1,String(F))}catch{}},h=B=>B.isDefaultPrevented(),g=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},b=()=>{e.inline||r.bind(e.getDoc(),"mousedown mouseup",(B=>{let F;if(B.target===e.getDoc().documentElement)if(F=s.getRng(),e.getDoc().getSelection()?.anchorNode!==null&&e.getBody().focus(),B.type==="mousedown"){if(Do(F.startContainer))return;s.placeCaretAt(B.clientX,B.clientY)}else s.setRng(F)}))},y=()=>{Range.prototype.getClientRects||e.on("mousedown",(B=>{if(!h(B)&&B.target.nodeName==="HTML"){const F=e.getBody();F.blur(),Lo.setEditorTimeout(e,(()=>{F.focus()}))}}))},v=()=>{const B=V0(e);e.on("click",(F=>{const H=F.target;/^(IMG|HR)$/.test(H.nodeName)&&r.isEditable(H)&&(F.preventDefault(),e.selection.select(H),e.nodeChanged()),H.nodeName==="A"&&r.hasClass(H,B)&&H.childNodes.length===0&&r.isEditable(H.parentNode)&&(F.preventDefault(),s.select(H))}))},_=()=>{e.on("keydown",(B=>{if(!h(B)&&B.keyCode===n&&s.isCollapsed()&&s.getRng().startOffset===0){const F=s.getNode().previousSibling;if(F&&F.nodeName&&F.nodeName.toLowerCase()==="table")return B.preventDefault(),!1}return!0}))},N=()=>{q0(e)||e.on("BeforeExecCommand mousedown",(()=>{f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),H0(e)||f("enableObjectResizing",!1)}))},D=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},A=()=>{e.inline||e.on("keydown",(()=>{document.activeElement===document.body&&e.getWin().focus()}))},R=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",(B=>{let F;B.target.nodeName==="HTML"&&(F=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(F),e.selection.normalize(),e.nodeChanged())})))},P=()=>{m&&e.on("keydown",(B=>{!de.metaKeyPressed(B)||B.shiftKey||B.keyCode!==37&&B.keyCode!==39||(B.preventDefault(),e.selection.getSel().modify("move",B.keyCode===37?"backward":"forward","lineboundary"))}))},I=()=>{e.on("click",(B=>{let F=B.target;do if(F.tagName==="A")return void B.preventDefault();while(F=F.parentNode)})),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},M=()=>{e.on("init",(()=>{e.dom.bind(e.getBody(),"submit",(B=>{B.preventDefault()}))}))},W=Ee;return Mr(e)?(c&&(b(),v(),M(),g(),d&&(A(),R(),I())),l&&(y(),N(),D(),P())):(e.on("keydown",(B=>{if(h(B)||B.keyCode!==de.BACKSPACE)return;let F=s.getRng();const H=F.startContainer,Z=F.startOffset,le=r.getRoot();let _e=H;if(F.collapsed&&Z===0){for(;_e.parentNode&&_e.parentNode.firstChild===_e&&_e.parentNode!==le;)_e=_e.parentNode;_e.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,_e),F=r.createRng(),F.setStart(H,0),F.setEnd(H,0),s.setRng(F))}})),(()=>{const B=F=>{const H=r.create("body"),Z=F.cloneContents();return H.appendChild(Z),s.serializer.serialize(H,{format:"html"})};e.on("keydown",(F=>{const H=F.keyCode;if(!h(F)&&(H===o||H===n)&&e.selection.isEditable()){const Z=e.selection.isCollapsed(),le=e.getBody();if(Z&&!es(e.schema,le)||!Z&&!(_e=>{const Te=B(_e),Se=r.createRng();return Se.selectNode(e.getBody()),Te===B(Se)})(e.selection.getRng()))return;F.preventDefault(),e.setContent(""),le.firstChild&&r.isBlock(le.firstChild)?e.selection.setCursorLocation(le.firstChild,0):e.selection.setCursorLocation(le,0),e.nodeChanged()}}))})(),p.windowsPhone||e.on("keyup focusin mouseup",(B=>{de.modifierPressed(B)||(F=>{const H=F.getBody(),Z=F.selection.getRng();return Z.startContainer===Z.endContainer&&Z.startContainer===H&&Z.startOffset===0&&Z.endOffset===H.childNodes.length})(e)||s.normalize()}),!0),c&&(b(),v(),e.on("init",(()=>{f("DefaultParagraphSeparator",xn(e))})),M(),_(),a.addNodeFilter("br",(B=>{let F=B.length;for(;F--;)B[F].attr("class")==="Apple-interchange-newline"&&B[F].remove()})),d?(A(),R(),I()):g()),l&&((()=>{const B=Cn("figcaption");e.on("keydown",(F=>{if(F.keyCode===de.LEFT||F.keyCode===de.RIGHT){const H=S.fromDom(e.selection.getNode());B(H)&&e.selection.isCollapsed()&&gn(H).bind((Z=>e.selection.getRng().startOffset===0&&F.keyCode===de.LEFT?Vt(Z):e.selection.getRng().endOffset===H.dom.textContent?.length&&F.keyCode===de.RIGHT?Gn(Z):k.none())).each((Z=>{e.selection.setCursorLocation(Z.dom,0)}))}}))})(),e.on("mousedown",(B=>{zt(k.from(B.clientX),k.from(B.clientY),((F,H)=>{const Z=e.getDoc().caretPositionFromPoint(F,H),le=Z?.offsetNode?.childNodes[Z.offset-(Z.offset>0?1:0)]||Z?.offsetNode;if(te(le)&&(_e=le).nodeName==="IMG"&&e.dom.isEditable(_e)){const Te=le.getBoundingClientRect();B.preventDefault(),e.hasFocus()||e.focus(),e.selection.select(le),B.clientX<Te.left||B.clientY<Te.top?e.selection.collapse(!0):(B.clientX>Te.right||B.clientY>Te.bottom)&&e.selection.collapse(!1)}var _e}))})),e.on("keydown",(B=>{if(!h(B)&&B.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&s.getRng().startOffset===0){const F=s.getNode(),H=F.previousSibling;if(F.nodeName==="HR")return r.remove(F),void B.preventDefault();H&&H.nodeName&&H.nodeName.toLowerCase()==="hr"&&(r.remove(H),B.preventDefault())}}})),y(),(()=>{const B=()=>{const H=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const Z=s.getStart();Z!==e.getBody()&&(r.setAttrib(Z,"style",null),t(H,(le=>{Z.setAttributeNode(le.cloneNode(!0))})))}},F=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);e.on("keypress",(H=>{let Z;return!(!(h(H)||H.keyCode!==8&&H.keyCode!==46)&&F()&&(Z=B(),e.getDoc().execCommand("delete",!1),Z(),H.preventDefault(),1))})),r.bind(e.getDoc(),"cut",(H=>{if(!h(H)&&F()){const Z=B();Lo.setEditorTimeout(e,(()=>{Z()}))}}))})(),N(),e.on("SetContent ExecCommand",(B=>{B.type!=="setcontent"&&B.command!=="mceInsertLink"||t(r.select("a:not([data-mce-block])"),(F=>{let H=F.parentNode;const Z=r.getRoot();if(H?.lastChild===F){for(;H&&!r.isBlock(H);){if(H.parentNode?.lastChild!==H||H===Z)return;H=H.parentNode}r.add(H,"br",{"data-mce-bogus":1})}}))})),D(),P(),_())),{refreshContentEditable:W,isHidden:()=>{if(!l||e.removed)return!1;const B=e.selection.getSel();return!B||!B.rangeCount||B.rangeCount===0}}};class m_ extends Error{url;constructor(t,n){super(t),this.url=n}}const kh={},f_=async(e,t)=>{const n=dr.ScriptLoader.getScriptAttributes(e);return await((o,r,s)=>new Promise(((a,i)=>{const l=S.fromTag("script");Qe(l,{type:"text/javascript",src:o,...s});const c=()=>{ft(l)};ra(l,"load",(()=>{c(),a()})),ra(l,"error",(()=>{c(),i(new Error(`Failed to load script url: ${o}`))})),ne(oa(r),l)})))(e,t,n).catch((()=>Promise.reject(new m_(`Failed to load component url: ${e}`,e)))),e},WP=async e=>{const t=(o=>{const r=o.schema.getComponentUrls();return o.inline?(s=>nr(s,((a,i)=>Ot(kh,a).getOrThunk((()=>{if(kt(window.customElements.get(i))){const l=f_(a,sa());return kh[a]=l,l}return Promise.resolve(a)})).catch((l=>(delete kh[a],Promise.reject(l)))))))(r):((s,a)=>{const i=ho(Vs(s));return qe(i,(l=>f_(l,S.fromDom(a))))})(r,o.getDoc())})(e),n=De(await Promise.allSettled(t),(o=>o.status==="rejected"));n.length>0&&K(n,(o=>{if(o.reason instanceof m_){const{url:r}=o.reason;((s,a)=>{Ta(s,"ComponentLoadError",Da("component",a))})(e,r)}}))},_h=At.DOM,VP=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Nh=e=>tr(e,(t=>Lt(t)===!1)),p_=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Nh({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_html_in_comments:t("allow_html_in_comments"),allow_mathml_annotation_encodings:t("allow_mathml_annotation_encodings"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),extended_mathml_attributes:t("extended_mathml_attributes"),extended_mathml_elements:t("extended_mathml_elements"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:VP(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:af(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},g_=e=>{const t=e.options.get;return Nh({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},Ah=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,h_=e=>{const t=Ah(e),n=U0(e),o=e.contentCSS,r=()=>{t.unloadAll(o),e.inline||e.ui.styleSheetLoader.unloadAll(n)},s=()=>{e.removed?r():e.on("remove",r)};if(e.contentStyles.length>0){let l="";E.each(e.contentStyles,(c=>{l+=c+`\r
`})),e.dom.addStyle(l)}const a=Promise.all(((l,c,d)=>{const{pass:m,fail:f}=er(c,(b=>tinymce.Resource.has(Jp(b)))),h=m.map((b=>{const y=tinymce.Resource.get(Jp(b));return xe(y)?Promise.resolve(Ah(l).loadRawCss(b,y)):Promise.resolve()})),g=[...h,Ah(l).loadAll(f)];return l.inline?g:g.concat([l.ui.styleSheetLoader.loadAll(d)])})(e,o,n)).then(s).catch(s),i=SA(e);return i&&((l,c)=>{const d=S.fromDom(l.getBody()),m=Xo(Ko(d)),f=S.fromTag("style");lt(f,"type","text/css"),ne(f,S.fromText(c)),ne(m,f),l.on("remove",(()=>{ft(f)}))})(e,i),a},Th=e=>{e.removed!==!0&&((t=>{Mr(t)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"})})(e),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,(o=>{o.dispatch("Init")})(t),t.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||Td(o)&&o.selection.getStart(!0)!==r||In(r).each((s=>{const a=s.getNode(),i=Dr(a)?In(a).getOr(s):s;o.selection.setRng(i.toRange())}))})(t),t.nodeChanged({initial:!0});const n=XA(t);pt(n)&&n.call(t,t),(o=>{const r=GA(o);r&&Lo.setEditorTimeout(o,(()=>{let s;s=r===!0?o:o.editorManager.get(r),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())}),100)})(t),ss(t)&&zx(t,!0)})(e))},b_=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(_h.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const o=e.getBody();o.disabled=!0,e.readonly=q0(e),e._editableRoot=HA(e),!xd(e)&&e.hasEditableRoot()&&(e.inline&&_h.getStyle(o,"position",!0)==="static"&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,e.editorUpload=cO(e),e.schema=ws(g_(e)),e.dom=At(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:vA(e),referrerPolicy:nf(e),crossOrigin:of(e),onSetAttrib:a=>{e.dispatch("SetAttrib",a)}}),e.parser=(a=>{const i=Oi(p_(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",((l,c)=>{const d=a.dom,m="data-mce-"+c;let f=l.length;for(;f--;){const h=l[f];let g=h.attr(c);if(g&&!h.attr(m)){if(g.indexOf("data:")===0||g.indexOf("blob:")===0)continue;c==="style"?(g=d.serializeStyle(d.parseStyle(g),h.name),g.length||(g=null),h.attr(m,g),h.attr(c,g)):c==="tabindex"?(h.attr(m,g),h.attr(c,null)):h.attr(m,a.convertURL(g,c,h.name))}}})),i.addNodeFilter("script",(l=>{let c=l.length;for(;c--;){const d=l[c],m=d.attr("type")||"no/type";m.indexOf("mce-")!==0&&d.attr("type","mce-"+m)}})),pT(a)&&i.addNodeFilter("#cdata",(l=>{let c=l.length;for(;c--;){const d=l[c];d.type=8,d.name="#comment",d.value="[CDATA["+a.dom.encode(d.value??"")+"]]"}})),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(l=>{let c=l.length;const d=a.schema.getNonEmptyElements();for(;c--;){const m=l[c];m.isEmpty(d)&&m.getAll("br").length===0&&m.append(new An("br",1))}})),i})(e),e.serializer=_x((a=>{const i=a.options.get;return{...p_(a),...g_(a),...Nh({remove_trailing_brs:i("remove_trailing_brs"),pad_empty_with_br:i("pad_empty_with_br"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(e),e),e.selection=kx(e.dom,e.getWin(),e.serializer,e),e.annotator=Vy(e),e.formatter=Xx(e),e.undoManager=Gx(e),e._nodeChangeDispatcher=new uP(e),e._selectionOverrides=PP(e),dP(e),(a=>{const i=$o(),l=Qt(!1),c=no((d=>{a.dispatch("longpress",{...d,type:"longpress"}),l.set(!0)}),400);a.on("touchstart",(d=>{TS(d).each((m=>{c.cancel();const f={x:m.clientX,y:m.clientY,target:d.target};c.throttle(d),l.set(!1),i.set(f)}))}),!0),a.on("touchmove",(d=>{c.cancel(),TS(d).each((m=>{i.on((f=>{((h,g)=>{const b=Math.abs(h.clientX-g.x),y=Math.abs(h.clientY-g.y);return b>5||y>5})(m,f)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))}))}))}),!0),a.on("touchend touchcancel",(d=>{c.cancel(),d.type!=="touchcancel"&&i.get().filter((m=>m.target.isEqualNode(d.target))).each((()=>{l.get()?d.preventDefault():a.dispatch("tap",{...d,type:"tap"})}))}),!0)})(e),(a=>{(i=>{i.on("click",(l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()}))})(a),(i=>{i.parser.addNodeFilter("details",(l=>{const c=yT(i);K(l,(d=>{c==="expanded"?d.attr("open","open"):c==="collapsed"&&d.attr("open",null)}))})),i.serializer.addNodeFilter("details",(l=>{const c=vT(i);K(l,(d=>{c==="expanded"?d.attr("open","open"):c==="collapsed"&&d.attr("open",null)}))}))})(a)})(e),(a=>{const i="contenteditable",l=" "+E.trim(mT(a))+" ",c=" "+E.trim(X0(a))+" ",d=RS(l),m=RS(c),f=fT(a);f.length>0&&a.on("BeforeSetContent",(h=>{((g,b,y)=>{let v=b.length,_=y.content;if(y.format!=="raw"){for(;v--;)_=_.replace(b[v],dB(g,_,X0(g)));y.content=_}})(a,f,h)})),a.parser.addAttributeFilter("class",(h=>{let g=h.length;for(;g--;){const b=h[g];d(b)?b.attr(i,"true"):m(b)&&b.attr(i,"false")}})),a.serializer.addAttributeFilter(i,(h=>{let g=h.length;for(;g--;){const b=h[g];if(!d(b)&&!m(b))continue;const y=b.attr("data-mce-content");f.length>0&&y?uB(f,y)?(b.name="#text",b.type=3,b.raw=!0,b.value=y):b.remove():b.attr(i,null)}}))})(e),Mr(e)||((a=>{a.on("mousedown",(i=>{i.detail>=3&&(i.preventDefault(),EP(a))}))})(e),(a=>{$P(a)})(e));const r=lP(e);((a,i)=>{a.addCommand("delete",(()=>{Hg(a,i)})),a.addCommand("forwardDelete",(()=>{((l,c)=>{AS(l,c,!0).fold((()=>{l.selection.isEditable()&&cC(l)}),Xn),pg(l)&&ng(l.dom,l.getBody())})(a,i)}))})(e,r),(a=>{a.on("NodeChange",(()=>(i=>{const l=i.dom,c=i.selection,d=i.schema,m=d.getBlockElements(),f=c.getStart(),h=i.getBody();let g,b,y=null;const v=xn(i);if(!f||!ve(f))return;const _=h.nodeName.toLowerCase();if(!d.isValidChild(_,v.toLowerCase())||((D,A,R)=>xt(jv(S.fromDom(R),S.fromDom(A)),(P=>$g(D,P.dom))))(m,h,f))return;if(h.firstChild===h.lastChild&&Ut(h.firstChild))return g=qg(i),g.appendChild(fi().dom),h.replaceChild(g,h.firstChild),i.selection.setCursorLocation(g,0),void i.nodeChanged();let N=h.firstChild;for(;N;)if(ve(N)&&SN(d,N),lB(d,N)){if(cB(m,N)){b=N,N=N.nextSibling,l.remove(b);continue}if(!g){if(!y&&i.hasFocus()&&(y=ns(i.selection.getRng(),(()=>document.createElement("span")))),!N.parentNode){N=null;break}g=qg(i),h.insertBefore(g,N)}b=N,N=N.nextSibling,g.appendChild(b)}else g=null,N=N.nextSibling;y&&(i.selection.setRng(os(y)),i.nodeChanged())})(a)))})(e),(a=>{const i=a.dom,l=xn(a),c=NA(a)??"",d=(m,f)=>{if((b=>{if(Jx(b)){const y=b.keyCode;return!Zx(b)&&(de.metaKeyPressed(b)||b.altKey||y>=112&&y<=123||we(pO,y))}return!1})(m))return;const h=a.getBody(),g=!(b=>Jx(b)&&!(Zx(b)||b.type==="keyup"&&b.keyCode===229))(m)&&((b,y,v)=>{if(b.isEmpty(y,void 0,{skipBogus:!1,includeZwsp:!0})){const _=y.firstElementChild;return!_||!b.getStyle(y.firstElementChild,"padding-left")&&!b.getStyle(y.firstElementChild,"padding-right")&&v===_.nodeName.toLowerCase()}return!1})(i,h,l);(i.getAttrib(h,Qx)!==""!==g||f)&&(i.setAttrib(h,Qx,g?c:null),((b,y)=>{b.dispatch("PlaceholderToggle",{state:y})})(a,g),a.on(g?"keydown":"keyup",d),a.off(g?"keyup":"keydown",d))};ko(c)&&a.on("init",(m=>{d(m,!0),a.on("change SetContent ExecCommand",d),a.on("paste",(f=>Lo.setEditorTimeout(a,(()=>d(f)))))}))})(e),xP(e,r);const s=(a=>{const i=a;return(l=>Ot(l.plugins,"rtc").bind((c=>k.from(c.setup))))(a).fold((()=>(i.rtcInstance=xx(a),k.none())),(l=>(i.rtcInstance=(()=>{const c=ie(null),d=ie("");return{init:{bindEvents:Ee},undoManager:{beforeChange:Ee,add:c,undo:c,redo:c,clear:Ee,reset:Ee,hasUndo:Nt,hasRedo:Nt,transact:c,ignore:Ee,extra:Ee},formatter:{match:Nt,matchAll:ie([]),matchNode:ie(void 0),canApply:Nt,closest:d,apply:Ee,remove:Ee,toggle:Ee,formatChanged:ie({unbind:Ee})},editor:{getContent:d,setContent:ie({content:"",html:""}),insertContent:ie(""),addVisual:Ee},selection:{getContent:d},autocompleter:{addDecoration:Ee,removeDecoration:Ee},raw:{getModel:ie(k.none())}}})(),k.some((()=>l().then((c=>(i.rtcInstance=(d=>{const m=N=>He(N)?N:{},{init:f,undoManager:h,formatter:g,editor:b,selection:y,autocompleter:v,raw:_}=d;return{init:{bindEvents:f.bindEvents},undoManager:{beforeChange:h.beforeChange,add:h.add,undo:h.undo,redo:h.redo,clear:h.clear,reset:h.reset,hasUndo:h.hasUndo,hasRedo:h.hasRedo,transact:(N,D,A)=>h.transact(A),ignore:(N,D)=>h.ignore(D),extra:(N,D,A,R)=>h.extra(A,R)},formatter:{match:(N,D,A,R)=>g.match(N,m(D),R),matchAll:g.matchAll,matchNode:g.matchNode,canApply:N=>g.canApply(N),closest:N=>g.closest(N),apply:(N,D,A)=>g.apply(N,m(D)),remove:(N,D,A,R)=>g.remove(N,m(D)),toggle:(N,D,A)=>g.toggle(N,m(D)),formatChanged:(N,D,A,R,P)=>g.formatChanged(D,A,R,P)},editor:{getContent:N=>b.getContent(N),setContent:(N,D)=>({content:b.setContent(N,D),html:""}),insertContent:(N,D)=>(b.insertContent(N),""),addVisual:b.addVisual},selection:{getContent:(N,D)=>y.getContent(D)},autocompleter:{addDecoration:v.addDecoration,removeDecoration:v.removeDecoration},raw:{getModel:()=>k.some(_.getRawModel())}}})(c),c.rtc.isRemote))))))))})(e);(a=>{const i=a.getDoc(),l=a.getBody();(m=>{m.dispatch("PreInit")})(a),QA(a)||(i.body.spellcheck=!1,_h.setAttrib(l,"spellcheck","false")),a.quirks=qP(a),(m=>{m.dispatch("PostRender")})(a);const c=EA(a);c!==void 0&&(l.dir=c);const d=JA(a);d&&a.on("BeforeSetContent",(m=>{E.each(d,(f=>{m.content=m.content.replace(f,(h=>"<!--mce:protected "+escape(h)+"-->"))}))})),a.on("SetContent",(()=>{a.addVisual(a.getBody())})),a.on("compositionstart compositionend",(m=>{a.composing=m.type==="compositionstart"}))})(e),(a=>{WP(a)})(e),s.fold((()=>{const a=(i=>{let l=!1;const c=setTimeout((()=>{l||i.setProgressState(!0)}),500);return()=>{clearTimeout(c),l=!0,i.setProgressState(!1)}})(e);h_(e).then((()=>{Th(e),a()}))}),(a=>{e.setProgressState(!0),h_(e).then((()=>{a().then((i=>{e.setProgressState(!1),Th(e),wx(e)}),(i=>{e.notificationManager.open({type:"error",text:String(i)}),Th(e),wx(e)}))}))}))},Dh=At.DOM,KP=(e,t)=>{((n,o)=>{const r=K0(n),s=n.translate(r),a=bt(S.fromDom(n.getElement()),"tabindex").bind(ps),i=((l,c,d,m)=>{const f=S.fromTag("iframe");return m.each((h=>lt(f,"tabindex",h))),Qe(f,d),Qe(f,{id:l+"_ifr",frameBorder:"0",allowTransparency:"true",...p.browser.isFirefox()?{title:c}:{}}),ai(f,"tox-edit-area__iframe"),f})(n.id,s,oA(n),a).dom;i.onload=()=>{i.onload=null,n.dispatch("load")},n.contentAreaContainer=o.iframeContainer,n.iframeElement=i,n.iframeHTML=(l=>{let c=rA(l)+"<html><head>";P0(l)!==l.editorManager.documentBaseURL&&(c+='<base href="'+l.documentBaseURI.getURI()+'" />'),c+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const d=sA(l),m=aA(l),f=l.translate(K0(l)),h=p.browser.isFirefox()?"":`aria-label="${f}"`;return L0(l)&&(c+='<meta http-equiv="Content-Security-Policy" content="'+L0(l)+'" />'),c+=`</head><body id="${d}" class="mce-content-body ${m}" data-id="${l.id}" ${h}><br></body></html>`,c})(n),Dh.add(o.iframeContainer,i)})(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=Dh.isHidden(t.editorContainer)),e.getElement().style.display="none",Dh.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,(n=>{const o=n.iframeElement,r=()=>{n.contentDocument=o.contentDocument,b_(n)};if(hT(n)||p.browser.isFirefox()){const s=n.getDoc();s.open(),s.write(n.iframeHTML),s.close(),r()}else{const s=ra(S.fromDom(o),"load",(()=>{s.unbind(),r()}));o.srcdoc=n.iframeHTML}})(e)},y_=At.DOM,v_=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),C_=e=>{const t=e.getElement();return e.inline?v_(null):(n=>{const o=y_.create("div");return y_.insertAfter(o,n),v_(o,o)})(t)},XP=async e=>{e.dispatch("ScriptsLoaded"),(n=>{const o=E.trim(F0(n)),r=n.ui.registry.getAll().icons,s={...iu.get("default").icons,...iu.get(o).icons};wt(s,((a,i)=>{Oe(r,i)||n.ui.registry.addIcon(i,a)}))})(e),(n=>{const o=r=>{r.keyCode!==de.ESC||r.defaultPrevented||(s=>s.dispatch("CloseActiveTooltips"))(n).isDefaultPrevented()&&r.preventDefault()};document.addEventListener("keyup",o),n.inline||n.on("keyup",o),n.on("remove",(()=>{document.removeEventListener("keyup",o),n.inline||n.off("keyup",o)}))})(e),(n=>{const o=vi(n);if(xe(o)){const r=Aa.get(o);n.theme=r(n,Aa.urls[o])||{},pt(n.theme.init)&&n.theme.init(n,Aa.urls[o]||n.editorManager.documentBaseURL.replace(/\/$/,""))}else n.theme={}})(e),(n=>{const o=rf(n),r=Bi.get(o);n.model=r(n,Bi.urls[o])})(e),(n=>{Gp.init(n)})(e),(n=>{const o=[];K(Pl(n),(r=>{((s,a,i)=>{const l=Pi.get(i),c=Pi.urls[i]||s.editorManager.documentBaseURL.replace(/\/$/,"");if(i=E.trim(i),l&&E.inArray(a,i)===-1){if(s.plugins[i])return;try{const d=l(s,c)||{};s.plugins[i]=d,pt(d.init)&&(d.init(s,c),a.push(i))}catch(d){((m,f,h)=>{const g=ur.translate(["Failed to initialize plugin: {0}",f]);_0(m,"PluginLoadError",{message:g}),cu(g,h),lu(m,g)})(s,i,d)}}})(n,o,(s=>s.replace(/^\-/,""))(r))}))})(e);const t=await(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,xe(vi(n))?(r=>{const s=r.theme.renderUI;return s?s():C_(r)})(n):pt(vi(n))?(r=>{const s=r.getElement(),a=vi(r)(r,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||r.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||r.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):C_(n)})(e);((n,o)=>{const r={show:k.from(o.show).getOr(Ee),hide:k.from(o.hide).getOr(Ee),isEnabled:k.from(o.isEnabled).getOr(jt),setEnabled:s=>{s&&(n.mode.get()==="readonly"||ss(n))||k.from(o.setEnabled).each((a=>a(s)))}};n.ui={...n.ui,...r}})(e,k.from(t.api).getOr({})),e.editorContainer=t.editorContainer,(n=>{n.contentCSS=n.contentCSS.concat((o=>Hx(o,wA(o)))(n),(o=>Hx(o,U0(o)))(n))})(e),e.inline?b_(e):KP(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},Fa=At.DOM,x_=e=>e.charAt(0)==="-",w_=(e,t,n)=>k.from(t).filter((o=>ko(o)&&!iu.has(o))).map((o=>({url:`${e.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:k.some(o)}))),YP=(e,t)=>{const n=dr.ScriptLoader,o=()=>{!e.removed&&(r=>{const s=vi(r);return!xe(s)||te(Aa.get(s))})(e)&&(r=>{const s=rf(r);return te(Bi.get(s))})(e)&&XP(e)};((r,s)=>{const a=vi(r);if(xe(a)&&!x_(a)&&!Oe(Aa.urls,a)){const i=TA(r),l=i?r.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;Aa.load(a,l).catch((()=>{((c,d,m)=>{Ta(c,"ThemeLoadError",Da("theme",d,m))})(r,l,a)}))}})(e,t),((r,s)=>{const a=rf(r);if(a!=="plugin"&&!Oe(Bi.urls,a)){const i=DA(r),l=xe(i)?r.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;Bi.load(a,l).catch((()=>{((c,d,m)=>{Ta(c,"ModelLoadError",Da("model",d,m))})(r,l,a)}))}})(e,t),((r,s)=>{Gp.load(r,s)})(e,t),((r,s)=>{const a=j0(s),i=CA(s);if(!ur.hasCode(a)&&a!=="en"){const l=ko(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;r.add(l).catch((()=>{((c,d,m)=>{Ta(c,"LanguageLoadError",Da("language",d,m))})(s,l,a)}))}})(n,e),((r,s,a)=>{const i=w_(s,"default",a),l=(c=>k.from(pA(c)).filter(ko).map((d=>({url:d,name:k.none()}))))(s).orThunk((()=>w_(s,F0(s),"")));K((c=>{const d=[],m=f=>{d.push(f)};for(let f=0;f<c.length;f++)c[f].each(m);return d})([i,l]),(c=>{r.add(c.url).catch((()=>{((d,m,f)=>{Ta(d,"IconsLoadError",Da("icons",m,f))})(s,c.url,c.name.getOrUndefined())}))}))})(n,e,t),((r,s)=>{const a=(i,l)=>{i!=="licensekeymanager"&&Pi.load(i,l).catch((()=>{((c,d,m)=>{Ta(c,"PluginLoadError",Da("plugin",d,m))})(r,l,i)}))};wt($A(r),((i,l)=>{a(l,i),r.options.set("plugins",Pl(r).concat(l))})),K(Pl(r),(i=>{!(i=E.trim(i))||Pi.urls[i]||x_(i)||a(i,`plugins/${i}/plugin${s}.js`)}))})(e,t),n.loadQueue().then(o,o)},S_=["#E41B60","#AD1457","#1939EC","#001CB5","#648000","#465B00","#006CE7","#0054B4","#00838F","#006064","#00866F","#004D40","#51742F","#385021","#CF4900","#A84600","#CC0000","#6A1B9A","#9C27B0","#6A00AB","#3041BA","#0A1877","#774433","#452B24","#607D8B","#455A64"],Rh=(e,t={size:36})=>{return n=(s=>Intl.Segmenter?`${new Intl.Segmenter().segment(s)[Symbol.iterator]().next().value?.segment}`:s.trim()[0])(e.name),o=(s=>{const a=((i,l)=>{let c=5381;for(let d=0;d<i.length;d++)c=(c<<5)+c+i.charCodeAt(d);return(c>>>0)%(l+1)})(s??"",S_.length-1);return S_[a]})(e.id),r=t.size,"data:image/svg+xml,"+encodeURIComponent(((s,a,i)=>{const l=i/2;return`<svg height="${i}" width="${i}" xmlns="http://www.w3.org/2000/svg"><circle cx="${l}" cy="${l}" r="${l}" fill="${a}"/><text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" fill="#FFF" font-family="sans-serif" font-size="${l}">`+s+"</text></svg>"})(n,o,r));var n,o,r},GP=NE([Ui("id","id",{tag:"required",process:{}},rh()),hr("name"),hr("avatar"),(e=>Ui(e,e,{tag:"option",process:{}},rh()))("custom")]),QP=e=>{const t={};return wt(e,((n,o)=>{n.each((r=>{t[o]=r}))})),t},JP=e=>{if(!Array.isArray(e))throw new Error("fetch_users must return an array");const t=qe(e,(r=>AE("Invalid user object",GP,r))),{errors:n,values:o}=Va(t);if(n.length>0){const r=qe(n,((s,a)=>`User at index ${a}: ${TE(s)}`));console.warn(`User validation errors:
`+r.join(`
`))}return qe(o,(r=>{const{id:s,name:a,avatar:i,...l}=r;return{id:s,name:a.getOr(s),avatar:i.getOr(Rh({id:s,name:a.getOr(s)})),...QP(l)}}))},E_=qo().deviceType,k_=E_.isPhone(),ZP=E_.isTablet(),Cc=e=>{if(kt(e))return[];{const t=re(e)?e:e.split(/[ ,]/),n=qe(t,Er);return De(n,ko)}},eL=(e,t)=>{const n=(s=>{const a={},i={};return Sr(s,((l,c)=>we(e,c)),wr(a),wr(i)),{t:a,f:i}})(t);return o=n.t,r=n.f,{sections:ie(o),options:ie(r)};var o,r},Oh=(e,t)=>Oe(e.sections(),t),tL=(e,t)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Ot(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}}),nL=(e,t)=>{const n=t.external_plugins??{};return e&&e.external_plugins?E.extend({},e.external_plugins,n):n},oL=(e,t,n,o,r)=>{const s=e?{mobile:tL(r.mobile??{},t)}:{},a=eL(["mobile"],$a(s,r)),i=E.extend(n,o,a.options(),((l,c)=>l&&Oh(c,"mobile"))(e,a)?((l,c,d={})=>{const m=l.sections(),f=Ot(m,c).getOr({});return E.extend({},d,f)})(a,"mobile"):{},{external_plugins:nL(o,a.options())});return((l,c,d,m)=>{const f=Cc(d.forced_plugins),h=Cc(m.plugins),g=((v,_)=>Oh(v,_)?v.sections()[_]:{})(c,"mobile"),b=((v,_,N,D)=>v&&Oh(_,"mobile")?D:N)(l,c,h,g.plugins?Cc(g.plugins):h),y=((v,_)=>[...Cc(v),...Cc(_)])(f,b);return E.extend(m,{forced_plugins:f,plugins:y})})(e,a,o,i)},rL=e=>{(t=>{const n=o=>()=>{K("left,center,right,justify".split(","),(r=>{o!==r&&t.formatter.remove("align"+r)})),o!=="none"&&(r=>{t.formatter.toggle(r,void 0),t.nodeChanged()})("align"+o)};t.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(e),(t=>{const n=o=>()=>{const r=t.selection,s=r.isCollapsed()?[t.dom.getParent(r.getNode(),t.dom.isBlock)]:r.getSelectedBlocks();return xt(s,(a=>te(t.formatter.matchNode(a,o))))};t.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(e)},sL=(e,t)=>{const n=e.selection,o=e.dom;return/^ | $/.test(t)?((r,s,a,i)=>{const l=S.fromDom(r.getRoot());return a=Vl(l,Y.fromRangeStart(s),i)?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),Kl(l,Y.fromRangeEnd(s),i)?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),t,e.schema):t},Wu=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:o}=(r=>{if(typeof r!="string"){const s=E.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:s}}return{content:r,details:{}}})(t);Mp(e,{...o,content:sL(e,n),format:"html",set:!1,selection:!0}).each((r=>{const s=((a,i,l)=>Vp(a).editor.insertContent(i,l))(e,r.content,o);Ip(e,s,r),e.addVisual()}))}},aL={"font-size":"size","font-family":"face"},iL=Cn("font"),__=e=>(t,n)=>k.from(n).map(S.fromDom).filter(ot).bind((o=>((r,s,a)=>fm(S.fromDom(a),(i=>(l=>ni(l,r).orThunk((()=>iL(l)?Ot(aL,r).bind((c=>bt(l,c))):k.none())))(i)),(i=>me(S.fromDom(s),i))))(e,t,o.dom).or(((r,s)=>k.from(At.DOM.getStyle(s,r,!0)))(e,o.dom)))).getOr(""),lL=__("font-size"),cL=Bn((e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")),__("font-family")),dL=e=>In(e.getBody()).bind((t=>{const n=t.container();return k.from(se(n)?n.parentNode:n)})),Bh=(e,t)=>((n,o)=>(r=>k.from(r.selection.getRng()).bind((s=>{const a=r.getBody();return s.startContainer===a&&s.startOffset===0?k.none():k.from(r.selection.getStart(!0))})))(n).orThunk(be(dL,n)).map(S.fromDom).filter(ot).bind(o))(e,Hs(k.some,t)),N_=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const o=(s=>E.explode(s.options.get("font_size_style_values")))(e),r=(s=>E.explode(s.options.get("font_size_classes")))(e);return r.length>0?r[n-1]||t:o[n-1]||t}return t}return t},uL=e=>{const t=e.split(/\s*,\s*/);return qe(t,(n=>n.indexOf(" ")===-1||Gt(n,'"')||Gt(n,"'")?n:`'${n}'`)).join(",")},mL=e=>{e.editorCommands.addCommands({Indent:()=>{(t=>{kS(t,"indent")})(e)},Outdent:()=>{_S(e)}}),e.editorCommands.addCommands({Outdent:()=>wS(e),Indent:()=>(t=>!t.mode.isReadOnly()&&(n=>J0(n).forall((o=>{const r=n.selection.getSelectedBlocks();return xt(r,(s=>Cs(S.fromDom(s),"li").forall((a=>{return(i=a,Jh(i,(l=>Q(l,"ol,ul")),void 0)).length<=o;var i}))))})))(t))(e)},"state")},A_=(e,t)=>{if(e.mode.isReadOnly())return;const n=e.dom,o=e.selection.getRng(),r=t?e.selection.getStart():e.selection.getEnd(),s=t?o.startContainer:o.endContainer,a=gc(n,s);if(!a||!a.isContentEditable)return;const i=t?$:J,l=xn(e);((c,d,m,f)=>{const h=c.dom,g=y=>h.isBlock(y)&&y.parentElement===m,b=g(d)?d:h.getParent(f,g,m);return k.from(b).map(S.fromDom)})(e,r,a,s).each((c=>{const d=KE(e,s,c.dom,a,!1,l);i(c,S.fromDom(d)),e.selection.setCursorLocation(d,0),e.dispatch("NewBlock",{newBlock:d}),pc(e,"insertParagraph")}))},fL=e=>{rL(e),(t=>{t.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=t.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n!=="paste"||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let s=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(p.os.isMacOS()||p.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),t.notificationManager.open({text:s,type:"error"})}}})})(e),(t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})})(e),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let s=0;t.dom.getParent(t.selection.getNode(),(a=>!ve(a)||s++!==r||(t.selection.select(a),!1)),t.getBody())},mceSelectNode:(n,o,r)=>{t.selection.select(r)},selectAll:()=>{const n=t.dom.getParent(t.selection.getStart(),To);if(n){const o=t.dom.createRng();o.selectNodeContents(n),t.selection.setRng(o)}}})})(e),(t=>{t.editorCommands.addCommands({mceCleanup:()=>{const n=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Wu(t,t.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Wu(t,t.dom.encode(r))},insertHTML:(n,o,r)=>{Wu(t,r)},mceInsertContent:(n,o,r)=>{Wu(t,r)},mceSetContent:(n,o,r)=>{t.setContent(r)},mceReplaceContent:(n,o,r)=>{t.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent(nT(t))}})})(e),(t=>{const n=(o,r,s)=>{if(t.mode.isReadOnly())return;const a=xe(s)?{href:s}:s,i=t.dom.getParent(t.selection.getNode(),"a");He(a)&&xe(a.href)&&(a.href=a.href.replace(/ /g,"%20").replace(/&amp;/g,"&"),i&&a.href||t.formatter.remove("link"),a.href&&t.formatter.apply("link",a,i))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isEditable()){if(t.selection.isCollapsed()){const o=t.dom.getParent(t.selection.getStart(),"a");return void(o&&t.dom.remove(o,!0))}t.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(e),mL(e),(t=>{t.editorCommands.addCommands({InsertNewBlockBefore:()=>{(n=>{A_(n,!0)})(t)},InsertNewBlockAfter:()=>{(n=>{A_(n,!1)})(t)}})})(e),(t=>{t.editorCommands.addCommands({insertParagraph:()=>{Iu(QE,t)},mceInsertNewLine:(n,o,r)=>{rk(t,r)},InsertLineBreak:(n,o,r)=>{Iu(ek,t)}})})(e),(t=>{(n=>{const o=(r,s)=>{n.formatter.toggle(r,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,s,a)=>{o(r,{value:a})},BackColor:(r,s,a)=>{o("hilitecolor",{value:a})},FontName:(r,s,a)=>{((i,l)=>{const c=N_(i,l);i.formatter.toggle("fontname",{value:uL(c)}),i.nodeChanged()})(n,a)},FontSize:(r,s,a)=>{((i,l)=>{i.formatter.toggle("fontsize",{value:N_(i,l)}),i.nodeChanged()})(n,a)},LineHeight:(r,s,a)=>{((i,l)=>{i.formatter.toggle("lineheight",{value:String(l)}),i.nodeChanged()})(n,a)},Lang:(r,s,a)=>{o(r,{value:a.code,customValue:a.customCode??null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,s,a)=>{o(xe(a)?a:"p")},mceToggleFormat:(r,s,a)=>{o(a)}})})(t),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",(()=>(r=>Bh(r,(s=>cL(r.getBody(),s.dom))).getOr(""))(n))),n.editorCommands.addQueryValueHandler("FontSize",(()=>(r=>Bh(r,(s=>lL(r.getBody(),s.dom))).getOr(""))(n))),n.editorCommands.addQueryValueHandler("LineHeight",(()=>(r=>Bh(r,(s=>{const a=S.fromDom(r.getBody());return fm(s,(l=>ni(l,"line-height")),be(me,a)).getOrThunk((()=>{const l=parseFloat(Yo(s,"line-height")),c=parseFloat(Yo(s,"font-size"));return String(l/c)}))})).getOr(""))(n)))})(t)})(e),(t=>{t.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const s=r??t.selection.getNode();if(s!==t.getBody()){const a=t.selection.getBookmark();t.dom.remove(s,!0),t.selection.moveToBookmark(a)}},mcePrint:()=>{t.getWin().print()},mceFocus:(n,o,r)=>{((s,a)=>{s.removed||(a?Mf(s):(i=>{const l=i.selection,c=i.getBody();let d=l.getRng();i.quirks.refreshContentEditable();const m=h=>{Rf(h).each((g=>{h.selection.setRng(g),d=g}))};!Ti(i)&&i.hasEditableRoot()&&m(i);const f=((h,g)=>h.dom.getParent(g,(b=>h.dom.getContentEditable(b)==="true")))(i,l.getNode());if(f&&i.dom.isChildOf(f,c))return((h,g)=>h.dom.getParent(g,(b=>h.dom.getContentEditable(b)==="false"))!==null)(i,f)||Ld(c),Ld(f),i.hasEditableRoot()||m(i),Jy(i,d),void Mf(i);i.inline||(p.browser.isOpera()||Ld(c),i.getWin().focus()),(p.browser.isFirefox()||i.inline)&&(Ld(c),Jy(i,d)),Mf(i)})(s))})(t,r===!0)},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})})(e)},pL=["toggleview"],T_=e=>we(pL,e.toLowerCase());class D_{editor;commands={state:{},exec:{},value:{}};constructor(t){this.editor=t}execCommand(t,n=!1,o,r){const s=this.editor,a=t.toLowerCase(),i=r?.skip_focus;if(s.removed||(a!=="mcefocus"&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?(c=>{Rf(c).each((d=>c.selection.setRng(d)))})(s):s.focus()),s.dispatch("BeforeExecCommand",{command:t,ui:n,value:o}).isDefaultPrevented()))return!1;const l=this.commands.exec[a];return!!pt(l)&&(l(a,n,o,r),s.dispatch("ExecCommand",{command:t,ui:n,value:o,args:r}),!0)}queryCommandState(t){if(!T_(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),o=this.commands.state[n];return!!pt(o)&&o(n)}queryCommandValue(t){if(!T_(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),o=this.commands.value[n];return pt(o)?o(n):""}addCommands(t,n="exec"){const o=this.commands;wt(t,((r,s)=>{K(s.toLowerCase().split(","),(a=>{o[n][a]=r}))}))}addCommand(t,n,o){const r=t.toLowerCase();this.commands.exec[r]=(s,a,i,l)=>n.call(o??this.editor,a,i,l)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,o){this.commands.state[t.toLowerCase()]=()=>n.call(o??this.editor)}addQueryValueHandler(t,n,o){this.commands.value[t.toLowerCase()]=()=>n.call(o??this.editor)}}const gL=E.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Ph{static isNative(t){return!!gL[t.toLowerCase()]}settings;scope;toggleEvent;bindings={};constructor(t){this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Nt}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const o=t.toLowerCase(),r=Lm(o,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[o];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(l.func.call(this.scope,r)===!1)return r.preventDefault(),r}}return r}on(t,n,o,r){if(n===!1&&(n=Nt),n){const s={func:n,removed:!1};r&&E.extend(s,r);const a=t.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=o?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(t,n){if(t){const o=t.toLowerCase().split(" ");let r=o.length;for(;r--;){const s=o[r];let a=this.bindings[s];if(!s)return wt(this.bindings,((i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]})),this;if(a){if(n){const i=er(a,(l=>l.func===n));a=i.fail,this.bindings[s]=a,K(i.pass,(l=>{l.removed=!0}))}else a.length=0;a.length||(this.toggleEvent(t,!1),delete this.bindings[s])}}}else wt(this.bindings,((o,r)=>{this.toggleEvent(r,!1)})),this.bindings={};return this}once(t,n,o){return this.on(t,n,o,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||n.length===0)}}const xc=e=>(e._eventDispatcher||(e._eventDispatcher=new Ph({scope:e,toggleEvent:(t,n)=>{Ph.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),Lh={fire(e,t,n){return Z1("fire"),this.dispatch(e,t,n)},dispatch(e,t,n){const o=this;if(o.removed&&e!=="remove"&&e!=="detach")return Lm(e.toLowerCase(),t??{},o);const r=xc(o).dispatch(e,t);if(n!==!1&&o.parent){let s=o.parent();for(;s&&!r.isPropagationStopped();)s.dispatch(e,r,!1),s=s.parent?s.parent():void 0}return r},on(e,t,n){return xc(this).on(e,t,n)},off(e,t){return xc(this).off(e,t)},once(e,t){return xc(this).once(e,t)},hasEventListeners(e){return xc(this).has(e)}},Vu=At.DOM;let ja;const Ku=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=$0(e);return n?(e.eventRoot||(e.eventRoot=Vu.select(n)[0]),e.eventRoot):e.getBody()},R_=(e,t,n)=>{(o=>!o.hidden&&!ss(o))(e)?e.dispatch(t,n):ss(e)&&((o,r)=>{if((s=>s.type==="click")(r)&&!de.metaKeyPressed(r)){const s=S.fromDom(r.target);((a,i)=>Cs(i,"a",(l=>me(l,S.fromDom(a.getBody())))).bind((l=>bt(l,"href"))))(o,s).each((a=>{if(r.preventDefault(),/^#/.test(a)){const i=o.dom.select(`${a},[name="${ms(a,"#")}"]`);i.length&&o.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))}else(s=>we(sO,s.type))(r)&&o.dispatch(r.type,r)})(e,n)},O_=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=Ku(e,t);if($0(e)){if(ja||(ja={},e.editorManager.on("removeEditor",(()=>{e.editorManager.activeEditor||ja&&(wt(ja,((r,s)=>{e.dom.unbind(Ku(e,s))})),ja=null)}))),ja[t])return;const o=r=>{const s=r.target,a=e.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||Vu.isChildOf(s,l))&&R_(a[i],t,r)}};ja[t]=o,Vu.bind(n,t,o)}else{const o=r=>{R_(e,t,r)};Vu.bind(n,t,o),e.delegates[t]=o}},B_={...Lh,bindPendingEventDelegates(){const e=this;E.each(e._pendingNativeEvents,(t=>{O_(e,t)}))},toggleNativeEvent(e,t){const n=this;e!=="focus"&&e!=="blur"&&(n.removed||(t?n.initialized?O_(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(Ku(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(wt(e.delegates,((o,r)=>{e.dom.unbind(Ku(e,r),r,o)})),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},hL=e=>xe(e)?{value:e.split(/[ ,]/),valid:!0}:On(e,xe)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},P_=(e,t)=>e+(fs(t.message)?"":`. ${t.message}`),L_=e=>e.valid,Mh=(e,t,n="")=>{const o=t(e);return yn(o)?o?{value:e,valid:!0}:{valid:!1,message:n}:o},Wi=e=>e.readonly,bL=["design","readonly"],M_=(e,t,n,o)=>{const r=n[t.get()],s=n[o];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${o}:`,a)}r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&((a,i)=>{const l=S.fromDom(a.getBody());i?(a.readonly=!0,a.hasEditableRoot()&&(l.dom.contentEditable="true"),Fx(a)):(a.readonly=!1,jx(a))})(e,s.editorReadOnly),t.set(o),((a,i)=>{a.dispatch("SwitchMode",{mode:i})})(e,o)},yL=e=>{const t=Qt("design"),n=Qt({design:{activate:Ee,deactivate:Ee,editorReadOnly:!1},readonly:{activate:Ee,deactivate:Ee,editorReadOnly:!0}});return(o=>{const r=a=>{Wi(o)&&(i=>xt(i,(l=>l.type==="characterData"||l.type==="childList")))(a)&&(i=>{const l=i.undoManager.add();te(l)&&(i.undoManager.undo(),i.undoManager.reset())})(o)},s=new MutationObserver(r);o.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",(a=>{Wi(o)&&a.preventDefault()})),o.on("BeforeExecCommand",(a=>{a.command!=="Undo"&&a.command!=="Redo"||!Wi(o)||a.preventDefault()})),o.on("compositionstart",(()=>{Wi(o)&&s.observe(o.getBody(),{characterData:!0,childList:!0,subtree:!0})})),o.on("compositionend",(()=>{if(Wi(o)){const a=s.takeRecords();r(a)}s.disconnect()}))})(e),(o=>{(r=>{r.serializer?Ux(r):r.on("PreInit",(()=>{Ux(r)}))})(o),(r=>{r.on("ShowCaret ObjectSelected",(s=>{ss(r)&&s.preventDefault()})),r.on("DisabledStateChange",(s=>{s.isDefaultPrevented()||zx(r,s.state)}))})(o)})(e),{isReadOnly:()=>Wi(e),set:o=>((r,s,a,i)=>{if(!(i===a.get()||r.initialized&&ss(r))){if(!Oe(s,i))throw new Error(`Editor mode '${i}' is invalid`);r.initialized?M_(r,a,s,i):r.on("init",(()=>M_(r,a,s,i)))}})(e,n.get(),t,o),get:()=>t.get(),register:(o,r)=>{n.set(((s,a,i)=>{if(we(bL,a))throw new Error(`Cannot override default mode ${a}`);return{...s,[a]:{...i,deactivate:()=>{try{i.deactivate()}catch(l){console.error(`problem while deactivating editor mode ${a}:`,l)}}}}})(n.get(),o,r))}}},Ih=E.each,Fh=E.explode,vL={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},I_=E.makeMap("alt,ctrl,shift,meta,access"),CL=e=>{const t={},n=p.os.isMacOS()||p.os.isiOS();Ih(Fh(e.toLowerCase(),"+"),(s=>{(a=>a in I_)(s)?t[s]=!0:/^[0-9]{2,}$/.test(s)?t.keyCode=parseInt(s,10):(t.charCode=s.charCodeAt(0),t.keyCode=vL[s]||s.toUpperCase().charCodeAt(0))}));const o=[t.keyCode];let r;for(r in I_)t[r]?o.push(r):t[r]=!1;return t.id=o.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class F_{editor;shortcuts={};pendingPatterns=[];constructor(t){this.editor=t;const n=this;t.on("keyup keypress keydown",(o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(Ih(n.shortcuts,(r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),o.type==="keydown"&&n.executeShortcutAction(r))})),n.matchShortcut(o,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&o.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))}))}add(t,n,o,r){const s=this,a=s.normalizeCommandFunc(o);return Ih(Fh(E.trim(t)),(i=>{const l=s.createShortcut(i,n,a,r);s.shortcuts[l.id]=l})),!0}remove(t){const n=this.createShortcut(t);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(t){const n=this,o=t;return typeof o=="string"?()=>{n.editor.execCommand(o,!1,null)}:E.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(t,n,o,r){const s=E.map(Fh(t,">"),CL);return s[s.length-1]=E.extend(s[s.length-1],{func:o,scope:r||this.editor}),E.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!!n&&n.ctrl===t.ctrlKey&&n.meta===t.metaKey&&n.alt===t.altKey&&n.shift===t.shiftKey&&!!(t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode)&&(t.preventDefault(),!0)}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const xL=()=>{const e=(()=>{const t={},n={},o={},r={},s={},a={},i={},l={},c={},d=(f,h)=>(g,b)=>{f[g.toLowerCase()]={...b,type:h}};return{addButton:d(t,"button"),addGroupToolbarButton:d(t,"grouptoolbarbutton"),addToggleButton:d(t,"togglebutton"),addMenuButton:d(t,"menubutton"),addSplitButton:d(t,"splitbutton"),addMenuItem:d(n,"menuitem"),addNestedMenuItem:d(n,"nestedmenuitem"),addToggleMenuItem:d(n,"togglemenuitem"),addAutocompleter:d(o,"autocompleter"),addContextMenu:d(s,"contextmenu"),addContextToolbar:d(a,"contexttoolbar"),addContextForm:(m=a,(f,h)=>{m[f.toLowerCase()]={type:"contextform",...h}}),addSidebar:d(l,"sidebar"),addView:d(c,"views"),addIcon:(f,h)=>r[f.toLowerCase()]=h,addContext:(f,h)=>i[f.toLowerCase()]=h,getAll:()=>({buttons:t,menuItems:n,icons:r,popups:o,contextMenus:s,contextToolbars:a,sidebars:l,views:c,contexts:i})};var m})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},za=At.DOM,j_=E.extend,wL=E.each;class Xu{baseUri;id;editorUid;plugins={};documentBaseURI;baseURI;contentCSS=[];contentStyles=[];ui;mode;options;editorUpload;userLookup;shortcuts;loadedCSS={};editorCommands;suffix;editorManager;hidden;inline;hasVisual;isNotDirty=!1;annotator;bodyElement;bookmark;composing=!1;container;contentAreaContainer;contentDocument;contentWindow;delegates;destroyed=!1;dom;editorContainer;eventRoot;formatter;formElement;formEventDelegate;hasHiddenInput=!1;iframeElement=null;iframeHTML;initialized=!1;notificationManager;orgDisplay;orgVisibility;parser;quirks;readonly=!1;removed=!1;schema;selection;serializer;startContent="";targetElm;theme;model;undoManager;windowManager;licenseKeyManager;_beforeUnload;_eventDispatcher;_nodeChangeDispatcher;_pendingNativeEvents=[];_selectionOverrides;_skinLoaded=!1;_editableRoot=!0;bindPendingEventDelegates;toggleNativeEvent;unbindAllNativeEvents;fire;dispatch;on;off;once;hasEventListeners;constructor(t,n,o){this.editorManager=o,j_(this,B_);const r=this;this.id=t,this.editorUid=_c(),this.hidden=!1;const s=((h,g)=>{const b=tm(g);return oL(k_||ZP,k_,b,h,b)})(o.defaultOptions,n);this.options=((h,g,b=g)=>{const y={},v={},_=(D,A,R)=>{const P=Mh(A,R);return L_(P)?(v[D]=P.value,!0):(console.warn(P_(`Invalid value passed for the ${D} option`,P)),!1)},N=D=>Oe(y,D);return{register:(D,A)=>{const R=(I=>xe(I.processor))(A)?(I=>{const M=(()=>{switch(I){case"array":return re;case"boolean":return yn;case"function":return pt;case"number":return x;case"object":return He;case"string":return xe;case"string[]":return hL;case"object[]":return W=>On(W,He);case"regexp":return W=>So(W,RegExp);default:return jt}})();return W=>Mh(W,M,`The value must be a ${I}.`)})(A.processor):A.processor,P=((I,M,W)=>{if(!Lt(M)){const B=Mh(M,W);if(L_(B))return B.value;console.error(P_(`Invalid default value passed for the "${I}" option`,B))}})(D,A.default,R);y[D]={...A,default:P,processor:R},Ot(v,D).orThunk((()=>Ot(g,D))).each((I=>_(D,I,R)))},isRegistered:N,get:D=>Ot(v,D).orThunk((()=>Ot(y,D).map((A=>A.default)))).getOrUndefined(),set:(D,A)=>{if(N(D)){const R=y[D];return R.immutable?(console.error(`"${D}" is an immutable option and cannot be updated`),!1):_(D,A,R.processor)}return console.warn(`"${D}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:D=>{const A=N(D);return A&&delete v[D],A},isSet:D=>Oe(v,D),debug:()=>{try{console.log(JSON.parse(JSON.stringify(b,((D,A)=>yn(A)||x(A)||xe(A)||Xe(A)||re(A)||Re(A)?A:Object.prototype.toString.call(A)))))}catch(D){console.error(D)}}}})(0,s,n),(h=>{const g=h.options.register;g("id",{processor:"string",default:h.id}),g("selector",{processor:"string"}),g("target",{processor:"object"}),g("suffix",{processor:"string"}),g("cache_suffix",{processor:"string"}),g("base_url",{processor:"string"}),g("referrer_policy",{processor:"string",default:""}),g("crossorigin",{processor:"function",default:ie(void 0)}),g("language_load",{processor:"boolean",default:!0}),g("inline",{processor:"boolean",default:!1}),g("iframe_attrs",{processor:"object",default:{}}),g("doctype",{processor:"string",default:"<!DOCTYPE html>"}),g("document_base_url",{processor:"string",default:h.editorManager.documentBaseURL}),g("body_id",{processor:B0(h,"tinymce"),default:"tinymce"}),g("body_class",{processor:B0(h),default:""}),g("content_security_policy",{processor:"string",default:""}),g("br_in_pre",{processor:"boolean",default:!0}),g("forced_root_block",{processor:b=>{const y=xe(b)&&ko(b);return y?{value:b,valid:y}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),g("forced_root_block_attrs",{processor:"object",default:{}}),g("newline_behavior",{processor:b=>{const y=we(["block","linebreak","invert","default"],b);return y?{value:b,valid:y}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),g("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),g("no_newline_selector",{processor:"string",default:""}),g("keep_styles",{processor:"boolean",default:!0}),g("end_container_on_empty_block",{processor:b=>yn(b)||xe(b)?{valid:!0,value:b}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),g("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),g("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),g("font_size_classes",{processor:"string",default:""}),g("automatic_uploads",{processor:"boolean",default:!0}),g("images_reuse_filename",{processor:"boolean",default:!1}),g("images_replace_blob_uris",{processor:"boolean",default:!0}),g("icons",{processor:"string",default:""}),g("icons_url",{processor:"string",default:""}),g("images_upload_url",{processor:"string",default:""}),g("images_upload_base_path",{processor:"string",default:""}),g("images_upload_credentials",{processor:"boolean",default:!1}),g("images_upload_handler",{processor:"function"}),g("language",{processor:"string",default:"en"}),g("language_url",{processor:"string",default:""}),g("entity_encoding",{processor:"string",default:"named"}),g("indent",{processor:"boolean",default:!0}),g("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_use_margin",{processor:"boolean",default:!1}),g("indentation",{processor:"string",default:"40px"}),g("content_css",{processor:b=>{const y=b===!1||xe(b)||On(b,xe);return y?xe(b)?{value:qe(b.split(","),Er),valid:y}:re(b)?{value:b,valid:y}:b===!1?{value:[],valid:y}:{value:b,valid:y}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:sf(h)?[]:["default"]}),g("content_style",{processor:"string"}),g("content_css_cors",{processor:"boolean",default:!1}),g("font_css",{processor:b=>{const y=xe(b)||On(b,xe);return y?{value:re(b)?b:qe(b.split(","),Er),valid:y}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),g("extended_mathml_attributes",{processor:"string[]"}),g("extended_mathml_elements",{processor:"string[]"}),g("inline_boundaries",{processor:"boolean",default:!0}),g("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),g("object_resizing",{processor:b=>{const y=yn(b)||xe(b);return y?b===!1||tf.isiPhone()||tf.isiPad()?{value:"",valid:y}:{value:b===!0?"table,img,figure.image,div,video,iframe":b,valid:y}:{valid:!1,message:"Must be boolean or a string"}},default:!tA}),g("resize_img_proportional",{processor:"boolean",default:!0}),g("event_root",{processor:"string"}),g("service_message",{processor:"string"}),g("onboarding",{processor:"boolean",default:!0}),g("tiny_cloud_entry_url",{processor:"string"}),g("theme",{processor:b=>b===!1||xe(b)||pt(b),default:"silver"}),g("theme_url",{processor:"string"}),g("formats",{processor:"object"}),g("format_empty_lines",{processor:"boolean",default:!1}),g("format_noneditable_selector",{processor:"string",default:""}),g("preview_styles",{processor:b=>{const y=b===!1||xe(b);return y?{value:b===!1?"":b,valid:y}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),g("custom_ui_selector",{processor:"string",default:""}),g("hidden_input",{processor:"boolean",default:!0}),g("submit_patch",{processor:"boolean",default:!0}),g("encoding",{processor:"string"}),g("add_form_submit_trigger",{processor:"boolean",default:!0}),g("add_unload_trigger",{processor:"boolean",default:!0}),g("custom_undo_redo_levels",{processor:"number",default:0}),g("disable_nodechange",{processor:"boolean",default:!1}),g("disabled",{processor:b=>yn(b)?(h.initialized&&xd(h)!==b&&Promise.resolve().then((()=>{((y,v)=>{y.dispatch("DisabledStateChange",{state:v})})(h,b)})),{valid:!0,value:b}):{valid:!1,message:"The value must be a boolean."},default:!1}),g("readonly",{processor:"boolean",default:!1}),g("editable_root",{processor:"boolean",default:!0}),g("plugins",{processor:"string[]",default:[]}),g("external_plugins",{processor:"object"}),g("forced_plugins",{processor:"string[]"}),g("model",{processor:"string",default:h.hasPlugin("rtc")?"plugin":"dom"}),g("model_url",{processor:"string"}),g("block_unsupported_drop",{processor:"boolean",default:!0}),g("visual",{processor:"boolean",default:!0}),g("visual_table_class",{processor:"string",default:"mce-item-table"}),g("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),g("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(h.hasPlugin("help")?". Press ALT-0 for help.":"")}),g("setup",{processor:"function"}),g("init_instance_callback",{processor:"function"}),g("url_converter",{processor:"function",default:h.convertURL}),g("url_converter_scope",{processor:"object",default:h}),g("urlconverter_callback",{processor:"function"}),g("allow_conditional_comments",{processor:"boolean",default:!1}),g("allow_html_data_urls",{processor:"boolean",default:!1}),g("allow_svg_data_urls",{processor:"boolean"}),g("allow_html_in_named_anchor",{processor:"boolean",default:!1}),g("allow_html_in_comments",{processor:"boolean",default:!1}),g("allow_script_urls",{processor:"boolean",default:!1}),g("allow_unsafe_link_target",{processor:"boolean",default:!1}),g("allow_mathml_annotation_encodings",{processor:b=>{const y=On(b,xe);return y?{value:b,valid:y}:{valid:!1,message:"Must be an array of strings."}},default:[]}),g("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),g("fix_list_elements",{processor:"boolean",default:!1}),g("preserve_cdata",{processor:"boolean",default:!1}),g("remove_trailing_brs",{processor:"boolean",default:!0}),g("pad_empty_with_br",{processor:"boolean",default:!1}),g("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),g("element_format",{processor:"string",default:"html"}),g("entities",{processor:"string"}),g("schema",{processor:"string",default:"html5"}),g("convert_urls",{processor:"boolean",default:!0}),g("relative_urls",{processor:"boolean",default:!0}),g("remove_script_host",{processor:"boolean",default:!0}),g("custom_elements",{processor:vd}),g("extended_valid_elements",{processor:"string"}),g("invalid_elements",{processor:"string"}),g("invalid_styles",{processor:vd}),g("valid_children",{processor:"string"}),g("valid_classes",{processor:vd}),g("valid_elements",{processor:"string"}),g("valid_styles",{processor:vd}),g("verify_html",{processor:"boolean",default:!0}),g("auto_focus",{processor:b=>xe(b)||b===!0}),g("browser_spellcheck",{processor:"boolean",default:!1}),g("protect",{processor:"array"}),g("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),g("deprecation_warnings",{processor:"boolean",default:!0}),g("a11y_advanced_options",{processor:"boolean",default:!1}),g("api_key",{processor:"string"}),g("license_key",{processor:"string"}),g("paste_block_drop",{processor:"boolean",default:!1}),g("paste_data_images",{processor:"boolean",default:!0}),g("paste_preprocess",{processor:"function"}),g("paste_postprocess",{processor:"function"}),g("paste_webkit_styles",{processor:"string",default:"none"}),g("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),g("paste_merge_formats",{processor:"boolean",default:!0}),g("smart_paste",{processor:"boolean",default:!0}),g("paste_as_text",{processor:"boolean",default:!1}),g("paste_tab_spaces",{processor:"number",default:4}),g("text_patterns",{processor:b=>On(b,He)||b===!1?{value:k0(b===!1?[]:b),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),g("text_patterns_lookup",{processor:b=>{return pt(b)?{value:(y=b,v=>{const _=y(v);return k0(_)}),valid:!0}:{valid:!1,message:"Must be a single function"};var y},default:b=>[]}),g("noneditable_class",{processor:"string",default:"mceNonEditable"}),g("editable_class",{processor:"string",default:"mceEditable"}),g("noneditable_regexp",{processor:b=>On(b,O0)?{value:b,valid:!0}:O0(b)?{value:[b],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),g("table_tab_navigation",{processor:"boolean",default:!0}),g("highlight_on_focus",{processor:"boolean",default:!0}),g("xss_sanitization",{processor:"boolean",default:!0}),g("details_initial_state",{processor:b=>{const y=we(["inherited","collapsed","expanded"],b);return y?{value:b,valid:y}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("details_serialized_state",{processor:b=>{const y=we(["inherited","collapsed","expanded"],b);return y?{value:b,valid:y}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("init_content_sync",{processor:"boolean",default:!1}),g("newdocument_content",{processor:"string",default:""}),g("sandbox_iframes",{processor:"boolean",default:!0}),g("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),g("convert_unsafe_embeds",{processor:"boolean",default:!0}),g("user_id",{processor:"string",default:"Anonymous"}),g("fetch_users",{processor:b=>b===void 0?{valid:!0,value:void 0}:pt(b)?{valid:!0,value:b}:{valid:!1,message:"fetch_users must be a function that returns a Promise<ExpectedUser[]>"}}),h.on("ScriptsLoaded",(()=>{g("directionality",{processor:"string",default:ur.isRtl()?"rtl":void 0}),g("placeholder",{processor:"string",default:nA.getAttrib(h.getElement(),"placeholder")})})),g("lists_indent_on_tab",{processor:"boolean",default:!0}),g("list_max_depth",{processor:b=>{const y=x(b);if(y){if(b<0)throw new Error("list_max_depth cannot be set to lower than 0");return{value:b,valid:y}}return{valid:!1,message:"Must be a number"}}})})(r),this.userLookup=(h=>{const g=new Map,b=new Map,y=N=>k.from(g.get(N)),v=(N,D)=>k.from(b.get(N)).each((({reject:A})=>{A(D),b.delete(N)})),_=ST(h);return Object.freeze({userId:_,fetchUsers:N=>{const D=ET(h);if(!Array.isArray(N))return{};if(!D)return wn(N,(R=>Promise.resolve({id:R,name:R,avatar:Rh({id:R,name:R})})));const A=ho(De(N,(R=>!y(R).isSome())));return K(A,(R=>{const P=new Promise(((I,M)=>{b.set(R,{resolve:I,reject:M})}));((I,M)=>{g.set(M,I)})(P,R)})),A.length>0&&D(A).then(JP).then((R=>{const P=new Set(qe(R,(I=>I.id)));K(R,(I=>((M,W)=>k.from(b.get(M)).each((({resolve:B})=>{B(W),b.delete(M)})))(I.id,I))),K(A,(I=>{P.has(I)||v(I,new Error(`User ${I} not found`))}))})).catch((R=>{K(A,(P=>v(P,R instanceof Error?R:new Error("Network error"))))})),Yt(N,((R,P)=>(R[P]=y(P).getOr(Promise.resolve({id:P,name:P,avatar:Rh({id:P,name:P})})),R)),{})}})})(this);const a=this.options.get;a("deprecation_warnings")&&((h,g)=>{((b,y)=>{const v=AR(b),_=DR(y),N=_.length>0,D=v.length>0,A=y.theme==="mobile";if(N||D||A){const P=A?`

Themes:
- mobile`:"",I=N?`

Plugins:
- ${_.join(`
- `)}`:"",M=D?`

Options:
- ${v.join(`
- `)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 8.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/8/migration-from-7x/ for more information."+P+I+M)}})(h,g),((b,y)=>{const v=TR(b),_=RR(y),N=_.length>0,D=v.length>0;if(N||D){const R=N?`

Plugins:
- ${_.map(OR).join(`
- `)}`:"",P=D?`

Options:
- ${v.join(`
- `)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+R+P)}})(h,g)})(n,s);const i=a("suffix");i&&(o.suffix=i),this.suffix=o.suffix;const l=a("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const c=nf(r);c&&(dr.ScriptLoader._setReferrerPolicy(c),At.DOM.styleSheetLoader._setReferrerPolicy(c)),dr.ScriptLoader._setCrossOrigin((h=>of(r)(h,"script"))),At.DOM.styleSheetLoader._setCrossOrigin((h=>of(r)(h,"stylesheet")));const d=W0(r);te(d)&&At.DOM.styleSheetLoader._setContentCssCors(d),Mn.languageLoad=a("language_load"),Mn.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new Jo(P0(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=sf(r),this.hasVisual=WA(r),this.shortcuts=new F_(this),this.editorCommands=new D_(this),fL(this);const m=a("cache_suffix");m&&(p.cacheSuffix=m.replace(/^[\?\&]+/,"")),this.ui={registry:xL(),styleSheetLoader:void 0,show:Ee,hide:Ee,setEnabled:Ee,isEnabled:jt},this.mode=yL(r),Object.defineProperty(this,"editorUid",{writable:!1,configurable:!1,enumerable:!0}),o.dispatch("SetupEditor",{editor:this});const f=KA(r);pt(f)&&f.call(r,r)}render(){(t=>{const n=t.id;ur.setCode(j0(t));const o=()=>{Fa.unbind(window,"ready",o),t.render()};if(!pa.Event.domLoaded)return void Fa.bind(window,"ready",o);if(!t.getElement())return;const r=S.fromDom(t.getElement()),s=en(r);t.on("remove",(()=>{xr(r.dom.attributes,(i=>vt(r,i.name))),Qe(r,s)})),t.ui.styleSheetLoader=((i,l)=>vb.forElement(i,{contentCssCors:W0(l),referrerPolicy:nf(l)}))(r,t),sf(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const a=t.getElement().form||Fa.getParent(n,"form");a&&(t.formElement=a,MA(t)&&!gm(t.getElement())&&(Fa.insertAfter(Fa.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=i=>{t.dispatch(i.type,i)},Fa.bind(a,"submit reset",t.formEventDelegate),t.on("reset",(()=>{t.resetContent()})),!IA(t)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),a._mceOldSubmit(a)))),t.windowManager=Dx(t),t.notificationManager=Tx(t),(i=>i.options.get("encoding")==="xml")(t)&&t.on("GetContent",(i=>{i.save&&(i.content=Fa.encode(i.content))})),FA(t)&&t.on("submit",(()=>{t.initialized&&t.save()})),jA(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),YP(t,t.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return Ti(this)}translate(t){return ur.translate(t)}getParam(t,n,o){const r=this.options;return r.isRegistered(t)||(te(o)?r.register(t,{processor:o,default:n}):r.register(t,{processor:jt,default:n})),r.isSet(t)||Lt(n)?r.get(t):n}hasPlugin(t,n){return!(!we(Pl(this),t)||n&&Pi.get(t)===void 0)}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,o){this.editorCommands.addCommand(t,n,o)}addQueryStateHandler(t,n,o){this.editorCommands.addQueryStateHandler(t,n,o)}addQueryValueHandler(t,n,o){this.editorCommands.addQueryValueHandler(t,n,o)}addShortcut(t,n,o,r){this.shortcuts.add(t,n,o,r)}execCommand(t,n,o,r){return this.editorCommands.execCommand(t,n,o,r)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(za.show(t.getContainer()),za.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(za.hide(t.getContainer()),za.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,o=n.getElement();if(!n.removed&&o){const r={...t,load:!0},s=gm(o)?o.value:o.innerHTML;n.setContent(s,r),r.no_events||n.dispatch("LoadContent",{...r,element:o})}}save(t={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r={...t,save:!0,element:o};let s=n.getContent(r);const a={...r,content:s};if(a.no_events||n.dispatch("SaveContent",a),a.format==="raw"&&n.dispatch("RawSaveContent",a),s=a.content,gm(o))o.value=s;else{!t.is_removing&&n.inline||(o.innerHTML=s);const i=za.getParent(n.id,"form");i&&wL(i.elements,(l=>l.name!==n.id||(l.value=s,!1)))}return a.element=r.element=o=null,a.set_dirty!==!1&&n.setDirty(!1),s}setContent(t,n){Kp(this,t,n)}getContent(t){return((n,o={})=>{const r=((s,a)=>({...s,format:a,get:!0,getInner:!0}))(o,o.format?o.format:"html");return X1(n,r).fold(gt,(s=>{const a=((i,l)=>Vp(i).editor.getContent(l))(n,s);return Y1(n,a,s)}))})(this,t)}insertContent(t,n){n&&(t=j_({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?Kp(this,this.startContent,{initial:!0,format:"raw"}):Kp(this,t,{initial:!0}),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||za.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=za.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){const t=this.getDoc();return this.bodyElement??t?.body??null}convertURL(t,n,o){const r=this,s=r.options.get,a=YA(r);if(pt(a))return a.call(r,t,o,!0,n);if(!s("convert_urls")||o==="link"||He(o)&&o.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0)return t;const i=new Jo(t);return i.protocol!=="http"&&i.protocol!=="https"&&i.protocol!==""?t:s("relative_urls")?r.documentBaseURI.toRelative(t):t=r.documentBaseURI.toAbsolute(t,s("remove_script_host"))}addVisual(t){((n,o)=>{((r,s)=>{ln(r).editor.addVisual(s)})(n,o)})(this,t)}setEditableRoot(t){((n,o)=>{n._editableRoot!==o&&(n._editableRoot=o,ss(n)||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),((r,s)=>{r.dispatch("EditableRootStateChange",{state:s})})(n,o))})(this,t)}hasEditableRoot(){return this._editableRoot}remove(){(t=>{if(!t.removed){const{_selectionOverrides:n,editorUpload:o}=t,r=t.getBody(),s=t.getElement();r&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&te(s?.nextSibling)&&su.remove(s.nextSibling),(a=>{a.dispatch("remove")})(t),t.editorManager.remove(t),!t.inline&&r&&(a=>{su.setStyle(a.id,"display",a.orgDisplay)})(t),(a=>{a.dispatch("detach")})(t),su.remove(t.getContainer()),au(n),au(o),t.destroy()}})(this)}destroy(t){((n,o)=>{const{selection:r,dom:s}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),au(r),au(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),su.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;if(l){const c=l.dom;i.selection=l.win=l.dom=c.doc=null}})(n),n.destroyed=!0):n.remove())})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Vi=At.DOM,Yu=E.each;let Gu,z_=!1,Jn=[];const Qu=e=>{const t=e.type;Yu(Fs.get(),(n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}}))},U_=e=>{if(e!==z_){const t=At.DOM;e?(t.bind(window,"resize",Qu),t.bind(window,"scroll",Qu)):(t.unbind(window,"resize",Qu),t.unbind(window,"scroll",Qu)),z_=e}},H_=e=>{const t=Jn;return Jn=De(Jn,(n=>e!==n)),Fs.activeEditor===e&&(Fs.activeEditor=Jn.length>0?Jn[0]:null),Fs.focusedEditor===e&&(Fs.focusedEditor=null),t.length!==Jn.length},SL=document.compatMode!=="CSS1Compat",Fs={...Lh,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,pageUid:_c(),majorVersion:"8",minorVersion:"2.0",releaseDate:"2025-10-23",i18n:ur,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",o=Jo.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)t=r.base||r.baseURL,n=r.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(l==="")continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){c.indexOf(".min")!==-1&&(n=".min"),t=l.substring(0,l.lastIndexOf("/"));break}}if(!t&&document.currentScript){const i=document.currentScript.src;i.indexOf(".min")!==-1&&(n=".min"),t=i.substring(0,i.lastIndexOf("/"))}}var s;e.baseURL=new Jo(o).toAbsolute(t),e.documentBaseURL=o,e.baseURI=new Jo(e.baseURL),e.suffix=n,(s=e).on("AddEditor",be(JT,s)),s.on("RemoveEditor",be(ZT,s)),K(["majorVersion","minorVersion","releaseDate","pageUid","_addLicenseKeyManager"],(a=>Object.defineProperty(e,a,{writable:!1,configurable:!1,enumerable:!0})))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const o=e.plugin_base_urls;o!==void 0&&wt(o,((r,s)=>{Mn.PluginManager.urls[s]=r}))},init(e){const t=this;let n;const o=E.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=a=>{n=a};const s=()=>{let a=0;const i=[];let l;Vi.unbind(window,"ready",s),(()=>{const c=e.onpageload;c&&c.apply(t,[])})(),l=ho((c=>p.browser.isIE()||p.browser.isEdge()?(cu("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/8/support/#supportedwebbrowsers"),[]):SL?(cu("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):xe(c.selector)?Vi.select(c.selector):te(c.target)?[c.target]:[])(e)),E.each(l,(c=>{var d;(d=t.get(c.id))&&d.initialized&&!(d.getContainer()||d.getBody()).parentNode&&(H_(d),d.unbindAllNativeEvents(),d.destroy(!0),d.removed=!0)})),l=E.grep(l,(c=>!t.get(c.id))),l.length===0?r([]):Yu(l,(c=>{((d,m)=>d.inline&&m.tagName.toLowerCase()in o)(e,c)?cu("Could not initialize inline editor on invalid inline target element",c):((d,m,f)=>{const h=new Xu(d,m,t);i.push(h),h.on("init",(()=>{++a===l.length&&r(i)})),h.targetElm=h.targetElm||f,h.render()})((d=>{let m=d.id;return m||(m=Ot(d,"name").filter((f=>!Vi.get(f))).getOrThunk(Vi.uniqueId),d.setAttribute("id",m)),m})(c),e,c)}))};return Vi.bind(window,"ready",s),new Promise((a=>{n?a(n):r=i=>{a(i)}}))},get(e){return arguments.length===0?Jn.slice(0):xe(e)?Ht(Jn,(t=>t.id===e)).getOr(null):x(e)&&Jn[e]?Jn[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&Jn.push(e),U_(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),Gu||(Gu=o=>{const r=t.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",Gu))),e},createEditor(e,t){return this.add(new Xu(e,t,this))},remove(e){const t=this;let n;if(e){if(!xe(e))return n=e,Xe(t.get(n.id))?null:(H_(n)&&t.dispatch("RemoveEditor",{editor:n}),Jn.length===0&&window.removeEventListener("beforeunload",Gu),n.remove(),U_(Jn.length>0),n);Yu(Vi.select(e),(o=>{n=t.get(o.id),n&&t.remove(n)}))}else for(let o=Jn.length-1;o>=0;o--)t.remove(Jn[o])},execCommand(e,t,n){const o=this,r=He(n)?n.id??n.index:n;switch(e){case"mceAddEditor":if(!o.get(r)){const s=n.options;new Xu(r,s,o).render()}return!0;case"mceRemoveEditor":{const s=o.get(r);return s&&s.remove(),!0}case"mceToggleEditor":{const s=o.get(r);return s?(s.isHidden()?s.show():s.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return!!o.activeEditor&&o.activeEditor.execCommand(e,t,n)},triggerSave:()=>{Yu(Jn,(e=>{e.save()}))},addI18n:(e,t)=>{ur.add(e,t)},translate:e=>ur.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Jo(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Jo(this.baseURL)},_addLicenseKeyManager:e=>Gp.add(e)};Fs.setup();const EL=(()=>{const e=$o();return{FakeClipboardItem:t=>({items:t,types:un(t),getType:n=>Ot(t,n).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),$_=Math.min,Ki=Math.max,Ju=Math.round,q_=(e,t,n)=>{let o=t.x,r=t.y;const s=e.w,a=e.h,i=t.w,l=t.h,c=(n||"").split("");return c[0]==="b"&&(r+=l),c[1]==="r"&&(o+=i),c[0]==="c"&&(r+=Ju(l/2)),c[1]==="c"&&(o+=Ju(i/2)),c[3]==="b"&&(r-=a),c[4]==="r"&&(o-=s),c[3]==="c"&&(r-=Ju(a/2)),c[4]==="c"&&(o-=Ju(s/2)),Xi(o,r,s,a)},Xi=(e,t,n,o)=>({x:e,y:t,w:n,h:o}),kL={inflate:(e,t,n)=>Xi(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:q_,findBestRelativePosition:(e,t,n,o)=>{for(let r=0;r<o.length;r++){const s=q_(e,t,o[r]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return o[r]}return null},intersect:(e,t)=>{const n=Ki(e.x,t.x),o=Ki(e.y,t.y),r=$_(e.x+e.w,t.x+t.w),s=$_(e.y+e.h,t.y+t.h);return r-n<0||s-o<0?null:Xi(n,o,r-n,s-o)},clamp:(e,t,n)=>{let o=e.x,r=e.y,s=e.x+e.w,a=e.y+e.h;const i=t.x+t.w,l=t.y+t.h,c=Ki(0,t.x-o),d=Ki(0,t.y-r),m=Ki(0,s-i),f=Ki(0,a-l);return o+=c,r+=d,n&&(s+=c,a+=d,o-=m,r-=f),s-=m,a-=f,Xi(o,r,s-o,a-r)},create:Xi,fromClientRect:e=>Xi(e.left,e.top,e.width,e.height)},_L=(()=>{const e={},t={},n={};return{load:(o,r)=>{const s=`Script at URL "${r}" failed to load`,a=`Script at URL "${r}" did not call \`tinymce.Resource.add('${o}', data)\` within 1 second`;if(e[o]!==void 0)return e[o];{const i=new Promise(((l,c)=>{const d=((m,f,h=1e3)=>{let g=!1,b=null;const y=N=>(...D)=>{g||(g=!0,b!==null&&(window.clearTimeout(b),b=null),N.apply(null,D))},v=y(m),_=y(f);return{start:(...N)=>{g||b!==null||(b=window.setTimeout((()=>_.apply(null,N)),h))},resolve:v,reject:_}})(l,c);t[o]=d.resolve,dr.ScriptLoader.loadScript(r).then((()=>d.start(a)),(()=>d.reject(s)))}));return e[o]=i,i}},add:(o,r)=>{t[o]!==void 0&&(t[o](r),delete t[o]),e[o]=Promise.resolve(r),n[o]=r},has:o=>o in n,get:o=>n[o],unload:o=>{delete e[o],delete n[o]}}})();let wc;try{const e="__storage_test__";wc=window.localStorage,wc.setItem(e,e),wc.removeItem(e)}catch{wc=(()=>{let e={},t=[];const n={getItem:o=>e[o]||null,setItem:(o,r)=>{t.push(o),e[o]=String(r)},key:o=>t[o],removeItem:o=>{t=t.filter((r=>r===o)),delete e[o]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})()}const NL={geom:{Rect:kL},util:{Delay:Lo,Tools:E,VK:de,URI:Jo,EventDispatcher:Ph,Observable:Lh,I18n:ur,LocalStorage:wc,ImageUploader:e=>{const t=$x(),n=Wx(e,t);return{upload:(o,r=!0)=>n.upload(o,r?qx(e):void 0)}}},dom:{EventUtils:pa,TreeWalker:an,TextSeeker:ha,DOMUtils:At,ScriptLoader:dr,RangeUtils:Lr,Serializer:_x,StyleSheetLoader:yb,ControlSelection:nv,BookmarkManager:Ni,Selection:kx,Event:pa.Event},html:{Styles:Pm,Entities:fa,Node:An,Schema:ws,DomParser:Oi,Writer:Dv,Serializer:Ds},Env:p,AddOnManager:Mn,Annotator:Vy,Formatter:Xx,UndoManager:Gx,EditorCommands:D_,WindowManager:Dx,NotificationManager:Tx,EditorObservable:B_,Shortcuts:F_,Editor:Xu,FocusManager:Qy,EditorManager:Fs,DOM:At.DOM,ScriptLoader:dr.ScriptLoader,PluginManager:Pi,ThemeManager:Aa,ModelManager:Bi,IconManager:iu,Resource:_L,FakeClipboard:EL,trim:E.trim,isArray:E.isArray,is:E.is,toArray:E.toArray,makeMap:E.makeMap,each:E.each,map:E.map,grep:E.grep,inArray:E.inArray,extend:E.extend,walk:E.walk,resolve:E.resolve,explode:E.explode,_addCacheSuffix:E._addCacheSuffix},W_=E.extend(Fs,NL);(e=>{window.tinymce=e,window.tinyMCE=e})(W_),(e=>{if(typeof module=="object")try{module.exports=e}catch{}})(W_)})();/*! jQuery v3.7.1 | (c) OpenJS Foundation and other contributors | jquery.org/license */(function(ge,Ve){"use strict";typeof module=="object"&&typeof module.exports=="object"?module.exports=ge.document?Ve(ge,!0):function(Ke){if(!Ke.document)throw new Error("jQuery requires a window with a document");return Ve(Ke)}:Ve(ge)})(typeof window<"u"?window:this,function(ge,Ve){"use strict";var Ke=[],We=Object.getPrototypeOf,it=Ke.slice,Xt=Ke.flat?function(u){return Ke.flat.call(u)}:function(u){return Ke.concat.apply([],u)},Dn=Ke.push,tn=Ke.indexOf,Kn={},wo=Kn.toString,Rn=Kn.hasOwnProperty,So=Rn.toString,xe=So.call(Object),He={},Re=function(u){return typeof u=="function"&&typeof u.nodeType!="number"&&typeof u.item!="function"},re=function(u){return u!=null&&u===u.window},Xe=ge.document,yn={type:!0,src:!0,nonce:!0,noModule:!0};function Lt(u,p,C){var w,T,E=(C=C||Xe).createElement("script");if(E.text=u,p)for(w in yn)(T=p[w]||p.getAttribute&&p.getAttribute(w))&&E.setAttribute(w,T);C.head.appendChild(E).parentNode.removeChild(E)}function kt(u){return u==null?u+"":typeof u=="object"||typeof u=="function"?Kn[wo.call(u)]||"object":typeof u}var te="3.7.1",pt=/HTML$/i,x=function(u,p){return new x.fn.init(u,p)};function On(u){var p=!!u&&"length"in u&&u.length,C=kt(u);return!Re(u)&&!re(u)&&(C==="array"||p===0||typeof p=="number"&&0<p&&p-1 in u)}function Ee(u,p){return u.nodeName&&u.nodeName.toLowerCase()===p.toLowerCase()}x.fn=x.prototype={jquery:te,constructor:x,length:0,toArray:function(){return it.call(this)},get:function(u){return u==null?it.call(this):u<0?this[u+this.length]:this[u]},pushStack:function(u){var p=x.merge(this.constructor(),u);return p.prevObject=this,p},each:function(u){return x.each(this,u)},map:function(u){return this.pushStack(x.map(this,function(p,C){return u.call(p,C,p)}))},slice:function(){return this.pushStack(it.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(u,p){return(p+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(u,p){return p%2}))},eq:function(u){var p=this.length,C=+u+(u<0?p:0);return this.pushStack(0<=C&&C<p?[this[C]]:[])},end:function(){return this.prevObject||this.constructor()},push:Dn,sort:Ke.sort,splice:Ke.splice},x.extend=x.fn.extend=function(){var u,p,C,w,T,E,O=arguments[0]||{},S=1,U=arguments.length,V=!1;for(typeof O=="boolean"&&(V=O,O=arguments[S]||{},S++),typeof O=="object"||Re(O)||(O={}),S===U&&(O=this,S--);S<U;S++)if((u=arguments[S])!=null)for(p in u)w=u[p],p!=="__proto__"&&O!==w&&(V&&w&&(x.isPlainObject(w)||(T=Array.isArray(w)))?(C=O[p],E=T&&!Array.isArray(C)?[]:T||x.isPlainObject(C)?C:{},T=!1,O[p]=x.extend(V,E,w)):w!==void 0&&(O[p]=w));return O},x.extend({expando:"jQuery"+(te+Math.random()).replace(/\D/g,""),isReady:!0,error:function(u){throw new Error(u)},noop:function(){},isPlainObject:function(u){var p,C;return!(!u||wo.call(u)!=="[object Object]")&&(!(p=We(u))||typeof(C=Rn.call(p,"constructor")&&p.constructor)=="function"&&So.call(C)===xe)},isEmptyObject:function(u){var p;for(p in u)return!1;return!0},globalEval:function(u,p,C){Lt(u,{nonce:p&&p.nonce},C)},each:function(u,p){var C,w=0;if(On(u))for(C=u.length;w<C&&p.call(u[w],w,u[w])!==!1;w++);else for(w in u)if(p.call(u[w],w,u[w])===!1)break;return u},text:function(u){var p,C="",w=0,T=u.nodeType;if(!T)for(;p=u[w++];)C+=x.text(p);return T===1||T===11?u.textContent:T===9?u.documentElement.textContent:T===3||T===4?u.nodeValue:C},makeArray:function(u,p){var C=p||[];return u!=null&&(On(Object(u))?x.merge(C,typeof u=="string"?[u]:u):Dn.call(C,u)),C},inArray:function(u,p,C){return p==null?-1:tn.call(p,u,C)},isXMLDoc:function(u){var p=u&&u.namespaceURI,C=u&&(u.ownerDocument||u).documentElement;return!pt.test(p||C&&C.nodeName||"HTML")},merge:function(u,p){for(var C=+p.length,w=0,T=u.length;w<C;w++)u[T++]=p[w];return u.length=T,u},grep:function(u,p,C){for(var w=[],T=0,E=u.length,O=!C;T<E;T++)!p(u[T],T)!==O&&w.push(u[T]);return w},map:function(u,p,C){var w,T,E=0,O=[];if(On(u))for(w=u.length;E<w;E++)(T=p(u[E],E,C))!=null&&O.push(T);else for(E in u)(T=p(u[E],E,C))!=null&&O.push(T);return Xt(O)},guid:1,support:He}),typeof Symbol=="function"&&(x.fn[Symbol.iterator]=Ke[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(u,p){Kn["[object "+p+"]"]=p.toLowerCase()});var Bn=Ke.pop,Hs=Ke.sort,ie=Ke.splice,gt="[\\x20\\t\\r\\n\\f]",Zo=new RegExp("^"+gt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+gt+"+$","g");x.contains=function(u,p){var C=p&&p.parentNode;return u===C||!(!C||C.nodeType!==1||!(u.contains?u.contains(C):u.compareDocumentPosition&&16&u.compareDocumentPosition(C)))};var be=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Ho(u,p){return p?u==="\0"?"\uFFFD":u.slice(0,-1)+"\\"+u.charCodeAt(u.length-1).toString(16)+" ":"\\"+u}x.escapeSelector=function(u){return(u+"").replace(be,Ho)};var po=Xe,vr=Dn;(function(){var u,p,C,w,T,E,O,S,U,V,ee=vr,ae=x.expando,Q=0,ce=0,me=ht(),Ze=ht(),mt=ht(),Jt=ht(),Be=function(L,$){return L===$&&(T=!0),0},Ao="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",oo="(?:\\\\[\\da-fA-F]{1,6}"+gt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",St="\\["+gt+"*("+oo+")(?:"+gt+"*([*^$|!~]?=)"+gt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+oo+"))|)"+gt+"*\\]",ro=":("+oo+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+St+")*)|.*)\\)|)",ot=new RegExp(gt+"+","g"),Et=new RegExp("^"+gt+"*,"+gt+"*"),na=new RegExp("^"+gt+"*([>+~]|"+gt+")"+gt+"*"),dl=new RegExp(gt+"|>"),Cn=new RegExp(ro),bs=new RegExp("^"+oo+"$"),Sn={ID:new RegExp("^#("+oo+")"),CLASS:new RegExp("^\\.("+oo+")"),TAG:new RegExp("^("+oo+"|[*])"),ATTR:new RegExp("^"+St),PSEUDO:new RegExp("^"+ro),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+gt+"*(even|odd|(([+-]|)(\\d*)n|)"+gt+"*(?:([+-]|)"+gt+"*(\\d+)|))"+gt+"*\\)|)","i"),bool:new RegExp("^(?:"+Ao+")$","i"),needsContext:new RegExp("^"+gt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+gt+"*((?:-\\d)?\\d*)"+gt+"*\\)|)(?=[^-]|$)","i")},yo=/^(?:input|select|textarea|button)$/i,gn=/^h\d$/i,En=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Zt=/[+~]/,on=new RegExp("\\\\[\\da-fA-F]{1,6}"+gt+"?|\\\\([^\\r\\n\\f])","g"),Vt=function(L,$){var J="0x"+L.slice(1)-65536;return $||(J<0?String.fromCharCode(J+65536):String.fromCharCode(J>>10|55296,1023&J|56320))},Gn=function(){Xo()},Pn=Za(function(L){return L.disabled===!0&&Ee(L,"fieldset")},{dir:"parentNode",next:"legend"});try{ee.apply(Ke=it.call(po.childNodes),po.childNodes),Ke[po.childNodes.length].nodeType}catch{ee={apply:function($,J){vr.apply($,it.call(J))},call:function($){vr.apply($,it.call(arguments,1))}}}function at(L,$,J,oe){var ne,je,$e,ze,Ue,lt,Qe,et=$&&$.ownerDocument,bt=$?$.nodeType:9;if(J=J||[],typeof L!="string"||!L||bt!==1&&bt!==9&&bt!==11)return J;if(!oe&&(Xo($),$=$||E,S)){if(bt!==11&&(Ue=En.exec(L)))if(ne=Ue[1]){if(bt===9){if(!($e=$.getElementById(ne)))return J;if($e.id===ne)return ee.call(J,$e),J}else if(et&&($e=et.getElementById(ne))&&at.contains($,$e)&&$e.id===ne)return ee.call(J,$e),J}else{if(Ue[2])return ee.apply(J,$.getElementsByTagName(L)),J;if((ne=Ue[3])&&$.getElementsByClassName)return ee.apply(J,$.getElementsByClassName(ne)),J}if(!(Jt[L+" "]||U&&U.test(L))){if(Qe=L,et=$,bt===1&&(dl.test(L)||na.test(L))){for((et=Zt.test(L)&&Ko($.parentNode)||$)==$&&He.scope||((ze=$.getAttribute("id"))?ze=x.escapeSelector(ze):$.setAttribute("id",ze=ae)),je=(lt=ys(L)).length;je--;)lt[je]=(ze?"#"+ze:":scope")+" "+Ja(lt[je]);Qe=lt.join(",")}try{return ee.apply(J,et.querySelectorAll(Qe)),J}catch{Jt(L,!0)}finally{ze===ae&&$.removeAttribute("id")}}}return ml(L.replace(Zo,"$1"),$,J,oe)}function ht(){var L=[];return function $(J,oe){return L.push(J+" ")>p.cacheLength&&delete $[L.shift()],$[J+" "]=oe}}function qt(L){return L[ae]=!0,L}function Bt(L){var $=E.createElement("fieldset");try{return!!L($)}catch{return!1}finally{$.parentNode&&$.parentNode.removeChild($),$=null}}function Hn(L){return function($){return Ee($,"input")&&$.type===L}}function Nr(L){return function($){return(Ee($,"input")||Ee($,"button"))&&$.type===L}}function oa(L){return function($){return"form"in $?$.parentNode&&$.disabled===!1?"label"in $?"label"in $.parentNode?$.parentNode.disabled===L:$.disabled===L:$.isDisabled===L||$.isDisabled!==!L&&Pn($)===L:$.disabled===L:"label"in $&&$.disabled===L}}function rr(L){return qt(function($){return $=+$,qt(function(J,oe){for(var ne,je=L([],J.length,$),$e=je.length;$e--;)J[ne=je[$e]]&&(J[ne]=!(oe[ne]=J[ne]))})})}function Ko(L){return L&&typeof L.getElementsByTagName<"u"&&L}function Xo(L){var $,J=L?L.ownerDocument||L:po;return J!=E&&J.nodeType===9&&J.documentElement&&(O=(E=J).documentElement,S=!x.isXMLDoc(E),V=O.matches||O.webkitMatchesSelector||O.msMatchesSelector,O.msMatchesSelector&&po!=E&&($=E.defaultView)&&$.top!==$&&$.addEventListener("unload",Gn),He.getById=Bt(function(oe){return O.appendChild(oe).id=x.expando,!E.getElementsByName||!E.getElementsByName(x.expando).length}),He.disconnectedMatch=Bt(function(oe){return V.call(oe,"*")}),He.scope=Bt(function(){return E.querySelectorAll(":scope")}),He.cssHas=Bt(function(){try{return E.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),He.getById?(p.filter.ID=function(oe){var ne=oe.replace(on,Vt);return function(je){return je.getAttribute("id")===ne}},p.find.ID=function(oe,ne){if(typeof ne.getElementById<"u"&&S){var je=ne.getElementById(oe);return je?[je]:[]}}):(p.filter.ID=function(oe){var ne=oe.replace(on,Vt);return function(je){var $e=typeof je.getAttributeNode<"u"&&je.getAttributeNode("id");return $e&&$e.value===ne}},p.find.ID=function(oe,ne){if(typeof ne.getElementById<"u"&&S){var je,$e,ze,Ue=ne.getElementById(oe);if(Ue){if((je=Ue.getAttributeNode("id"))&&je.value===oe)return[Ue];for(ze=ne.getElementsByName(oe),$e=0;Ue=ze[$e++];)if((je=Ue.getAttributeNode("id"))&&je.value===oe)return[Ue]}return[]}}),p.find.TAG=function(oe,ne){return typeof ne.getElementsByTagName<"u"?ne.getElementsByTagName(oe):ne.querySelectorAll(oe)},p.find.CLASS=function(oe,ne){if(typeof ne.getElementsByClassName<"u"&&S)return ne.getElementsByClassName(oe)},U=[],Bt(function(oe){var ne;O.appendChild(oe).innerHTML="<a id='"+ae+"' href='' disabled='disabled'></a><select id='"+ae+"-\r\\' disabled='disabled'><option selected=''></option></select>",oe.querySelectorAll("[selected]").length||U.push("\\["+gt+"*(?:value|"+Ao+")"),oe.querySelectorAll("[id~="+ae+"-]").length||U.push("~="),oe.querySelectorAll("a#"+ae+"+*").length||U.push(".#.+[+~]"),oe.querySelectorAll(":checked").length||U.push(":checked"),(ne=E.createElement("input")).setAttribute("type","hidden"),oe.appendChild(ne).setAttribute("name","D"),O.appendChild(oe).disabled=!0,oe.querySelectorAll(":disabled").length!==2&&U.push(":enabled",":disabled"),(ne=E.createElement("input")).setAttribute("name",""),oe.appendChild(ne),oe.querySelectorAll("[name='']").length||U.push("\\["+gt+"*name"+gt+"*="+gt+`*(?:''|"")`)}),He.cssHas||U.push(":has"),U=U.length&&new RegExp(U.join("|")),Be=function(oe,ne){if(oe===ne)return T=!0,0;var je=!oe.compareDocumentPosition-!ne.compareDocumentPosition;return je||(1&(je=(oe.ownerDocument||oe)==(ne.ownerDocument||ne)?oe.compareDocumentPosition(ne):1)||!He.sortDetached&&ne.compareDocumentPosition(oe)===je?oe===E||oe.ownerDocument==po&&at.contains(po,oe)?-1:ne===E||ne.ownerDocument==po&&at.contains(po,ne)?1:w?tn.call(w,oe)-tn.call(w,ne):0:4&je?-1:1)}),E}for(u in at.matches=function(L,$){return at(L,null,null,$)},at.matchesSelector=function(L,$){if(Xo(L),S&&!Jt[$+" "]&&(!U||!U.test($)))try{var J=V.call(L,$);if(J||He.disconnectedMatch||L.document&&L.document.nodeType!==11)return J}catch{Jt($,!0)}return 0<at($,E,null,[L]).length},at.contains=function(L,$){return(L.ownerDocument||L)!=E&&Xo(L),x.contains(L,$)},at.attr=function(L,$){(L.ownerDocument||L)!=E&&Xo(L);var J=p.attrHandle[$.toLowerCase()],oe=J&&Rn.call(p.attrHandle,$.toLowerCase())?J(L,$,!S):void 0;return oe!==void 0?oe:L.getAttribute($)},at.error=function(L){throw new Error("Syntax error, unrecognized expression: "+L)},x.uniqueSort=function(L){var $,J=[],oe=0,ne=0;if(T=!He.sortStable,w=!He.sortStable&&it.call(L,0),Hs.call(L,Be),T){for(;$=L[ne++];)$===L[ne]&&(oe=J.push(ne));for(;oe--;)ie.call(L,J[oe],1)}return w=null,L},x.fn.uniqueSort=function(){return this.pushStack(x.uniqueSort(it.apply(this)))},(p=x.expr={cacheLength:50,createPseudo:qt,match:Sn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(L){return L[1]=L[1].replace(on,Vt),L[3]=(L[3]||L[4]||L[5]||"").replace(on,Vt),L[2]==="~="&&(L[3]=" "+L[3]+" "),L.slice(0,4)},CHILD:function(L){return L[1]=L[1].toLowerCase(),L[1].slice(0,3)==="nth"?(L[3]||at.error(L[0]),L[4]=+(L[4]?L[5]+(L[6]||1):2*(L[3]==="even"||L[3]==="odd")),L[5]=+(L[7]+L[8]||L[3]==="odd")):L[3]&&at.error(L[0]),L},PSEUDO:function(L){var $,J=!L[6]&&L[2];return Sn.CHILD.test(L[0])?null:(L[3]?L[2]=L[4]||L[5]||"":J&&Cn.test(J)&&($=ys(J,!0))&&($=J.indexOf(")",J.length-$)-J.length)&&(L[0]=L[0].slice(0,$),L[2]=J.slice(0,$)),L.slice(0,3))}},filter:{TAG:function(L){var $=L.replace(on,Vt).toLowerCase();return L==="*"?function(){return!0}:function(J){return Ee(J,$)}},CLASS:function(L){var $=me[L+" "];return $||($=new RegExp("(^|"+gt+")"+L+"("+gt+"|$)"))&&me(L,function(J){return $.test(typeof J.className=="string"&&J.className||typeof J.getAttribute<"u"&&J.getAttribute("class")||"")})},ATTR:function(L,$,J){return function(oe){var ne=at.attr(oe,L);return ne==null?$==="!=":!$||(ne+="",$==="="?ne===J:$==="!="?ne!==J:$==="^="?J&&ne.indexOf(J)===0:$==="*="?J&&-1<ne.indexOf(J):$==="$="?J&&ne.slice(-J.length)===J:$==="~="?-1<(" "+ne.replace(ot," ")+" ").indexOf(J):$==="|="&&(ne===J||ne.slice(0,J.length+1)===J+"-"))}},CHILD:function(L,$,J,oe,ne){var je=L.slice(0,3)!=="nth",$e=L.slice(-4)!=="last",ze=$==="of-type";return oe===1&&ne===0?function(Ue){return!!Ue.parentNode}:function(Ue,lt,Qe){var et,bt,ct,vt,kn,en=je!==$e?"nextSibling":"previousSibling",rn=Ue.parentNode,ft=ze&&Ue.nodeName.toLowerCase(),sn=!Qe&&!ze,Wt=!1;if(rn){if(je){for(;en;){for(ct=Ue;ct=ct[en];)if(ze?Ee(ct,ft):ct.nodeType===1)return!1;kn=en=L==="only"&&!kn&&"nextSibling"}return!0}if(kn=[$e?rn.firstChild:rn.lastChild],$e&&sn){for(Wt=(vt=(et=(bt=rn[ae]||(rn[ae]={}))[L]||[])[0]===Q&&et[1])&&et[2],ct=vt&&rn.childNodes[vt];ct=++vt&&ct&&ct[en]||(Wt=vt=0)||kn.pop();)if(ct.nodeType===1&&++Wt&&ct===Ue){bt[L]=[Q,vt,Wt];break}}else if(sn&&(Wt=vt=(et=(bt=Ue[ae]||(Ue[ae]={}))[L]||[])[0]===Q&&et[1]),Wt===!1)for(;(ct=++vt&&ct&&ct[en]||(Wt=vt=0)||kn.pop())&&!((ze?Ee(ct,ft):ct.nodeType===1)&&++Wt&&(sn&&((bt=ct[ae]||(ct[ae]={}))[L]=[Q,Wt]),ct===Ue)););return(Wt-=ne)===oe||Wt%oe==0&&0<=Wt/oe}}},PSEUDO:function(L,$){var J,oe=p.pseudos[L]||p.setFilters[L.toLowerCase()]||at.error("unsupported pseudo: "+L);return oe[ae]?oe($):1<oe.length?(J=[L,L,"",$],p.setFilters.hasOwnProperty(L.toLowerCase())?qt(function(ne,je){for(var $e,ze=oe(ne,$),Ue=ze.length;Ue--;)ne[$e=tn.call(ne,ze[Ue])]=!(je[$e]=ze[Ue])}):function(ne){return oe(ne,0,J)}):oe}},pseudos:{not:qt(function(L){var $=[],J=[],oe=vs(L.replace(Zo,"$1"));return oe[ae]?qt(function(ne,je,$e,ze){for(var Ue,lt=oe(ne,null,ze,[]),Qe=ne.length;Qe--;)(Ue=lt[Qe])&&(ne[Qe]=!(je[Qe]=Ue))}):function(ne,je,$e){return $[0]=ne,oe($,null,$e,J),$[0]=null,!J.pop()}}),has:qt(function(L){return function($){return 0<at(L,$).length}}),contains:qt(function(L){return L=L.replace(on,Vt),function($){return-1<($.textContent||x.text($)).indexOf(L)}}),lang:qt(function(L){return bs.test(L||"")||at.error("unsupported lang: "+L),L=L.replace(on,Vt).toLowerCase(),function($){var J;do if(J=S?$.lang:$.getAttribute("xml:lang")||$.getAttribute("lang"))return(J=J.toLowerCase())===L||J.indexOf(L+"-")===0;while(($=$.parentNode)&&$.nodeType===1);return!1}}),target:function(L){var $=ge.location&&ge.location.hash;return $&&$.slice(1)===L.id},root:function(L){return L===O},focus:function(L){return L===(function(){try{return E.activeElement}catch{}})()&&E.hasFocus()&&!!(L.type||L.href||~L.tabIndex)},enabled:oa(!1),disabled:oa(!0),checked:function(L){return Ee(L,"input")&&!!L.checked||Ee(L,"option")&&!!L.selected},selected:function(L){return L.parentNode&&L.parentNode.selectedIndex,L.selected===!0},empty:function(L){for(L=L.firstChild;L;L=L.nextSibling)if(L.nodeType<6)return!1;return!0},parent:function(L){return!p.pseudos.empty(L)},header:function(L){return gn.test(L.nodeName)},input:function(L){return yo.test(L.nodeName)},button:function(L){return Ee(L,"input")&&L.type==="button"||Ee(L,"button")},text:function(L){var $;return Ee(L,"input")&&L.type==="text"&&(($=L.getAttribute("type"))==null||$.toLowerCase()==="text")},first:rr(function(){return[0]}),last:rr(function(L,$){return[$-1]}),eq:rr(function(L,$,J){return[J<0?J+$:J]}),even:rr(function(L,$){for(var J=0;J<$;J+=2)L.push(J);return L}),odd:rr(function(L,$){for(var J=1;J<$;J+=2)L.push(J);return L}),lt:rr(function(L,$,J){var oe;for(oe=J<0?J+$:$<J?$:J;0<=--oe;)L.push(oe);return L}),gt:rr(function(L,$,J){for(var oe=J<0?J+$:J;++oe<$;)L.push(oe);return L})}}).pseudos.nth=p.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})p.pseudos[u]=Hn(u);for(u in{submit:!0,reset:!0})p.pseudos[u]=Nr(u);function Vc(){}function ys(L,$){var J,oe,ne,je,$e,ze,Ue,lt=Ze[L+" "];if(lt)return $?0:lt.slice(0);for($e=L,ze=[],Ue=p.preFilter;$e;){for(je in J&&!(oe=Et.exec($e))||(oe&&($e=$e.slice(oe[0].length)||$e),ze.push(ne=[])),J=!1,(oe=na.exec($e))&&(J=oe.shift(),ne.push({value:J,type:oe[0].replace(Zo," ")}),$e=$e.slice(J.length)),p.filter)!(oe=Sn[je].exec($e))||Ue[je]&&!(oe=Ue[je](oe))||(J=oe.shift(),ne.push({value:J,type:je,matches:oe}),$e=$e.slice(J.length));if(!J)break}return $?$e.length:$e?at.error(L):Ze(L,ze).slice(0)}function Ja(L){for(var $=0,J=L.length,oe="";$<J;$++)oe+=L[$].value;return oe}function Za(L,$,J){var oe=$.dir,ne=$.next,je=ne||oe,$e=J&&je==="parentNode",ze=ce++;return $.first?function(Ue,lt,Qe){for(;Ue=Ue[oe];)if(Ue.nodeType===1||$e)return L(Ue,lt,Qe);return!1}:function(Ue,lt,Qe){var et,bt,ct=[Q,ze];if(Qe){for(;Ue=Ue[oe];)if((Ue.nodeType===1||$e)&&L(Ue,lt,Qe))return!0}else for(;Ue=Ue[oe];)if(Ue.nodeType===1||$e)if(bt=Ue[ae]||(Ue[ae]={}),ne&&Ee(Ue,ne))Ue=Ue[oe]||Ue;else{if((et=bt[je])&&et[0]===Q&&et[1]===ze)return ct[2]=et[2];if((bt[je]=ct)[2]=L(Ue,lt,Qe))return!0}return!1}}function ul(L){return 1<L.length?function($,J,oe){for(var ne=L.length;ne--;)if(!L[ne]($,J,oe))return!1;return!0}:L[0]}function ei(L,$,J,oe,ne){for(var je,$e=[],ze=0,Ue=L.length,lt=$!=null;ze<Ue;ze++)(je=L[ze])&&(J&&!J(je,oe,ne)||($e.push(je),lt&&$.push(ze)));return $e}function ra(L,$,J,oe,ne,je){return oe&&!oe[ae]&&(oe=ra(oe)),ne&&!ne[ae]&&(ne=ra(ne,je)),qt(function($e,ze,Ue,lt){var Qe,et,bt,ct,vt=[],kn=[],en=ze.length,rn=$e||(function(sn,Wt,$n){for(var so=0,Qr=Wt.length;so<Qr;so++)at(sn,Wt[so],$n);return $n})($||"*",Ue.nodeType?[Ue]:Ue,[]),ft=!L||!$e&&$?rn:ei(rn,vt,L,Ue,lt);if(J?J(ft,ct=ne||($e?L:en||oe)?[]:ze,Ue,lt):ct=ft,oe)for(Qe=ei(ct,kn),oe(Qe,[],Ue,lt),et=Qe.length;et--;)(bt=Qe[et])&&(ct[kn[et]]=!(ft[kn[et]]=bt));if($e){if(ne||L){if(ne){for(Qe=[],et=ct.length;et--;)(bt=ct[et])&&Qe.push(ft[et]=bt);ne(null,ct=[],Qe,lt)}for(et=ct.length;et--;)(bt=ct[et])&&-1<(Qe=ne?tn.call($e,bt):vt[et])&&($e[Qe]=!(ze[Qe]=bt))}}else ct=ei(ct===ze?ct.splice(en,ct.length):ct),ne?ne(null,ze,ct,lt):ee.apply(ze,ct)})}function sa(L){for(var $,J,oe,ne=L.length,je=p.relative[L[0].type],$e=je||p.relative[" "],ze=je?1:0,Ue=Za(function(et){return et===$},$e,!0),lt=Za(function(et){return-1<tn.call($,et)},$e,!0),Qe=[function(et,bt,ct){var vt=!je&&(ct||bt!=C)||(($=bt).nodeType?Ue(et,bt,ct):lt(et,bt,ct));return $=null,vt}];ze<ne;ze++)if(J=p.relative[L[ze].type])Qe=[Za(ul(Qe),J)];else{if((J=p.filter[L[ze].type].apply(null,L[ze].matches))[ae]){for(oe=++ze;oe<ne&&!p.relative[L[oe].type];oe++);return ra(1<ze&&ul(Qe),1<ze&&Ja(L.slice(0,ze-1).concat({value:L[ze-2].type===" "?"*":""})).replace(Zo,"$1"),J,ze<oe&&sa(L.slice(ze,oe)),oe<ne&&sa(L=L.slice(oe)),oe<ne&&Ja(L))}Qe.push(J)}return ul(Qe)}function vs(L,$){var J,oe,ne,je,$e,ze,Ue=[],lt=[],Qe=mt[L+" "];if(!Qe){for($||($=ys(L)),J=$.length;J--;)(Qe=sa($[J]))[ae]?Ue.push(Qe):lt.push(Qe);(Qe=mt(L,(oe=lt,je=0<(ne=Ue).length,$e=0<oe.length,ze=function(et,bt,ct,vt,kn){var en,rn,ft,sn=0,Wt="0",$n=et&&[],so=[],Qr=C,Ar=et||$e&&p.find.TAG("*",kn),fl=Q+=Qr==null?1:Math.random()||.1,ti=Ar.length;for(kn&&(C=bt==E||bt||kn);Wt!==ti&&(en=Ar[Wt])!=null;Wt++){if($e&&en){for(rn=0,bt||en.ownerDocument==E||(Xo(en),ct=!S);ft=oe[rn++];)if(ft(en,bt||E,ct)){ee.call(vt,en);break}kn&&(Q=fl)}je&&((en=!ft&&en)&&sn--,et&&$n.push(en))}if(sn+=Wt,je&&Wt!==sn){for(rn=0;ft=ne[rn++];)ft($n,so,bt,ct);if(et){if(0<sn)for(;Wt--;)$n[Wt]||so[Wt]||(so[Wt]=Bn.call(vt));so=ei(so)}ee.apply(vt,so),kn&&!et&&0<so.length&&1<sn+ne.length&&x.uniqueSort(vt)}return kn&&(Q=fl,C=Qr),$n},je?qt(ze):ze))).selector=L}return Qe}function ml(L,$,J,oe){var ne,je,$e,ze,Ue,lt=typeof L=="function"&&L,Qe=!oe&&ys(L=lt.selector||L);if(J=J||[],Qe.length===1){if(2<(je=Qe[0]=Qe[0].slice(0)).length&&($e=je[0]).type==="ID"&&$.nodeType===9&&S&&p.relative[je[1].type]){if(!($=(p.find.ID($e.matches[0].replace(on,Vt),$)||[])[0]))return J;lt&&($=$.parentNode),L=L.slice(je.shift().value.length)}for(ne=Sn.needsContext.test(L)?0:je.length;ne--&&($e=je[ne],!p.relative[ze=$e.type]);)if((Ue=p.find[ze])&&(oe=Ue($e.matches[0].replace(on,Vt),Zt.test(je[0].type)&&Ko($.parentNode)||$))){if(je.splice(ne,1),!(L=oe.length&&Ja(je)))return ee.apply(J,oe),J;break}}return(lt||vs(L,Qe))(oe,$,!S,J,!$||Zt.test(L)&&Ko($.parentNode)||$),J}Vc.prototype=p.filters=p.pseudos,p.setFilters=new Vc,He.sortStable=ae.split("").sort(Be).join("")===ae,Xo(),He.sortDetached=Bt(function(L){return 1&L.compareDocumentPosition(E.createElement("fieldset"))}),x.find=at,x.expr[":"]=x.expr.pseudos,x.unique=x.uniqueSort,at.compile=vs,at.select=ml,at.setDocument=Xo,at.tokenize=ys,at.escape=x.escapeSelector,at.getText=x.text,at.isXML=x.isXMLDoc,at.selectors=x.expr,at.support=x.support,at.uniqueSort=x.uniqueSort})();var Xn=function(u,p,C){for(var w=[],T=C!==void 0;(u=u[p])&&u.nodeType!==9;)if(u.nodeType===1){if(T&&x(u).is(C))break;w.push(u)}return w},Nt=function(u,p){for(var C=[];u;u=u.nextSibling)u.nodeType===1&&u!==p&&C.push(u);return C},jt=x.expr.match.needsContext,k=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Cr(u,p,C){return Re(p)?x.grep(u,function(w,T){return!!p.call(w,T,w)!==C}):p.nodeType?x.grep(u,function(w){return w===p!==C}):typeof p!="string"?x.grep(u,function(w){return-1<tn.call(p,w)!==C}):x.filter(p,u,C)}x.filter=function(u,p,C){var w=p[0];return C&&(u=":not("+u+")"),p.length===1&&w.nodeType===1?x.find.matchesSelector(w,u)?[w]:[]:x.find.matches(u,x.grep(p,function(T){return T.nodeType===1}))},x.fn.extend({find:function(u){var p,C,w=this.length,T=this;if(typeof u!="string")return this.pushStack(x(u).filter(function(){for(p=0;p<w;p++)if(x.contains(T[p],this))return!0}));for(C=this.pushStack([]),p=0;p<w;p++)x.find(u,T[p],C);return 1<w?x.uniqueSort(C):C},filter:function(u){return this.pushStack(Cr(this,u||[],!1))},not:function(u){return this.pushStack(Cr(this,u||[],!0))},is:function(u){return!!Cr(this,typeof u=="string"&&jt.test(u)?x(u):u||[],!1).length}});var ke,nt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(u,p,C){var w,T;if(!u)return this;if(C=C||ke,typeof u=="string"){if(!(w=u[0]==="<"&&u[u.length-1]===">"&&3<=u.length?[null,u,null]:nt.exec(u))||!w[1]&&p)return!p||p.jquery?(p||C).find(u):this.constructor(p).find(u);if(w[1]){if(p=p instanceof x?p[0]:p,x.merge(this,x.parseHTML(w[1],p&&p.nodeType?p.ownerDocument||p:Xe,!0)),k.test(w[1])&&x.isPlainObject(p))for(w in p)Re(this[w])?this[w](p[w]):this.attr(w,p[w]);return this}return(T=Xe.getElementById(w[2]))&&(this[0]=T,this.length=1),this}return u.nodeType?(this[0]=u,this.length=1,this):Re(u)?C.ready!==void 0?C.ready(u):u(x):x.makeArray(u,this)}).prototype=x.fn,ke=x(Xe);var ut=/^(?:parents|prev(?:Until|All))/,we={children:!0,contents:!0,next:!0,prev:!0};function xt(u,p){for(;(u=u[p])&&u.nodeType!==1;);return u}x.fn.extend({has:function(u){var p=x(u,this),C=p.length;return this.filter(function(){for(var w=0;w<C;w++)if(x.contains(this,p[w]))return!0})},closest:function(u,p){var C,w=0,T=this.length,E=[],O=typeof u!="string"&&x(u);if(!jt.test(u)){for(;w<T;w++)for(C=this[w];C&&C!==p;C=C.parentNode)if(C.nodeType<11&&(O?-1<O.index(C):C.nodeType===1&&x.find.matchesSelector(C,u))){E.push(C);break}}return this.pushStack(1<E.length?x.uniqueSort(E):E)},index:function(u){return u?typeof u=="string"?tn.call(x(u),this[0]):tn.call(this,u.jquery?u[0]:u):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(u,p){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(u,p))))},addBack:function(u){return this.add(u==null?this.prevObject:this.prevObject.filter(u))}}),x.each({parent:function(u){var p=u.parentNode;return p&&p.nodeType!==11?p:null},parents:function(u){return Xn(u,"parentNode")},parentsUntil:function(u,p,C){return Xn(u,"parentNode",C)},next:function(u){return xt(u,"nextSibling")},prev:function(u){return xt(u,"previousSibling")},nextAll:function(u){return Xn(u,"nextSibling")},prevAll:function(u){return Xn(u,"previousSibling")},nextUntil:function(u,p,C){return Xn(u,"nextSibling",C)},prevUntil:function(u,p,C){return Xn(u,"previousSibling",C)},siblings:function(u){return Nt((u.parentNode||{}).firstChild,u)},children:function(u){return Nt(u.firstChild)},contents:function(u){return u.contentDocument!=null&&We(u.contentDocument)?u.contentDocument:(Ee(u,"template")&&(u=u.content||u),x.merge([],u.childNodes))}},function(u,p){x.fn[u]=function(C,w){var T=x.map(this,p,C);return u.slice(-5)!=="Until"&&(w=C),w&&typeof w=="string"&&(T=x.filter(w,T)),1<this.length&&(we[u]||x.uniqueSort(T),ut.test(u)&&T.reverse()),this.pushStack(T)}});var qe=/[^\x20\t\r\n\f]+/g;function K(u){return u}function xr(u){throw u}function er(u,p,C,w){var T;try{u&&Re(T=u.promise)?T.call(u).done(p).fail(C):u&&Re(T=u.then)?T.call(u,p,C):p.apply(void 0,[u].slice(w))}catch(E){C.apply(void 0,[E])}}x.Callbacks=function(u){var p,C;u=typeof u=="string"?(p=u,C={},x.each(p.match(qe)||[],function(Q,ce){C[ce]=!0}),C):x.extend({},u);var w,T,E,O,S=[],U=[],V=-1,ee=function(){for(O=O||u.once,E=w=!0;U.length;V=-1)for(T=U.shift();++V<S.length;)S[V].apply(T[0],T[1])===!1&&u.stopOnFalse&&(V=S.length,T=!1);u.memory||(T=!1),w=!1,O&&(S=T?[]:"")},ae={add:function(){return S&&(T&&!w&&(V=S.length-1,U.push(T)),(function Q(ce){x.each(ce,function(me,Ze){Re(Ze)?u.unique&&ae.has(Ze)||S.push(Ze):Ze&&Ze.length&&kt(Ze)!=="string"&&Q(Ze)})})(arguments),T&&!w&&ee()),this},remove:function(){return x.each(arguments,function(Q,ce){for(var me;-1<(me=x.inArray(ce,S,me));)S.splice(me,1),me<=V&&V--}),this},has:function(Q){return Q?-1<x.inArray(Q,S):0<S.length},empty:function(){return S&&(S=[]),this},disable:function(){return O=U=[],S=T="",this},disabled:function(){return!S},lock:function(){return O=U=[],T||w||(S=T=""),this},locked:function(){return!!O},fireWith:function(Q,ce){return O||(ce=[Q,(ce=ce||[]).slice?ce.slice():ce],U.push(ce),w||ee()),this},fire:function(){return ae.fireWith(this,arguments),this},fired:function(){return!!E}};return ae},x.extend({Deferred:function(u){var p=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],C="pending",w={state:function(){return C},always:function(){return T.done(arguments).fail(arguments),this},catch:function(E){return w.then(null,E)},pipe:function(){var E=arguments;return x.Deferred(function(O){x.each(p,function(S,U){var V=Re(E[U[4]])&&E[U[4]];T[U[1]](function(){var ee=V&&V.apply(this,arguments);ee&&Re(ee.promise)?ee.promise().progress(O.notify).done(O.resolve).fail(O.reject):O[U[0]+"With"](this,V?[ee]:arguments)})}),E=null}).promise()},then:function(E,O,S){var U=0;function V(ee,ae,Q,ce){return function(){var me=this,Ze=arguments,mt=function(){var Be,Ao;if(!(ee<U)){if((Be=Q.apply(me,Ze))===ae.promise())throw new TypeError("Thenable self-resolution");Ao=Be&&(typeof Be=="object"||typeof Be=="function")&&Be.then,Re(Ao)?ce?Ao.call(Be,V(U,ae,K,ce),V(U,ae,xr,ce)):(U++,Ao.call(Be,V(U,ae,K,ce),V(U,ae,xr,ce),V(U,ae,K,ae.notifyWith))):(Q!==K&&(me=void 0,Ze=[Be]),(ce||ae.resolveWith)(me,Ze))}},Jt=ce?mt:function(){try{mt()}catch(Be){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(Be,Jt.error),U<=ee+1&&(Q!==xr&&(me=void 0,Ze=[Be]),ae.rejectWith(me,Ze))}};ee?Jt():(x.Deferred.getErrorHook?Jt.error=x.Deferred.getErrorHook():x.Deferred.getStackHook&&(Jt.error=x.Deferred.getStackHook()),ge.setTimeout(Jt))}}return x.Deferred(function(ee){p[0][3].add(V(0,ee,Re(S)?S:K,ee.notifyWith)),p[1][3].add(V(0,ee,Re(E)?E:K)),p[2][3].add(V(0,ee,Re(O)?O:xr))}).promise()},promise:function(E){return E!=null?x.extend(E,w):w}},T={};return x.each(p,function(E,O){var S=O[2],U=O[5];w[O[1]]=S.add,U&&S.add(function(){C=U},p[3-E][2].disable,p[3-E][3].disable,p[0][2].lock,p[0][3].lock),S.add(O[3].fire),T[O[0]]=function(){return T[O[0]+"With"](this===T?void 0:this,arguments),this},T[O[0]+"With"]=S.fireWith}),w.promise(T),u&&u.call(T,T),T},when:function(u){var p=arguments.length,C=p,w=Array(C),T=it.call(arguments),E=x.Deferred(),O=function(S){return function(U){w[S]=this,T[S]=1<arguments.length?it.call(arguments):U,--p||E.resolveWith(w,T)}};if(p<=1&&(er(u,E.done(O(C)).resolve,E.reject,!p),E.state()==="pending"||Re(T[C]&&T[C].then)))return E.then();for(;C--;)er(T[C],O(C),E.reject);return E.promise()}});var De=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(u,p){ge.console&&ge.console.warn&&u&&De.test(u.name)&&ge.console.warn("jQuery.Deferred exception: "+u.message,u.stack,p)},x.readyException=function(u){ge.setTimeout(function(){throw u})};var Vr=x.Deferred();function Yt(){Xe.removeEventListener("DOMContentLoaded",Yt),ge.removeEventListener("load",Yt),x.ready()}x.fn.ready=function(u){return Vr.then(u).catch(function(p){x.readyException(p)}),this},x.extend({isReady:!1,readyWait:1,ready:function(u){(u===!0?--x.readyWait:x.isReady)||(x.isReady=!0)!==u&&0<--x.readyWait||Vr.resolveWith(Xe,[x])}}),x.ready.then=Vr.then,Xe.readyState==="complete"||Xe.readyState!=="loading"&&!Xe.documentElement.doScroll?ge.setTimeout(x.ready):(Xe.addEventListener("DOMContentLoaded",Yt),ge.addEventListener("load",Yt));var go=function(u,p,C,w,T,E,O){var S=0,U=u.length,V=C==null;if(kt(C)==="object")for(S in T=!0,C)go(u,p,S,C[S],!0,E,O);else if(w!==void 0&&(T=!0,Re(w)||(O=!0),V&&(O?(p.call(u,w),p=null):(V=p,p=function(ee,ae,Q){return V.call(x(ee),Q)})),p))for(;S<U;S++)p(u[S],C,O?w:w.call(u[S],S,p(u[S],C)));return T?u:V?p.call(u):U?p(u[0],C):E},Ht=/^-ms-/,$s=/-([a-z])/g;function Ec(u,p){return p.toUpperCase()}function $t(u){return u.replace(Ht,"ms-").replace($s,Ec)}var eo=function(u){return u.nodeType===1||u.nodeType===9||!+u.nodeType};function Eo(){this.expando=x.expando+Eo.uid++}Eo.uid=1,Eo.prototype={cache:function(u){var p=u[this.expando];return p||(p={},eo(u)&&(u.nodeType?u[this.expando]=p:Object.defineProperty(u,this.expando,{value:p,configurable:!0}))),p},set:function(u,p,C){var w,T=this.cache(u);if(typeof p=="string")T[$t(p)]=C;else for(w in p)T[$t(w)]=p[w];return T},get:function(u,p){return p===void 0?this.cache(u):u[this.expando]&&u[this.expando][$t(p)]},access:function(u,p,C){return p===void 0||p&&typeof p=="string"&&C===void 0?this.get(u,p):(this.set(u,p,C),C!==void 0?C:p)},remove:function(u,p){var C,w=u[this.expando];if(w!==void 0){if(p!==void 0)for(C=(p=Array.isArray(p)?p.map($t):(p=$t(p))in w?[p]:p.match(qe)||[]).length;C--;)delete w[p[C]];(p===void 0||x.isEmptyObject(w))&&(u.nodeType?u[this.expando]=void 0:delete u[this.expando])}},hasData:function(u){var p=u[this.expando];return p!==void 0&&!x.isEmptyObject(p)}};var Ye=new Eo,wn=new Eo,Kr=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,qs=/[A-Z]/g;function nn(u,p,C){var w,T;if(C===void 0&&u.nodeType===1)if(w="data-"+p.replace(qs,"-$&").toLowerCase(),typeof(C=u.getAttribute(w))=="string"){try{C=(T=C)==="true"||T!=="false"&&(T==="null"?null:T===+T+""?+T:Kr.test(T)?JSON.parse(T):T)}catch{}wn.set(u,p,C)}else C=void 0;return C}x.extend({hasData:function(u){return wn.hasData(u)||Ye.hasData(u)},data:function(u,p,C){return wn.access(u,p,C)},removeData:function(u,p){wn.remove(u,p)},_data:function(u,p,C){return Ye.access(u,p,C)},_removeData:function(u,p){Ye.remove(u,p)}}),x.fn.extend({data:function(u,p){var C,w,T,E=this[0],O=E&&E.attributes;if(u===void 0){if(this.length&&(T=wn.get(E),E.nodeType===1&&!Ye.get(E,"hasDataAttrs"))){for(C=O.length;C--;)O[C]&&(w=O[C].name).indexOf("data-")===0&&(w=$t(w.slice(5)),nn(E,w,T[w]));Ye.set(E,"hasDataAttrs",!0)}return T}return typeof u=="object"?this.each(function(){wn.set(this,u)}):go(this,function(S){var U;if(E&&S===void 0)return(U=wn.get(E,u))!==void 0||(U=nn(E,u))!==void 0?U:void 0;this.each(function(){wn.set(this,u,S)})},null,p,1<arguments.length,null,!0)},removeData:function(u){return this.each(function(){wn.remove(this,u)})}}),x.extend({queue:function(u,p,C){var w;if(u)return p=(p||"fx")+"queue",w=Ye.get(u,p),C&&(!w||Array.isArray(C)?w=Ye.access(u,p,x.makeArray(C)):w.push(C)),w||[]},dequeue:function(u,p){p=p||"fx";var C=x.queue(u,p),w=C.length,T=C.shift(),E=x._queueHooks(u,p);T==="inprogress"&&(T=C.shift(),w--),T&&(p==="fx"&&C.unshift("inprogress"),delete E.stop,T.call(u,function(){x.dequeue(u,p)},E)),!w&&E&&E.empty.fire()},_queueHooks:function(u,p){var C=p+"queueHooks";return Ye.get(u,C)||Ye.access(u,C,{empty:x.Callbacks("once memory").add(function(){Ye.remove(u,[p+"queue",C])})})}}),x.fn.extend({queue:function(u,p){var C=2;return typeof u!="string"&&(p=u,u="fx",C--),arguments.length<C?x.queue(this[0],u):p===void 0?this:this.each(function(){var w=x.queue(this,u,p);x._queueHooks(this,u),u==="fx"&&w[0]!=="inprogress"&&x.dequeue(this,u)})},dequeue:function(u){return this.each(function(){x.dequeue(this,u)})},clearQueue:function(u){return this.queue(u||"fx",[])},promise:function(u,p){var C,w=1,T=x.Deferred(),E=this,O=this.length,S=function(){--w||T.resolveWith(E,[E])};for(typeof u!="string"&&(p=u,u=void 0),u=u||"fx";O--;)(C=Ye.get(E[O],u+"queueHooks"))&&C.empty&&(w++,C.empty.add(S));return S(),T.promise(p)}});var to=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,vn=new RegExp("^(?:([+-])=|)("+to+")([a-z%]*)$","i"),zn=["Top","Right","Bottom","Left"],ho=Xe.documentElement,un=function(u){return x.contains(u.ownerDocument,u)},em={composed:!0};ho.getRootNode&&(un=function(u){return x.contains(u.ownerDocument,u)||u.getRootNode(em)===u.ownerDocument});var wt=function(u,p){return(u=p||u).style.display==="none"||u.style.display===""&&un(u)&&x.css(u,"display")==="none"};function Ws(u,p,C,w){var T,E,O=20,S=w?function(){return w.cur()}:function(){return x.css(u,p,"")},U=S(),V=C&&C[3]||(x.cssNumber[p]?"":"px"),ee=u.nodeType&&(x.cssNumber[p]||V!=="px"&&+U)&&vn.exec(x.css(u,p));if(ee&&ee[3]!==V){for(U/=2,V=V||ee[3],ee=+U||1;O--;)x.style(u,p,ee+V),(1-E)*(1-(E=S()/U||.5))<=0&&(O=0),ee/=E;ee*=2,x.style(u,p,ee+V),C=C||[]}return C&&(ee=+ee||+U||0,T=C[1]?ee+(C[1]+1)*C[2]:+C[2],w&&(w.unit=V,w.start=ee,w.end=T)),T}var kc={};function wr(u,p){for(var C,w,T,E,O,S,U,V=[],ee=0,ae=u.length;ee<ae;ee++)(w=u[ee]).style&&(C=w.style.display,p?(C==="none"&&(V[ee]=Ye.get(w,"display")||null,V[ee]||(w.style.display="")),w.style.display===""&&wt(w)&&(V[ee]=(U=O=E=void 0,O=(T=w).ownerDocument,S=T.nodeName,(U=kc[S])||(E=O.body.appendChild(O.createElement(S)),U=x.css(E,"display"),E.parentNode.removeChild(E),U==="none"&&(U="block"),kc[S]=U)))):C!=="none"&&(V[ee]="none",Ye.set(w,"display",C)));for(ee=0;ee<ae;ee++)V[ee]!=null&&(u[ee].style.display=V[ee]);return u}x.fn.extend({show:function(){return wr(this,!0)},hide:function(){return wr(this)},toggle:function(u){return typeof u=="boolean"?u?this.show():this.hide():this.each(function(){wt(this)?x(this).show():x(this).hide()})}});var Sr,tr,nr=/^(?:checkbox|radio)$/i,Vs=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ot=/^$|^module$|\/(?:java|ecma)script/i;Sr=Xe.createDocumentFragment().appendChild(Xe.createElement("div")),(tr=Xe.createElement("input")).setAttribute("type","radio"),tr.setAttribute("checked","checked"),tr.setAttribute("name","t"),Sr.appendChild(tr),He.checkClone=Sr.cloneNode(!0).cloneNode(!0).lastChild.checked,Sr.innerHTML="<textarea>x</textarea>",He.noCloneChecked=!!Sr.cloneNode(!0).lastChild.defaultValue,Sr.innerHTML="<option></option>",He.option=!!Sr.lastChild;var Oe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function mn(u,p){var C;return C=typeof u.getElementsByTagName<"u"?u.getElementsByTagName(p||"*"):typeof u.querySelectorAll<"u"?u.querySelectorAll(p||"*"):[],p===void 0||p&&Ee(u,p)?x.merge([u],C):C}function bo(u,p){for(var C=0,w=u.length;C<w;C++)Ye.set(u[C],"globalEval",!p||Ye.get(p[C],"globalEval"))}Oe.tbody=Oe.tfoot=Oe.colgroup=Oe.caption=Oe.thead,Oe.th=Oe.td,He.option||(Oe.optgroup=Oe.option=[1,"<select multiple='multiple'>","</select>"]);var Qt=/<|&#?\w+;/;function Ji(u,p,C,w,T){for(var E,O,S,U,V,ee,ae=p.createDocumentFragment(),Q=[],ce=0,me=u.length;ce<me;ce++)if((E=u[ce])||E===0)if(kt(E)==="object")x.merge(Q,E.nodeType?[E]:E);else if(Qt.test(E)){for(O=O||ae.appendChild(p.createElement("div")),S=(Vs.exec(E)||["",""])[1].toLowerCase(),U=Oe[S]||Oe._default,O.innerHTML=U[1]+x.htmlPrefilter(E)+U[2],ee=U[0];ee--;)O=O.lastChild;x.merge(Q,O.childNodes),(O=ae.firstChild).textContent=""}else Q.push(p.createTextNode(E));for(ae.textContent="",ce=0;E=Q[ce++];)if(w&&-1<x.inArray(E,w))T&&T.push(E);else if(V=un(E),O=mn(ae.appendChild(E),"script"),V&&bo(O),C)for(ee=0;E=O[ee++];)Ot.test(E.type||"")&&C.push(E);return ae}var Zi=/^([^.]*)(?:\.(.+)|)/;function fn(){return!0}function ds(){return!1}function Ha(u,p,C,w,T,E){var O,S;if(typeof p=="object"){for(S in typeof C!="string"&&(w=w||C,C=void 0),p)Ha(u,S,C,w,p[S],E);return u}if(w==null&&T==null?(T=C,w=C=void 0):T==null&&(typeof C=="string"?(T=w,w=void 0):(T=w,w=C,C=void 0)),T===!1)T=ds;else if(!T)return u;return E===1&&(O=T,(T=function(U){return x().off(U),O.apply(this,arguments)}).guid=O.guid||(O.guid=x.guid++)),u.each(function(){x.event.add(this,p,T,w,C)})}function Ks(u,p,C){C?(Ye.set(u,p,!1),x.event.add(u,p,{namespace:!1,handler:function(w){var T,E=Ye.get(this,p);if(1&w.isTrigger&&this[p]){if(E)(x.event.special[p]||{}).delegateType&&w.stopPropagation();else if(E=it.call(arguments),Ye.set(this,p,E),this[p](),T=Ye.get(this,p),Ye.set(this,p,!1),E!==T)return w.stopImmediatePropagation(),w.preventDefault(),T}else E&&(Ye.set(this,p,x.event.trigger(E[0],E.slice(1),this)),w.stopPropagation(),w.isImmediatePropagationStopped=fn)}})):Ye.get(u,p)===void 0&&x.event.add(u,p,fn)}x.event={global:{},add:function(u,p,C,w,T){var E,O,S,U,V,ee,ae,Q,ce,me,Ze,mt=Ye.get(u);if(eo(u))for(C.handler&&(C=(E=C).handler,T=E.selector),T&&x.find.matchesSelector(ho,T),C.guid||(C.guid=x.guid++),(U=mt.events)||(U=mt.events=Object.create(null)),(O=mt.handle)||(O=mt.handle=function(Jt){return typeof x<"u"&&x.event.triggered!==Jt.type?x.event.dispatch.apply(u,arguments):void 0}),V=(p=(p||"").match(qe)||[""]).length;V--;)ce=Ze=(S=Zi.exec(p[V])||[])[1],me=(S[2]||"").split(".").sort(),ce&&(ae=x.event.special[ce]||{},ce=(T?ae.delegateType:ae.bindType)||ce,ae=x.event.special[ce]||{},ee=x.extend({type:ce,origType:Ze,data:w,handler:C,guid:C.guid,selector:T,needsContext:T&&x.expr.match.needsContext.test(T),namespace:me.join(".")},E),(Q=U[ce])||((Q=U[ce]=[]).delegateCount=0,ae.setup&&ae.setup.call(u,w,me,O)!==!1||u.addEventListener&&u.addEventListener(ce,O)),ae.add&&(ae.add.call(u,ee),ee.handler.guid||(ee.handler.guid=C.guid)),T?Q.splice(Q.delegateCount++,0,ee):Q.push(ee),x.event.global[ce]=!0)},remove:function(u,p,C,w,T){var E,O,S,U,V,ee,ae,Q,ce,me,Ze,mt=Ye.hasData(u)&&Ye.get(u);if(mt&&(U=mt.events)){for(V=(p=(p||"").match(qe)||[""]).length;V--;)if(ce=Ze=(S=Zi.exec(p[V])||[])[1],me=(S[2]||"").split(".").sort(),ce){for(ae=x.event.special[ce]||{},Q=U[ce=(w?ae.delegateType:ae.bindType)||ce]||[],S=S[2]&&new RegExp("(^|\\.)"+me.join("\\.(?:.*\\.|)")+"(\\.|$)"),O=E=Q.length;E--;)ee=Q[E],!T&&Ze!==ee.origType||C&&C.guid!==ee.guid||S&&!S.test(ee.namespace)||w&&w!==ee.selector&&(w!=="**"||!ee.selector)||(Q.splice(E,1),ee.selector&&Q.delegateCount--,ae.remove&&ae.remove.call(u,ee));O&&!Q.length&&(ae.teardown&&ae.teardown.call(u,me,mt.handle)!==!1||x.removeEvent(u,ce,mt.handle),delete U[ce])}else for(ce in U)x.event.remove(u,ce+p[V],C,w,!0);x.isEmptyObject(U)&&Ye.remove(u,"handle events")}},dispatch:function(u){var p,C,w,T,E,O,S=new Array(arguments.length),U=x.event.fix(u),V=(Ye.get(this,"events")||Object.create(null))[U.type]||[],ee=x.event.special[U.type]||{};for(S[0]=U,p=1;p<arguments.length;p++)S[p]=arguments[p];if(U.delegateTarget=this,!ee.preDispatch||ee.preDispatch.call(this,U)!==!1){for(O=x.event.handlers.call(this,U,V),p=0;(T=O[p++])&&!U.isPropagationStopped();)for(U.currentTarget=T.elem,C=0;(E=T.handlers[C++])&&!U.isImmediatePropagationStopped();)U.rnamespace&&E.namespace!==!1&&!U.rnamespace.test(E.namespace)||(U.handleObj=E,U.data=E.data,(w=((x.event.special[E.origType]||{}).handle||E.handler).apply(T.elem,S))!==void 0&&(U.result=w)===!1&&(U.preventDefault(),U.stopPropagation()));return ee.postDispatch&&ee.postDispatch.call(this,U),U.result}},handlers:function(u,p){var C,w,T,E,O,S=[],U=p.delegateCount,V=u.target;if(U&&V.nodeType&&!(u.type==="click"&&1<=u.button)){for(;V!==this;V=V.parentNode||this)if(V.nodeType===1&&(u.type!=="click"||V.disabled!==!0)){for(E=[],O={},C=0;C<U;C++)O[T=(w=p[C]).selector+" "]===void 0&&(O[T]=w.needsContext?-1<x(T,this).index(V):x.find(T,this,null,[V]).length),O[T]&&E.push(w);E.length&&S.push({elem:V,handlers:E})}}return V=this,U<p.length&&S.push({elem:V,handlers:p.slice(U)}),S},addProp:function(u,p){Object.defineProperty(x.Event.prototype,u,{enumerable:!0,configurable:!0,get:Re(p)?function(){if(this.originalEvent)return p(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[u]},set:function(C){Object.defineProperty(this,u,{enumerable:!0,configurable:!0,writable:!0,value:C})}})},fix:function(u){return u[x.expando]?u:new x.Event(u)},special:{load:{noBubble:!0},click:{setup:function(u){var p=this||u;return nr.test(p.type)&&p.click&&Ee(p,"input")&&Ks(p,"click",!0),!1},trigger:function(u){var p=this||u;return nr.test(p.type)&&p.click&&Ee(p,"input")&&Ks(p,"click"),!0},_default:function(u){var p=u.target;return nr.test(p.type)&&p.click&&Ee(p,"input")&&Ye.get(p,"click")||Ee(p,"a")}},beforeunload:{postDispatch:function(u){u.result!==void 0&&u.originalEvent&&(u.originalEvent.returnValue=u.result)}}}},x.removeEvent=function(u,p,C){u.removeEventListener&&u.removeEventListener(p,C)},x.Event=function(u,p){if(!(this instanceof x.Event))return new x.Event(u,p);u&&u.type?(this.originalEvent=u,this.type=u.type,this.isDefaultPrevented=u.defaultPrevented||u.defaultPrevented===void 0&&u.returnValue===!1?fn:ds,this.target=u.target&&u.target.nodeType===3?u.target.parentNode:u.target,this.currentTarget=u.currentTarget,this.relatedTarget=u.relatedTarget):this.type=u,p&&x.extend(this,p),this.timeStamp=u&&u.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:ds,isPropagationStopped:ds,isImmediatePropagationStopped:ds,isSimulated:!1,preventDefault:function(){var u=this.originalEvent;this.isDefaultPrevented=fn,u&&!this.isSimulated&&u.preventDefault()},stopPropagation:function(){var u=this.originalEvent;this.isPropagationStopped=fn,u&&!this.isSimulated&&u.stopPropagation()},stopImmediatePropagation:function(){var u=this.originalEvent;this.isImmediatePropagationStopped=fn,u&&!this.isSimulated&&u.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(u,p){function C(w){if(Xe.documentMode){var T=Ye.get(this,"handle"),E=x.event.fix(w);E.type=w.type==="focusin"?"focus":"blur",E.isSimulated=!0,T(w),E.target===E.currentTarget&&T(E)}else x.event.simulate(p,w.target,x.event.fix(w))}x.event.special[u]={setup:function(){var w;if(Ks(this,u,!0),!Xe.documentMode)return!1;(w=Ye.get(this,p))||this.addEventListener(p,C),Ye.set(this,p,(w||0)+1)},trigger:function(){return Ks(this,u),!0},teardown:function(){var w;if(!Xe.documentMode)return!1;(w=Ye.get(this,p)-1)?Ye.set(this,p,w):(this.removeEventListener(p,C),Ye.remove(this,p))},_default:function(w){return Ye.get(w.target,u)},delegateType:p},x.event.special[p]={setup:function(){var w=this.ownerDocument||this.document||this,T=Xe.documentMode?this:w,E=Ye.get(T,p);E||(Xe.documentMode?this.addEventListener(p,C):w.addEventListener(u,C,!0)),Ye.set(T,p,(E||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,T=Xe.documentMode?this:w,E=Ye.get(T,p)-1;E?Ye.set(T,p,E):(Xe.documentMode?this.removeEventListener(p,C):w.removeEventListener(u,C,!0),Ye.remove(T,p))}}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(u,p){x.event.special[u]={delegateType:p,bindType:p,handle:function(C){var w,T=C.relatedTarget,E=C.handleObj;return T&&(T===this||x.contains(this,T))||(C.type=E.origType,w=E.handler.apply(this,arguments),C.type=p),w}}}),x.fn.extend({on:function(u,p,C,w){return Ha(this,u,p,C,w)},one:function(u,p,C,w){return Ha(this,u,p,C,w,1)},off:function(u,p,C){var w,T;if(u&&u.preventDefault&&u.handleObj)return w=u.handleObj,x(u.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if(typeof u=="object"){for(T in u)this.off(T,p,u[T]);return this}return p!==!1&&typeof p!="function"||(C=p,p=void 0),C===!1&&(C=ds),this.each(function(){x.event.remove(this,u,C,p)})}});var Xs=/<script|<style|<link/i,_c=/checked\s*(?:[^=]|=\s*.checked.)/i,Nc=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function $a(u,p){return Ee(u,"table")&&Ee(p.nodeType!==11?p:p.firstChild,"tr")&&x(u).children("tbody")[0]||u}function tm(u){return u.type=(u.getAttribute("type")!==null)+"/"+u.type,u}function us(u){return(u.type||"").slice(0,5)==="true/"?u.type=u.type.slice(5):u.removeAttribute("type"),u}function qa(u,p){var C,w,T,E,O,S;if(p.nodeType===1){if(Ye.hasData(u)&&(S=Ye.get(u).events))for(T in Ye.remove(p,"handle events"),S)for(C=0,w=S[T].length;C<w;C++)x.event.add(p,T,S[T][C]);wn.hasData(u)&&(E=wn.access(u),O=x.extend({},E),wn.set(p,O))}}function zt(u,p,C,w){p=Xt(p);var T,E,O,S,U,V,ee=0,ae=u.length,Q=ae-1,ce=p[0],me=Re(ce);if(me||1<ae&&typeof ce=="string"&&!He.checkClone&&_c.test(ce))return u.each(function(Ze){var mt=u.eq(Ze);me&&(p[0]=ce.call(this,Ze,mt.html())),zt(mt,p,C,w)});if(ae&&(E=(T=Ji(p,u[0].ownerDocument,!1,u,w)).firstChild,T.childNodes.length===1&&(T=E),E||w)){for(S=(O=x.map(mn(T,"script"),tm)).length;ee<ae;ee++)U=T,ee!==Q&&(U=x.clone(U,!0,!0),S&&x.merge(O,mn(U,"script"))),C.call(u[ee],U,ee);if(S)for(V=O[O.length-1].ownerDocument,x.map(O,us),ee=0;ee<S;ee++)U=O[ee],Ot.test(U.type||"")&&!Ye.access(U,"globalEval")&&x.contains(V,U)&&(U.src&&(U.type||"").toLowerCase()!=="module"?x._evalUrl&&!U.noModule&&x._evalUrl(U.src,{nonce:U.nonce||U.getAttribute("nonce")},V):Lt(U.textContent.replace(Nc,""),U,V))}return u}function Xr(u,p,C){for(var w,T=p?x.filter(p,u):u,E=0;(w=T[E])!=null;E++)C||w.nodeType!==1||x.cleanData(mn(w)),w.parentNode&&(C&&un(w)&&bo(mn(w,"script")),w.parentNode.removeChild(w));return u}x.extend({htmlPrefilter:function(u){return u},clone:function(u,p,C){var w,T,E,O,S,U,V,ee=u.cloneNode(!0),ae=un(u);if(!(He.noCloneChecked||u.nodeType!==1&&u.nodeType!==11||x.isXMLDoc(u)))for(O=mn(ee),w=0,T=(E=mn(u)).length;w<T;w++)S=E[w],U=O[w],(V=U.nodeName.toLowerCase())==="input"&&nr.test(S.type)?U.checked=S.checked:V!=="input"&&V!=="textarea"||(U.defaultValue=S.defaultValue);if(p)if(C)for(E=E||mn(u),O=O||mn(ee),w=0,T=E.length;w<T;w++)qa(E[w],O[w]);else qa(u,ee);return 0<(O=mn(ee,"script")).length&&bo(O,!ae&&mn(u,"script")),ee},cleanData:function(u){for(var p,C,w,T=x.event.special,E=0;(C=u[E])!==void 0;E++)if(eo(C)){if(p=C[Ye.expando]){if(p.events)for(w in p.events)T[w]?x.event.remove(C,w):x.removeEvent(C,w,p.handle);C[Ye.expando]=void 0}C[wn.expando]&&(C[wn.expando]=void 0)}}}),x.fn.extend({detach:function(u){return Xr(this,u,!0)},remove:function(u){return Xr(this,u)},text:function(u){return go(this,function(p){return p===void 0?x.text(this):this.empty().each(function(){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||(this.textContent=p)})},null,u,arguments.length)},append:function(){return zt(this,arguments,function(u){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||$a(this,u).appendChild(u)})},prepend:function(){return zt(this,arguments,function(u){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var p=$a(this,u);p.insertBefore(u,p.firstChild)}})},before:function(){return zt(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this)})},after:function(){return zt(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this.nextSibling)})},empty:function(){for(var u,p=0;(u=this[p])!=null;p++)u.nodeType===1&&(x.cleanData(mn(u,!1)),u.textContent="");return this},clone:function(u,p){return u=u!=null&&u,p=p??u,this.map(function(){return x.clone(this,u,p)})},html:function(u){return go(this,function(p){var C=this[0]||{},w=0,T=this.length;if(p===void 0&&C.nodeType===1)return C.innerHTML;if(typeof p=="string"&&!Xs.test(p)&&!Oe[(Vs.exec(p)||["",""])[1].toLowerCase()]){p=x.htmlPrefilter(p);try{for(;w<T;w++)(C=this[w]||{}).nodeType===1&&(x.cleanData(mn(C,!1)),C.innerHTML=p);C=0}catch{}}C&&this.empty().append(p)},null,u,arguments.length)},replaceWith:function(){var u=[];return zt(this,arguments,function(p){var C=this.parentNode;x.inArray(this,u)<0&&(x.cleanData(mn(this)),C&&C.replaceChild(p,this))},u)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(u,p){x.fn[u]=function(C){for(var w,T=[],E=x(C),O=E.length-1,S=0;S<=O;S++)w=S===O?this:this.clone(!0),x(E[S])[p](w),Dn.apply(T,w.get());return this.pushStack(T)}});var Wa=new RegExp("^("+to+")(?!px)[a-z%]+$","i"),Va=/^--/,Ka=function(u){var p=u.ownerDocument.defaultView;return p&&p.opener||(p=ge),p.getComputedStyle(u)},$o=function(u,p,C){var w,T,E={};for(T in p)E[T]=u.style[T],u.style[T]=p[T];for(T in w=C.call(u),p)u.style[T]=E[T];return w},Ac=new RegExp(zn.join("|"),"i");function ms(u,p,C){var w,T,E,O,S=Va.test(p),U=u.style;return(C=C||Ka(u))&&(O=C.getPropertyValue(p)||C[p],S&&O&&(O=O.replace(Zo,"$1")||void 0),O!==""||un(u)||(O=x.style(u,p)),!He.pixelBoxStyles()&&Wa.test(O)&&Ac.test(p)&&(w=U.width,T=U.minWidth,E=U.maxWidth,U.minWidth=U.maxWidth=U.width=O,O=C.width,U.width=w,U.minWidth=T,U.maxWidth=E)),O!==void 0?O+"":O}function pn(u,p){return{get:function(){if(!u())return(this.get=p).apply(this,arguments);delete this.get}}}(function(){function u(){if(V){U.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",V.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ho.appendChild(U).appendChild(V);var ee=ge.getComputedStyle(V);C=ee.top!=="1%",S=p(ee.marginLeft)===12,V.style.right="60%",E=p(ee.right)===36,w=p(ee.width)===36,V.style.position="absolute",T=p(V.offsetWidth/3)===12,ho.removeChild(U),V=null}}function p(ee){return Math.round(parseFloat(ee))}var C,w,T,E,O,S,U=Xe.createElement("div"),V=Xe.createElement("div");V.style&&(V.style.backgroundClip="content-box",V.cloneNode(!0).style.backgroundClip="",He.clearCloneStyle=V.style.backgroundClip==="content-box",x.extend(He,{boxSizingReliable:function(){return u(),w},pixelBoxStyles:function(){return u(),E},pixelPosition:function(){return u(),C},reliableMarginLeft:function(){return u(),S},scrollboxSize:function(){return u(),T},reliableTrDimensions:function(){var ee,ae,Q,ce;return O==null&&(ee=Xe.createElement("table"),ae=Xe.createElement("tr"),Q=Xe.createElement("div"),ee.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ae.style.cssText="box-sizing:content-box;border:1px solid",ae.style.height="1px",Q.style.height="9px",Q.style.display="block",ho.appendChild(ee).appendChild(ae).appendChild(Q),ce=ge.getComputedStyle(ae),O=parseInt(ce.height,10)+parseInt(ce.borderTopWidth,10)+parseInt(ce.borderBottomWidth,10)===ae.offsetHeight,ho.removeChild(ee)),O}}))})();var Gt=["Webkit","Moz","ms"],Xa=Xe.createElement("div").style,Ya={};function Er(u){var p=x.cssProps[u]||Ya[u];return p||(u in Xa?u:Ya[u]=(function(C){for(var w=C[0].toUpperCase()+C.slice(1),T=Gt.length;T--;)if((C=Gt[T]+w)in Xa)return C})(u)||u)}var nm=/^(none|table(?!-c[ea]).+)/,Tc={position:"absolute",visibility:"hidden",display:"block"},ko={letterSpacing:"0",fontWeight:"400"};function fs(u,p,C){var w=vn.exec(p);return w?Math.max(0,w[2]-(C||0))+(w[3]||"px"):p}function ps(u,p,C,w,T,E){var O=p==="width"?1:0,S=0,U=0,V=0;if(C===(w?"border":"content"))return 0;for(;O<4;O+=2)C==="margin"&&(V+=x.css(u,C+zn[O],!0,T)),w?(C==="content"&&(U-=x.css(u,"padding"+zn[O],!0,T)),C!=="margin"&&(U-=x.css(u,"border"+zn[O]+"Width",!0,T))):(U+=x.css(u,"padding"+zn[O],!0,T),C!=="padding"?U+=x.css(u,"border"+zn[O]+"Width",!0,T):S+=x.css(u,"border"+zn[O]+"Width",!0,T));return!w&&0<=E&&(U+=Math.max(0,Math.ceil(u["offset"+p[0].toUpperCase()+p.slice(1)]-E-U-S-.5))||0),U+V}function Ys(u,p,C){var w=Ka(u),T=(!He.boxSizingReliable()||C)&&x.css(u,"boxSizing",!1,w)==="border-box",E=T,O=ms(u,p,w),S="offset"+p[0].toUpperCase()+p.slice(1);if(Wa.test(O)){if(!C)return O;O="auto"}return(!He.boxSizingReliable()&&T||!He.reliableTrDimensions()&&Ee(u,"tr")||O==="auto"||!parseFloat(O)&&x.css(u,"display",!1,w)==="inline")&&u.getClientRects().length&&(T=x.css(u,"boxSizing",!1,w)==="border-box",(E=S in u)&&(O=u[S])),(O=parseFloat(O)||0)+ps(u,p,C||(T?"border":"content"),E,w,O)+"px"}function no(u,p,C,w,T){return new no.prototype.init(u,p,C,w,T)}x.extend({cssHooks:{opacity:{get:function(u,p){if(p){var C=ms(u,"opacity");return C===""?"1":C}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(u,p,C,w){if(u&&u.nodeType!==3&&u.nodeType!==8&&u.style){var T,E,O,S=$t(p),U=Va.test(p),V=u.style;if(U||(p=Er(S)),O=x.cssHooks[p]||x.cssHooks[S],C===void 0)return O&&"get"in O&&(T=O.get(u,!1,w))!==void 0?T:V[p];(E=typeof C)=="string"&&(T=vn.exec(C))&&T[1]&&(C=Ws(u,p,T),E="number"),C!=null&&C==C&&(E!=="number"||U||(C+=T&&T[3]||(x.cssNumber[S]?"":"px")),He.clearCloneStyle||C!==""||p.indexOf("background")!==0||(V[p]="inherit"),O&&"set"in O&&(C=O.set(u,C,w))===void 0||(U?V.setProperty(p,C):V[p]=C))}},css:function(u,p,C,w){var T,E,O,S=$t(p);return Va.test(p)||(p=Er(S)),(O=x.cssHooks[p]||x.cssHooks[S])&&"get"in O&&(T=O.get(u,!0,C)),T===void 0&&(T=ms(u,p,w)),T==="normal"&&p in ko&&(T=ko[p]),C===""||C?(E=parseFloat(T),C===!0||isFinite(E)?E||0:T):T}}),x.each(["height","width"],function(u,p){x.cssHooks[p]={get:function(C,w,T){if(w)return!nm.test(x.css(C,"display"))||C.getClientRects().length&&C.getBoundingClientRect().width?Ys(C,p,T):$o(C,Tc,function(){return Ys(C,p,T)})},set:function(C,w,T){var E,O=Ka(C),S=!He.scrollboxSize()&&O.position==="absolute",U=(S||T)&&x.css(C,"boxSizing",!1,O)==="border-box",V=T?ps(C,p,T,U,O):0;return U&&S&&(V-=Math.ceil(C["offset"+p[0].toUpperCase()+p.slice(1)]-parseFloat(O[p])-ps(C,p,"border",!1,O)-.5)),V&&(E=vn.exec(w))&&(E[3]||"px")!=="px"&&(C.style[p]=w,w=x.css(C,p)),fs(0,w,V)}}}),x.cssHooks.marginLeft=pn(He.reliableMarginLeft,function(u,p){if(p)return(parseFloat(ms(u,"marginLeft"))||u.getBoundingClientRect().left-$o(u,{marginLeft:0},function(){return u.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(u,p){x.cssHooks[u+p]={expand:function(C){for(var w=0,T={},E=typeof C=="string"?C.split(" "):[C];w<4;w++)T[u+zn[w]+p]=E[w]||E[w-2]||E[0];return T}},u!=="margin"&&(x.cssHooks[u+p].set=fs)}),x.fn.extend({css:function(u,p){return go(this,function(C,w,T){var E,O,S={},U=0;if(Array.isArray(w)){for(E=Ka(C),O=w.length;U<O;U++)S[w[U]]=x.css(C,w[U],!1,E);return S}return T!==void 0?x.style(C,w,T):x.css(C,w)},u,p,1<arguments.length)}}),((x.Tween=no).prototype={constructor:no,init:function(u,p,C,w,T,E){this.elem=u,this.prop=C,this.easing=T||x.easing._default,this.options=p,this.start=this.now=this.cur(),this.end=w,this.unit=E||(x.cssNumber[C]?"":"px")},cur:function(){var u=no.propHooks[this.prop];return u&&u.get?u.get(this):no.propHooks._default.get(this)},run:function(u){var p,C=no.propHooks[this.prop];return this.options.duration?this.pos=p=x.easing[this.easing](u,this.options.duration*u,0,1,this.options.duration):this.pos=p=u,this.now=(this.end-this.start)*p+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),C&&C.set?C.set(this):no.propHooks._default.set(this),this}}).init.prototype=no.prototype,(no.propHooks={_default:{get:function(u){var p;return u.elem.nodeType!==1||u.elem[u.prop]!=null&&u.elem.style[u.prop]==null?u.elem[u.prop]:(p=x.css(u.elem,u.prop,""))&&p!=="auto"?p:0},set:function(u){x.fx.step[u.prop]?x.fx.step[u.prop](u):u.elem.nodeType!==1||!x.cssHooks[u.prop]&&u.elem.style[Er(u.prop)]==null?u.elem[u.prop]=u.now:x.style(u.elem,u.prop,u.now+u.unit)}}}).scrollTop=no.propHooks.scrollLeft={set:function(u){u.elem.nodeType&&u.elem.parentNode&&(u.elem[u.prop]=u.now)}},x.easing={linear:function(u){return u},swing:function(u){return .5-Math.cos(u*Math.PI)/2},_default:"swing"},x.fx=no.prototype.init,x.fx.step={};var Un,kr,It,Yr,Dc=/^(?:toggle|show|hide)$/,Rc=/queueHooks$/;function Gs(){kr&&(Xe.hidden===!1&&ge.requestAnimationFrame?ge.requestAnimationFrame(Gs):ge.setTimeout(Gs,x.fx.interval),x.fx.tick())}function Qs(){return ge.setTimeout(function(){Un=void 0}),Un=Date.now()}function gs(u,p){var C,w=0,T={height:u};for(p=p?1:0;w<4;w+=2-p)T["margin"+(C=zn[w])]=T["padding"+C]=u;return p&&(T.opacity=T.width=u),T}function hs(u,p,C){for(var w,T=(Yn.tweeners[p]||[]).concat(Yn.tweeners["*"]),E=0,O=T.length;E<O;E++)if(w=T[E].call(C,p,u))return w}function Yn(u,p,C){var w,T,E=0,O=Yn.prefilters.length,S=x.Deferred().always(function(){delete U.elem}),U=function(){if(T)return!1;for(var ae=Un||Qs(),Q=Math.max(0,V.startTime+V.duration-ae),ce=1-(Q/V.duration||0),me=0,Ze=V.tweens.length;me<Ze;me++)V.tweens[me].run(ce);return S.notifyWith(u,[V,ce,Q]),ce<1&&Ze?Q:(Ze||S.notifyWith(u,[V,1,0]),S.resolveWith(u,[V]),!1)},V=S.promise({elem:u,props:x.extend({},p),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},C),originalProperties:p,originalOptions:C,startTime:Un||Qs(),duration:C.duration,tweens:[],createTween:function(ae,Q){var ce=x.Tween(u,V.opts,ae,Q,V.opts.specialEasing[ae]||V.opts.easing);return V.tweens.push(ce),ce},stop:function(ae){var Q=0,ce=ae?V.tweens.length:0;if(T)return this;for(T=!0;Q<ce;Q++)V.tweens[Q].run(1);return ae?(S.notifyWith(u,[V,1,0]),S.resolveWith(u,[V,ae])):S.rejectWith(u,[V,ae]),this}}),ee=V.props;for(!(function(ae,Q){var ce,me,Ze,mt,Jt;for(ce in ae)if(Ze=Q[me=$t(ce)],mt=ae[ce],Array.isArray(mt)&&(Ze=mt[1],mt=ae[ce]=mt[0]),ce!==me&&(ae[me]=mt,delete ae[ce]),(Jt=x.cssHooks[me])&&"expand"in Jt)for(ce in mt=Jt.expand(mt),delete ae[me],mt)ce in ae||(ae[ce]=mt[ce],Q[ce]=Ze);else Q[me]=Ze})(ee,V.opts.specialEasing);E<O;E++)if(w=Yn.prefilters[E].call(V,u,ee,V.opts))return Re(w.stop)&&(x._queueHooks(V.elem,V.opts.queue).stop=w.stop.bind(w)),w;return x.map(ee,hs,V),Re(V.opts.start)&&V.opts.start.call(u,V),V.progress(V.opts.progress).done(V.opts.done,V.opts.complete).fail(V.opts.fail).always(V.opts.always),x.fx.timer(x.extend(U,{elem:u,anim:V,queue:V.opts.queue})),V}x.Animation=x.extend(Yn,{tweeners:{"*":[function(u,p){var C=this.createTween(u,p);return Ws(C.elem,u,vn.exec(p),C),C}]},tweener:function(u,p){Re(u)?(p=u,u=["*"]):u=u.match(qe);for(var C,w=0,T=u.length;w<T;w++)C=u[w],Yn.tweeners[C]=Yn.tweeners[C]||[],Yn.tweeners[C].unshift(p)},prefilters:[function(u,p,C){var w,T,E,O,S,U,V,ee,ae="width"in p||"height"in p,Q=this,ce={},me=u.style,Ze=u.nodeType&&wt(u),mt=Ye.get(u,"fxshow");for(w in C.queue||((O=x._queueHooks(u,"fx")).unqueued==null&&(O.unqueued=0,S=O.empty.fire,O.empty.fire=function(){O.unqueued||S()}),O.unqueued++,Q.always(function(){Q.always(function(){O.unqueued--,x.queue(u,"fx").length||O.empty.fire()})})),p)if(T=p[w],Dc.test(T)){if(delete p[w],E=E||T==="toggle",T===(Ze?"hide":"show")){if(T!=="show"||!mt||mt[w]===void 0)continue;Ze=!0}ce[w]=mt&&mt[w]||x.style(u,w)}if((U=!x.isEmptyObject(p))||!x.isEmptyObject(ce))for(w in ae&&u.nodeType===1&&(C.overflow=[me.overflow,me.overflowX,me.overflowY],(V=mt&&mt.display)==null&&(V=Ye.get(u,"display")),(ee=x.css(u,"display"))==="none"&&(V?ee=V:(wr([u],!0),V=u.style.display||V,ee=x.css(u,"display"),wr([u]))),(ee==="inline"||ee==="inline-block"&&V!=null)&&x.css(u,"float")==="none"&&(U||(Q.done(function(){me.display=V}),V==null&&(ee=me.display,V=ee==="none"?"":ee)),me.display="inline-block")),C.overflow&&(me.overflow="hidden",Q.always(function(){me.overflow=C.overflow[0],me.overflowX=C.overflow[1],me.overflowY=C.overflow[2]})),U=!1,ce)U||(mt?"hidden"in mt&&(Ze=mt.hidden):mt=Ye.access(u,"fxshow",{display:V}),E&&(mt.hidden=!Ze),Ze&&wr([u],!0),Q.done(function(){for(w in Ze||wr([u]),Ye.remove(u,"fxshow"),ce)x.style(u,w,ce[w])})),U=hs(Ze?mt[w]:0,w,Q),w in mt||(mt[w]=U.start,Ze&&(U.end=U.start,U.start=0))}],prefilter:function(u,p){p?Yn.prefilters.unshift(u):Yn.prefilters.push(u)}}),x.speed=function(u,p,C){var w=u&&typeof u=="object"?x.extend({},u):{complete:C||!C&&p||Re(u)&&u,duration:u,easing:C&&p||p&&!Re(p)&&p};return x.fx.off?w.duration=0:typeof w.duration!="number"&&(w.duration in x.fx.speeds?w.duration=x.fx.speeds[w.duration]:w.duration=x.fx.speeds._default),w.queue!=null&&w.queue!==!0||(w.queue="fx"),w.old=w.complete,w.complete=function(){Re(w.old)&&w.old.call(this),w.queue&&x.dequeue(this,w.queue)},w},x.fn.extend({fadeTo:function(u,p,C,w){return this.filter(wt).css("opacity",0).show().end().animate({opacity:p},u,C,w)},animate:function(u,p,C,w){var T=x.isEmptyObject(u),E=x.speed(p,C,w),O=function(){var S=Yn(this,x.extend({},u),E);(T||Ye.get(this,"finish"))&&S.stop(!0)};return O.finish=O,T||E.queue===!1?this.each(O):this.queue(E.queue,O)},stop:function(u,p,C){var w=function(T){var E=T.stop;delete T.stop,E(C)};return typeof u!="string"&&(C=p,p=u,u=void 0),p&&this.queue(u||"fx",[]),this.each(function(){var T=!0,E=u!=null&&u+"queueHooks",O=x.timers,S=Ye.get(this);if(E)S[E]&&S[E].stop&&w(S[E]);else for(E in S)S[E]&&S[E].stop&&Rc.test(E)&&w(S[E]);for(E=O.length;E--;)O[E].elem!==this||u!=null&&O[E].queue!==u||(O[E].anim.stop(C),T=!1,O.splice(E,1));!T&&C||x.dequeue(this,u)})},finish:function(u){return u!==!1&&(u=u||"fx"),this.each(function(){var p,C=Ye.get(this),w=C[u+"queue"],T=C[u+"queueHooks"],E=x.timers,O=w?w.length:0;for(C.finish=!0,x.queue(this,u,[]),T&&T.stop&&T.stop.call(this,!0),p=E.length;p--;)E[p].elem===this&&E[p].queue===u&&(E[p].anim.stop(!0),E.splice(p,1));for(p=0;p<O;p++)w[p]&&w[p].finish&&w[p].finish.call(this);delete C.finish})}}),x.each(["toggle","show","hide"],function(u,p){var C=x.fn[p];x.fn[p]=function(w,T,E){return w==null||typeof w=="boolean"?C.apply(this,arguments):this.animate(gs(p,!0),w,T,E)}}),x.each({slideDown:gs("show"),slideUp:gs("hide"),slideToggle:gs("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(u,p){x.fn[u]=function(C,w,T){return this.animate(p,C,w,T)}}),x.timers=[],x.fx.tick=function(){var u,p=0,C=x.timers;for(Un=Date.now();p<C.length;p++)(u=C[p])()||C[p]!==u||C.splice(p--,1);C.length||x.fx.stop(),Un=void 0},x.fx.timer=function(u){x.timers.push(u),x.fx.start()},x.fx.interval=13,x.fx.start=function(){kr||(kr=!0,Gs())},x.fx.stop=function(){kr=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(u,p){return u=x.fx&&x.fx.speeds[u]||u,p=p||"fx",this.queue(p,function(C,w){var T=ge.setTimeout(C,u);w.stop=function(){ge.clearTimeout(T)}})},It=Xe.createElement("input"),Yr=Xe.createElement("select").appendChild(Xe.createElement("option")),It.type="checkbox",He.checkOn=It.value!=="",He.optSelected=Yr.selected,(It=Xe.createElement("input")).value="t",It.type="radio",He.radioValue=It.value==="t";var el,_o=x.expr.attrHandle;x.fn.extend({attr:function(u,p){return go(this,x.attr,u,p,1<arguments.length)},removeAttr:function(u){return this.each(function(){x.removeAttr(this,u)})}}),x.extend({attr:function(u,p,C){var w,T,E=u.nodeType;if(E!==3&&E!==8&&E!==2)return typeof u.getAttribute>"u"?x.prop(u,p,C):(E===1&&x.isXMLDoc(u)||(T=x.attrHooks[p.toLowerCase()]||(x.expr.match.bool.test(p)?el:void 0)),C!==void 0?C===null?void x.removeAttr(u,p):T&&"set"in T&&(w=T.set(u,C,p))!==void 0?w:(u.setAttribute(p,C+""),C):T&&"get"in T&&(w=T.get(u,p))!==null?w:(w=x.find.attr(u,p))==null?void 0:w)},attrHooks:{type:{set:function(u,p){if(!He.radioValue&&p==="radio"&&Ee(u,"input")){var C=u.value;return u.setAttribute("type",p),C&&(u.value=C),p}}}},removeAttr:function(u,p){var C,w=0,T=p&&p.match(qe);if(T&&u.nodeType===1)for(;C=T[w++];)u.removeAttribute(C)}}),el={set:function(u,p,C){return p===!1?x.removeAttr(u,C):u.setAttribute(C,C),C}},x.each(x.expr.match.bool.source.match(/\w+/g),function(u,p){var C=_o[p]||x.find.attr;_o[p]=function(w,T,E){var O,S,U=T.toLowerCase();return E||(S=_o[U],_o[U]=O,O=C(w,T,E)!=null?U:null,_o[U]=S),O}});var Oc=/^(?:input|select|textarea|button)$/i,tl=/^(?:a|area)$/i;function No(u){return(u.match(qe)||[]).join(" ")}function _r(u){return u.getAttribute&&u.getAttribute("class")||""}function Js(u){return Array.isArray(u)?u:typeof u=="string"&&u.match(qe)||[]}x.fn.extend({prop:function(u,p){return go(this,x.prop,u,p,1<arguments.length)},removeProp:function(u){return this.each(function(){delete this[x.propFix[u]||u]})}}),x.extend({prop:function(u,p,C){var w,T,E=u.nodeType;if(E!==3&&E!==8&&E!==2)return E===1&&x.isXMLDoc(u)||(p=x.propFix[p]||p,T=x.propHooks[p]),C!==void 0?T&&"set"in T&&(w=T.set(u,C,p))!==void 0?w:u[p]=C:T&&"get"in T&&(w=T.get(u,p))!==null?w:u[p]},propHooks:{tabIndex:{get:function(u){var p=x.find.attr(u,"tabindex");return p?parseInt(p,10):Oc.test(u.nodeName)||tl.test(u.nodeName)&&u.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),He.optSelected||(x.propHooks.selected={get:function(u){var p=u.parentNode;return p&&p.parentNode&&p.parentNode.selectedIndex,null},set:function(u){var p=u.parentNode;p&&(p.selectedIndex,p.parentNode&&p.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(u){var p,C,w,T,E,O;return Re(u)?this.each(function(S){x(this).addClass(u.call(this,S,_r(this)))}):(p=Js(u)).length?this.each(function(){if(w=_r(this),C=this.nodeType===1&&" "+No(w)+" "){for(E=0;E<p.length;E++)T=p[E],C.indexOf(" "+T+" ")<0&&(C+=T+" ");O=No(C),w!==O&&this.setAttribute("class",O)}}):this},removeClass:function(u){var p,C,w,T,E,O;return Re(u)?this.each(function(S){x(this).removeClass(u.call(this,S,_r(this)))}):arguments.length?(p=Js(u)).length?this.each(function(){if(w=_r(this),C=this.nodeType===1&&" "+No(w)+" "){for(E=0;E<p.length;E++)for(T=p[E];-1<C.indexOf(" "+T+" ");)C=C.replace(" "+T+" "," ");O=No(C),w!==O&&this.setAttribute("class",O)}}):this:this.attr("class","")},toggleClass:function(u,p){var C,w,T,E,O=typeof u,S=O==="string"||Array.isArray(u);return Re(u)?this.each(function(U){x(this).toggleClass(u.call(this,U,_r(this),p),p)}):typeof p=="boolean"&&S?p?this.addClass(u):this.removeClass(u):(C=Js(u),this.each(function(){if(S)for(E=x(this),T=0;T<C.length;T++)w=C[T],E.hasClass(w)?E.removeClass(w):E.addClass(w);else u!==void 0&&O!=="boolean"||((w=_r(this))&&Ye.set(this,"__className__",w),this.setAttribute&&this.setAttribute("class",w||u===!1?"":Ye.get(this,"__className__")||""))}))},hasClass:function(u){var p,C,w=0;for(p=" "+u+" ";C=this[w++];)if(C.nodeType===1&&-1<(" "+No(_r(C))+" ").indexOf(p))return!0;return!1}});var or=/\r/g;x.fn.extend({val:function(u){var p,C,w,T=this[0];return arguments.length?(w=Re(u),this.each(function(E){var O;this.nodeType===1&&((O=w?u.call(this,E,x(this).val()):u)==null?O="":typeof O=="number"?O+="":Array.isArray(O)&&(O=x.map(O,function(S){return S==null?"":S+""})),(p=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in p&&p.set(this,O,"value")!==void 0||(this.value=O))})):T?(p=x.valHooks[T.type]||x.valHooks[T.nodeName.toLowerCase()])&&"get"in p&&(C=p.get(T,"value"))!==void 0?C:typeof(C=T.value)=="string"?C.replace(or,""):C??"":void 0}}),x.extend({valHooks:{option:{get:function(u){var p=x.find.attr(u,"value");return p??No(x.text(u))}},select:{get:function(u){var p,C,w,T=u.options,E=u.selectedIndex,O=u.type==="select-one",S=O?null:[],U=O?E+1:T.length;for(w=E<0?U:O?E:0;w<U;w++)if(((C=T[w]).selected||w===E)&&!C.disabled&&(!C.parentNode.disabled||!Ee(C.parentNode,"optgroup"))){if(p=x(C).val(),O)return p;S.push(p)}return S},set:function(u,p){for(var C,w,T=u.options,E=x.makeArray(p),O=T.length;O--;)((w=T[O]).selected=-1<x.inArray(x.valHooks.option.get(w),E))&&(C=!0);return C||(u.selectedIndex=-1),E}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(u,p){if(Array.isArray(p))return u.checked=-1<x.inArray(x(u).val(),p)}},He.checkOn||(x.valHooks[this].get=function(u){return u.getAttribute("value")===null?"on":u.value})});var Zs=ge.location,Bc={guid:Date.now()},Ga=/\?/;x.parseXML=function(u){var p,C;if(!u||typeof u!="string")return null;try{p=new ge.DOMParser().parseFromString(u,"text/xml")}catch{}return C=p&&p.getElementsByTagName("parsererror")[0],p&&!C||x.error("Invalid XML: "+(C?x.map(C.childNodes,function(w){return w.textContent}).join(`
`):u)),p};var nl=/^(?:focusinfocus|focusoutblur)$/,ol=function(u){u.stopPropagation()};x.extend(x.event,{trigger:function(u,p,C,w){var T,E,O,S,U,V,ee,ae,Q=[C||Xe],ce=Rn.call(u,"type")?u.type:u,me=Rn.call(u,"namespace")?u.namespace.split("."):[];if(E=ae=O=C=C||Xe,C.nodeType!==3&&C.nodeType!==8&&!nl.test(ce+x.event.triggered)&&(-1<ce.indexOf(".")&&(ce=(me=ce.split(".")).shift(),me.sort()),U=ce.indexOf(":")<0&&"on"+ce,(u=u[x.expando]?u:new x.Event(ce,typeof u=="object"&&u)).isTrigger=w?2:3,u.namespace=me.join("."),u.rnamespace=u.namespace?new RegExp("(^|\\.)"+me.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u.result=void 0,u.target||(u.target=C),p=p==null?[u]:x.makeArray(p,[u]),ee=x.event.special[ce]||{},w||!ee.trigger||ee.trigger.apply(C,p)!==!1)){if(!w&&!ee.noBubble&&!re(C)){for(S=ee.delegateType||ce,nl.test(S+ce)||(E=E.parentNode);E;E=E.parentNode)Q.push(E),O=E;O===(C.ownerDocument||Xe)&&Q.push(O.defaultView||O.parentWindow||ge)}for(T=0;(E=Q[T++])&&!u.isPropagationStopped();)ae=E,u.type=1<T?S:ee.bindType||ce,(V=(Ye.get(E,"events")||Object.create(null))[u.type]&&Ye.get(E,"handle"))&&V.apply(E,p),(V=U&&E[U])&&V.apply&&eo(E)&&(u.result=V.apply(E,p),u.result===!1&&u.preventDefault());return u.type=ce,w||u.isDefaultPrevented()||ee._default&&ee._default.apply(Q.pop(),p)!==!1||!eo(C)||U&&Re(C[ce])&&!re(C)&&((O=C[U])&&(C[U]=null),x.event.triggered=ce,u.isPropagationStopped()&&ae.addEventListener(ce,ol),C[ce](),u.isPropagationStopped()&&ae.removeEventListener(ce,ol),x.event.triggered=void 0,O&&(C[U]=O)),u.result}},simulate:function(u,p,C){var w=x.extend(new x.Event,C,{type:u,isSimulated:!0});x.event.trigger(w,null,p)}}),x.fn.extend({trigger:function(u,p){return this.each(function(){x.event.trigger(u,p,this)})},triggerHandler:function(u,p){var C=this[0];if(C)return x.event.trigger(u,p,C,!0)}});var Pc=/\[\]$/,rl=/\r?\n/g,Lc=/^(?:submit|button|image|reset|file)$/i,Mc=/^(?:input|select|textarea|keygen)/i;function sl(u,p,C,w){var T;if(Array.isArray(p))x.each(p,function(E,O){C||Pc.test(u)?w(u,O):sl(u+"["+(typeof O=="object"&&O!=null?E:"")+"]",O,C,w)});else if(C||kt(p)!=="object")w(u,p);else for(T in p)sl(u+"["+T+"]",p[T],C,w)}x.param=function(u,p){var C,w=[],T=function(E,O){var S=Re(O)?O():O;w[w.length]=encodeURIComponent(E)+"="+encodeURIComponent(S??"")};if(u==null)return"";if(Array.isArray(u)||u.jquery&&!x.isPlainObject(u))x.each(u,function(){T(this.name,this.value)});else for(C in u)sl(C,u[C],p,T);return w.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var u=x.prop(this,"elements");return u?x.makeArray(u):this}).filter(function(){var u=this.type;return this.name&&!x(this).is(":disabled")&&Mc.test(this.nodeName)&&!Lc.test(u)&&(this.checked||!nr.test(u))}).map(function(u,p){var C=x(this).val();return C==null?null:Array.isArray(C)?x.map(C,function(w){return{name:p.name,value:w.replace(rl,`\r
`)}}):{name:p.name,value:C.replace(rl,`\r
`)}}).get()}});var om=/%20/g,Ic=/#.*$/,Fc=/([?&])_=[^&]*/,jc=/^(.*?):[ \t]*([^\r\n]*)$/gm,zc=/^(?:GET|HEAD)$/,Uc=/^\/\//,al={},Qa={},il="*/".concat("*"),ll=Xe.createElement("a");function Hc(u){return function(p,C){typeof p!="string"&&(C=p,p="*");var w,T=0,E=p.toLowerCase().match(qe)||[];if(Re(C))for(;w=E[T++];)w[0]==="+"?(w=w.slice(1)||"*",(u[w]=u[w]||[]).unshift(C)):(u[w]=u[w]||[]).push(C)}}function $c(u,p,C,w){var T={},E=u===Qa;function O(S){var U;return T[S]=!0,x.each(u[S]||[],function(V,ee){var ae=ee(p,C,w);return typeof ae!="string"||E||T[ae]?E?!(U=ae):void 0:(p.dataTypes.unshift(ae),O(ae),!1)}),U}return O(p.dataTypes[0])||!T["*"]&&O("*")}function cl(u,p){var C,w,T=x.ajaxSettings.flatOptions||{};for(C in p)p[C]!==void 0&&((T[C]?u:w||(w={}))[C]=p[C]);return w&&x.extend(!0,u,w),u}ll.href=Zs.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Zs.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Zs.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":il,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(u,p){return p?cl(cl(u,x.ajaxSettings),p):cl(x.ajaxSettings,u)},ajaxPrefilter:Hc(al),ajaxTransport:Hc(Qa),ajax:function(u,p){typeof u=="object"&&(p=u,u=void 0),p=p||{};var C,w,T,E,O,S,U,V,ee,ae,Q=x.ajaxSetup({},p),ce=Q.context||Q,me=Q.context&&(ce.nodeType||ce.jquery)?x(ce):x.event,Ze=x.Deferred(),mt=x.Callbacks("once memory"),Jt=Q.statusCode||{},Be={},Ao={},oo="canceled",St={readyState:0,getResponseHeader:function(ot){var Et;if(U){if(!E)for(E={};Et=jc.exec(T);)E[Et[1].toLowerCase()+" "]=(E[Et[1].toLowerCase()+" "]||[]).concat(Et[2]);Et=E[ot.toLowerCase()+" "]}return Et==null?null:Et.join(", ")},getAllResponseHeaders:function(){return U?T:null},setRequestHeader:function(ot,Et){return U==null&&(ot=Ao[ot.toLowerCase()]=Ao[ot.toLowerCase()]||ot,Be[ot]=Et),this},overrideMimeType:function(ot){return U==null&&(Q.mimeType=ot),this},statusCode:function(ot){var Et;if(ot)if(U)St.always(ot[St.status]);else for(Et in ot)Jt[Et]=[Jt[Et],ot[Et]];return this},abort:function(ot){var Et=ot||oo;return C&&C.abort(Et),ro(0,Et),this}};if(Ze.promise(St),Q.url=((u||Q.url||Zs.href)+"").replace(Uc,Zs.protocol+"//"),Q.type=p.method||p.type||Q.method||Q.type,Q.dataTypes=(Q.dataType||"*").toLowerCase().match(qe)||[""],Q.crossDomain==null){S=Xe.createElement("a");try{S.href=Q.url,S.href=S.href,Q.crossDomain=ll.protocol+"//"+ll.host!=S.protocol+"//"+S.host}catch{Q.crossDomain=!0}}if(Q.data&&Q.processData&&typeof Q.data!="string"&&(Q.data=x.param(Q.data,Q.traditional)),$c(al,Q,p,St),U)return St;for(ee in(V=x.event&&Q.global)&&x.active++==0&&x.event.trigger("ajaxStart"),Q.type=Q.type.toUpperCase(),Q.hasContent=!zc.test(Q.type),w=Q.url.replace(Ic,""),Q.hasContent?Q.data&&Q.processData&&(Q.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Q.data=Q.data.replace(om,"+")):(ae=Q.url.slice(w.length),Q.data&&(Q.processData||typeof Q.data=="string")&&(w+=(Ga.test(w)?"&":"?")+Q.data,delete Q.data),Q.cache===!1&&(w=w.replace(Fc,"$1"),ae=(Ga.test(w)?"&":"?")+"_="+Bc.guid+++ae),Q.url=w+ae),Q.ifModified&&(x.lastModified[w]&&St.setRequestHeader("If-Modified-Since",x.lastModified[w]),x.etag[w]&&St.setRequestHeader("If-None-Match",x.etag[w])),(Q.data&&Q.hasContent&&Q.contentType!==!1||p.contentType)&&St.setRequestHeader("Content-Type",Q.contentType),St.setRequestHeader("Accept",Q.dataTypes[0]&&Q.accepts[Q.dataTypes[0]]?Q.accepts[Q.dataTypes[0]]+(Q.dataTypes[0]!=="*"?", "+il+"; q=0.01":""):Q.accepts["*"]),Q.headers)St.setRequestHeader(ee,Q.headers[ee]);if(Q.beforeSend&&(Q.beforeSend.call(ce,St,Q)===!1||U))return St.abort();if(oo="abort",mt.add(Q.complete),St.done(Q.success),St.fail(Q.error),C=$c(Qa,Q,p,St)){if(St.readyState=1,V&&me.trigger("ajaxSend",[St,Q]),U)return St;Q.async&&0<Q.timeout&&(O=ge.setTimeout(function(){St.abort("timeout")},Q.timeout));try{U=!1,C.send(Be,ro)}catch(ot){if(U)throw ot;ro(-1,ot)}}else ro(-1,"No Transport");function ro(ot,Et,na,dl){var Cn,bs,Sn,yo,gn,En=Et;U||(U=!0,O&&ge.clearTimeout(O),C=void 0,T=dl||"",St.readyState=0<ot?4:0,Cn=200<=ot&&ot<300||ot===304,na&&(yo=(function(Zt,on,Vt){for(var Gn,Pn,at,ht,qt=Zt.contents,Bt=Zt.dataTypes;Bt[0]==="*";)Bt.shift(),Gn===void 0&&(Gn=Zt.mimeType||on.getResponseHeader("Content-Type"));if(Gn){for(Pn in qt)if(qt[Pn]&&qt[Pn].test(Gn)){Bt.unshift(Pn);break}}if(Bt[0]in Vt)at=Bt[0];else{for(Pn in Vt){if(!Bt[0]||Zt.converters[Pn+" "+Bt[0]]){at=Pn;break}ht||(ht=Pn)}at=at||ht}if(at)return at!==Bt[0]&&Bt.unshift(at),Vt[at]})(Q,St,na)),!Cn&&-1<x.inArray("script",Q.dataTypes)&&x.inArray("json",Q.dataTypes)<0&&(Q.converters["text script"]=function(){}),yo=(function(Zt,on,Vt,Gn){var Pn,at,ht,qt,Bt,Hn={},Nr=Zt.dataTypes.slice();if(Nr[1])for(ht in Zt.converters)Hn[ht.toLowerCase()]=Zt.converters[ht];for(at=Nr.shift();at;)if(Zt.responseFields[at]&&(Vt[Zt.responseFields[at]]=on),!Bt&&Gn&&Zt.dataFilter&&(on=Zt.dataFilter(on,Zt.dataType)),Bt=at,at=Nr.shift()){if(at==="*")at=Bt;else if(Bt!=="*"&&Bt!==at){if(!(ht=Hn[Bt+" "+at]||Hn["* "+at])){for(Pn in Hn)if((qt=Pn.split(" "))[1]===at&&(ht=Hn[Bt+" "+qt[0]]||Hn["* "+qt[0]])){ht===!0?ht=Hn[Pn]:Hn[Pn]!==!0&&(at=qt[0],Nr.unshift(qt[1]));break}}if(ht!==!0)if(ht&&Zt.throws)on=ht(on);else try{on=ht(on)}catch(oa){return{state:"parsererror",error:ht?oa:"No conversion from "+Bt+" to "+at}}}}return{state:"success",data:on}})(Q,yo,St,Cn),Cn?(Q.ifModified&&((gn=St.getResponseHeader("Last-Modified"))&&(x.lastModified[w]=gn),(gn=St.getResponseHeader("etag"))&&(x.etag[w]=gn)),ot===204||Q.type==="HEAD"?En="nocontent":ot===304?En="notmodified":(En=yo.state,bs=yo.data,Cn=!(Sn=yo.error))):(Sn=En,!ot&&En||(En="error",ot<0&&(ot=0))),St.status=ot,St.statusText=(Et||En)+"",Cn?Ze.resolveWith(ce,[bs,En,St]):Ze.rejectWith(ce,[St,En,Sn]),St.statusCode(Jt),Jt=void 0,V&&me.trigger(Cn?"ajaxSuccess":"ajaxError",[St,Q,Cn?bs:Sn]),mt.fireWith(ce,[St,En]),V&&(me.trigger("ajaxComplete",[St,Q]),--x.active||x.event.trigger("ajaxStop")))}return St},getJSON:function(u,p,C){return x.get(u,p,C,"json")},getScript:function(u,p){return x.get(u,void 0,p,"script")}}),x.each(["get","post"],function(u,p){x[p]=function(C,w,T,E){return Re(w)&&(E=E||T,T=w,w=void 0),x.ajax(x.extend({url:C,type:p,dataType:E,data:w,success:T},x.isPlainObject(C)&&C))}}),x.ajaxPrefilter(function(u){var p;for(p in u.headers)p.toLowerCase()==="content-type"&&(u.contentType=u.headers[p]||"")}),x._evalUrl=function(u,p,C){return x.ajax({url:u,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){x.globalEval(w,p,C)}})},x.fn.extend({wrapAll:function(u){var p;return this[0]&&(Re(u)&&(u=u.call(this[0])),p=x(u,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&p.insertBefore(this[0]),p.map(function(){for(var C=this;C.firstElementChild;)C=C.firstElementChild;return C}).append(this)),this},wrapInner:function(u){return Re(u)?this.each(function(p){x(this).wrapInner(u.call(this,p))}):this.each(function(){var p=x(this),C=p.contents();C.length?C.wrapAll(u):p.append(u)})},wrap:function(u){var p=Re(u);return this.each(function(C){x(this).wrapAll(p?u.call(this,C):u)})},unwrap:function(u){return this.parent(u).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(u){return!x.expr.pseudos.visible(u)},x.expr.pseudos.visible=function(u){return!!(u.offsetWidth||u.offsetHeight||u.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new ge.XMLHttpRequest}catch{}};var qo={0:200,1223:204},ea=x.ajaxSettings.xhr();He.cors=!!ea&&"withCredentials"in ea,He.ajax=ea=!!ea,x.ajaxTransport(function(u){var p,C;if(He.cors||ea&&!u.crossDomain)return{send:function(w,T){var E,O=u.xhr();if(O.open(u.type,u.url,u.async,u.username,u.password),u.xhrFields)for(E in u.xhrFields)O[E]=u.xhrFields[E];for(E in u.mimeType&&O.overrideMimeType&&O.overrideMimeType(u.mimeType),u.crossDomain||w["X-Requested-With"]||(w["X-Requested-With"]="XMLHttpRequest"),w)O.setRequestHeader(E,w[E]);p=function(S){return function(){p&&(p=C=O.onload=O.onerror=O.onabort=O.ontimeout=O.onreadystatechange=null,S==="abort"?O.abort():S==="error"?typeof O.status!="number"?T(0,"error"):T(O.status,O.statusText):T(qo[O.status]||O.status,O.statusText,(O.responseType||"text")!=="text"||typeof O.responseText!="string"?{binary:O.response}:{text:O.responseText},O.getAllResponseHeaders()))}},O.onload=p(),C=O.onerror=O.ontimeout=p("error"),O.onabort!==void 0?O.onabort=C:O.onreadystatechange=function(){O.readyState===4&&ge.setTimeout(function(){p&&C()})},p=p("abort");try{O.send(u.hasContent&&u.data||null)}catch(S){if(p)throw S}},abort:function(){p&&p()}}}),x.ajaxPrefilter(function(u){u.crossDomain&&(u.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(u){return x.globalEval(u),u}}}),x.ajaxPrefilter("script",function(u){u.cache===void 0&&(u.cache=!1),u.crossDomain&&(u.type="GET")}),x.ajaxTransport("script",function(u){var p,C;if(u.crossDomain||u.scriptAttrs)return{send:function(w,T){p=x("<script>").attr(u.scriptAttrs||{}).prop({charset:u.scriptCharset,src:u.url}).on("load error",C=function(E){p.remove(),C=null,E&&T(E.type==="error"?404:200,E.type)}),Xe.head.appendChild(p[0])},abort:function(){C&&C()}}});var qc,Wc=[],ta=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var u=Wc.pop()||x.expando+"_"+Bc.guid++;return this[u]=!0,u}}),x.ajaxPrefilter("json jsonp",function(u,p,C){var w,T,E,O=u.jsonp!==!1&&(ta.test(u.url)?"url":typeof u.data=="string"&&(u.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&ta.test(u.data)&&"data");if(O||u.dataTypes[0]==="jsonp")return w=u.jsonpCallback=Re(u.jsonpCallback)?u.jsonpCallback():u.jsonpCallback,O?u[O]=u[O].replace(ta,"$1"+w):u.jsonp!==!1&&(u.url+=(Ga.test(u.url)?"&":"?")+u.jsonp+"="+w),u.converters["script json"]=function(){return E||x.error(w+" was not called"),E[0]},u.dataTypes[0]="json",T=ge[w],ge[w]=function(){E=arguments},C.always(function(){T===void 0?x(ge).removeProp(w):ge[w]=T,u[w]&&(u.jsonpCallback=p.jsonpCallback,Wc.push(w)),E&&Re(T)&&T(E[0]),E=T=void 0}),"script"}),He.createHTMLDocument=((qc=Xe.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",qc.childNodes.length===2),x.parseHTML=function(u,p,C){return typeof u!="string"?[]:(typeof p=="boolean"&&(C=p,p=!1),p||(He.createHTMLDocument?((w=(p=Xe.implementation.createHTMLDocument("")).createElement("base")).href=Xe.location.href,p.head.appendChild(w)):p=Xe),E=!C&&[],(T=k.exec(u))?[p.createElement(T[1])]:(T=Ji([u],p,E),E&&E.length&&x(E).remove(),x.merge([],T.childNodes)));var w,T,E},x.fn.load=function(u,p,C){var w,T,E,O=this,S=u.indexOf(" ");return-1<S&&(w=No(u.slice(S)),u=u.slice(0,S)),Re(p)?(C=p,p=void 0):p&&typeof p=="object"&&(T="POST"),0<O.length&&x.ajax({url:u,type:T||"GET",dataType:"html",data:p}).done(function(U){E=arguments,O.html(w?x("<div>").append(x.parseHTML(U)).find(w):U)}).always(C&&function(U,V){O.each(function(){C.apply(this,E||[U.responseText,V,U])})}),this},x.expr.pseudos.animated=function(u){return x.grep(x.timers,function(p){return u===p.elem}).length},x.offset={setOffset:function(u,p,C){var w,T,E,O,S,U,V=x.css(u,"position"),ee=x(u),ae={};V==="static"&&(u.style.position="relative"),S=ee.offset(),E=x.css(u,"top"),U=x.css(u,"left"),(V==="absolute"||V==="fixed")&&-1<(E+U).indexOf("auto")?(O=(w=ee.position()).top,T=w.left):(O=parseFloat(E)||0,T=parseFloat(U)||0),Re(p)&&(p=p.call(u,C,x.extend({},S))),p.top!=null&&(ae.top=p.top-S.top+O),p.left!=null&&(ae.left=p.left-S.left+T),"using"in p?p.using.call(u,ae):ee.css(ae)}},x.fn.extend({offset:function(u){if(arguments.length)return u===void 0?this:this.each(function(T){x.offset.setOffset(this,u,T)});var p,C,w=this[0];return w?w.getClientRects().length?(p=w.getBoundingClientRect(),C=w.ownerDocument.defaultView,{top:p.top+C.pageYOffset,left:p.left+C.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var u,p,C,w=this[0],T={top:0,left:0};if(x.css(w,"position")==="fixed")p=w.getBoundingClientRect();else{for(p=this.offset(),C=w.ownerDocument,u=w.offsetParent||C.documentElement;u&&(u===C.body||u===C.documentElement)&&x.css(u,"position")==="static";)u=u.parentNode;u&&u!==w&&u.nodeType===1&&((T=x(u).offset()).top+=x.css(u,"borderTopWidth",!0),T.left+=x.css(u,"borderLeftWidth",!0))}return{top:p.top-T.top-x.css(w,"marginTop",!0),left:p.left-T.left-x.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var u=this.offsetParent;u&&x.css(u,"position")==="static";)u=u.offsetParent;return u||ho})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(u,p){var C=p==="pageYOffset";x.fn[u]=function(w){return go(this,function(T,E,O){var S;if(re(T)?S=T:T.nodeType===9&&(S=T.defaultView),O===void 0)return S?S[p]:T[E];S?S.scrollTo(C?S.pageXOffset:O,C?O:S.pageYOffset):T[E]=O},u,w,arguments.length)}}),x.each(["top","left"],function(u,p){x.cssHooks[p]=pn(He.pixelPosition,function(C,w){if(w)return w=ms(C,p),Wa.test(w)?x(C).position()[p]+"px":w})}),x.each({Height:"height",Width:"width"},function(u,p){x.each({padding:"inner"+u,content:p,"":"outer"+u},function(C,w){x.fn[w]=function(T,E){var O=arguments.length&&(C||typeof T!="boolean"),S=C||(T===!0||E===!0?"margin":"border");return go(this,function(U,V,ee){var ae;return re(U)?w.indexOf("outer")===0?U["inner"+u]:U.document.documentElement["client"+u]:U.nodeType===9?(ae=U.documentElement,Math.max(U.body["scroll"+u],ae["scroll"+u],U.body["offset"+u],ae["offset"+u],ae["client"+u])):ee===void 0?x.css(U,V,S):x.style(U,V,ee,S)},p,O?T:void 0,O)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(u,p){x.fn[p]=function(C){return this.on(p,C)}}),x.fn.extend({bind:function(u,p,C){return this.on(u,null,p,C)},unbind:function(u,p){return this.off(u,null,p)},delegate:function(u,p,C,w){return this.on(p,u,C,w)},undelegate:function(u,p,C){return arguments.length===1?this.off(u,"**"):this.off(p,u||"**",C)},hover:function(u,p){return this.on("mouseenter",u).on("mouseleave",p||u)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(u,p){x.fn[p]=function(C,w){return 0<arguments.length?this.on(p,null,C,w):this.trigger(p)}});var Wo=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;x.proxy=function(u,p){var C,w,T;if(typeof p=="string"&&(C=u[p],p=u,u=C),Re(u))return w=it.call(arguments,2),(T=function(){return u.apply(p||this,w.concat(it.call(arguments)))}).guid=u.guid=u.guid||x.guid++,T},x.holdReady=function(u){u?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=Ee,x.isFunction=Re,x.isWindow=re,x.camelCase=$t,x.type=kt,x.now=Date.now,x.isNumeric=function(u){var p=x.type(u);return(p==="number"||p==="string")&&!isNaN(u-parseFloat(u))},x.trim=function(u){return u==null?"":(u+"").replace(Wo,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return x});var Vo=ge.jQuery,Gr=ge.$;return x.noConflict=function(u){return ge.$===x&&(ge.$=Gr),u&&ge.jQuery===x&&(ge.jQuery=Vo),x},typeof Ve>"u"&&(ge.jQuery=ge.$=x),x}),(function(ge){ge.imageArea=function(Ve,Ke){var We=Ve.options,it=Ve.$image,Xt=Ve.$trigger,Dn,tn,Kn,wo={},Rn,So=!0,xe=!0,He=[0,0],Re=[0,0],re={id:Ke,x:0,y:0,z:0,height:0,width:0},Xe=function(){re.z=0,ie("blur")},yn=function(){Ve.blurAll(),re.z=100,ie()},Lt=function(){return re},kt=function(ke){it.trigger(ke,[re.id,Ve.areas()])},te=function(ke){var nt=ke||window.event||{};nt.cancelBubble=!0,nt.returnValue=!1,nt.stopPropagation&&nt.stopPropagation(),nt.preventDefault&&nt.preventDefault()},pt=function(){ge.each(arguments,function(ke,nt){x(nt)})},x=function(ke,nt){var ut,we;switch(ke){case"start":ut="mousedown",we="touchstart";break;case"move":ut="mousemove",we="touchmove";break;case"stop":ut="mouseup",we="touchend";break;default:return}nt&&jQuery.isFunction(nt)?ge(window.document).on(ut,nt).on(we,nt):ge(window.document).off(ut).off(we)},On=function(){Dn.css({cursor:"default",width:re.width,height:re.height,left:re.x,top:re.y}),tn.css({backgroundPosition:-re.x-1+"px "+(-re.y-1)+"px",cursor:We.allowMove?"move":"default",width:re.width-2>0?re.width-2:0,height:re.height-2>0?re.height-2:0,left:re.x+1,top:re.y+1}),Kn.css({width:re.width-2>0?re.width-2:0,left:re.x+2,top:re.y+1})},Ee=function(ke){We.allowResize&&(ke?ge.each(wo,function(nt,ut){var we,xt,qe=Math.round(ut.width()/2),K=Math.round(ut.height()/2),xr=nt[0],er=nt[nt.length-1];xr==="n"?we=-K:xr==="s"?we=re.height-K-1:we=Math.round(re.height/2)-K-1,er==="e"?xt=re.width-qe-1:er==="w"?xt=-qe:xt=Math.round(re.width/2)-qe-1,ut.css({display:"block",left:re.x+xt,top:re.y+we})}):ge(".select-areas-resize-handler").each(function(){ge(this).css({display:"none"})}))},Bn=function(ke){Rn&&Rn.css({display:ke?"block":"none",left:re.x+re.width+1,top:re.y-Rn.outerHeight()-1})},Hs=function(ke){Dn.css({cursor:ke}),tn.css({cursor:ke})},ie=function(ke){switch(ke){case"startSelection":Ve._refresh(),On(),Ee(),Bn(!0);break;case"pickSelection":case"pickResizeHandler":Ee();break;case"resizeSelection":On(),Ee(),Hs("crosshair"),Bn(!0);break;case"moveSelection":On(),Ee(),Hs("move"),Bn(!0);break;case"blur":On(),Ee(),Bn();break;default:On(),Ee(!0),Bn(!0)}},gt=function(ke){te(ke),re.width=We.minSize[0],re.height=We.minSize[1],yn(),x("move",Ho),x("stop",Xn),Re=k(ke),Re[0]+re.width>it.width()&&(Re[0]=it.width()-re.width),Re[1]+re.height>it.height()&&(Re[1]=it.height()-re.height),re.x=Re[0],re.y=Re[1],ie("startSelection")},Zo=function(ke){te(ke),yn(),x("move",po),x("stop",Xn);var nt=k(ke);He[0]=nt[0]-re.x,He[1]=nt[1]-re.y,ie("pickSelection")},be=function(ke){te(ke),yn();var nt=ke.target.className.split(" ")[1];nt[nt.length-1]==="w"&&(Re[0]+=re.width,re.x=Re[0]-re.width),nt[0]==="n"&&(Re[1]+=re.height,re.y=Re[1]-re.height),nt==="n"||nt==="s"?So=!1:(nt==="e"||nt==="w")&&(xe=!1),x("move",Ho),x("stop",Xn),ie("pickResizeHandler")},Ho=function(ke){te(ke),yn();var nt=k(ke),ut=nt[1]-Re[1],we=nt[0]-Re[0];Math.abs(we)<We.minSize[0]&&(we=we>=0?We.minSize[0]:-We.minSize[0]),Math.abs(ut)<We.minSize[1]&&(ut=ut>=0?We.minSize[1]:-We.minSize[1]),(Re[0]+we<0||Re[0]+we>it.width())&&(we=-we),(Re[1]+ut<0||Re[1]+ut>it.height())&&(ut=-ut),We.maxSize[0]>We.minSize[0]&&We.maxSize[1]>We.minSize[1]&&(Math.abs(we)>We.maxSize[0]&&(we=we>=0?We.maxSize[0]:-We.maxSize[0]),Math.abs(ut)>We.maxSize[1]&&(ut=ut>=0?We.maxSize[1]:-We.maxSize[1])),So&&(re.width=we),xe&&(re.height=ut),We.aspectRatio&&(we>0&&ut>0||we<0&&ut<0?So?ut=Math.round(we/We.aspectRatio):we=Math.round(ut*We.aspectRatio):So?ut=-Math.round(we/We.aspectRatio):we=-Math.round(ut*We.aspectRatio),Re[0]+we>it.width()&&(we=it.width()-Re[0],ut=ut>0?Math.round(we/We.aspectRatio):-Math.round(we/We.aspectRatio)),Re[1]+ut<0&&(ut=-Re[1],we=we>0?-Math.round(ut*We.aspectRatio):Math.round(ut*We.aspectRatio)),Re[1]+ut>it.height()&&(ut=it.height()-Re[1],we=we>0?Math.round(ut*We.aspectRatio):-Math.round(ut*We.aspectRatio)),re.width=we,re.height=ut),re.width<0?(re.width=Math.abs(re.width),re.x=Re[0]-re.width):re.x=Re[0],re.height<0?(re.height=Math.abs(re.height),re.y=Re[1]-re.height):re.y=Re[1],kt("changing"),ie("resizeSelection")},po=function(ke){if(te(ke),!!We.allowMove){yn();var nt=k(ke);vr({x:nt[0]-He[0],y:nt[1]-He[1]}),kt("changing")}},vr=function(ke){ke.x>0?ke.x+re.width<it.width()?re.x=ke.x:re.x=it.width()-re.width:re.x=0,ke.y>0?ke.y+re.height<it.height()?re.y=ke.y:re.y=it.height()-re.height:re.y=0,ie("moveSelection")},Xn=function(ke,nt){te(ke),pt("move","stop"),nt&&(re.x=nt.x,re.y=nt.y,re.z=nt.z,re.width=nt.width,re.height=nt.height,On()),Re[0]=re.x,Re[1]=re.y,So=!0,xe=!0,kt("changed"),ie("releaseSelection")},Nt=function(ke){kt("deleted"),te(ke),tn.remove(),Dn.remove(),Kn.remove(),ge.each(wo,function(nt,ut){ut.remove()}),Rn&&Rn.remove(),Ve._remove(Ke)},jt=function(ke){var nt=ge(ke).offset();return[nt.left,nt.top]},k=function(ke){var nt=jt(it);ke.pageX||(ke.originalEvent&&(ke=ke.originalEvent),ke.changedTouches&&(ke=ke.changedTouches[0]),ke.touches&&(ke=ke.touches[0]));var ut=ke.pageX-nt[0],we=ke.pageY-nt[1];return ut=ut<0?0:ut>it.width()?it.width():ut,we=we<0?0:we>it.height()?it.height():we,[ut,we]};if(Dn=ge("<div id='select-areas-outline_"+Lt().id+`'  class="select-areas-outline"/>`).css({opacity:We.outlineOpacity,position:"absolute"}).insertAfter(Xt),tn=ge("<div />").addClass("select-areas-background-area").attr("id","select-areas-background-area_"+Lt().id).css({position:"absolute"}).insertAfter(Dn),Kn=ge("<div id='select-areas-label-container_"+Lt().id+`'  class="select-areas-label-container"/>`).css({position:"absolute"}).insertAfter(Xt),We.allowResize&&ge.each(["nw","n","ne","e","se","s","sw","w"],function(ke,nt){wo[nt]=ge('<div class="select-areas-resize-handler '+nt+" select-areas-resize-handler_"+Lt().id+'"/>').css({opacity:.5,position:"absolute",cursor:nt+"-resize"}).insertAfter(tn).mousedown(be).bind("touchstart",be)}),We.allowDelete){var Cr=function(ke){return ke.click(Nt).bind("touchstart",Nt).bind("tap",Nt),ke};Rn=Cr(ge("<div id='select-areas-delete_"+Lt().id+`'  class="delete-area" />`)).append(Cr(ge('<div class="select-areas-delete-area" ><i class="fa fa-trash text-red-500 " aria-hidden="true"></i></div>'))).insertAfter(tn)}return We.allowMove&&tn.mousedown(Zo).bind("touchstart",Zo),yn(),{getData:Lt,startSelection:gt,deleteSelection:Nt,options:We,blur:Xe,focus:yn,nudge:function(ke){ke.x=re.x,ke.y=re.y,ke.d&&(ke.y=re.y+ke.d),ke.u&&(ke.y=re.y-ke.u),ke.l&&(ke.x=re.x-ke.l),ke.r&&(ke.x=re.x+ke.r),vr(ke),kt("changed")},set:function(ke,nt){re=ge.extend(re,ke),Re[0]=re.x,Re[1]=re.y,nt||kt("changed")},contains:function(ke){return ke.x>=re.x&&ke.x<=re.x+re.width&&ke.y>=re.y&&ke.y<=re.y+re.height}}},ge.imageSelectAreas=function(){},ge.imageSelectAreas.prototype.init=function(Ve,Ke){var We=this,it={allowEdit:!0,allowMove:!0,allowResize:!0,allowSelect:!0,allowDelete:!0,allowNudge:!0,aspectRatio:0,minSize:[0,0],maxSize:[0,0],width:0,maxAreas:0,outlineOpacity:.5,overlayOpacity:.5,areas:[],onChanging:null,onChanged:null,onDeleted:null};this.options=ge.extend(it,Ke),this.options.allowEdit||(this.options.allowSelect=this.options.allowMove=this.options.allowResize=this.options.allowDelete=!1),this._areas={},this.$image=ge(Ve),this.ratio=1,this.options.width&&this.$image.width()&&this.options.width!==this.$image.width()&&(this.ratio=this.options.width/this.$image.width(),this.$image.width(this.options.width)),this.options.onChanging&&this.$image.on("changing",this.options.onChanging),this.options.onChanged&&this.$image.on("changed",this.options.onChanged),this.options.onDeleted&&this.$image.on("deleted",this.options.onDeleted),this.options.onLoaded&&this.$image.on("loaded",this.options.onLoaded),this.$holder=ge("<div />").css({position:"relative",width:this.$image.width(),height:this.$image.height()}),this.$image.wrap(this.$holder).css({position:"absolute"}),this.$overlay=ge('<div class="select-areas-overlay" />').css({opacity:this.options.overlayOpacity,position:"absolute",width:this.$image.width(),height:this.$image.height()}).insertAfter(this.$image),this.$trigger=ge("<div />").css({backgroundColor:"#000000",opacity:0,position:"absolute",width:this.$image.width(),height:this.$image.height(),top:"1px"}).addClass("trigger").insertAfter(this.$overlay),ge.each(this.options.areas,function(Xt,Dn){We._add(Dn,!0)}),this.blurAll(),this._refresh(),this.options.allowSelect&&this.$trigger.mousedown(ge.proxy(this.newArea,this)).on("touchstart",ge.proxy(this.newArea,this)),this.options.allowNudge&&ge("html").keydown(function(Xt){var Dn={37:"l",38:"u",39:"r",40:"d"},tn=Dn[Xt.which],Kn;if(tn&&(We._eachArea(function(Rn){if(Rn.getData().z===100)return Kn=Rn,!1}),Kn)){var wo={};wo[tn]=1,Kn.nudge(wo)}})},ge.imageSelectAreas.prototype._refresh=function(){var Ve=this.areas().length;this.$overlay.css({display:Ve?"block":"none"}),this.$trigger.css({cursor:this.options.allowSelect?"crosshair":"default"})},ge.imageSelectAreas.prototype._eachArea=function(Ve){ge.each(this._areas,function(Ke,We){if(We)return Ve(We,Ke)})},ge.imageSelectAreas.prototype._remove=function(Ve){delete this._areas[Ve],this._refresh()},ge.imageSelectAreas.prototype.remove=function(Ve){this._areas[Ve]&&this._areas[Ve].deleteSelection()},ge.imageSelectAreas.prototype.newArea=function(Ve){var Ke=-1;return this.blurAll(),this.options.maxAreas&&this.options.maxAreas<=this.areas().length||(this._eachArea(function(We,it){Ke=Math.max(Ke,parseInt(it,10))}),Ke+=1,this._areas[Ke]=ge.imageArea(this,Ke),Ve&&this._areas[Ke].startSelection(Ve)),Ke},ge.imageSelectAreas.prototype.set=function(Ve,Ke,We){this._areas[Ve]&&(Ke.id=Ve,this._areas[Ve].set(Ke,We),this._areas[Ve].focus())},ge.imageSelectAreas.prototype._add=function(Ve,Ke){var We=this.newArea();this.set(We,Ve,Ke)},ge.imageSelectAreas.prototype.add=function(Ve){var Ke=this;this.blurAll(),ge.isArray(Ve)?ge.each(Ve,function(We,it){Ke._add(it)}):this._add(Ve),this._refresh(),!this.options.allowSelect&&!this.options.allowMove&&!this.options.allowResize&&!this.options.allowDelete&&this.blurAll()},ge.imageSelectAreas.prototype.reset=function(){var Ve=this;this._eachArea(function(Ke,We){Ve.remove(We)}),this._refresh()},ge.imageSelectAreas.prototype.destroy=function(){this.reset(),this.$holder.remove(),this.$overlay.remove(),this.$trigger.remove(),this.$image.css("width","").css("position","").unwrap(),this.$image.removeData("mainImageSelectAreas"),this.$image.off("changing changed loaded deleted")},ge.imageSelectAreas.prototype.areas=function(){var Ve=[];return this._eachArea(function(Ke){Ve.push(Ke.getData())}),Ve},ge.imageSelectAreas.prototype.relativeAreas=function(){for(var Ve=this.areas(),Ke=[],We=this.ratio,it=function(Dn){return Math.floor(Dn/We)},Xt=0;Xt<Ve.length;Xt++)Ke[Xt]=ge.extend({},Ve[Xt]),Ke[Xt].x=it(Ke[Xt].x),Ke[Xt].y=it(Ke[Xt].y),Ke[Xt].width=it(Ke[Xt].width),Ke[Xt].height=it(Ke[Xt].height);return Ke},ge.imageSelectAreas.prototype.blurAll=function(){this._eachArea(function(Ve){Ve.blur()})},ge.imageSelectAreas.prototype.contains=function(Ve){var Ke=!1;return this._eachArea(function(We){if(We.contains(Ve))return Ke=!0,!1}),Ke},ge.selectAreas=function(Ve,Ke){var We=ge(Ve);if(!We.data("mainImageSelectAreas")){var it=new ge.imageSelectAreas;it.init(Ve,Ke),We.data("mainImageSelectAreas",it),We.trigger("loaded")}return We.data("mainImageSelectAreas")},ge.fn.selectAreas=function(Ve){if(ge.imageSelectAreas.prototype[Ve]){var Ke=ge.imageSelectAreas.prototype[Ve].apply(ge.selectAreas(this),Array.prototype.slice.call(arguments,1));return typeof Ke>"u"?this:Ke}else{if(typeof Ve=="object"||!Ve)return this.each(function(){var We=this,it=new Image;it.onload=function(){ge.selectAreas(We,Ve)},it.src=We.src}),this;ge.error("Method "+Ve+" does not exist on jQuery.selectAreas")}}})(jQuery);
